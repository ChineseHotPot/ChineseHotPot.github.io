System.register("chunks:///_virtual/ABItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./ABTestUtil.ts","./auto_ABItem.ts"],(function(t){var i,n,e,o,s,c,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,o=t.Label},function(t){s=t.GUIBase},function(t){c=t.ABTestUtil},function(t){r=t.default}],execute:function(){var u,l;n._RF.push({},"105ecTtJM1KVZkzcjTYVQB/","ABItem",void 0);var a=e.ccclass;e.property,t("default",a("ABItem")(((l=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this)._ui=void 0,i._key="",i}i(n,t);var e=n.prototype;return e.onInit=function(t){this._key=t[0].key},e.onUILoad=function(){this._ui=this.node.addComponent(r),this.updateUI()},e.onUIStart=function(){},e.onUIEnable=function(){this.registerClick(this._ui.btn_a,this.onClickVersionA,this),this.registerClick(this._ui.btn_b,this.onClickVersionB,this),this.registerClick(this._ui.btn_c,this.onClickVersionC,this),this.registerClick(this._ui.btn_d,this.onClickVersionD,this)},e.updateUI=function(){var t=c.GetLocalABTestStr(this._key);this._ui.label_ab_name.getComponent(o).string="实验参数:"+this._key+", 参数值:"+(t||"[empty]")},e.onUIDisable=function(){},e.onUIDestroy=function(){},e.onClickVersionA=function(){this.onClickVersion("0")},e.onClickVersionB=function(){this.onClickVersion("1")},e.onClickVersionC=function(){this.onClickVersion("2")},e.onClickVersionD=function(){this.onClickVersion("3")},e.onClickVersion=function(t){c.SetLocalABTestStr(this._key,t),this.updateUI()},n}(s))._prefabUrl="widget/ABItem",l._className="ABItem",u=l))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ABTestUtil.ts",["cc","./WechatManager.ts","./GameLevelSaveData.ts","./DataManager.ts"],(function(t){var e,n,r,s,u;return{setters:[function(t){e=t.cclegacy,n=t.sys},function(t){r=t.default},function(t){s=t.GameLevelSaveData},function(t){u=t.default}],execute:function(){e._RF.push({},"fbb78UY2XxI4J1vMIteIWYp","ABTestUtil",void 0);var a=t("ABTestUtil",function(){function t(){}return t.IsABSet=function(){var e=this;return t.ABTests.every((function(t){return""!=e.GetLocalABTestStr(t)}))},t.HandleABTest=function(){var e=this;t.ABTests.forEach((function(t){var n=u.User.getABTestVersion(t);if(""==n){var r=e.GetCurABTestVer(t);n!=r&&(e.SetLocalABTestStr(t,r),e.OnABVerChange(t,n,r))}}))},t.SetLocalABTestStr=function(t,e){u.User.setABTestVersion(t,e)},t.GetLocalABTestStr=function(t){return u.User.getABTestVersion(t)},t.GetCurABTestVer=function(t){return n.platform==n.Platform.WECHAT_GAME?r.GetABTestString(t):"x"},t.GetLocalCurABTestVer=function(){return this.GetLocalABTestStr("expt_1748487132")},t.IsABTestB_V1=function(){return!1},t.IsABTestC_V1=function(){return!1},t.IsABTestD_V1=function(){return!1},t.IsABTestB_V2=function(){return!1},t.IsABTestB_V3=function(){return!1},t.IsABTestB_V4=function(){return!0},t.IsABTestC_V4=function(){return!1},t.OnABVerChange=function(t,e,n){"expt_1744185520"==t?e!=n&&null!=e&&s.clearSaveData():"expt_1745750869"==t&&e!=n&&null!=e&&s.clearSaveData()},t}());(a||(a=t("ABTestUtil",{}))).ABTests=[],e._RF.pop()}}}));

System.register("chunks:///_virtual/ActionHelp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIHelp.ts"],(function(t){var i,o,n,e,s,a,r,c,l;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,e=t.Vec3,s=t.tween,a=t.UIOpacity,r=t.Vec2,c=t.Component},function(t){l=t.default}],execute:function(){var u,p;o._RF.push({},"d2215yVTRhNbpooHFMnEo+u","ActionHelp",void 0);var d=n.ccclass;n.property,t("default",d("ActionHelp")(p=function(){function t(){}return t.Delay=function(t,i,o){return s(t).delay(i).call((function(){o()})).start()},t.FadeIn=function(t,i,o,n){if(void 0===n&&(n=0),t&&t.isValid)return l.SetOpacity(t,0),s(t.getComponent(a)).delay(n).to(i,{opacity:255}).call((function(){o&&o()})).start()},t.FadeOut=function(t,i,o,n){if(void 0===n&&(n=0),t&&t.isValid)return l.SetOpacity(t,255),s(t.getComponent(a)).delay(n).to(i,{opacity:0}).call((function(){o&&o()})).start()},t.FadeTo=function(t,i,o,n,e,r){if(void 0===r&&(r=0),t&&t.isValid)return l.SetOpacity(t,i),s(t.getComponent(a)).delay(r).to(n,{opacity:o}).call((function(){e&&e()})).start()},t.FadeOutIn=function(t,i,o){if(void 0===o&&(o=0),t&&t.isValid)return l.SetOpacity(t,255),s(t.getComponent(a)).repeatForever(s().delay(o).to(i,{opacity:0}).to(i,{opacity:255})).start()},t.FlyToTarget=function(t,i,o,n,r,c){void 0===r&&(r=0),void 0===c&&(c=1),t&&t.isValid&&(t.scale=new e(c,c,c),t.worldPosition=i,l.SetOpacity(t,255),s(t).delay(r).parallel(s().to(.8,{scale:new e(.05,.05,.05)}),s().to(.8,{eulerAngles:new e(0,0,600)}),s().to(.8,{worldPosition:o})).call((function(){s(t.getComponent(a)).to(.1,{opacity:0}).start()})).delay(.2).call((function(){n&&n()})).start())},t}())||p),t("ActionBezier",d("ActionBezier")(u=function(t){function o(){for(var i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).controlPoint1=new r(0,0),i.controlPoint2=new r(0,0),i.endPosition=new r(0,0),i.duration=.3,i.tweenFunc=null,i.onComplete=null,i._elapsed=0,i._firstTick=!0,i._startPosition=e.ZERO,i}i(o,t),o.bezierat=function(t,i,o,n,e){return Math.pow(1-e,3)*t+3*e*Math.pow(1-e,2)*i+3*Math.pow(e,2)*(1-e)*o+Math.pow(e,3)*n};var n=o.prototype;return n.start=function(){this._startPosition=this.node.position.clone()},n.update=function(t){if(this._firstTick?(this._firstTick=!1,this._elapsed=1e-6):this.tweenFunc?this._elapsed+=this.tweenFunc(t):this._elapsed+=t,this._elapsed>=this.duration)return this.node.position=this._startPosition.add(new e(this.endPosition.x,this.endPosition.y,0)),this.destroy(),void(this.onComplete&&this.onComplete());var i=Math.max(0,Math.min(1,this._elapsed/this.duration)),n=this.controlPoint1.x,s=this.controlPoint2.x,a=this.endPosition.x,r=this.controlPoint1.y,c=this.controlPoint2.y,l=this.endPosition.y,u=o.bezierat(0,n,s,a,i),p=o.bezierat(0,r,c,l,i);this.node.position=new e(this._startPosition.x+u,this._startPosition.y+p,this._startPosition.z)},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts"],(function(i){var u,t,o,e,s,c;return{setters:[function(i){u=i.createClass},function(i){t=i.cclegacy,o=i._decorator,e=i.AudioSource,s=i.clamp01},function(i){c=i.BundleManager}],execute:function(){var a,n;t._RF.push({},"9d7a1G6/a1Co52bT27hW7Fo","AudioManager",void 0);var _=o.ccclass,h=(o.property,i("AudioManager",_("AudioManager")(((n=function(){function i(){this._audioSource=void 0,this._datas=new Map,this._effect=!0,this._effect_volume=1,this._music=!0,this._music_name="",this._path="sfx/"}i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance};var t=i.prototype;return t.init=function(i,u,t){this._audioSource=new e,this._audioSource.clip=null,this._audioSource.volume=t,this._music=i,this._effect=u},t.playMusic=function(i,u){var t=this;if(void 0===u&&(u=!0),this._music_name=i,this._audioSource&&this._music&&!this._audioSource.playing)if(this._audioSource.clip)this._audioSource.loop=u,this._audioSource.play();else{var o=this._path+i;c.loadSound(o,(function(i,o){i||(t._audioSource.clip=o,t._audioSource.loop=u,t._audioSource.play())}))}},t.resumeMusic=function(){this._music&&this._audioSource&&this._audioSource.clip&&this._audioSource.play()},t.setVolume=function(i){this._audioSource&&(i=s(i),this._audioSource.volume=i)},t.closeMusic=function(){this._music=!1,this._audioSource&&this._audioSource.stop()},t.openMusic=function(){this._music=!0,this._audioSource&&(this._audioSource.clip?this._audioSource.playing||this._audioSource.play():""!=this._music_name&&this.playMusic(this._music_name))},t.pauseMusic=function(){this._audioSource&&this._audioSource.playing&&this._audioSource.pause()},t.playEffect=function(i){var u=this;if(this._audioSource&&this._effect)if(this._datas.has(i)){var t=this._datas.get(i);this._audioSource.playOneShot(t,this._audioSource.volume?this._effect_volume/this._audioSource.volume:0)}else{var o=this._path+i;c.loadSound(o,(function(t,o){t||(u._audioSource.playOneShot(o,u._audioSource.volume?u._effect_volume/u._audioSource.volume:0),u._datas.set(i,o))}))}},t.setSoundVolume=function(i){this._effect_volume=i},t.openEffect=function(i){void 0===i&&(i=1),this._effect=!0,this.setSoundVolume(i)},t.closeEffect=function(){this._effect=!1,this.setSoundVolume(0)},u(i,[{key:"isSoundOn",get:function(){return this._effect}},{key:"isMusicOn",get:function(){return this._music}},{key:"AudioPath",set:function(i){this._path=i}}]),i}()).instance=void 0,a=n))||a));i("default",h.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/auto_ABItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,i,l;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,i=t._decorator,l=t.Component}],execute:function(){var n;a._RF.push({},"8671amAe6ZLIJx41dh1TTCv","auto_ABItem",void 0);var o=i.ccclass;t("default",o(n=function(t){function a(){for(var e,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))||this).ABItem=void 0,e.label_ab_name=void 0,e.Layout=void 0,e.btn_a=void 0,e.label_a=void 0,e.btn_b=void 0,e.label_b=void 0,e.btn_c=void 0,e.label_c=void 0,e.btn_d=void 0,e.label_d=void 0,e}return e(a,t),a.prototype.onLoad=function(){this.ABItem=this.node,this.label_ab_name=this.ABItem.getChildByName("label_ab_name"),this.Layout=this.ABItem.getChildByName("Layout"),this.btn_a=this.Layout.getChildByName("btn_a"),this.label_a=this.btn_a.getChildByName("label_a"),this.btn_b=this.Layout.getChildByName("btn_b"),this.label_b=this.btn_b.getChildByName("label_b"),this.btn_c=this.Layout.getChildByName("btn_c"),this.label_c=this.btn_c.getChildByName("label_c"),this.btn_d=this.Layout.getChildByName("btn_d"),this.label_d=this.btn_d.getChildByName("label_d")},a}(l))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/auto_BottleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,_,i,s;return{setters:[function(e){t=e.inheritsLoose},function(e){_=e.cclegacy,i=e._decorator,s=e.Component}],execute:function(){var o;_._RF.push({},"ed94eGQrhFMAKsDlMOhOShU","auto_BottleItem",void 0);var n=i.ccclass;e("default",n(o=function(e){function _(){for(var t,_=arguments.length,i=new Array(_),s=0;s<_;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).BottleItem=void 0,t.node_parent=void 0,t.spr_shadow=void 0,t.spine_transfer_bottle_bg=void 0,t.spine_vanish_color_bg=void 0,t.mask_transfer_bottle_bg=void 0,t.spr_bottle_bg=void 0,t.mask_mask_light=void 0,t.mask_light=void 0,t.spine_water_flow=void 0,t.spine_full=void 0,t.mask_transfer_bottle_mask=void 0,t.node_mask=void 0,t.layout_liquids=void 0,t.layout_masks=void 0,t.spine_water_up=void 0,t.spine_water_bubble=void 0,t.node_mask_parent=void 0,t.node_liquid_mask=void 0,t.spr_mask_liquid=void 0,t.spr_liquid_alpha=void 0,t.spr_liquid_alpha_001=void 0,t.spine_water_wave=void 0,t.spine_water_drip=void 0,t.spine_water_splash=void 0,t.layout_unknowns=void 0,t.node_cork=void 0,t.spr_cork=void 0,t.mask_transfer_bottle_fg=void 0,t.spr_bottle_fg=void 0,t.spr_transition_decor=void 0,t.spr_video=void 0,t.spr_lock=void 0,t.label_unlock_num=void 0,t.spine_complete=void 0,t.spine_complete_light=void 0,t.spine_vanish_color_fg=void 0,t.spr_select_light=void 0,t.spine_transfer_bottle_unlock=void 0,t.spine_transfer_bottle_fg=void 0,t.spine_task_next=void 0,t.spine_task_bottle=void 0,t.spine_task_bottle_circle=void 0,t.spine_unlock_video_bottle=void 0,t.node_parent_depth_num=void 0,t.label_depth_num=void 0,t.node_hidden_bottle=void 0,t.spine_hidden_bottle=void 0,t.bg_hidden_bottle=void 0,t.spr_hidden_bottle=void 0,t.spine_hidden_bottle_complete=void 0,t.particle_hidden_bottle_a=void 0,t.particle_hidden_bottle_b=void 0,t.node_stone_bottle=void 0,t.spr_stone_bottle=void 0,t.node_key=void 0,t.node_click=void 0,t}return t(_,e),_.prototype.onLoad=function(){this.BottleItem=this.node,this.node_parent=this.BottleItem.getChildByName("node_parent"),this.spr_shadow=this.node_parent.getChildByName("spr_shadow"),this.spine_transfer_bottle_bg=this.node_parent.getChildByName("spine_transfer_bottle_bg"),this.spine_vanish_color_bg=this.node_parent.getChildByName("spine_vanish_color_bg"),this.mask_transfer_bottle_bg=this.node_parent.getChildByName("mask_transfer_bottle_bg"),this.spr_bottle_bg=this.mask_transfer_bottle_bg.getChildByName("spr_bottle_bg"),this.mask_mask_light=this.node_parent.getChildByName("mask_mask_light"),this.mask_light=this.mask_mask_light.getChildByName("mask_light"),this.spine_water_flow=this.node_parent.getChildByName("spine_water_flow"),this.spine_full=this.node_parent.getChildByName("spine_full"),this.mask_transfer_bottle_mask=this.node_parent.getChildByName("mask_transfer_bottle_mask"),this.node_mask=this.mask_transfer_bottle_mask.getChildByName("node_mask"),this.layout_liquids=this.node_mask.getChildByName("layout_liquids"),this.layout_masks=this.node_mask.getChildByName("layout_masks"),this.spine_water_up=this.node_mask.getChildByName("spine_water_up"),this.spine_water_bubble=this.node_mask.getChildByName("spine_water_bubble"),this.node_mask_parent=this.node_mask.getChildByName("node_mask_parent"),this.node_liquid_mask=this.node_mask_parent.getChildByName("node_liquid_mask"),this.spr_mask_liquid=this.node_liquid_mask.getChildByName("spr_mask_liquid"),this.spr_liquid_alpha=this.node_liquid_mask.getChildByName("spr_liquid_alpha"),this.spr_liquid_alpha_001=this.node_liquid_mask.getChildByName("spr_liquid_alpha_001"),this.spine_water_wave=this.node_mask.getChildByName("spine_water_wave"),this.spine_water_drip=this.node_mask.getChildByName("spine_water_drip"),this.spine_water_splash=this.node_mask.getChildByName("spine_water_splash"),this.layout_unknowns=this.node_mask.getChildByName("layout_unknowns"),this.node_cork=this.node_parent.getChildByName("node_cork"),this.spr_cork=this.node_cork.getChildByName("spr_cork"),this.mask_transfer_bottle_fg=this.node_parent.getChildByName("mask_transfer_bottle_fg"),this.spr_bottle_fg=this.mask_transfer_bottle_fg.getChildByName("spr_bottle_fg"),this.spr_transition_decor=this.mask_transfer_bottle_fg.getChildByName("spr_transition_decor"),this.spr_video=this.node_parent.getChildByName("spr_video"),this.spr_lock=this.node_parent.getChildByName("spr_lock"),this.label_unlock_num=this.spr_lock.getChildByName("label_unlock_num"),this.spine_complete=this.node_parent.getChildByName("spine_complete"),this.spine_complete_light=this.node_parent.getChildByName("spine_complete_light"),this.spine_vanish_color_fg=this.node_parent.getChildByName("spine_vanish_color_fg"),this.spr_select_light=this.node_parent.getChildByName("spr_select_light"),this.spine_transfer_bottle_unlock=this.node_parent.getChildByName("spine_transfer_bottle_unlock"),this.spine_transfer_bottle_fg=this.node_parent.getChildByName("spine_transfer_bottle_fg"),this.spine_task_next=this.node_parent.getChildByName("spine_task_next"),this.spine_task_bottle=this.node_parent.getChildByName("spine_task_bottle"),this.spine_task_bottle_circle=this.node_parent.getChildByName("spine_task_bottle_circle"),this.spine_unlock_video_bottle=this.node_parent.getChildByName("spine_unlock_video_bottle"),this.node_parent_depth_num=this.node_parent.getChildByName("node_parent_depth_num"),this.label_depth_num=this.node_parent_depth_num.getChildByName("label_depth_num"),this.node_hidden_bottle=this.node_parent.getChildByName("node_hidden_bottle"),this.spine_hidden_bottle=this.node_hidden_bottle.getChildByName("spine_hidden_bottle"),this.bg_hidden_bottle=this.spine_hidden_bottle.getChildByName("bg_hidden_bottle"),this.spr_hidden_bottle=this.bg_hidden_bottle.getChildByName("spr_hidden_bottle"),this.spine_hidden_bottle_complete=this.spine_hidden_bottle.getChildByName("spine_hidden_bottle_complete"),this.particle_hidden_bottle_a=this.node_hidden_bottle.getChildByName("particle_hidden_bottle_a"),this.particle_hidden_bottle_b=this.node_hidden_bottle.getChildByName("particle_hidden_bottle_b"),this.node_stone_bottle=this.node_parent.getChildByName("node_stone_bottle"),this.spr_stone_bottle=this.node_stone_bottle.getChildByName("spr_stone_bottle"),this.node_key=this.node_parent.getChildByName("node_key"),this.node_click=this.node_parent.getChildByName("node_click")},_}(s))||o);_._RF.pop()}}}));

System.register("chunks:///_virtual/auto_BottleRackItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,a=t._decorator,c=t.Component}],execute:function(){var r;o._RF.push({},"238f8U8pQFLNYMz1II9S8Xc","auto_BottleRackItem",void 0);var l=a.ccclass;t("default",l(r=function(t){function o(){for(var e,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))||this).BottleRackItem=void 0,e.spr_rack_bg=void 0,e.layout_bottles=void 0,e}return e(o,t),o.prototype.onLoad=function(){this.BottleRackItem=this.node,this.spr_rack_bg=this.BottleRackItem.getChildByName("spr_rack_bg"),this.layout_bottles=this.BottleRackItem.getChildByName("layout_bottles")},o}(c))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/auto_ChallengeBottleRackItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,a,l;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,a=t._decorator,l=t.Component}],execute:function(){var n;o._RF.push({},"0760aHd77lELZ7fgKa7Q47a","auto_ChallengeBottleRackItem",void 0);var c=a.ccclass;t("default",c(n=function(t){function o(){for(var e,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).ChallengeBottleRackItem=void 0,e.spr_rack_bg=void 0,e.layout_bottles=void 0,e}return e(o,t),o.prototype.onLoad=function(){this.ChallengeBottleRackItem=this.node,this.spr_rack_bg=this.ChallengeBottleRackItem.getChildByName("spr_rack_bg"),this.layout_bottles=this.ChallengeBottleRackItem.getChildByName("layout_bottles")},o}(l))||n);o._RF.pop()}}}));

System.register("chunks:///_virtual/auto_FinishRankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,r,n,_;return{setters:[function(e){a=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,_=e.Component}],execute:function(){var i;r._RF.push({},"3c82d8dm8lCLYnDxiwNXgGx","auto_FinishRankItem",void 0);var s=n.ccclass;e("default",s(i=function(e){function r(){for(var a,r=arguments.length,n=new Array(r),_=0;_<r;_++)n[_]=arguments[_];return(a=e.call.apply(e,[this].concat(n))||this).FinishRankItem=void 0,a.spr_rank_node_bg=void 0,a.spr_rank_bg=void 0,a.lab_rank=void 0,a.mask_header=void 0,a.spr_header=void 0,a.spr_frame_header=void 0,a.label_nickname=void 0,a.spr_rank_icon=void 0,a.label_rank_level=void 0,a.label_level=void 0,a}return a(r,e),r.prototype.onLoad=function(){this.FinishRankItem=this.node,this.spr_rank_node_bg=this.FinishRankItem.getChildByName("spr_rank_node_bg"),this.spr_rank_bg=this.spr_rank_node_bg.getChildByName("spr_rank_bg"),this.lab_rank=this.spr_rank_bg.getChildByName("lab_rank"),this.mask_header=this.spr_rank_node_bg.getChildByName("mask_header"),this.spr_header=this.mask_header.getChildByName("spr_header"),this.spr_frame_header=this.spr_rank_node_bg.getChildByName("spr_frame_header"),this.label_nickname=this.spr_rank_node_bg.getChildByName("label_nickname"),this.spr_rank_icon=this.spr_rank_node_bg.getChildByName("spr_rank_icon"),this.label_rank_level=this.spr_rank_node_bg.getChildByName("label_rank_level"),this.label_level=this.spr_rank_node_bg.getChildByName("label_level")},r}(_))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/auto_HallRankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,s,l,i;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy,l=t._decorator,i=t.Component}],execute:function(){var o;s._RF.push({},"225bdWAjl9ChqWTcIUdJ/vh","auto_HallRankItem",void 0);var a=l.ccclass;t("default",a(o=function(t){function s(){for(var e,s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))||this).HallRankItem=void 0,e.bg_sp=void 0,e.bottle_sp2=void 0,e.bottle_sp1=void 0,e.bottle_sp3=void 0,e.bottle_sp4=void 0,e.bottle_sp=void 0,e.adress_label=void 0,e.finish_label=void 0,e}return e(s,t),s.prototype.onLoad=function(){this.HallRankItem=this.node,this.bg_sp=this.HallRankItem.getChildByName("bg_sp"),this.bottle_sp2=this.bg_sp.getChildByName("bottle_sp2"),this.bottle_sp1=this.bg_sp.getChildByName("bottle_sp1"),this.bottle_sp3=this.bg_sp.getChildByName("bottle_sp3"),this.bottle_sp4=this.bg_sp.getChildByName("bottle_sp4"),this.bottle_sp=this.bg_sp.getChildByName("bottle_sp"),this.adress_label=this.bg_sp.getChildByName("adress_label"),this.finish_label=this.bg_sp.getChildByName("finish_label")},s}(i))||o);s._RF.pop()}}}));

System.register("chunks:///_virtual/auto_LiquidItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,o,r;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,o=i._decorator,r=i.Component}],execute:function(){var u;e._RF.push({},"444efoPHXNPbLJcc3cA3CxB","auto_LiquidItem",void 0);var c=o.ccclass;i("default",c(u=function(i){function e(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=i.call.apply(i,[this].concat(o))||this).LiquidItem=void 0,t.CheckMark=void 0,t.spr_liquid=void 0,t}return t(e,i),e.prototype.onLoad=function(){this.LiquidItem=this.node,this.CheckMark=this.LiquidItem.getChildByName("CheckMark"),this.spr_liquid=this.LiquidItem.getChildByName("spr_liquid")},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/auto_LiquidMaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,s,a;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,a=t.Component}],execute:function(){var i;e._RF.push({},"cbaeeLjx9lH4Y9j2Z2b5LV9","auto_LiquidMaskItem",void 0);var n=s.ccclass;t("default",n(i=function(t){function e(){for(var o,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return(o=t.call.apply(t,[this].concat(s))||this).LiquidMaskItem=void 0,o.node_mask_bottom=void 0,o.spr_mask_bottom=void 0,o.spr_alpha=void 0,o}return o(e,t),e.prototype.onLoad=function(){this.LiquidMaskItem=this.node,this.node_mask_bottom=this.LiquidMaskItem.getChildByName("node_mask_bottom"),this.spr_mask_bottom=this.node_mask_bottom.getChildByName("spr_mask_bottom"),this.spr_alpha=this.node_mask_bottom.getChildByName("spr_alpha")},e}(a))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/auto_LiquidUnknownItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,t,e,i;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,i=n.Component}],execute:function(){var u;t._RF.push({},"0861bzAespB4Lh9u9w0BS35","auto_LiquidUnknownItem",void 0);var a=e.ccclass;n("default",a(u=function(n){function t(){for(var o,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(o=n.call.apply(n,[this].concat(e))||this).LiquidUnknownItem=void 0,o.node_mask_bottom=void 0,o.label_unknown=void 0,o}return o(t,n),t.prototype.onLoad=function(){this.LiquidUnknownItem=this.node,this.node_mask_bottom=this.LiquidUnknownItem.getChildByName("node_mask_bottom"),this.label_unknown=this.node_mask_bottom.getChildByName("label_unknown")},t}(i))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/auto_LongBottleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,_,s;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,_=e._decorator,s=e.Component}],execute:function(){var o;t._RF.push({},"c3e3c87eHJLVaZimftxlwyX","auto_LongBottleItem",void 0);var n=_.ccclass;e("default",n(o=function(e){function t(){for(var i,t=arguments.length,_=new Array(t),s=0;s<t;s++)_[s]=arguments[s];return(i=e.call.apply(e,[this].concat(_))||this).LongBottleItem=void 0,i.node_parent=void 0,i.spr_shadow=void 0,i.spine_vanish_color_bg=void 0,i.spr_bottle_bg=void 0,i.mask_light=void 0,i.spine_water_flow=void 0,i.spine_full=void 0,i.node_mask=void 0,i.layout_liquids=void 0,i.layout_masks=void 0,i.spine_water_up=void 0,i.spine_water_bubble=void 0,i.node_mask_parent=void 0,i.node_liquid_mask=void 0,i.spr_mask_liquid=void 0,i.spr_liquid_alpha=void 0,i.spine_water_wave=void 0,i.spine_water_drip=void 0,i.spine_water_splash=void 0,i.spine_water_drip_splash=void 0,i.layout_unknowns=void 0,i.node_cork=void 0,i.spr_cork=void 0,i.node_water_drip_select=void 0,i.spine_water_drip_select=void 0,i.spine_water_drip_select_light=void 0,i.spr_bottle_fg=void 0,i.spr_video=void 0,i.spine_complete=void 0,i.spine_complete_light=void 0,i.spine_unlock_video_bottle=void 0,i.spine_vanish_color_fg=void 0,i.node_click=void 0,i}return i(t,e),t.prototype.onLoad=function(){this.LongBottleItem=this.node,this.node_parent=this.LongBottleItem.getChildByName("node_parent"),this.spr_shadow=this.node_parent.getChildByName("spr_shadow"),this.spine_vanish_color_bg=this.node_parent.getChildByName("spine_vanish_color_bg"),this.spr_bottle_bg=this.node_parent.getChildByName("spr_bottle_bg"),this.mask_light=this.node_parent.getChildByName("mask_light"),this.spine_water_flow=this.node_parent.getChildByName("spine_water_flow"),this.spine_full=this.node_parent.getChildByName("spine_full"),this.node_mask=this.node_parent.getChildByName("node_mask"),this.layout_liquids=this.node_mask.getChildByName("layout_liquids"),this.layout_masks=this.node_mask.getChildByName("layout_masks"),this.spine_water_up=this.node_mask.getChildByName("spine_water_up"),this.spine_water_bubble=this.node_mask.getChildByName("spine_water_bubble"),this.node_mask_parent=this.node_mask.getChildByName("node_mask_parent"),this.node_liquid_mask=this.node_mask_parent.getChildByName("node_liquid_mask"),this.spr_mask_liquid=this.node_liquid_mask.getChildByName("spr_mask_liquid"),this.spr_liquid_alpha=this.node_liquid_mask.getChildByName("spr_liquid_alpha"),this.spine_water_wave=this.node_mask.getChildByName("spine_water_wave"),this.spine_water_drip=this.node_mask.getChildByName("spine_water_drip"),this.spine_water_splash=this.node_mask.getChildByName("spine_water_splash"),this.spine_water_drip_splash=this.node_mask.getChildByName("spine_water_drip_splash"),this.layout_unknowns=this.node_mask.getChildByName("layout_unknowns"),this.node_cork=this.node_parent.getChildByName("node_cork"),this.spr_cork=this.node_cork.getChildByName("spr_cork"),this.node_water_drip_select=this.node_parent.getChildByName("node_water_drip_select"),this.spine_water_drip_select=this.node_water_drip_select.getChildByName("spine_water_drip_select"),this.spine_water_drip_select_light=this.node_water_drip_select.getChildByName("spine_water_drip_select_light"),this.spr_bottle_fg=this.node_parent.getChildByName("spr_bottle_fg"),this.spr_video=this.node_parent.getChildByName("spr_video"),this.spine_complete=this.node_parent.getChildByName("spine_complete"),this.spine_complete_light=this.node_parent.getChildByName("spine_complete_light"),this.spine_unlock_video_bottle=this.node_parent.getChildByName("spine_unlock_video_bottle"),this.spine_vanish_color_fg=this.node_parent.getChildByName("spine_vanish_color_fg"),this.node_click=this.node_parent.getChildByName("node_click")},t}(s))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/auto_MoreItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var a,i,e,_;return{setters:[function(t){a=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,_=t.Component}],execute:function(){var g;i._RF.push({},"162762GdX9GFLTEr9aJhuYE","auto_MoreItem",void 0);var s=e.ccclass;t("default",s(g=function(t){function i(){for(var a,i=arguments.length,e=new Array(i),_=0;_<i;_++)e[_]=arguments[_];return(a=t.call.apply(t,[this].concat(e))||this).MoreItem=void 0,a.spr_bg=void 0,a.mask=void 0,a.icon_sp=void 0,a.name_label=void 0,a.tag_list=void 0,a.tag_bg_1=void 0,a.tag_label_1=void 0,a.tag_bg_2=void 0,a.tag_label_2=void 0,a.tag_bg_3=void 0,a.tag_label_3=void 0,a.go_btn=void 0,a.go_label=void 0,a}return a(i,t),i.prototype.onLoad=function(){this.MoreItem=this.node,this.spr_bg=this.MoreItem.getChildByName("spr_bg"),this.mask=this.spr_bg.getChildByName("mask"),this.icon_sp=this.mask.getChildByName("icon_sp"),this.name_label=this.spr_bg.getChildByName("name_label"),this.tag_list=this.spr_bg.getChildByName("tag_list"),this.tag_bg_1=this.tag_list.getChildByName("tag_bg_1"),this.tag_label_1=this.tag_bg_1.getChildByName("tag_label_1"),this.tag_bg_2=this.tag_list.getChildByName("tag_bg_2"),this.tag_label_2=this.tag_bg_2.getChildByName("tag_label_2"),this.tag_bg_3=this.tag_list.getChildByName("tag_bg_3"),this.tag_label_3=this.tag_bg_3.getChildByName("tag_label_3"),this.go_btn=this.spr_bg.getChildByName("go_btn"),this.go_label=this.go_btn.getChildByName("go_label")},i}(_))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_SkinItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,s,o;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,s=i._decorator,o=i.Component}],execute:function(){var _;t._RF.push({},"0a8aeueX5xHlJzUaFxddOMg","auto_SkinItem",void 0);var n=s.ccclass;i("default",n(_=function(i){function t(){for(var e,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return(e=i.call.apply(i,[this].concat(s))||this).SkinItem=void 0,e.spr_bg_0=void 0,e.icon_sp=void 0,e.use_label=void 0,e.video_btn=void 0,e.video_label=void 0,e.video_sp=void 0,e.spr_bg_1=void 0,e.spr_bg_2=void 0,e}return e(t,i),t.prototype.onLoad=function(){this.SkinItem=this.node,this.spr_bg_0=this.SkinItem.getChildByName("spr_bg_0"),this.icon_sp=this.spr_bg_0.getChildByName("icon_sp"),this.use_label=this.spr_bg_0.getChildByName("use_label"),this.video_btn=this.spr_bg_0.getChildByName("video_btn"),this.video_label=this.video_btn.getChildByName("video_label"),this.video_sp=this.video_btn.getChildByName("video_sp"),this.spr_bg_1=this.SkinItem.getChildByName("spr_bg_1"),this.spr_bg_2=this.SkinItem.getChildByName("spr_bg_2")},t}(o))||_);t._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIABTestLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,l,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){l=t.cclegacy,o=t._decorator,s=t.Component}],execute:function(){var i;l._RF.push({},"be7f8D9jlNPxpDgd3gd+ZFx","auto_UIABTestLayer",void 0);var n=o.ccclass;t("default",n(i=function(t){function l(){for(var e,l=arguments.length,o=new Array(l),s=0;s<l;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).UIABTestLayer=void 0,e.scroll_test_btns=void 0,e.view_scroll=void 0,e.content_scroll=void 0,e.label_title=void 0,e.btn_ok=void 0,e.label_btn_ok=void 0,e}return e(l,t),l.prototype.onLoad=function(){this.UIABTestLayer=this.node,this.scroll_test_btns=this.UIABTestLayer.getChildByName("scroll_test_btns"),this.view_scroll=this.scroll_test_btns.getChildByName("view_scroll"),this.content_scroll=this.view_scroll.getChildByName("content_scroll"),this.label_title=this.UIABTestLayer.getChildByName("label_title"),this.btn_ok=this.UIABTestLayer.getChildByName("btn_ok"),this.label_btn_ok=this.btn_ok.getChildByName("label_btn_ok")},l}(s))||i);l._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIChallengeGameFinish.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,s=e.Component}],execute:function(){var _;i._RF.push({},"a6e83o8l9tEFLMR+Ojq+waY","auto_UIChallengeGameFinish",void 0);var l=n.ccclass;e("default",l(_=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).UIChallengeGameFinish=void 0,t.node_bg=void 0,t.layout_ui_list=void 0,t.node_result_icon=void 0,t.spr_result_icon=void 0,t.label_result_icon_desc=void 0,t.node_result_spine=void 0,t.spine_bg_light=void 0,t.spine_result=void 0,t.node_result_desc=void 0,t.label_result_desc=void 0,t.node_btns=void 0,t.node_fail_btns=void 0,t.btn_retry=void 0,t.label_btn_retry=void 0,t.btn_back=void 0,t.label_btn_back=void 0,t.node_success_btns=void 0,t.btn_continue=void 0,t.label_btn_continue=void 0,t.spine_banner=void 0,t.spine_caidai=void 0,t}return t(i,e),i.prototype.onLoad=function(){this.UIChallengeGameFinish=this.node,this.node_bg=this.UIChallengeGameFinish.getChildByName("node_bg"),this.layout_ui_list=this.node_bg.getChildByName("layout_ui_list"),this.node_result_icon=this.layout_ui_list.getChildByName("node_result_icon"),this.spr_result_icon=this.node_result_icon.getChildByName("spr_result_icon"),this.label_result_icon_desc=this.spr_result_icon.getChildByName("label_result_icon_desc"),this.node_result_spine=this.node_result_icon.getChildByName("node_result_spine"),this.spine_bg_light=this.node_result_spine.getChildByName("spine_bg_light"),this.spine_result=this.node_result_spine.getChildByName("spine_result"),this.node_result_desc=this.layout_ui_list.getChildByName("node_result_desc"),this.label_result_desc=this.node_result_desc.getChildByName("label_result_desc"),this.node_btns=this.layout_ui_list.getChildByName("node_btns"),this.node_fail_btns=this.node_btns.getChildByName("node_fail_btns"),this.btn_retry=this.node_fail_btns.getChildByName("btn_retry"),this.label_btn_retry=this.btn_retry.getChildByName("label_btn_retry"),this.btn_back=this.node_fail_btns.getChildByName("btn_back"),this.label_btn_back=this.btn_back.getChildByName("label_btn_back"),this.node_success_btns=this.node_btns.getChildByName("node_success_btns"),this.btn_continue=this.node_success_btns.getChildByName("btn_continue"),this.label_btn_continue=this.btn_continue.getChildByName("label_btn_continue"),this.spine_banner=this.UIChallengeGameFinish.getChildByName("spine_banner"),this.spine_caidai=this.UIChallengeGameFinish.getChildByName("spine_caidai")},i}(s))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIChallengeGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,_,o,l;return{setters:[function(t){e=t.inheritsLoose},function(t){_=t.cclegacy,o=t._decorator,l=t.Component}],execute:function(){var i;_._RF.push({},"327061ghXlNG6pEVmLvUw13","auto_UIChallengeGameLayer",void 0);var s=o.ccclass;t("default",s(i=function(t){function _(){for(var e,_=arguments.length,o=new Array(_),l=0;l<_;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))||this).UIChallengeGameLayer=void 0,e.node_bg=void 0,e.node_bottles=void 0,e.node_root_bottle=void 0,e.node_anim_bottle=void 0,e.node_root=void 0,e.btn_setting=void 0,e.node_title=void 0,e.layout_date=void 0,e.spr_date=void 0,e.label_title=void 0,e.spr_title_bg=void 0,e.label_timer=void 0,e.progress_timer=void 0,e.spr_bar=void 0,e.label_percent_desc=void 0,e.layout_progress=void 0,e.label_percent=void 0,e.label_percent_mark=void 0,e.spr_tips_bg=void 0,e.label_tips=void 0,e.layout_props=void 0,e.btn_unlock_bottle=void 0,e.lab_btn_unlock_bottle=void 0,e.spr_btn_unlock_bottle=void 0,e.spr_video_1=void 0,e.spr_prop_count_1=void 0,e.label_prop_count_1_prefix=void 0,e.label_prop_count_1_num=void 0,e.label_prop_count_1_suffix=void 0,e.btn_clear_color=void 0,e.lab_btn_clear_color=void 0,e.spr_btn_clear_color=void 0,e.spr_video_2=void 0,e.spr_prop_count_2=void 0,e.label_prop_count_2=void 0,e.btn_step_back=void 0,e.lab_btn_step_back=void 0,e.spr_btn_step_back=void 0,e.spr_video_3=void 0,e.spr_prop_count_3=void 0,e.label_prop_count_3=void 0,e.spr_bubble_prop_finger=void 0,e}return e(_,t),_.prototype.onLoad=function(){this.UIChallengeGameLayer=this.node,this.node_bg=this.UIChallengeGameLayer.getChildByName("node_bg"),this.node_bottles=this.UIChallengeGameLayer.getChildByName("node_bottles"),this.node_root_bottle=this.node_bottles.getChildByName("node_root_bottle"),this.node_anim_bottle=this.node_bottles.getChildByName("node_anim_bottle"),this.node_root=this.UIChallengeGameLayer.getChildByName("node_root"),this.btn_setting=this.node_root.getChildByName("btn_setting"),this.node_title=this.node_root.getChildByName("node_title"),this.layout_date=this.node_title.getChildByName("layout_date"),this.spr_date=this.layout_date.getChildByName("spr_date"),this.label_title=this.layout_date.getChildByName("label_title"),this.spr_title_bg=this.node_title.getChildByName("spr_title_bg"),this.label_timer=this.spr_title_bg.getChildByName("label_timer"),this.progress_timer=this.node_title.getChildByName("progress_timer"),this.spr_bar=this.progress_timer.getChildByName("spr_bar"),this.label_percent_desc=this.progress_timer.getChildByName("label_percent_desc"),this.layout_progress=this.progress_timer.getChildByName("layout_progress"),this.label_percent=this.layout_progress.getChildByName("label_percent"),this.label_percent_mark=this.layout_progress.getChildByName("label_percent_mark"),this.spr_tips_bg=this.node_root.getChildByName("spr_tips_bg"),this.label_tips=this.spr_tips_bg.getChildByName("label_tips"),this.layout_props=this.node_root.getChildByName("layout_props"),this.btn_unlock_bottle=this.layout_props.getChildByName("btn_unlock_bottle"),this.lab_btn_unlock_bottle=this.btn_unlock_bottle.getChildByName("lab_btn_unlock_bottle"),this.spr_btn_unlock_bottle=this.btn_unlock_bottle.getChildByName("spr_btn_unlock_bottle"),this.spr_video_1=this.btn_unlock_bottle.getChildByName("spr_video_1"),this.spr_prop_count_1=this.btn_unlock_bottle.getChildByName("spr_prop_count_1"),this.label_prop_count_1_prefix=this.spr_prop_count_1.getChildByName("label_prop_count_1_prefix"),this.label_prop_count_1_num=this.spr_prop_count_1.getChildByName("label_prop_count_1_num"),this.label_prop_count_1_suffix=this.spr_prop_count_1.getChildByName("label_prop_count_1_suffix"),this.btn_clear_color=this.layout_props.getChildByName("btn_clear_color"),this.lab_btn_clear_color=this.btn_clear_color.getChildByName("lab_btn_clear_color"),this.spr_btn_clear_color=this.btn_clear_color.getChildByName("spr_btn_clear_color"),this.spr_video_2=this.btn_clear_color.getChildByName("spr_video_2"),this.spr_prop_count_2=this.btn_clear_color.getChildByName("spr_prop_count_2"),this.label_prop_count_2=this.spr_prop_count_2.getChildByName("label_prop_count_2"),this.btn_step_back=this.layout_props.getChildByName("btn_step_back"),this.lab_btn_step_back=this.btn_step_back.getChildByName("lab_btn_step_back"),this.spr_btn_step_back=this.btn_step_back.getChildByName("spr_btn_step_back"),this.spr_video_3=this.btn_step_back.getChildByName("spr_video_3"),this.spr_prop_count_3=this.btn_step_back.getChildByName("spr_prop_count_3"),this.label_prop_count_3=this.spr_prop_count_3.getChildByName("label_prop_count_3"),this.spr_bubble_prop_finger=this.node_root.getChildByName("spr_bubble_prop_finger")},_}(l))||i);_._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIChallengeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var _,t,i,a;return{setters:[function(e){_=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,a=e.Component}],execute:function(){var l;t._RF.push({},"3803aSJ1X5N95lybQ4vpd6y","auto_UIChallengeLayer",void 0);var d=i.ccclass;e("default",d(l=function(e){function t(){for(var _,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(_=e.call.apply(e,[this].concat(i))||this).UIChallengeLayer=void 0,_.close_reward_btn=void 0,_.bg_sp=void 0,_.title_node=void 0,_.title_label=void 0,_.close_btn=void 0,_.reward_node=void 0,_.progress_bg=void 0,_.progress_bar=void 0,_.badge_sp=void 0,_.total_count_bg=void 0,_.total_count_label=void 0,_.reward_button_1=void 0,_.reward_spine_1=void 0,_.reward_list_1=void 0,_.reward_1_icon_1=void 0,_.reward_1_icon_2=void 0,_.add_label_1=void 0,_.reward_1_label_1=void 0,_.reward_1_label_2=void 0,_.target_label_1=void 0,_.reward_button_2=void 0,_.reward_spine_2=void 0,_.reward_list_2=void 0,_.reward_2_icon_1=void 0,_.reward_2_icon_2=void 0,_.add_label_2=void 0,_.reward_2_label_1=void 0,_.reward_2_label_2=void 0,_.target_label_2=void 0,_.reward_button_3=void 0,_.reward_spine_3=void 0,_.reward_list_3=void 0,_.reward_3_icon_1=void 0,_.reward_3_icon_2=void 0,_.add_label_3=void 0,_.reward_3_label_1=void 0,_.reward_3_label_2=void 0,_.target_label_3=void 0,_.reward_button_4=void 0,_.reward_spine_4=void 0,_.reward_list_4=void 0,_.reward_4_icon_1=void 0,_.reward_4_icon_2=void 0,_.add_label_4=void 0,_.reward_4_label_1=void 0,_.reward_4_label_2=void 0,_.target_label_4=void 0,_.date_label=void 0,_.list_bg=void 0,_.list_cell=void 0,_.dayLabel=void 0,_.todayLabel=void 0,_.dayBadge=void 0,_.week_bg=void 0,_.week_label_7=void 0,_.week_label_1=void 0,_.week_label_2=void 0,_.week_label_3=void 0,_.week_label_4=void 0,_.week_label_5=void 0,_.week_label_6=void 0,_.list_node=void 0,_.start_btn=void 0,_.label_btn_data=void 0,_.time_btn=void 0,_.time_data_label=void 0,_.time_bg=void 0,_.clock_sp=void 0,_.time_label=void 0,_.Interlayer=void 0,_.badge_spine=void 0,_.box_spine=void 0,_}return _(t,e),t.prototype.onLoad=function(){this.UIChallengeLayer=this.node,this.close_reward_btn=this.UIChallengeLayer.getChildByName("close_reward_btn"),this.bg_sp=this.UIChallengeLayer.getChildByName("bg_sp"),this.title_node=this.bg_sp.getChildByName("title_node"),this.title_label=this.title_node.getChildByName("title_label"),this.close_btn=this.title_node.getChildByName("close_btn"),this.reward_node=this.bg_sp.getChildByName("reward_node"),this.progress_bg=this.reward_node.getChildByName("progress_bg"),this.progress_bar=this.progress_bg.getChildByName("progress_bar"),this.badge_sp=this.reward_node.getChildByName("badge_sp"),this.total_count_bg=this.badge_sp.getChildByName("total_count_bg"),this.total_count_label=this.total_count_bg.getChildByName("total_count_label"),this.reward_button_1=this.reward_node.getChildByName("reward_button_1"),this.reward_spine_1=this.reward_button_1.getChildByName("reward_spine_1"),this.reward_list_1=this.reward_button_1.getChildByName("reward_list_1"),this.reward_1_icon_1=this.reward_list_1.getChildByName("reward_1_icon_1"),this.reward_1_icon_2=this.reward_list_1.getChildByName("reward_1_icon_2"),this.add_label_1=this.reward_list_1.getChildByName("add_label_1"),this.reward_1_label_1=this.reward_list_1.getChildByName("reward_1_label_1"),this.reward_1_label_2=this.reward_list_1.getChildByName("reward_1_label_2"),this.target_label_1=this.reward_button_1.getChildByName("target_label_1"),this.reward_button_2=this.reward_node.getChildByName("reward_button_2"),this.reward_spine_2=this.reward_button_2.getChildByName("reward_spine_2"),this.reward_list_2=this.reward_button_2.getChildByName("reward_list_2"),this.reward_2_icon_1=this.reward_list_2.getChildByName("reward_2_icon_1"),this.reward_2_icon_2=this.reward_list_2.getChildByName("reward_2_icon_2"),this.add_label_2=this.reward_list_2.getChildByName("add_label_2"),this.reward_2_label_1=this.reward_list_2.getChildByName("reward_2_label_1"),this.reward_2_label_2=this.reward_list_2.getChildByName("reward_2_label_2"),this.target_label_2=this.reward_button_2.getChildByName("target_label_2"),this.reward_button_3=this.reward_node.getChildByName("reward_button_3"),this.reward_spine_3=this.reward_button_3.getChildByName("reward_spine_3"),this.reward_list_3=this.reward_button_3.getChildByName("reward_list_3"),this.reward_3_icon_1=this.reward_list_3.getChildByName("reward_3_icon_1"),this.reward_3_icon_2=this.reward_list_3.getChildByName("reward_3_icon_2"),this.add_label_3=this.reward_list_3.getChildByName("add_label_3"),this.reward_3_label_1=this.reward_list_3.getChildByName("reward_3_label_1"),this.reward_3_label_2=this.reward_list_3.getChildByName("reward_3_label_2"),this.target_label_3=this.reward_button_3.getChildByName("target_label_3"),this.reward_button_4=this.reward_node.getChildByName("reward_button_4"),this.reward_spine_4=this.reward_button_4.getChildByName("reward_spine_4"),this.reward_list_4=this.reward_button_4.getChildByName("reward_list_4"),this.reward_4_icon_1=this.reward_list_4.getChildByName("reward_4_icon_1"),this.reward_4_icon_2=this.reward_list_4.getChildByName("reward_4_icon_2"),this.add_label_4=this.reward_list_4.getChildByName("add_label_4"),this.reward_4_label_1=this.reward_list_4.getChildByName("reward_4_label_1"),this.reward_4_label_2=this.reward_list_4.getChildByName("reward_4_label_2"),this.target_label_4=this.reward_button_4.getChildByName("target_label_4"),this.date_label=this.bg_sp.getChildByName("date_label"),this.list_bg=this.bg_sp.getChildByName("list_bg"),this.list_cell=this.list_bg.getChildByName("list_cell"),this.dayLabel=this.list_cell.getChildByName("dayLabel"),this.todayLabel=this.list_cell.getChildByName("todayLabel"),this.dayBadge=this.list_cell.getChildByName("dayBadge"),this.week_bg=this.list_bg.getChildByName("week_bg"),this.week_label_7=this.week_bg.getChildByName("week_label_7"),this.week_label_1=this.week_bg.getChildByName("week_label_1"),this.week_label_2=this.week_bg.getChildByName("week_label_2"),this.week_label_3=this.week_bg.getChildByName("week_label_3"),this.week_label_4=this.week_bg.getChildByName("week_label_4"),this.week_label_5=this.week_bg.getChildByName("week_label_5"),this.week_label_6=this.week_bg.getChildByName("week_label_6"),this.list_node=this.list_bg.getChildByName("list_node"),this.start_btn=this.bg_sp.getChildByName("start_btn"),this.label_btn_data=this.start_btn.getChildByName("label_btn_data"),this.time_btn=this.bg_sp.getChildByName("time_btn"),this.time_data_label=this.time_btn.getChildByName("time_data_label"),this.time_bg=this.time_btn.getChildByName("time_bg"),this.clock_sp=this.time_bg.getChildByName("clock_sp"),this.time_label=this.time_bg.getChildByName("time_label"),this.Interlayer=this.UIChallengeLayer.getChildByName("Interlayer"),this.badge_spine=this.UIChallengeLayer.getChildByName("badge_spine"),this.box_spine=this.UIChallengeLayer.getChildByName("box_spine")},t}(a))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UICollectGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,l,a,_;return{setters:[function(e){t=e.inheritsLoose},function(e){l=e.cclegacy,a=e._decorator,_=e.Component}],execute:function(){var i;l._RF.push({},"bee62izcEFIx74tjidlRFlW","auto_UICollectGameLayer",void 0);var o=a.ccclass;e("default",o(i=function(e){function l(){for(var t,l=arguments.length,a=new Array(l),_=0;_<l;_++)a[_]=arguments[_];return(t=e.call.apply(e,[this].concat(a))||this).UICollectGameLayer=void 0,t.bg_sp=void 0,t.title_label=void 0,t.close_btn=void 0,t.spr_desc=void 0,t.btn_collect_game=void 0,t.label_btn_collect_game=void 0,t.btn_reward=void 0,t.label_btn_rewad=void 0,t.spr_btn_reward_lock=void 0,t}return t(l,e),l.prototype.onLoad=function(){this.UICollectGameLayer=this.node,this.bg_sp=this.UICollectGameLayer.getChildByName("bg_sp"),this.title_label=this.bg_sp.getChildByName("title_label"),this.close_btn=this.bg_sp.getChildByName("close_btn"),this.spr_desc=this.bg_sp.getChildByName("spr_desc"),this.btn_collect_game=this.bg_sp.getChildByName("btn_collect_game"),this.label_btn_collect_game=this.btn_collect_game.getChildByName("label_btn_collect_game"),this.btn_reward=this.bg_sp.getChildByName("btn_reward"),this.label_btn_rewad=this.btn_reward.getChildByName("label_btn_rewad"),this.spr_btn_reward_lock=this.btn_reward.getChildByName("spr_btn_reward_lock")},l}(_))||i);l._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UICommonAdDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,a,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,a=t._decorator,o=t.Component}],execute:function(){var s;e._RF.push({},"c6f03mwZoJB45gtzxFvaAOk","auto_UICommonAdDialog",void 0);var l=a.ccclass;t("default",l(s=function(t){function e(){for(var i,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(i=t.call.apply(t,[this].concat(a))||this).UICommonAdDialog=void 0,i.bg_sp=void 0,i.label_ad_title=void 0,i.btn_close=void 0,i.frame_sp=void 0,i.spr_ad_icon=void 0,i.label_ad_desc=void 0,i.btn_claim=void 0,i.Label=void 0,i.Sprite=void 0,i}return i(e,t),e.prototype.onLoad=function(){this.UICommonAdDialog=this.node,this.bg_sp=this.UICommonAdDialog.getChildByName("bg_sp"),this.label_ad_title=this.bg_sp.getChildByName("label_ad_title"),this.btn_close=this.bg_sp.getChildByName("btn_close"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.spr_ad_icon=this.frame_sp.getChildByName("spr_ad_icon"),this.label_ad_desc=this.frame_sp.getChildByName("label_ad_desc"),this.btn_claim=this.bg_sp.getChildByName("btn_claim"),this.Label=this.btn_claim.getChildByName("Label"),this.Sprite=this.btn_claim.getChildByName("Sprite")},e}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIFlyThemeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,h,r,i;return{setters:[function(e){t=e.inheritsLoose},function(e){h=e.cclegacy,r=e._decorator,i=e.Component}],execute:function(){var n;h._RF.push({},"33018uhLNJNUK4v2+6nKF2m","auto_UIFlyThemeLayer",void 0);var a=r.ccclass;e("default",a(n=function(e){function h(){for(var t,h=arguments.length,r=new Array(h),i=0;i<h;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).UIFlyThemeLayer=void 0,t.spr_reward1=void 0,t.theme_btn=void 0,t.theme_spine=void 0,t.theme_label=void 0,t}return t(h,e),h.prototype.onLoad=function(){this.UIFlyThemeLayer=this.node,this.spr_reward1=this.UIFlyThemeLayer.getChildByName("spr_reward1"),this.theme_btn=this.UIFlyThemeLayer.getChildByName("theme_btn"),this.theme_spine=this.theme_btn.getChildByName("theme_spine"),this.theme_label=this.theme_btn.getChildByName("theme_label")},h}(i))||n);h._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var _,e,o,l;return{setters:[function(t){_=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,l=t.Component}],execute:function(){var i;e._RF.push({},"6d498gS4URPVaBxF0KAixsl","auto_UIGameLayer",void 0);var s=o.ccclass;t("default",s(i=function(t){function e(){for(var _,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return(_=t.call.apply(t,[this].concat(o))||this).UIGameLayer=void 0,_.node_bg=void 0,_.node_bottles=void 0,_.node_root_bottle_levels=void 0,_.bottle_scroll_view_mask=void 0,_.bottle_scroll_view_content=void 0,_.node_root_bottle_content_1=void 0,_.node_root_bottle_1=void 0,_.node_root_bottle_content_2=void 0,_.node_root_bottle_2=void 0,_.node_root_bottle_content_3=void 0,_.node_root_bottle_3=void 0,_.spr_mask_sub_level_bottom=void 0,_.spr_mask_sub_level_top=void 0,_.node_anim_bottle=void 0,_.node_root=void 0,_.btn_setting=void 0,_.node_title=void 0,_.label_title=void 0,_.spr_title_bg=void 0,_.label_timer=void 0,_.progress_timer=void 0,_.spr_bar=void 0,_.label_percent_desc=void 0,_.layout_progress=void 0,_.label_percent=void 0,_.label_percent_mark=void 0,_.spr_tips_bg=void 0,_.label_tips=void 0,_.label_remain_bottle=void 0,_.layout_props=void 0,_.btn_unlock_bottle=void 0,_.lab_btn_unlock_bottle=void 0,_.spr_btn_unlock_bottle=void 0,_.spr_video_1=void 0,_.spr_prop_count_1=void 0,_.label_prop_count_1_prefix=void 0,_.label_prop_count_1_free=void 0,_.label_prop_count_1_num=void 0,_.label_prop_count_1_suffix=void 0,_.btn_clear_color=void 0,_.lab_btn_clear_color=void 0,_.spr_btn_clear_color=void 0,_.spr_video_2=void 0,_.spr_prop_count_2=void 0,_.label_prop_count_2=void 0,_.btn_step_back=void 0,_.lab_btn_step_back=void 0,_.spr_btn_step_back=void 0,_.spr_video_3=void 0,_.spr_prop_count_3=void 0,_.label_prop_count_3=void 0,_.node_bubble_task_bottle_hint=void 0,_.spine_bubble_prop_arrow=void 0,_.label_bubble_prop_hint=void 0,_.particle_refresh=void 0,_.spr_bubble_prop_finger=void 0,_}return _(e,t),e.prototype.onLoad=function(){this.UIGameLayer=this.node,this.node_bg=this.UIGameLayer.getChildByName("node_bg"),this.node_bottles=this.UIGameLayer.getChildByName("node_bottles"),this.node_root_bottle_levels=this.node_bottles.getChildByName("node_root_bottle_levels"),this.bottle_scroll_view_mask=this.node_root_bottle_levels.getChildByName("bottle_scroll_view_mask"),this.bottle_scroll_view_content=this.bottle_scroll_view_mask.getChildByName("bottle_scroll_view_content"),this.node_root_bottle_content_1=this.bottle_scroll_view_content.getChildByName("node_root_bottle_content_1"),this.node_root_bottle_1=this.node_root_bottle_content_1.getChildByName("node_root_bottle_1"),this.node_root_bottle_content_2=this.bottle_scroll_view_content.getChildByName("node_root_bottle_content_2"),this.node_root_bottle_2=this.node_root_bottle_content_2.getChildByName("node_root_bottle_2"),this.node_root_bottle_content_3=this.bottle_scroll_view_content.getChildByName("node_root_bottle_content_3"),this.node_root_bottle_3=this.node_root_bottle_content_3.getChildByName("node_root_bottle_3"),this.spr_mask_sub_level_bottom=this.node_bottles.getChildByName("spr_mask_sub_level_bottom"),this.spr_mask_sub_level_top=this.node_bottles.getChildByName("spr_mask_sub_level_top"),this.node_anim_bottle=this.node_bottles.getChildByName("node_anim_bottle"),this.node_root=this.UIGameLayer.getChildByName("node_root"),this.btn_setting=this.node_root.getChildByName("btn_setting"),this.node_title=this.node_root.getChildByName("node_title"),this.label_title=this.node_title.getChildByName("label_title"),this.spr_title_bg=this.node_title.getChildByName("spr_title_bg"),this.label_timer=this.spr_title_bg.getChildByName("label_timer"),this.progress_timer=this.node_title.getChildByName("progress_timer"),this.spr_bar=this.progress_timer.getChildByName("spr_bar"),this.label_percent_desc=this.progress_timer.getChildByName("label_percent_desc"),this.layout_progress=this.progress_timer.getChildByName("layout_progress"),this.label_percent=this.layout_progress.getChildByName("label_percent"),this.label_percent_mark=this.layout_progress.getChildByName("label_percent_mark"),this.spr_tips_bg=this.node_root.getChildByName("spr_tips_bg"),this.label_tips=this.spr_tips_bg.getChildByName("label_tips"),this.label_remain_bottle=this.node_root.getChildByName("label_remain_bottle"),this.layout_props=this.node_root.getChildByName("layout_props"),this.btn_unlock_bottle=this.layout_props.getChildByName("btn_unlock_bottle"),this.lab_btn_unlock_bottle=this.btn_unlock_bottle.getChildByName("lab_btn_unlock_bottle"),this.spr_btn_unlock_bottle=this.btn_unlock_bottle.getChildByName("spr_btn_unlock_bottle"),this.spr_video_1=this.btn_unlock_bottle.getChildByName("spr_video_1"),this.spr_prop_count_1=this.btn_unlock_bottle.getChildByName("spr_prop_count_1"),this.label_prop_count_1_prefix=this.spr_prop_count_1.getChildByName("label_prop_count_1_prefix"),this.label_prop_count_1_free=this.spr_prop_count_1.getChildByName("label_prop_count_1_free"),this.label_prop_count_1_num=this.spr_prop_count_1.getChildByName("label_prop_count_1_num"),this.label_prop_count_1_suffix=this.spr_prop_count_1.getChildByName("label_prop_count_1_suffix"),this.btn_clear_color=this.layout_props.getChildByName("btn_clear_color"),this.lab_btn_clear_color=this.btn_clear_color.getChildByName("lab_btn_clear_color"),this.spr_btn_clear_color=this.btn_clear_color.getChildByName("spr_btn_clear_color"),this.spr_video_2=this.btn_clear_color.getChildByName("spr_video_2"),this.spr_prop_count_2=this.btn_clear_color.getChildByName("spr_prop_count_2"),this.label_prop_count_2=this.spr_prop_count_2.getChildByName("label_prop_count_2"),this.btn_step_back=this.layout_props.getChildByName("btn_step_back"),this.lab_btn_step_back=this.btn_step_back.getChildByName("lab_btn_step_back"),this.spr_btn_step_back=this.btn_step_back.getChildByName("spr_btn_step_back"),this.spr_video_3=this.btn_step_back.getChildByName("spr_video_3"),this.spr_prop_count_3=this.btn_step_back.getChildByName("spr_prop_count_3"),this.label_prop_count_3=this.spr_prop_count_3.getChildByName("label_prop_count_3"),this.node_bubble_task_bottle_hint=this.node_root.getChildByName("node_bubble_task_bottle_hint"),this.spine_bubble_prop_arrow=this.node_bubble_task_bottle_hint.getChildByName("spine_bubble_prop_arrow"),this.label_bubble_prop_hint=this.node_bubble_task_bottle_hint.getChildByName("label_bubble_prop_hint"),this.particle_refresh=this.node_root.getChildByName("particle_refresh"),this.spr_bubble_prop_finger=this.node_root.getChildByName("spr_bubble_prop_finger")},e}(l))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIGameResult.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,_,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){_=e.cclegacy,i=e._decorator,n=e.Component}],execute:function(){var s;_._RF.push({},"4c845fqhzZEe5dBZyBaeC5k","auto_UIGameResult",void 0);var l=i.ccclass;e("default",l(s=function(e){function _(){for(var t,_=arguments.length,i=new Array(_),n=0;n<_;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).UIGameResult=void 0,t.node_bg=void 0,t.layout_ui_list=void 0,t.node_result_icon=void 0,t.spr_result_icon=void 0,t.label_result_desc=void 0,t.node_next_type=void 0,t.layout_next_type=void 0,t.label_next_type_1=void 0,t.spr_next_type=void 0,t.label_next_type_2=void 0,t.node_next_reward=void 0,t.pro_next_reward=void 0,t.pro_bar_next_reward=void 0,t.spr_reward_icon=void 0,t.label_next_reward_desc=void 0,t.label_progress_desc=void 0,t.node_btns=void 0,t.node_fail_btns=void 0,t.btn_next_level=void 0,t.label_btn_next_level=void 0,t.btn_back=void 0,t.label_btn_back=void 0,t.node_success_btns=void 0,t.btn_continue=void 0,t.label_btn_continue=void 0,t.spine_banner=void 0,t.spine_caidai=void 0,t}return t(_,e),_.prototype.onLoad=function(){this.UIGameResult=this.node,this.node_bg=this.UIGameResult.getChildByName("node_bg"),this.layout_ui_list=this.node_bg.getChildByName("layout_ui_list"),this.node_result_icon=this.layout_ui_list.getChildByName("node_result_icon"),this.spr_result_icon=this.node_result_icon.getChildByName("spr_result_icon"),this.label_result_desc=this.spr_result_icon.getChildByName("label_result_desc"),this.node_next_type=this.layout_ui_list.getChildByName("node_next_type"),this.layout_next_type=this.node_next_type.getChildByName("layout_next_type"),this.label_next_type_1=this.layout_next_type.getChildByName("label_next_type_1"),this.spr_next_type=this.layout_next_type.getChildByName("spr_next_type"),this.label_next_type_2=this.layout_next_type.getChildByName("label_next_type_2"),this.node_next_reward=this.layout_ui_list.getChildByName("node_next_reward"),this.pro_next_reward=this.node_next_reward.getChildByName("pro_next_reward"),this.pro_bar_next_reward=this.pro_next_reward.getChildByName("pro_bar_next_reward"),this.spr_reward_icon=this.pro_next_reward.getChildByName("spr_reward_icon"),this.label_next_reward_desc=this.pro_next_reward.getChildByName("label_next_reward_desc"),this.label_progress_desc=this.pro_next_reward.getChildByName("label_progress_desc"),this.node_btns=this.layout_ui_list.getChildByName("node_btns"),this.node_fail_btns=this.node_btns.getChildByName("node_fail_btns"),this.btn_next_level=this.node_fail_btns.getChildByName("btn_next_level"),this.label_btn_next_level=this.btn_next_level.getChildByName("label_btn_next_level"),this.btn_back=this.node_fail_btns.getChildByName("btn_back"),this.label_btn_back=this.btn_back.getChildByName("label_btn_back"),this.node_success_btns=this.node_btns.getChildByName("node_success_btns"),this.btn_continue=this.node_success_btns.getChildByName("btn_continue"),this.label_btn_continue=this.btn_continue.getChildByName("label_btn_continue"),this.spine_banner=this.UIGameResult.getChildByName("spine_banner"),this.spine_caidai=this.UIGameResult.getChildByName("spine_caidai")},_}(n))||s);_._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIGameResultRank.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,_,l,n;return{setters:[function(e){t=e.inheritsLoose},function(e){_=e.cclegacy,l=e._decorator,n=e.Component}],execute:function(){var a;_._RF.push({},"3f118FACo5An5+tw469uEK5","auto_UIGameResultRank",void 0);var i=l.ccclass;e("default",i(a=function(e){function _(){for(var t,_=arguments.length,l=new Array(_),n=0;n<_;n++)l[n]=arguments[n];return(t=e.call.apply(e,[this].concat(l))||this).UIGameResultRank=void 0,t.node_bg=void 0,t.spr_rank_bg=void 0,t.spine_decor_front=void 0,t.lab_rank_title=void 0,t.lab_rank=void 0,t.lab_rank_level=void 0,t.lab_level=void 0,t.scroll_rank=void 0,t.view_scroll=void 0,t.content_scroll=void 0,t.node_rank_mask=void 0,t.lab_rank_up_desc=void 0,t.btn_next_level=void 0,t.label_btn_next_level=void 0,t.btn_back=void 0,t.label_btn_back=void 0,t.spine_rank_up=void 0,t}return t(_,e),_.prototype.onLoad=function(){this.UIGameResultRank=this.node,this.node_bg=this.UIGameResultRank.getChildByName("node_bg"),this.spr_rank_bg=this.node_bg.getChildByName("spr_rank_bg"),this.spine_decor_front=this.spr_rank_bg.getChildByName("spine_decor_front"),this.lab_rank_title=this.spr_rank_bg.getChildByName("lab_rank_title"),this.lab_rank=this.spr_rank_bg.getChildByName("lab_rank"),this.lab_rank_level=this.spr_rank_bg.getChildByName("lab_rank_level"),this.lab_level=this.spr_rank_bg.getChildByName("lab_level"),this.scroll_rank=this.spr_rank_bg.getChildByName("scroll_rank"),this.view_scroll=this.scroll_rank.getChildByName("view_scroll"),this.content_scroll=this.view_scroll.getChildByName("content_scroll"),this.node_rank_mask=this.spr_rank_bg.getChildByName("node_rank_mask"),this.lab_rank_up_desc=this.spr_rank_bg.getChildByName("lab_rank_up_desc"),this.btn_next_level=this.node_bg.getChildByName("btn_next_level"),this.label_btn_next_level=this.btn_next_level.getChildByName("label_btn_next_level"),this.btn_back=this.node_bg.getChildByName("btn_back"),this.label_btn_back=this.btn_back.getChildByName("label_btn_back"),this.spine_rank_up=this.node_bg.getChildByName("spine_rank_up")},_}(n))||a);_._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIGetGiftBox.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,_,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,_=t._decorator,a=t.Component}],execute:function(){var s;i._RF.push({},"7d0a4NBRipCoLjxRxDuHUJB","auto_UIGetGiftBox",void 0);var l=_.ccclass;t("default",l(s=function(t){function i(){for(var e,i=arguments.length,_=new Array(i),a=0;a<i;a++)_[a]=arguments[a];return(e=t.call.apply(t,[this].concat(_))||this).UIGetGiftBox=void 0,e.spine_title=void 0,e.spine_gift_box=void 0,e.layout_rewards=void 0,e.node_reward1=void 0,e.spine_bg_light1=void 0,e.spr_reward1=void 0,e.label_count_reward1=void 0,e.spr_add=void 0,e.node_reward2=void 0,e.spine_bg_light2=void 0,e.spr_reward2=void 0,e.label_count_reward2=void 0,e.layout_btns=void 0,e.btn_use_bg=void 0,e.label_btn_use_bg=void 0,e.btn_close=void 0,e.label_btn_close=void 0,e.btn_claim=void 0,e.label_btn_claim=void 0,e}return e(i,t),i.prototype.onLoad=function(){this.UIGetGiftBox=this.node,this.spine_title=this.UIGetGiftBox.getChildByName("spine_title"),this.spine_gift_box=this.UIGetGiftBox.getChildByName("spine_gift_box"),this.layout_rewards=this.UIGetGiftBox.getChildByName("layout_rewards"),this.node_reward1=this.layout_rewards.getChildByName("node_reward1"),this.spine_bg_light1=this.node_reward1.getChildByName("spine_bg_light1"),this.spr_reward1=this.node_reward1.getChildByName("spr_reward1"),this.label_count_reward1=this.node_reward1.getChildByName("label_count_reward1"),this.spr_add=this.layout_rewards.getChildByName("spr_add"),this.node_reward2=this.layout_rewards.getChildByName("node_reward2"),this.spine_bg_light2=this.node_reward2.getChildByName("spine_bg_light2"),this.spr_reward2=this.node_reward2.getChildByName("spr_reward2"),this.label_count_reward2=this.node_reward2.getChildByName("label_count_reward2"),this.layout_btns=this.UIGetGiftBox.getChildByName("layout_btns"),this.btn_use_bg=this.layout_btns.getChildByName("btn_use_bg"),this.label_btn_use_bg=this.btn_use_bg.getChildByName("label_btn_use_bg"),this.btn_close=this.layout_btns.getChildByName("btn_close"),this.label_btn_close=this.btn_close.getChildByName("label_btn_close"),this.btn_claim=this.layout_btns.getChildByName("btn_claim"),this.label_btn_claim=this.btn_claim.getChildByName("label_btn_claim")},i}(a))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIGiftLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,s,o;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,s=i._decorator,o=i.Component}],execute:function(){var _;t._RF.push({},"6e952jB75FJYJ1d5t+uzetu","auto_UIGiftLayer",void 0);var a=s.ccclass;i("default",a(_=function(i){function t(){for(var e,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return(e=i.call.apply(i,[this].concat(s))||this).UIGiftLayer=void 0,e.bg_sp=void 0,e.title_label=void 0,e.close_btn=void 0,e.frame_sp=void 0,e.reward_sp=void 0,e.time_sp=void 0,e.clock_sp=void 0,e.time_label=void 0,e.sign_sp=void 0,e.video_btn=void 0,e.video_label=void 0,e.video_icon=void 0,e}return e(t,i),t.prototype.onLoad=function(){this.UIGiftLayer=this.node,this.bg_sp=this.UIGiftLayer.getChildByName("bg_sp"),this.title_label=this.bg_sp.getChildByName("title_label"),this.close_btn=this.bg_sp.getChildByName("close_btn"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.reward_sp=this.frame_sp.getChildByName("reward_sp"),this.time_sp=this.frame_sp.getChildByName("time_sp"),this.clock_sp=this.time_sp.getChildByName("clock_sp"),this.time_label=this.time_sp.getChildByName("time_label"),this.sign_sp=this.frame_sp.getChildByName("sign_sp"),this.video_btn=this.bg_sp.getChildByName("video_btn"),this.video_label=this.video_btn.getChildByName("video_label"),this.video_icon=this.video_btn.getChildByName("video_icon")},t}(o))||_);t._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIGuideLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,_;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,_=t.Component}],execute:function(){var r;i._RF.push({},"d3b95uVqYVBdqbcCcUvEcEN","auto_UIGuideLayer",void 0);var n=s.ccclass;t("default",n(r=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),_=0;_<i;_++)s[_]=arguments[_];return(e=t.call.apply(t,[this].concat(s))||this).UIGuideLayer=void 0,e.click_rect=void 0,e.spr_text_bubble_bg=void 0,e.label_content=void 0,e.btn_skip=void 0,e.label_btn_skip=void 0,e.spr_btn_skip=void 0,e.spine_guide_pointer=void 0,e.spr_right=void 0,e.node_right_wrong_sprites=void 0,e}return e(i,t),i.prototype.onLoad=function(){this.UIGuideLayer=this.node,this.click_rect=this.UIGuideLayer.getChildByName("click_rect"),this.spr_text_bubble_bg=this.UIGuideLayer.getChildByName("spr_text_bubble_bg"),this.label_content=this.spr_text_bubble_bg.getChildByName("label_content"),this.btn_skip=this.spr_text_bubble_bg.getChildByName("btn_skip"),this.label_btn_skip=this.btn_skip.getChildByName("label_btn_skip"),this.spr_btn_skip=this.btn_skip.getChildByName("spr_btn_skip"),this.spine_guide_pointer=this.UIGuideLayer.getChildByName("spine_guide_pointer"),this.spr_right=this.UIGuideLayer.getChildByName("spr_right"),this.node_right_wrong_sprites=this.UIGuideLayer.getChildByName("node_right_wrong_sprites")},i}(_))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIHallLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,l,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,l=e._decorator,s=e.Component}],execute:function(){var n;i._RF.push({},"b4a49RtwWpDTodzjg99V3ZA","auto_UIHallLayer",void 0);var _=l.ccclass;e("default",_(n=function(e){function i(){for(var t,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(t=e.call.apply(e,[this].concat(l))||this).UIHallLayer=void 0,t.node_bg=void 0,t.node_root=void 0,t.logo_spine=void 0,t.flower_spine=void 0,t.setting_btn=void 0,t.start_btn=void 0,t.start_label=void 0,t.level_label=void 0,t.challenge_btn=void 0,t.challenge_label=void 0,t.lcok_label=void 0,t.rank_label_shadow=void 0,t.rank_label_color=void 0,t.share_btn=void 0,t.share_spine=void 0,t.share_label=void 0,t.signin_btn=void 0,t.signin_spine=void 0,t.signin_label=void 0,t.signin_sp=void 0,t.rank_btn=void 0,t.rank_spine=void 0,t.rank_label=void 0,t.theme_btn=void 0,t.theme_spine=void 0,t.theme_label=void 0,t.theme_sp=void 0,t.gamecenter_btn=void 0,t.gamecenter_spine=void 0,t.gamecenter_label=void 0,t.sidebar_btn=void 0,t.sdiebar_spine=void 0,t.sidebar_label=void 0,t.sidebar_reddot=void 0,t.collect_btn=void 0,t.collect_spine=void 0,t.collect_label=void 0,t.collect_reddot=void 0,t.address_btn=void 0,t.address_spine=void 0,t.address_label=void 0,t.gift_btn=void 0,t.gift_icon=void 0,t.gift_time_sp=void 0,t.gift_time_label=void 0,t.gift_sp=void 0,t.challenge_tips=void 0,t.challenge_tips_label=void 0,t.more_btn=void 0,t.more_spine=void 0,t.more_label=void 0,t}return t(i,e),i.prototype.onLoad=function(){this.UIHallLayer=this.node,this.node_bg=this.UIHallLayer.getChildByName("node_bg"),this.node_root=this.UIHallLayer.getChildByName("node_root"),this.logo_spine=this.node_root.getChildByName("logo_spine"),this.flower_spine=this.node_root.getChildByName("flower_spine"),this.setting_btn=this.node_root.getChildByName("setting_btn"),this.start_btn=this.node_root.getChildByName("start_btn"),this.start_label=this.start_btn.getChildByName("start_label"),this.level_label=this.start_btn.getChildByName("level_label"),this.challenge_btn=this.node_root.getChildByName("challenge_btn"),this.challenge_label=this.challenge_btn.getChildByName("challenge_label"),this.lcok_label=this.challenge_btn.getChildByName("lcok_label"),this.rank_label_shadow=this.node_root.getChildByName("rank_label_shadow"),this.rank_label_color=this.node_root.getChildByName("rank_label_color"),this.share_btn=this.node_root.getChildByName("share_btn"),this.share_spine=this.share_btn.getChildByName("share_spine"),this.share_label=this.share_btn.getChildByName("share_label"),this.signin_btn=this.node_root.getChildByName("signin_btn"),this.signin_spine=this.signin_btn.getChildByName("signin_spine"),this.signin_label=this.signin_btn.getChildByName("signin_label"),this.signin_sp=this.signin_btn.getChildByName("signin_sp"),this.rank_btn=this.node_root.getChildByName("rank_btn"),this.rank_spine=this.rank_btn.getChildByName("rank_spine"),this.rank_label=this.rank_btn.getChildByName("rank_label"),this.theme_btn=this.node_root.getChildByName("theme_btn"),this.theme_spine=this.theme_btn.getChildByName("theme_spine"),this.theme_label=this.theme_btn.getChildByName("theme_label"),this.theme_sp=this.theme_btn.getChildByName("theme_sp"),this.gamecenter_btn=this.node_root.getChildByName("gamecenter_btn"),this.gamecenter_spine=this.gamecenter_btn.getChildByName("gamecenter_spine"),this.gamecenter_label=this.gamecenter_btn.getChildByName("gamecenter_label"),this.sidebar_btn=this.node_root.getChildByName("sidebar_btn"),this.sdiebar_spine=this.sidebar_btn.getChildByName("sdiebar_spine"),this.sidebar_label=this.sidebar_btn.getChildByName("sidebar_label"),this.sidebar_reddot=this.sidebar_btn.getChildByName("sidebar_reddot"),this.collect_btn=this.node_root.getChildByName("collect_btn"),this.collect_spine=this.collect_btn.getChildByName("collect_spine"),this.collect_label=this.collect_btn.getChildByName("collect_label"),this.collect_reddot=this.collect_btn.getChildByName("collect_reddot"),this.address_btn=this.node_root.getChildByName("address_btn"),this.address_spine=this.address_btn.getChildByName("address_spine"),this.address_label=this.address_btn.getChildByName("address_label"),this.gift_btn=this.node_root.getChildByName("gift_btn"),this.gift_icon=this.gift_btn.getChildByName("gift_icon"),this.gift_time_sp=this.gift_btn.getChildByName("gift_time_sp"),this.gift_time_label=this.gift_time_sp.getChildByName("gift_time_label"),this.gift_sp=this.gift_btn.getChildByName("gift_sp"),this.challenge_tips=this.node_root.getChildByName("challenge_tips"),this.challenge_tips_label=this.challenge_tips.getChildByName("challenge_tips_label"),this.more_btn=this.node_root.getChildByName("more_btn"),this.more_spine=this.more_btn.getChildByName("more_spine"),this.more_label=this.more_btn.getChildByName("more_label")},i}(s))||n);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIHallSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,s,n;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,n=t.Component}],execute:function(){var _;e._RF.push({},"ba5dbbtKuRA1J/Osc0zZFAb","auto_UIHallSetting",void 0);var l=s.ccclass;t("default",l(_=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(i=t.call.apply(t,[this].concat(s))||this).UIHallSetting=void 0,i.bg_sp=void 0,i.title_label=void 0,i.close_btn=void 0,i.layout_settings=void 0,i.music_sp=void 0,i.music_label=void 0,i.music_btn=void 0,i.music_anniu=void 0,i.sound_sp=void 0,i.sound_label=void 0,i.sound_btn=void 0,i.sound_anniu=void 0,i.vibrate_sp=void 0,i.vibrate_label=void 0,i.vibrate_btn=void 0,i.vibrate_anniu=void 0,i.btn_give_up=void 0,i.label_btn_give_up=void 0,i.btn_continue=void 0,i.label_btn_continue=void 0,i.btn_notice=void 0,i.label_btn_notice=void 0,i.node_test=void 0,i.btn_test=void 0,i.label_btn_show_test=void 0,i}return i(e,t),e.prototype.onLoad=function(){this.UIHallSetting=this.node,this.bg_sp=this.UIHallSetting.getChildByName("bg_sp"),this.title_label=this.bg_sp.getChildByName("title_label"),this.close_btn=this.bg_sp.getChildByName("close_btn"),this.layout_settings=this.bg_sp.getChildByName("layout_settings"),this.music_sp=this.layout_settings.getChildByName("music_sp"),this.music_label=this.music_sp.getChildByName("music_label"),this.music_btn=this.music_sp.getChildByName("music_btn"),this.music_anniu=this.music_btn.getChildByName("music_anniu"),this.sound_sp=this.layout_settings.getChildByName("sound_sp"),this.sound_label=this.sound_sp.getChildByName("sound_label"),this.sound_btn=this.sound_sp.getChildByName("sound_btn"),this.sound_anniu=this.sound_btn.getChildByName("sound_anniu"),this.vibrate_sp=this.layout_settings.getChildByName("vibrate_sp"),this.vibrate_label=this.vibrate_sp.getChildByName("vibrate_label"),this.vibrate_btn=this.vibrate_sp.getChildByName("vibrate_btn"),this.vibrate_anniu=this.vibrate_btn.getChildByName("vibrate_anniu"),this.btn_give_up=this.bg_sp.getChildByName("btn_give_up"),this.label_btn_give_up=this.btn_give_up.getChildByName("label_btn_give_up"),this.btn_continue=this.bg_sp.getChildByName("btn_continue"),this.label_btn_continue=this.btn_continue.getChildByName("label_btn_continue"),this.btn_notice=this.bg_sp.getChildByName("btn_notice"),this.label_btn_notice=this.btn_notice.getChildByName("label_btn_notice"),this.node_test=this.UIHallSetting.getChildByName("node_test"),this.btn_test=this.node_test.getChildByName("btn_test"),this.label_btn_show_test=this.btn_test.getChildByName("label_btn_show_test")},e}(n))||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UILoading.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,n,o;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,n=e._decorator,o=e.Component}],execute:function(){var i;a._RF.push({},"8d0fbq0bkZME5Xm524qIVop","auto_UILoading",void 0);var l=n.ccclass;e("default",l(i=function(e){function a(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).UILoading=void 0,t.spr_bg=void 0,t.age_node=void 0,t.logo_node=void 0,t.pgr_loading=void 0,t.btn_clear_cache=void 0,t.label_btn_clear_cache=void 0,t.btn_generator=void 0,t.label_btn_generator=void 0,t.btn_generator_challenge=void 0,t.label_btn_generator_challenge=void 0,t.des_label=void 0,t.des_label_1=void 0,t}return t(a,e),a.prototype.onLoad=function(){this.UILoading=this.node,this.spr_bg=this.UILoading.getChildByName("spr_bg"),this.age_node=this.UILoading.getChildByName("age_node"),this.logo_node=this.UILoading.getChildByName("logo_node"),this.pgr_loading=this.UILoading.getChildByName("pgr_loading"),this.btn_clear_cache=this.UILoading.getChildByName("btn_clear_cache"),this.label_btn_clear_cache=this.btn_clear_cache.getChildByName("label_btn_clear_cache"),this.btn_generator=this.UILoading.getChildByName("btn_generator"),this.label_btn_generator=this.btn_generator.getChildByName("label_btn_generator"),this.btn_generator_challenge=this.UILoading.getChildByName("btn_generator_challenge"),this.label_btn_generator_challenge=this.btn_generator_challenge.getChildByName("label_btn_generator_challenge"),this.des_label=this.UILoading.getChildByName("des_label"),this.des_label_1=this.UILoading.getChildByName("des_label_1")},a}(o))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UILoadingLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var a,n,e,i;return{setters:[function(o){a=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,i=o.Component}],execute:function(){var t;n._RF.push({},"5f44bU9O0xFZJ1XPZD66UBe","auto_UILoadingLayer",void 0);var r=e.ccclass;o("default",r(t=function(o){function n(){for(var a,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(a=o.call.apply(o,[this].concat(e))||this).UILoadingLayer=void 0,a.spr_loading=void 0,a.label_loading=void 0,a}return a(n,o),n.prototype.onLoad=function(){this.UILoadingLayer=this.node,this.spr_loading=this.UILoadingLayer.getChildByName("spr_loading"),this.label_loading=this.UILoadingLayer.getChildByName("label_loading")},n}(i))||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UILoginShareLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,a,i;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,a=e._decorator,i=e.Component}],execute:function(){var r;s._RF.push({},"71378FkDw5HK4EHtB9Fk+yG","auto_UILoginShareLayer",void 0);var l=a.ccclass;e("default",l(r=function(e){function s(){for(var t,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).UILoginShareLayer=void 0,t.bg_sp=void 0,t.title_label=void 0,t.close_btn=void 0,t.frame_sp=void 0,t.reward_sp=void 0,t.des_label=void 0,t.share_btn=void 0,t.share_label=void 0,t}return t(s,e),s.prototype.onLoad=function(){this.UILoginShareLayer=this.node,this.bg_sp=this.UILoginShareLayer.getChildByName("bg_sp"),this.title_label=this.bg_sp.getChildByName("title_label"),this.close_btn=this.bg_sp.getChildByName("close_btn"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.reward_sp=this.frame_sp.getChildByName("reward_sp"),this.des_label=this.frame_sp.getChildByName("des_label"),this.share_btn=this.bg_sp.getChildByName("share_btn"),this.share_label=this.share_btn.getChildByName("share_label")},s}(i))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIMoreLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,s=e.Component}],execute:function(){var r;i._RF.push({},"02bb9hEj11OuZJ28RaJZH1j","auto_UIMoreLayer",void 0);var a=o.ccclass;e("default",a(r=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).UIMoreLayer=void 0,t.spr_bg=void 0,t.top_node=void 0,t.title_label=void 0,t.close_btn=void 0,t.tableView=void 0,t.View=void 0,t.Content=void 0,t.loading_sp=void 0,t.colorLayer=void 0,t}return t(i,e),i.prototype.onLoad=function(){this.UIMoreLayer=this.node,this.spr_bg=this.UIMoreLayer.getChildByName("spr_bg"),this.top_node=this.spr_bg.getChildByName("top_node"),this.title_label=this.top_node.getChildByName("title_label"),this.close_btn=this.top_node.getChildByName("close_btn"),this.tableView=this.spr_bg.getChildByName("tableView"),this.View=this.tableView.getChildByName("View"),this.Content=this.View.getChildByName("Content"),this.loading_sp=this.spr_bg.getChildByName("loading_sp"),this.colorLayer=this.spr_bg.getChildByName("colorLayer")},i}(s))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UINewTypeGuideDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,s,o;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,s=e._decorator,o=e.Component}],execute:function(){var l;i._RF.push({},"14b27TXRaRELb67tlDzRsrQ","auto_UINewTypeGuideDialog",void 0);var a=s.ccclass;e("default",a(l=function(e){function i(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).UINewTypeGuideDialog=void 0,t.bg_sp=void 0,t.label_title=void 0,t.btn_close=void 0,t.frame_sp=void 0,t.label_guide_desc=void 0,t.layout_bottles=void 0,t.spr_arrow=void 0,t.btn_confirm=void 0,t.Label=void 0,t}return t(i,e),i.prototype.onLoad=function(){this.UINewTypeGuideDialog=this.node,this.bg_sp=this.UINewTypeGuideDialog.getChildByName("bg_sp"),this.label_title=this.bg_sp.getChildByName("label_title"),this.btn_close=this.bg_sp.getChildByName("btn_close"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.label_guide_desc=this.frame_sp.getChildByName("label_guide_desc"),this.layout_bottles=this.frame_sp.getChildByName("layout_bottles"),this.spr_arrow=this.layout_bottles.getChildByName("spr_arrow"),this.btn_confirm=this.bg_sp.getChildByName("btn_confirm"),this.Label=this.btn_confirm.getChildByName("Label")},i}(o))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UINoticeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,s=t.Component}],execute:function(){var a;i._RF.push({},"ca50cLSsVVA8odB1UkmIIHr","auto_UINoticeLayer",void 0);var l=o.ccclass;t("default",l(a=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).UINoticeLayer=void 0,e.bg_sp=void 0,e.label_title=void 0,e.btn_close=void 0,e.frame_sp=void 0,e.view=void 0,e.Layout=void 0,e.label_notice_title=void 0,e.label_notice_content=void 0,e.spine_notice=void 0,e}return e(i,t),i.prototype.onLoad=function(){this.UINoticeLayer=this.node,this.bg_sp=this.UINoticeLayer.getChildByName("bg_sp"),this.label_title=this.bg_sp.getChildByName("label_title"),this.btn_close=this.bg_sp.getChildByName("btn_close"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.view=this.frame_sp.getChildByName("view"),this.Layout=this.view.getChildByName("Layout"),this.label_notice_title=this.Layout.getChildByName("label_notice_title"),this.label_notice_content=this.Layout.getChildByName("label_notice_content"),this.spine_notice=this.bg_sp.getChildByName("spine_notice")},i}(s))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIPermission.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,s,a;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,s=e._decorator,a=e.Component}],execute:function(){var l;i._RF.push({},"209e6u6KatIXJjE2W/gL2tl","auto_UIPermission",void 0);var o=s.ccclass;e("default",o(l=function(e){function i(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).UIPermission=void 0,t.bg_sp=void 0,t.label_ad_title=void 0,t.btn_close=void 0,t.frame_sp=void 0,t.label_ad_desc=void 0,t.btn_agree=void 0,t.label_btn_agree=void 0,t}return t(i,e),i.prototype.onLoad=function(){this.UIPermission=this.node,this.bg_sp=this.UIPermission.getChildByName("bg_sp"),this.label_ad_title=this.bg_sp.getChildByName("label_ad_title"),this.btn_close=this.bg_sp.getChildByName("btn_close"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.label_ad_desc=this.frame_sp.getChildByName("label_ad_desc"),this.btn_agree=this.bg_sp.getChildByName("btn_agree"),this.label_btn_agree=this.btn_agree.getChildByName("label_btn_agree")},i}(a))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIPropUseLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,r,t,n;return{setters:[function(e){o=e.inheritsLoose},function(e){r=e.cclegacy,t=e._decorator,n=e.Component}],execute:function(){var s;r._RF.push({},"d17351mJHlJXqBw06nNU2jj","auto_UIPropUseLayer",void 0);var i=t.ccclass;e("default",i(s=function(e){function r(){for(var o,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return(o=e.call.apply(e,[this].concat(t))||this).UIPropUseLayer=void 0,o.spine_prop=void 0,o}return o(r,e),r.prototype.onLoad=function(){this.UIPropUseLayer=this.node,this.spine_prop=this.UIPropUseLayer.getChildByName("spine_prop")},r}(n))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIRankLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,a,t,s;return{setters:[function(e){i=e.inheritsLoose},function(e){a=e.cclegacy,t=e._decorator,s=e.Component}],execute:function(){var l;a._RF.push({},"90d295NY+ZH/rzQa4Zps/Rl","auto_UIRankLayer",void 0);var r=t.ccclass;e("default",r(l=function(e){function a(){for(var i,a=arguments.length,t=new Array(a),s=0;s<a;s++)t[s]=arguments[s];return(i=e.call.apply(e,[this].concat(t))||this).UIRankLayer=void 0,i.spr_bg=void 0,i.top_node=void 0,i.title_label=void 0,i.anniudi=void 0,i.province_btn=void 0,i.province_label=void 0,i.rank_btn=void 0,i.rank_label=void 0,i.close_btn=void 0,i.ranking_label=void 0,i.dan_label=void 0,i.level_label=void 0,i.rankTableView=void 0,i.rankView=void 0,i.rankContent=void 0,i.UserItem=void 0,i.user_bg=void 0,i.user_rank_label=void 0,i.user_icon_bg=void 0,i.user_icon_labe=void 0,i.mask_header=void 0,i.user_head_sp=void 0,i.spr_frame_header=void 0,i.user_name_label=void 0,i.user_badge_sp=void 0,i.user_badge_label=void 0,i.user_level_label=void 0,i.friendsTableView=void 0,i}return i(a,e),a.prototype.onLoad=function(){this.UIRankLayer=this.node,this.spr_bg=this.UIRankLayer.getChildByName("spr_bg"),this.top_node=this.spr_bg.getChildByName("top_node"),this.title_label=this.top_node.getChildByName("title_label"),this.anniudi=this.top_node.getChildByName("anniudi"),this.province_btn=this.anniudi.getChildByName("province_btn"),this.province_label=this.province_btn.getChildByName("province_label"),this.rank_btn=this.anniudi.getChildByName("rank_btn"),this.rank_label=this.rank_btn.getChildByName("rank_label"),this.close_btn=this.top_node.getChildByName("close_btn"),this.ranking_label=this.top_node.getChildByName("ranking_label"),this.dan_label=this.top_node.getChildByName("dan_label"),this.level_label=this.top_node.getChildByName("level_label"),this.rankTableView=this.spr_bg.getChildByName("rankTableView"),this.rankView=this.rankTableView.getChildByName("rankView"),this.rankContent=this.rankView.getChildByName("rankContent"),this.UserItem=this.spr_bg.getChildByName("UserItem"),this.user_bg=this.UserItem.getChildByName("user_bg"),this.user_rank_label=this.user_bg.getChildByName("user_rank_label"),this.user_icon_bg=this.user_bg.getChildByName("user_icon_bg"),this.user_icon_labe=this.user_icon_bg.getChildByName("user_icon_labe"),this.mask_header=this.user_bg.getChildByName("mask_header"),this.user_head_sp=this.mask_header.getChildByName("user_head_sp"),this.spr_frame_header=this.user_bg.getChildByName("spr_frame_header"),this.user_name_label=this.user_bg.getChildByName("user_name_label"),this.user_badge_sp=this.user_bg.getChildByName("user_badge_sp"),this.user_badge_label=this.user_bg.getChildByName("user_badge_label"),this.user_level_label=this.user_bg.getChildByName("user_level_label"),this.friendsTableView=this.spr_bg.getChildByName("friendsTableView")},a}(s))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIRankUpgrade.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,n,t,i;return{setters:[function(e){a=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,i=e.Component}],execute:function(){var r;n._RF.push({},"41cbfRvhUxNJ5V6MCtn/ho2","auto_UIRankUpgrade",void 0);var s=t.ccclass;e("default",s(r=function(e){function n(){for(var a,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(a=e.call.apply(e,[this].concat(t))||this).UIRankUpgrade=void 0,a.spine_bg_light=void 0,a.spr_rank_badge=void 0,a.spine_rank_badge=void 0,a.label_rank_up_desc=void 0,a.label_continue=void 0,a}return a(n,e),n.prototype.onLoad=function(){this.UIRankUpgrade=this.node,this.spine_bg_light=this.UIRankUpgrade.getChildByName("spine_bg_light"),this.spr_rank_badge=this.UIRankUpgrade.getChildByName("spr_rank_badge"),this.spine_rank_badge=this.UIRankUpgrade.getChildByName("spine_rank_badge"),this.label_rank_up_desc=this.UIRankUpgrade.getChildByName("label_rank_up_desc"),this.label_continue=this.UIRankUpgrade.getChildByName("label_continue")},n}(i))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIRebornDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,_,r;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,_=e._decorator,r=e.Component}],execute:function(){var s;i._RF.push({},"06070t+qGRI24jBSu2OnKBv","auto_UIRebornDialog",void 0);var o=_.ccclass;e("default",o(s=function(e){function i(){for(var t,i=arguments.length,_=new Array(i),r=0;r<i;r++)_[r]=arguments[r];return(t=e.call.apply(e,[this].concat(_))||this).UIRebornDialog=void 0,t.bg_sp=void 0,t.label_title=void 0,t.btn_close=void 0,t.frame_sp=void 0,t.layout_props=void 0,t.spr_bg_time=void 0,t.spr_icon_time=void 0,t.spr_add=void 0,t.spr_bg_bottle=void 0,t.spr_icon_bottle=void 0,t.label_reborn_reward_desc=void 0,t.pro_next_reward=void 0,t.pro_bar_next_reward=void 0,t.label_progress_desc=void 0,t.label_next_reward_desc=void 0,t.btn_claim=void 0,t.label_btn_claim=void 0,t.spr_video_claim=void 0,t}return t(i,e),i.prototype.onLoad=function(){this.UIRebornDialog=this.node,this.bg_sp=this.UIRebornDialog.getChildByName("bg_sp"),this.label_title=this.bg_sp.getChildByName("label_title"),this.btn_close=this.bg_sp.getChildByName("btn_close"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.layout_props=this.frame_sp.getChildByName("layout_props"),this.spr_bg_time=this.layout_props.getChildByName("spr_bg_time"),this.spr_icon_time=this.spr_bg_time.getChildByName("spr_icon_time"),this.spr_add=this.layout_props.getChildByName("spr_add"),this.spr_bg_bottle=this.layout_props.getChildByName("spr_bg_bottle"),this.spr_icon_bottle=this.spr_bg_bottle.getChildByName("spr_icon_bottle"),this.label_reborn_reward_desc=this.frame_sp.getChildByName("label_reborn_reward_desc"),this.pro_next_reward=this.frame_sp.getChildByName("pro_next_reward"),this.pro_bar_next_reward=this.pro_next_reward.getChildByName("pro_bar_next_reward"),this.label_progress_desc=this.pro_next_reward.getChildByName("label_progress_desc"),this.label_next_reward_desc=this.pro_next_reward.getChildByName("label_next_reward_desc"),this.btn_claim=this.bg_sp.getChildByName("btn_claim"),this.label_btn_claim=this.btn_claim.getChildByName("label_btn_claim"),this.spr_video_claim=this.btn_claim.getChildByName("spr_video_claim")},i}(r))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIShareLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,a,i;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,a=e._decorator,i=e.Component}],execute:function(){var r;s._RF.push({},"5b886DucoVDLKHijsv7Bej3","auto_UIShareLayer",void 0);var l=a.ccclass;e("default",l(r=function(e){function s(){for(var t,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).UIShareLayer=void 0,t.bg_sp=void 0,t.title_label=void 0,t.close_btn=void 0,t.frame_sp=void 0,t.reward_sp=void 0,t.des_label=void 0,t.share_btn=void 0,t.share_label=void 0,t}return t(s,e),s.prototype.onLoad=function(){this.UIShareLayer=this.node,this.bg_sp=this.UIShareLayer.getChildByName("bg_sp"),this.title_label=this.bg_sp.getChildByName("title_label"),this.close_btn=this.bg_sp.getChildByName("close_btn"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.reward_sp=this.frame_sp.getChildByName("reward_sp"),this.des_label=this.frame_sp.getChildByName("des_label"),this.share_btn=this.bg_sp.getChildByName("share_btn"),this.share_label=this.share_btn.getChildByName("share_label")},s}(i))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIShareRewardLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,s,r;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,s=e._decorator,r=e.Component}],execute:function(){var i;a._RF.push({},"f14c98ShsJMlYL/pocWAlwR","auto_UIShareRewardLayer",void 0);var l=s.ccclass;e("default",l(i=function(e){function a(){for(var t,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this).UIShareRewardLayer=void 0,t.bg_sp=void 0,t.title_label=void 0,t.close_btn=void 0,t.frame_sp=void 0,t.reward_sp=void 0,t.des_label=void 0,t.share_btn=void 0,t.share_label=void 0,t}return t(a,e),a.prototype.onLoad=function(){this.UIShareRewardLayer=this.node,this.bg_sp=this.UIShareRewardLayer.getChildByName("bg_sp"),this.title_label=this.bg_sp.getChildByName("title_label"),this.close_btn=this.bg_sp.getChildByName("close_btn"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.reward_sp=this.frame_sp.getChildByName("reward_sp"),this.des_label=this.frame_sp.getChildByName("des_label"),this.share_btn=this.bg_sp.getChildByName("share_btn"),this.share_label=this.share_btn.getChildByName("share_label")},a}(r))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UISideBarLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,a=e._decorator,s=e.Component}],execute:function(){var r;i._RF.push({},"12c20jR6zVNzo5hgntZ4276","auto_UISideBarLayer",void 0);var _=a.ccclass;e("default",_(r=function(e){function i(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).UISideBarLayer=void 0,t.bg_sp=void 0,t.title_label=void 0,t.close_btn=void 0,t.spr_desc=void 0,t.btn_side_bar=void 0,t.label_btn_side_bar=void 0,t.btn_reward=void 0,t.label_btn_rewad=void 0,t}return t(i,e),i.prototype.onLoad=function(){this.UISideBarLayer=this.node,this.bg_sp=this.UISideBarLayer.getChildByName("bg_sp"),this.title_label=this.bg_sp.getChildByName("title_label"),this.close_btn=this.bg_sp.getChildByName("close_btn"),this.spr_desc=this.bg_sp.getChildByName("spr_desc"),this.btn_side_bar=this.bg_sp.getChildByName("btn_side_bar"),this.label_btn_side_bar=this.btn_side_bar.getChildByName("label_btn_side_bar"),this.btn_reward=this.bg_sp.getChildByName("btn_reward"),this.label_btn_rewad=this.btn_reward.getChildByName("label_btn_rewad")},i}(s))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UISignInLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(_){var a,i,d,e;return{setters:[function(_){a=_.inheritsLoose},function(_){i=_.cclegacy,d=_._decorator,e=_.Component}],execute:function(){var t;i._RF.push({},"d5c0bH9lPlHPryS8I3LiS/W","auto_UISignInLayer",void 0);var y=d.ccclass;_("default",y(t=function(_){function i(){for(var a,i=arguments.length,d=new Array(i),e=0;e<i;e++)d[e]=arguments[e];return(a=_.call.apply(_,[this].concat(d))||this).UISignInLayer=void 0,a.bg_sp=void 0,a.title_label=void 0,a.close_btn=void 0,a.icon_spine=void 0,a.frame_sp=void 0,a.day_1=void 0,a.day_label_1=void 0,a.day_icon_1=void 0,a.mark_icon_1=void 0,a.day_reward_1=void 0,a.day_reward_label_1=void 0,a.day_signin_1=void 0,a.day_select_1=void 0,a.day_2=void 0,a.day_label_2=void 0,a.day_icon_2=void 0,a.mark_icon_2=void 0,a.day_reward_2=void 0,a.day_reward_label_2=void 0,a.day_signin_2=void 0,a.day_select_2=void 0,a.day_3=void 0,a.day_label_3=void 0,a.day_icon_3=void 0,a.mark_icon_3=void 0,a.day_reward_3=void 0,a.day_reward_label_3=void 0,a.day_signin_3=void 0,a.day_select_3=void 0,a.day_4=void 0,a.day_label_4=void 0,a.day_icon_4=void 0,a.mark_icon_4=void 0,a.day_reward_4=void 0,a.day_reward_label_4=void 0,a.day_signin_4=void 0,a.day_select_4=void 0,a.day_5=void 0,a.day_label_5=void 0,a.day_icon_5=void 0,a.mark_icon_5=void 0,a.day_reward_5=void 0,a.day_reward_label_5=void 0,a.day_signin_5=void 0,a.day_select_5=void 0,a.day_6=void 0,a.day_label_6=void 0,a.day_icon_6=void 0,a.mark_icon_6=void 0,a.day_reward_6=void 0,a.day_reward_label_6=void 0,a.day_signin_6=void 0,a.day_select_6=void 0,a.day_7=void 0,a.day_label_7=void 0,a.day_icon_7=void 0,a.mark_icon_7=void 0,a.day_reward_7=void 0,a.day_reward_label_7=void 0,a.bottle_label=void 0,a.day_bottle_7=void 0,a.day_signin_7=void 0,a.day_select_7=void 0,a.des_label=void 0,a.des_label1=void 0,a.cliam_btn=void 0,a.claim_label=void 0,a.video_btn=void 0,a.video_label=void 0,a.video_icon=void 0,a.tomorrow_label=void 0,a}return a(i,_),i.prototype.onLoad=function(){this.UISignInLayer=this.node,this.bg_sp=this.UISignInLayer.getChildByName("bg_sp"),this.title_label=this.bg_sp.getChildByName("title_label"),this.close_btn=this.bg_sp.getChildByName("close_btn"),this.icon_spine=this.bg_sp.getChildByName("icon_spine"),this.frame_sp=this.bg_sp.getChildByName("frame_sp"),this.day_1=this.frame_sp.getChildByName("day_1"),this.day_label_1=this.day_1.getChildByName("day_label_1"),this.day_icon_1=this.day_1.getChildByName("day_icon_1"),this.mark_icon_1=this.day_icon_1.getChildByName("mark_icon_1"),this.day_reward_1=this.day_1.getChildByName("day_reward_1"),this.day_reward_label_1=this.day_reward_1.getChildByName("day_reward_label_1"),this.day_signin_1=this.day_1.getChildByName("day_signin_1"),this.day_select_1=this.day_1.getChildByName("day_select_1"),this.day_2=this.frame_sp.getChildByName("day_2"),this.day_label_2=this.day_2.getChildByName("day_label_2"),this.day_icon_2=this.day_2.getChildByName("day_icon_2"),this.mark_icon_2=this.day_icon_2.getChildByName("mark_icon_2"),this.day_reward_2=this.day_2.getChildByName("day_reward_2"),this.day_reward_label_2=this.day_reward_2.getChildByName("day_reward_label_2"),this.day_signin_2=this.day_2.getChildByName("day_signin_2"),this.day_select_2=this.day_2.getChildByName("day_select_2"),this.day_3=this.frame_sp.getChildByName("day_3"),this.day_label_3=this.day_3.getChildByName("day_label_3"),this.day_icon_3=this.day_3.getChildByName("day_icon_3"),this.mark_icon_3=this.day_icon_3.getChildByName("mark_icon_3"),this.day_reward_3=this.day_3.getChildByName("day_reward_3"),this.day_reward_label_3=this.day_reward_3.getChildByName("day_reward_label_3"),this.day_signin_3=this.day_3.getChildByName("day_signin_3"),this.day_select_3=this.day_3.getChildByName("day_select_3"),this.day_4=this.frame_sp.getChildByName("day_4"),this.day_label_4=this.day_4.getChildByName("day_label_4"),this.day_icon_4=this.day_4.getChildByName("day_icon_4"),this.mark_icon_4=this.day_icon_4.getChildByName("mark_icon_4"),this.day_reward_4=this.day_4.getChildByName("day_reward_4"),this.day_reward_label_4=this.day_reward_4.getChildByName("day_reward_label_4"),this.day_signin_4=this.day_4.getChildByName("day_signin_4"),this.day_select_4=this.day_4.getChildByName("day_select_4"),this.day_5=this.frame_sp.getChildByName("day_5"),this.day_label_5=this.day_5.getChildByName("day_label_5"),this.day_icon_5=this.day_5.getChildByName("day_icon_5"),this.mark_icon_5=this.day_icon_5.getChildByName("mark_icon_5"),this.day_reward_5=this.day_5.getChildByName("day_reward_5"),this.day_reward_label_5=this.day_reward_5.getChildByName("day_reward_label_5"),this.day_signin_5=this.day_5.getChildByName("day_signin_5"),this.day_select_5=this.day_5.getChildByName("day_select_5"),this.day_6=this.frame_sp.getChildByName("day_6"),this.day_label_6=this.day_6.getChildByName("day_label_6"),this.day_icon_6=this.day_6.getChildByName("day_icon_6"),this.mark_icon_6=this.day_icon_6.getChildByName("mark_icon_6"),this.day_reward_6=this.day_6.getChildByName("day_reward_6"),this.day_reward_label_6=this.day_reward_6.getChildByName("day_reward_label_6"),this.day_signin_6=this.day_6.getChildByName("day_signin_6"),this.day_select_6=this.day_6.getChildByName("day_select_6"),this.day_7=this.frame_sp.getChildByName("day_7"),this.day_label_7=this.day_7.getChildByName("day_label_7"),this.day_icon_7=this.day_7.getChildByName("day_icon_7"),this.mark_icon_7=this.day_icon_7.getChildByName("mark_icon_7"),this.day_reward_7=this.day_7.getChildByName("day_reward_7"),this.day_reward_label_7=this.day_reward_7.getChildByName("day_reward_label_7"),this.bottle_label=this.day_7.getChildByName("bottle_label"),this.day_bottle_7=this.day_7.getChildByName("day_bottle_7"),this.day_signin_7=this.day_7.getChildByName("day_signin_7"),this.day_select_7=this.day_7.getChildByName("day_select_7"),this.des_label=this.day_7.getChildByName("des_label"),this.des_label1=this.day_7.getChildByName("des_label1"),this.cliam_btn=this.bg_sp.getChildByName("cliam_btn"),this.claim_label=this.cliam_btn.getChildByName("claim_label"),this.video_btn=this.bg_sp.getChildByName("video_btn"),this.video_label=this.video_btn.getChildByName("video_label"),this.video_icon=this.video_btn.getChildByName("video_icon"),this.tomorrow_label=this.bg_sp.getChildByName("tomorrow_label")},i}(e))||t);i._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UISignInReward.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,a,_;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,a=i._decorator,_=i.Component}],execute:function(){var d;t._RF.push({},"a45b4bFiRNIA5GcSDMNyg3Y","auto_UISignInReward",void 0);var n=a.ccclass;i("default",n(d=function(i){function t(){for(var e,t=arguments.length,a=new Array(t),_=0;_<t;_++)a[_]=arguments[_];return(e=i.call.apply(i,[this].concat(a))||this).UISignInReward=void 0,e.reward_1=void 0,e.light_sp_1=void 0,e.Icon_sp_1=void 0,e.num_label=void 0,e.reward_2=void 0,e.light_sp_2=void 0,e.Icon_sp_2=void 0,e.video_btn=void 0,e.video_label=void 0,e.video_sp=void 0,e.claim_btn=void 0,e.claim_label=void 0,e}return e(t,i),t.prototype.onLoad=function(){this.UISignInReward=this.node,this.reward_1=this.UISignInReward.getChildByName("reward_1"),this.light_sp_1=this.reward_1.getChildByName("light_sp_1"),this.Icon_sp_1=this.reward_1.getChildByName("Icon_sp_1"),this.num_label=this.reward_1.getChildByName("num_label"),this.reward_2=this.UISignInReward.getChildByName("reward_2"),this.light_sp_2=this.reward_2.getChildByName("light_sp_2"),this.Icon_sp_2=this.reward_2.getChildByName("Icon_sp_2"),this.video_btn=this.UISignInReward.getChildByName("video_btn"),this.video_label=this.video_btn.getChildByName("video_label"),this.video_sp=this.video_btn.getChildByName("video_sp"),this.claim_btn=this.UISignInReward.getChildByName("claim_btn"),this.claim_label=this.claim_btn.getChildByName("claim_label")},t}(_))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UITestLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(_){var t,e,l,a;return{setters:[function(_){t=_.inheritsLoose},function(_){e=_.cclegacy,l=_._decorator,a=_.Component}],execute:function(){var i;e._RF.push({},"4ce9dh8W81EZb7L0LolxJ4G","auto_UITestLayer",void 0);var n=l.ccclass;_("default",n(i=function(_){function e(){for(var t,e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];return(t=_.call.apply(_,[this].concat(l))||this).UITestLayer=void 0,t.scroll_test_btns=void 0,t.view_scroll=void 0,t.content_scroll=void 0,t.btn_clear_cache=void 0,t.label_btn_clear_cache=void 0,t.btn_clear_server_data=void 0,t.label_btn_clear_server_data=void 0,t.btn_clear_local_data=void 0,t.label_btn_clear_local_data=void 0,t.btn_skip_sub_level=void 0,t.label_btn_skip_sub_level=void 0,t.btn_skip_game=void 0,t.label_btn_skip_game=void 0,t.btn_skip_to_level=void 0,t.label_btn_skip_to_level=void 0,t.et_btn_skip_to_level=void 0,t.TEXT_LABEL_btn_skip_to_level=void 0,t.PLACEHOLDER_LABEL_btn_skip_to_level=void 0,t.btn_unlock_all=void 0,t.label_btn_unlock_all=void 0,t.btn_go_to_generator=void 0,t.label_btn_go_to_generator=void 0,t.btn_no_ad=void 0,t.label_btn_no_ad=void 0,t.btn_reduce_time=void 0,t.label_btn_reduce_time=void 0,t.btn_daily_share=void 0,t.label_btn_daily_share=void 0,t.btn_add_prop=void 0,t.label_btn_add_prop=void 0,t.et_btn_add_prop=void 0,t.TEXT_LABEL_btn_add_prop=void 0,t.PLACEHOLDER_LABEL_btn_add_prop=void 0,t.btn_one_key_clear=void 0,t.label_btn_one_key_clear=void 0,t.btn_close=void 0,t.label_btn_close=void 0,t}return t(e,_),e.prototype.onLoad=function(){this.UITestLayer=this.node,this.scroll_test_btns=this.UITestLayer.getChildByName("scroll_test_btns"),this.view_scroll=this.scroll_test_btns.getChildByName("view_scroll"),this.content_scroll=this.view_scroll.getChildByName("content_scroll"),this.btn_clear_cache=this.content_scroll.getChildByName("btn_clear_cache"),this.label_btn_clear_cache=this.btn_clear_cache.getChildByName("label_btn_clear_cache"),this.btn_clear_server_data=this.content_scroll.getChildByName("btn_clear_server_data"),this.label_btn_clear_server_data=this.btn_clear_server_data.getChildByName("label_btn_clear_server_data"),this.btn_clear_local_data=this.content_scroll.getChildByName("btn_clear_local_data"),this.label_btn_clear_local_data=this.btn_clear_local_data.getChildByName("label_btn_clear_local_data"),this.btn_skip_sub_level=this.content_scroll.getChildByName("btn_skip_sub_level"),this.label_btn_skip_sub_level=this.btn_skip_sub_level.getChildByName("label_btn_skip_sub_level"),this.btn_skip_game=this.content_scroll.getChildByName("btn_skip_game"),this.label_btn_skip_game=this.btn_skip_game.getChildByName("label_btn_skip_game"),this.btn_skip_to_level=this.content_scroll.getChildByName("btn_skip_to_level"),this.label_btn_skip_to_level=this.btn_skip_to_level.getChildByName("label_btn_skip_to_level"),this.et_btn_skip_to_level=this.btn_skip_to_level.getChildByName("et_btn_skip_to_level"),this.TEXT_LABEL_btn_skip_to_level=this.et_btn_skip_to_level.getChildByName("TEXT_LABEL_btn_skip_to_level"),this.PLACEHOLDER_LABEL_btn_skip_to_level=this.et_btn_skip_to_level.getChildByName("PLACEHOLDER_LABEL_btn_skip_to_level"),this.btn_unlock_all=this.content_scroll.getChildByName("btn_unlock_all"),this.label_btn_unlock_all=this.btn_unlock_all.getChildByName("label_btn_unlock_all"),this.btn_go_to_generator=this.content_scroll.getChildByName("btn_go_to_generator"),this.label_btn_go_to_generator=this.btn_go_to_generator.getChildByName("label_btn_go_to_generator"),this.btn_no_ad=this.content_scroll.getChildByName("btn_no_ad"),this.label_btn_no_ad=this.btn_no_ad.getChildByName("label_btn_no_ad"),this.btn_reduce_time=this.content_scroll.getChildByName("btn_reduce_time"),this.label_btn_reduce_time=this.btn_reduce_time.getChildByName("label_btn_reduce_time"),this.btn_daily_share=this.content_scroll.getChildByName("btn_daily_share"),this.label_btn_daily_share=this.btn_daily_share.getChildByName("label_btn_daily_share"),this.btn_add_prop=this.content_scroll.getChildByName("btn_add_prop"),this.label_btn_add_prop=this.btn_add_prop.getChildByName("label_btn_add_prop"),this.et_btn_add_prop=this.btn_add_prop.getChildByName("et_btn_add_prop"),this.TEXT_LABEL_btn_add_prop=this.et_btn_add_prop.getChildByName("TEXT_LABEL_btn_add_prop"),this.PLACEHOLDER_LABEL_btn_add_prop=this.et_btn_add_prop.getChildByName("PLACEHOLDER_LABEL_btn_add_prop"),this.btn_one_key_clear=this.content_scroll.getChildByName("btn_one_key_clear"),this.label_btn_one_key_clear=this.btn_one_key_clear.getChildByName("label_btn_one_key_clear"),this.btn_close=this.UITestLayer.getChildByName("btn_close"),this.label_btn_close=this.btn_close.getChildByName("label_btn_close")},e}(a))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/auto_UIThemeSkin.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,h;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,h=e.Component}],execute:function(){var s;t._RF.push({},"7dfccycFdhN878gOdK97THp","auto_UIThemeSkin",void 0);var o=n.ccclass;e("default",o(s=function(e){function t(){for(var i,t=arguments.length,n=new Array(t),h=0;h<t;h++)n[h]=arguments[h];return(i=e.call.apply(e,[this].concat(n))||this).UIThemeSkin=void 0,i.spr_bg=void 0,i.top_node=void 0,i.title_label=void 0,i.anniudi=void 0,i.skin_btn=void 0,i.skin_label=void 0,i.theme_btn=void 0,i.theme_label=void 0,i.close_btn=void 0,i.skinTableView=void 0,i.skinView=void 0,i.skinContent=void 0,i.themeTableView=void 0,i.themeView=void 0,i.themeContent=void 0,i.colorLayer=void 0,i}return i(t,e),t.prototype.onLoad=function(){this.UIThemeSkin=this.node,this.spr_bg=this.UIThemeSkin.getChildByName("spr_bg"),this.top_node=this.spr_bg.getChildByName("top_node"),this.title_label=this.top_node.getChildByName("title_label"),this.anniudi=this.top_node.getChildByName("anniudi"),this.skin_btn=this.anniudi.getChildByName("skin_btn"),this.skin_label=this.skin_btn.getChildByName("skin_label"),this.theme_btn=this.anniudi.getChildByName("theme_btn"),this.theme_label=this.theme_btn.getChildByName("theme_label"),this.close_btn=this.top_node.getChildByName("close_btn"),this.skinTableView=this.spr_bg.getChildByName("skinTableView"),this.skinView=this.skinTableView.getChildByName("skinView"),this.skinContent=this.skinView.getChildByName("skinContent"),this.themeTableView=this.spr_bg.getChildByName("themeTableView"),this.themeView=this.themeTableView.getChildByName("themeView"),this.themeContent=this.themeView.getChildByName("themeContent"),this.colorLayer=this.spr_bg.getChildByName("colorLayer")},t}(h))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/BadgeUtil.ts",["cc","./Defines.ts","./UIHelp.ts"],(function(e){var n,t,a;return{setters:[function(e){n=e.cclegacy},function(e){t=e.GameDefine},function(e){a=e.default}],execute:function(){n._RF.push({},"c0d92lIX1RMr6RuMQ5vnfCK","BadgeUtil",void 0);var r=[["青铜",1],["白银",2],["黄金",3],["铂金",4],["钻石",5],["星耀",6],["王者",7],["无双",27],["荣耀",57],["至尊",107]];e("BadgeUtil",function(){function e(){}return e.GetRankBadgeIndexByRank=function(e){for(var n=r.length,t=r.length-1;t>=0;t--)if(e>=r[t][1]){n=t+1;break}return n>r.length&&(n=10),n},e.SetBadgeIcon=function(e,n){var t="badge/huizhang"+this.GetRankBadgeIndexByRank(n);a.SetSpriteFrame(e,t)},e.GetBadgeName=function(e){var n=this.GetRankBadgeIndexByRank(e)-1;if(e>=r[6][1]){var t=e-r[n][1]+1;return r[n][0]+t.toString()}return r[n][0]},e.GetBageIndexByLevel=function(e){return Math.floor(e/t.LEVEL_COUNT_PER_RANK_LEVEL)+1},e.GetRankSpineAniName=function(e){return this.GetRankBadgeIndexByRank(e).toString()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseUIGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){var r,t,a,i,n,c,o,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,o=e.Prefab},function(e){s=e.UIBase}],execute:function(){var l,u,p;n._RF.push({},"4c08fBW/qdJx4rWsghw9lmy","BaseUIGameLayer",void 0);c.ccclass;var f=c.property;e("BaseUIGameLayer",(l=f(o),p=r((u=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return r=e.call.apply(e,[this].concat(n))||this,a(r,"bottleRackPrefab",p,i(r)),r}return t(r,e),r}(s)).prototype,"bottleRackPrefab",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u));n._RF.pop()}}}));

System.register("chunks:///_virtual/BgShake.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,i,e,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Vec3,s=t.randomRangeInt,r=t.Component}],execute:function(){var a;o._RF.push({},"eebdcn3StZPnaiZgKMbBZm2","BgShake",void 0);var c=i.ccclass;i.property,t("BgShake",c("BgShake")(a=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=t.call.apply(t,[this].concat(i))||this).startPosition=e.ZERO,n.time=0,n.bStop=!1,n}n(o,t);var i=o.prototype;return i.start=function(){this.startPosition=this.node.position,this.bStop=!0},i.startShake=function(){this.bStop=!1},i.stop=function(){this.bStop=!0,this.node.position=this.startPosition},i.update=function(t){if(!this.bStop){var n=[new e(-2,-2,0),new e(-1,-2,0),new e(1,2,0),new e(2,2,0),new e(2,-2,0),new e(2,2,0),new e(2,0,0),new e(-2,0,0),new e(0,2,0),new e(0,-2,0)],o=s(0,10),i=new e(this.startPosition.x+n[o].x,this.startPosition.y+n[o].y,this.startPosition.z+n[o].z);this.node.position=i}},o}(r))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/BottleData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o;return{setters:[function(t){e=t.createClass},function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"6d3859GSrVPCZ5LSOd1fRXW","BottleData",void 0);var n=t("BottleData",function(){function t(t,e,o,n,i,l,s,h,u){void 0===u&&(u=0),this.bottle=void 0,this.key_index=void 0,this.key_collected=void 0,this.video_bottle=void 0,this.unknown_bottle=void 0,this.unknown_bottle_index=void 0,this.unknowns=void 0,this.collect_type=0,this.complete_type=void 0,this.bottle=t,this.key_index=o,this.key_collected=n,this.video_bottle=i,this.unknown_bottle=l,this.unknown_bottle_index=s,this.unknowns=e||[],null==s&&l&&(this.unknown_bottle_index=this.bottle.length-1),this.complete_type=h,this.collect_type=u}return t.prototype.isComplete=function(){var t=this;return this.complete_type==i.COMPLETE_NEXT||this.complete_type==i.END?this.bottle[0]>0&&this.bottle.every((function(e){return e==t.bottle[0]})):this.complete_type==i.EMPTY_NEXT&&this.bottle.every((function(t){return 0==t}))},e(t,[{key:"bottleData",get:function(){return"["+this.bottle.join(",")+"]"}}]),t}()),i=(t("BottleData2",function(){var t=o.prototype;function o(t){void 0===t&&(t={bottles:[],bottleType:l.COMMON}),this.hash=void 0,this.unlockId=0,this.bottleType=l.COMMON,this.unlockColor=0,this.stoneBottle=0,this.bottles=[],this.bottles=t.bottles.map((function(t){return new n([].concat(t.bottle),t.unknowns&&[].concat(t.unknowns),t.key_index,t.key_collected,t.video_bottle,t.unknown_bottle,t.unknown_bottle_index,t.complete_type,t.collect_type)})),this.bottleType=t.bottleType,this.unlockColor=t.unlockColor||0,this.stoneBottle=t.stoneBottle||0,this.unlockId=t.unlockId||0}return t.clone=function(){var t=new o;return t.bottles=this.bottles.map((function(t){return new n([].concat(t.bottle),t.unknowns&&[].concat(t.unknowns),t.key_index,t.key_collected,t.video_bottle,t.unknown_bottle,t.unknown_bottle_index,t.complete_type,t.collect_type)})),t.bottleType=this.bottleType,t.unlockColor=this.unlockColor,t.stoneBottle=this.stoneBottle,t.unlockId=this.unlockId,t},t.updateHash=function(){for(var t=BigInt(0),e=this.bottles[this.curDepth],o=0;o<e.bottle.length;o++)t=t*BigInt(100)+BigInt(e.bottle[o]);t=t*BigInt(10)+BigInt(this.bottles.length);var n=this.bottles[0].key_collected?1:0;t=t*BigInt(10)+BigInt(n),this.hash=t},e(o,[{key:"segment",get:function(){return this.bottles[0]&&this.bottles[0].bottle.length||0}},{key:"depth",get:function(){return this.bottles.length}},{key:"curDepth",get:function(){for(var t=this.bottles.length-1,e=0;e<this.bottles.length;e++)if(!this.bottles[e].isComplete()){t=e;break}return t}},{key:"remainDepth",get:function(){for(var t=0,e=0;e<this.bottles.length;e++)this.bottles[e].isComplete()||t++;return t}},{key:"isAllComplete",get:function(){var t=this.curDepth;return t==this.depth-1&&this.bottles[t].isComplete()}},{key:"showingBottle",get:function(){return this.bottles[this.curDepth]}},{key:"bottleData",get:function(){return"["+this.bottles.map((function(t){return t.bottleData})).join(",")+"]"}}]),o}()),t("CompleteType",function(t){return t[t.END=0]="END",t[t.NEVER=1]="NEVER",t[t.EMPTY_NEXT=2]="EMPTY_NEXT",t[t.COMPLETE_NEXT=3]="COMPLETE_NEXT",t}({}))),l=t("BottleType",function(t){return t[t.COMMON=0]="COMMON",t[t.TASK=1]="TASK",t[t.TRANSFER=2]="TRANSFER",t}({}));o._RF.pop()}}}));

System.register("chunks:///_virtual/BottleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BottleData.ts","./Defines.ts","./AudioManager.ts","./Log.ts","./UIBase.ts","./UIHelp.ts","./GameUtils.ts","./ABTestUtil.ts","./BottleItemPool.ts","./auto_BottleItem.ts","./UIPropUseLayer.ts","./LiquidItem.ts","./LiquidMaskItem.ts","./LiquidUnknownItem.ts"],(function(t){var i,e,o,n,s,_,l,a,h,u,r,p,c,d,m,g,k,f,b,S,C,y,v,w,T,P,q,I,B,L,U,A,E,O,z,M,R,D,x,N,H;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){_=t.cclegacy,l=t._decorator,a=t.Prefab,h=t.sp,u=t.Tween,r=t.Mask,p=t.instantiate,c=t.UITransform,d=t.Widget,m=t.Sprite,g=t.Color,k=t.UIOpacity,f=t.tween,b=t.Label,S=t.Vec3,C=t.Animation,y=t.Size,v=t.Vec2,w=t.randomRangeInt},function(t){T=t.CompleteType,P=t.BottleType},function(t){q=t.GameDefine,I=t.PROP_ID,B=t.Sfx},function(t){L=t.default},function(t){U=t.default},function(t){A=t.UIBase},function(t){E=t.default},function(t){O=t.default},function(t){z=t.ABTestUtil},function(t){M=t.default},function(t){R=t.default},function(t){D=t.default},function(t){x=t.LiquidItem},function(t){N=t.default},function(t){H=t.default}],execute:function(){var G,F,V,Y,W,K,j,X,Q,J;_._RF.push({},"2e364PSJl9EF44g5B113Xkk","BottleItem",void 0);var Z=l.ccclass,$=l.property,tt=q.FRAME_TIME,it=q.LIQUID_SIZE,et=10,ot=194/254,nt=Math.cos(100/180*Math.PI),st=180*Math.atan(189/71*2)/Math.PI,_t=.82;t("default",(G=Z("BottleItem"),F=$(a),V=$(a),Y=$(a),G(((J=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),_=0;_<e;_++)s[_]=arguments[_];return(i=t.call.apply(t,[this].concat(s))||this)._ui=void 0,o(i,"liquidPrefab",j,n(i)),i._liquidSize=void 0,i.liquids=[],o(i,"liquidMaskPrefab",X,n(i)),i.liquidMasks=[],o(i,"liquidUnknownPrefab",Q,n(i)),i.liquidUnknowns=[],i._isEditorBottle=!1,i._isDemo=!1,i._skinId=0,i.remainDepth=0,i.colors=[],i.bottleSize=5,i._subLevelIndex=0,i.onClickListener=void 0,i.onLiquidCheckListener=void 0,i._showShadow=!0,i._maxProgress=1,i._initPosY=0,i._isAnimBottle=!1,i._pouringCount=0,i._collectType=0,i._completeType=T.END,i._bottleType=P.COMMON,i._isComplete=!1,i._isTransferComplete=!1,i._isTaskComplete=!1,i._isVideoBottle=!1,i._unlockId=0,i._isLockBottle=!1,i._keyIndex=0,i._keyCollected=!1,i._unlockColor=0,i._isHiddenBottle=!1,i._unknowns=[],i._isStoneBottle=!1,i._liquidProgress=0,i._pourRotation=0,i._shakeRotation=0,i._waterRotation=0,i._isHide=!1,i._isSelected=!1,i}e(i,t);var _=i.prototype;return _.setPouring=function(){this._pouringCount++},_.stopPouring=function(){this._pouringCount--,this._pouringCount<0&&(this._pouringCount=0)},_.GetInitParams=function(){return{subLevelIndex:this._subLevelIndex,liquids:[].concat(this.colors),isVideoBottle:this._isVideoBottle,keyIndex:this._keyIndex,keyCollected:this._keyCollected,unknowns:this._unknowns,unlockId:0,isAnimBottle:!0,skinId:this._skinId,collectType:this._collectType,completeType:this._completeType,bottleType:this._bottleType,remainDepth:this.remainDepth}},_.onInit=function(t){var i=t[0];this._subLevelIndex=i.subLevelIndex,this.colors=i.liquids,this._isVideoBottle=i.isVideoBottle,this._unknowns=i.unknowns,this._unlockId=i.unlockId,this._isLockBottle=i.unlockId>0,this._keyIndex=i.keyIndex,this._keyCollected=i.keyCollected,this._unlockColor=i.unlockColor,this._isHiddenBottle=i.isHiddenBottle,this._isStoneBottle=i.isStoneBottle,this._isAnimBottle=i.isAnimBottle,this._skinId=i.skinId,this._isDemo=i.isDemo,this._isEditorBottle=i.isEditorBottle,this._collectType=i.collectType,this._completeType=i.completeType,this._bottleType=i.bottleType,this.remainDepth=i.remainDepth,this._showShadow=i.showShadow},_.onUILoad=function(){this._ui=this.node.addComponent(R),this.Init(this.colors.length),this.UpdateDefaultUI(),z.IsABTestB_V3()&&(E.LoadSpine(this._ui.spine_water_wave,"spines/bottle/shuibo_b","shuibo1"),E.LoadSpine(this._ui.spine_water_drip,"spines/bottle/shuibo_b","shuidi1"),this._ui.spine_water_wave.getComponent(h.Skeleton).premultipliedAlpha=!1,this._ui.spine_water_drip.getComponent(h.Skeleton).premultipliedAlpha=!1)},_.UpdateDefaultUI=function(){this._isTransferComplete=!1,this.UpdateCollectType(),this.SetColors(this.colors),this.SetSwapEnable(!1),this.UpdateLockSpine(),this.UpdateKeyIndex(),this._ui.spine_water_flow.active=!1,this._ui.spine_complete.active=!1,this._ui.spine_complete_light.active=!1,this._ui.spr_select_light.active=!1,this._ui.node_cork.active=!1,this._ui.spr_shadow.active=this._showShadow,this.ResetSelected(),this.SetSkin(),this.UpdateBottleType(),this.UpdateHiddenBottle(),this.UpdateDepth(this.remainDepth),this.SetMirrored(!1),this.SetWaterFlowMirrored(!1),this.UpdateStoneBottle(this._isComplete),this.Show()},_.onUIStart=function(){},_.onUIEnable=function(){this._isAnimBottle||(this.registerClick(this._ui.node_click,this.OnBottleClick),this._ui.spine_hidden_bottle.getComponent(h.Skeleton).setEventListener(this.OnHiddenBottleSpineEvent.bind(this))),this._isEditorBottle&&(this._ui.spine_hidden_bottle.getComponent(h.Skeleton).skeletonData=null,this._ui.spine_hidden_bottle.setPosition(0,118))},_.onUIDisable=function(){},_.onUIDestroy=function(){this.liquids=[],this.onClickListener=void 0,this.onLiquidCheckListener=void 0,this.unscheduleAllCallbacks();u.stopAllByTarget(this._ui.spine_task_bottle),u.stopAllByTarget(this._ui.spine_task_bottle_circle),u.stopAllByTarget(this)},_.start=function(){},_.SetOnClickListener=function(t){this.onClickListener=t},_.SetOnLiquidCheckListener=function(t){this.onLiquidCheckListener=t},_.OnBottleClick=function(){null==this.onClickListener||this._isHide||this.onClickListener(this)},_.OnLiquidItemClick=function(t){null!=this.onLiquidCheckListener&&this.onLiquidCheckListener(this,t)},_.Hide=function(){var t=this;this._isHide=!0,this.ResetShakeRotation(),this._ui.node_parent.children.forEach((function(i){i!=t._ui.spine_transfer_bottle_bg&&i!=t._ui.node_parent_depth_num&&i!=t._ui.spine_task_bottle&&E.SetOpacity(i,0)}))},_.Show=function(){var t=this;this._isHide=!1,this._ui.node_parent.children.forEach((function(i){i!=t._ui.spine_transfer_bottle_bg&&i!=t._ui.node_parent_depth_num&&i!=t._ui.spine_task_bottle&&E.SetOpacity(i,255)})),this._ui.node_mask.getComponent(r).enabled=!1,this._ui.node_mask.getComponent(r).enabled=!0},_.Init=function(t){var i=this;this.bottleSize=t,this.liquids.forEach((function(t){null!=t&&(t.node.active=!1)})),this.liquidMasks.forEach((function(t){null!=t&&(t.node.active=!1)})),this._initPosY=this._ui.layout_liquids.getPosition().y,this._liquidSize=it;for(var e=0;e<t;e++){var o=this.liquids[e];o?o.node.active=!0:(o=p(this.liquidPrefab).getComponent(x),this._ui.layout_liquids.addChild(o.node),o.Init(),this.liquids[e]=o,o.SetOnCheckChangedListener((function(t){i.OnLiquidItemClick(t)})));var n=this._liquidSize.height;0==e&&(n+=et),o.getComponent(c).setContentSize(2*this._liquidSize.width,n),o._ui.spr_liquid.getComponent(c).setContentSize(2*this._liquidSize.width,n);var s=this.liquidMasks[e];s?s.node.active=!0:(s=p(this.liquidMaskPrefab).getComponent(N),this._ui.layout_masks.addChild(s.node),this.liquidMasks[e]=s),s.node.setPosition(0,this._liquidSize.height*e+et-this._ui.layout_masks.getComponent(c).height*this._ui.layout_masks.getComponent(c).anchorY);var _=this.liquidUnknowns[e];_?_.node.active=!0:(_=p(this.liquidUnknownPrefab).getComponent(H),this._ui.layout_unknowns.addChild(_.node),this.liquidUnknowns[e]=_);var l=this._liquidSize.height*(e+.5)-this._ui.layout_unknowns.getComponent(c).height*this._ui.layout_unknowns.getComponent(c).anchorY;_.node.setPosition(0,l)}},_.SetSkin=function(){var t=6-this.bottleSize;t<1?t=1:t>5&&(t=5);var i=_t;switch(this.bottleSize){case 5:i=_t;break;case 4:i=.68;break;case 3:i=.55;break;case 2:i=.43;break;case 1:i=.29}var e=this._ui.node_mask.getComponent(c).height*(_t-i),o=[this._ui.layout_liquids,this._ui.layout_masks,this._ui.node_mask_parent,this._ui.layout_unknowns],n=[this._ui.spine_water_up,this._ui.spine_water_bubble,this._ui.spine_water_wave,this._ui.spine_water_drip];o.forEach((function(t){return t.setPosition(0,-138+e)})),n.forEach((function(t){return t.setPosition(0,-235+e)})),this._initPosY=this._ui.layout_liquids.getPosition().y,this._ui.spr_bottle_fg.getComponent(c).anchorY=i,this._ui.spr_bottle_bg.getComponent(c).anchorY=i,this._ui.node_mask.getComponent(c).anchorY=i,this._ui.spr_select_light.getComponent(c).anchorY=i,this._ui.mask_light.getComponent(c).anchorY=i,this._ui.spr_cork.setPosition(0,-(_t-i)*this._ui.node_mask.getComponent(c).height),this._ui.node_click.getComponent(c).setContentSize(100,this._ui.node_mask.getComponent(c).height*i);var s=(it.height*this.bottleSize+et)/2+14;this._ui.spine_complete.setPosition(0,s),this._ui.spr_video.setPosition(0,s),this._ui.spr_lock.setPosition(0,s),this._ui.spr_transition_decor.active=this._completeType==T.NEVER,this._ui.spr_transition_decor.setPosition(0,38*this.bottleSize-98),this._ui.node_hidden_bottle.setPosition(0,this._ui.node_mask.getComponent(c).height*i*.5),this._ui.spine_hidden_bottle.activeInHierarchy&&this._ui.spine_hidden_bottle.getComponent(h.Skeleton).setAnimation(0,t+"_idle",!1);var _="ping";this._completeType==T.NEVER?_="guaodu":this.bottleType==P.TRANSFER&&(_="chuansong"),E.SetSpriteFrame(this._ui.spr_bottle_fg,"bottle/skins/"+_+t+"_qian"),E.SetSpriteFrame(this._ui.spr_bottle_bg,"bottle/skins/"+_+t+"_hou"),E.SetSpriteFrame(this._ui.node_mask,"bottle/skins/"+_+t+"_zhezhao"),E.SetSpriteFrame(this._ui.spr_select_light,"bottle/skins/"+_+t+"_liang"),E.SetSpriteFrame(this._ui.mask_light,"bottle/skins/ping"+t+"_guang")},_.SetColor=function(t){this.colors=[];for(var i=0;i<this.bottleSize;i++)this.colors.push(t);this._UpdateColors()},_.SetColors=function(t){this.colors=t,this._UpdateColors()},_.GetColors=function(){return this.colors},_.UpdateCollectType=function(t){void 0===t&&(t=-1),t>=0&&(this._collectType=t),E.SetOpacity(this._ui.mask_light,this._collectType>0?255:0),this._collectType>0?(this._ui.mask_light.getComponent(d).updateAlignment(),this._collectType>q.LiquidColors.length&&U.log("error collect type: ",this._collectType),this._ui.spr_bottle_bg.getComponent(m).color=O.GetBottleColor(this._collectType,this._subLevelIndex),this._ui.spr_bottle_fg.getComponent(m).color=O.GetBottleColor(this._collectType,this._subLevelIndex),this._ui.mask_light.getComponent(m).color=O.GetBottleShadowColor(this._collectType,this._subLevelIndex)):(this._ui.spr_bottle_bg.getComponent(m).color=g.WHITE,this._ui.spr_bottle_fg.getComponent(m).color=g.WHITE)},_.UpdateBottleType=function(t){t&&(this._bottleType=t),this._ui.spine_task_bottle.active=this._bottleType==P.TASK,this._ui.spine_task_bottle_circle.active=this._bottleType==P.TASK,this._ui.spine_transfer_bottle_fg.active=this._bottleType==P.TRANSFER&&!this._isAnimBottle,this._ui.spine_transfer_bottle_bg.active=this._bottleType==P.TRANSFER&&!this._isAnimBottle,this._bottleType==P.TASK?(E.SetOpacity(this._ui.spine_task_bottle,255),E.SetOpacity(this._ui.spine_task_bottle_circle,255),this._ui.label_depth_num.setPosition(0,7),this._ui.spine_task_bottle.getComponent(h.Skeleton).setAnimation(0,""+this.bottleSize,!0),this.UpdateTaskComplete(!1)):this._bottleType!=P.TRANSFER||this._isAnimBottle||(this._ui.label_depth_num.setPosition(0,-21),this._ui.spine_transfer_bottle_bg.getComponent(h.Skeleton).setAnimation(0,"1",!0),E.SetOpacity(this._ui.spine_transfer_bottle_fg,255),this._ui.spine_transfer_bottle_fg.getComponent(h.Skeleton).setAnimation(0,""+this.bottleSize,!0))},_.UpdateHiddenBottle=function(t){null!=t&&(this._isHiddenBottle=t),this._isHiddenBottle?(this._ui.node_hidden_bottle.active=!0,this._ui.spine_hidden_bottle.getComponent(h.Skeleton).setAnimation(0,6-this.bottleSize+"_idle",!1),E.SetOpacity(this._ui.bg_hidden_bottle,255),this._ui.spr_hidden_bottle.getComponent(m).color=O.GetHiddenBottleColor(this._unlockColor,this._subLevelIndex)):this._ui.node_hidden_bottle.active=!1},_.SetHiddenBottleUnlock=function(t,i){this._isHiddenBottle!=!t&&(this._isHiddenBottle=!t,u.stopAllByTarget(this._ui.bg_hidden_bottle.getComponent(k)),i&&t?(this._ui.spine_hidden_bottle.getComponent(h.Skeleton).setAnimation(0,6-this.bottleSize+"_unlock",!1),this._ui.spine_hidden_bottle_complete.getComponent(h.Skeleton).setAnimation(0,6-this.bottleSize+"_unlock",!1),E.SetOpacity(this._ui.bg_hidden_bottle,255),f(this._ui.bg_hidden_bottle.getComponent(k)).to(.6,{opacity:0}).start()):(E.SetOpacity(this._ui.bg_hidden_bottle,255),this._ui.node_hidden_bottle.active=!t,!t&&this._ui.spine_hidden_bottle.activeInHierarchy&&this._ui.spine_hidden_bottle.getComponent(h.Skeleton).setAnimation(0,6-this.bottleSize+"_idle",!1)))},_.OnHiddenBottleSpineEvent=function(t,i){i instanceof h.spine.Event&&(U.log("TestV OnHiddenBottleSpineEvent",t,i.data.name),"a"==i.data.name?E.LoadParticle(this._ui.particle_hidden_bottle_a,"particle/"+(6-this.bottleSize)+"a"):"b"==i.data.name&&E.LoadParticle(this._ui.particle_hidden_bottle_b,"particle/"+(6-this.bottleSize)+"b"))},_.UpdateCompleteType=function(t){this._completeType=t},_.UpdateDepth=function(t){this.remainDepth=t,this.remainDepth>1&&!this._isAnimBottle?(this._ui.label_depth_num.getComponent(b).string=(this.remainDepth-1).toString(),this._ui.label_depth_num.active=!0):this._ui.label_depth_num.active=!1},_.SetMirrored=function(t){t?(this.node.scale=new S(-1,1,1),this._ui.spr_bottle_bg.scale=new S(-1,1,1),this._ui.spr_liquid_alpha.scale=new S(-1,1,1),this._ui.spr_bottle_fg.scale=new S(-1,1,1),this._ui.layout_unknowns.scale=new S(-1,1,1),this._ui.label_depth_num.scale=new S(-1,1,1),this._ui.node_key.scale=new S(-1,1,1)):(this.node.scale=new S(1,1,1),this._ui.spr_bottle_bg.scale=new S(1,1,1),this._ui.spr_liquid_alpha.scale=new S(1,1,1),this._ui.spr_bottle_fg.scale=new S(1,1,1),this._ui.layout_unknowns.scale=new S(1,1,1),this._ui.label_depth_num.scale=new S(1,1,1),this._ui.node_key.scale=new S(1,1,1))},_.SetWaterFlowMirrored=function(t){this._ui.spine_water_flow.scale=new S(t?-1:1,1,1)},_.UpdateVideoBottleType=function(t){E.SetSpriteFrame(this._ui.spr_video,"bottle/"+(t?"Game_icon_free":"Game_icon_shipin"))},_.UnlockVideoBottle=function(t,i){var e=this;void 0===t&&(t=!0),this._isVideoBottle=!1,t?E.ShowUI(D,void 0,{propID:I.UNLOCK_BOTTLE,callback:function(){L.playEffect(B.SOUND_PROP_UNLOCK_BOTTLE_2),e._ui.spine_unlock_video_bottle.getComponent(h.Skeleton).setAnimation(0,""+e.bottleSize,!1),e._UpdateColors(),i&&i()}}):(this._UpdateColors(),i&&i())},_.PlayClickLockAnim=function(){this._ui.spr_lock.getComponent(h.Skeleton).setAnimation(0,"dianji",!1),this._ui.spr_lock.getComponent(h.Skeleton).addAnimation(0,"idle",!1)},_.UpdateLockBottle=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!0),this._isLockBottle!=t&&(this._isLockBottle=t,t?(this._ui.spr_lock.active=!0,this._ui.spr_lock.getComponent(h.Skeleton).setAnimation(0,"idle",!1)):i?(L.playEffect(B.SOUND_LOCK_BOOTLE),this._ui.spr_lock.getComponent(h.Skeleton).setAnimation(0,"unlock",!1)):this._ui.spr_lock.active=!1)},_.UpdateLockSpine=function(){this._ui.spr_lock.active=this._isLockBottle,this._ui.label_unlock_num.active=this._isEditorBottle,this._isEditorBottle&&(this._ui.label_unlock_num.getComponent(b).string=this._unlockId.toString()),this._isLockBottle&&this._ui.spr_lock.getComponent(h.Skeleton).setAnimation(0,"idle",!1)},_.UpdateStoneBottle=function(t){this._isStoneBottle?(this._ui.node_stone_bottle.active=!0,t?this._ui.spr_stone_bottle.getComponent(h.Skeleton).setAnimation(0,"unlock",!1):this._ui.spr_stone_bottle.getComponent(h.Skeleton).setAnimation(0,"idle",!1)):this._ui.node_stone_bottle.active=!1},_.PlayClickStoneAnim=function(){this._ui.spr_stone_bottle.getComponent(h.Skeleton).setAnimation(0,"dianji",!1),this._ui.spr_stone_bottle.getComponent(h.Skeleton).addAnimation(0,"idle",!1)},_.GetLiquidCount=function(){for(var t=0,i=0;i<this.colors.length;i++)0!=this.colors[i]&&t++;return t},_.UpdateKeyIndex=function(t){null!=t&&(this._keyIndex=t),this._keyIndex>=0&&!this._keyCollected?(this._ui.node_key.active=!0,this._isHide||E.SetOpacity(this._ui.node_key,255),this.UpdateKeyPosition(0)):this._ui.node_key.active=!1},_.UpdateKeyCollected=function(t,i){var e=this;void 0===i&&(i=!0),null!=this._keyIndex&&-1!=this._keyIndex&&(u.stopAllByTarget(this._ui.node_key.getComponent(k)),t?this._keyCollected||(i?(this._ui.node_key.active=!0,E.SetOpacity(this._ui.node_key,255),f(this._ui.node_key.getComponent(k)).to(.6,{opacity:0}).call((function(){e._ui.node_key.active=!1})).start()):this._ui.node_key.active=!1):(this._ui.node_key.active=!0,E.SetOpacity(this._ui.node_key,255),this.UpdateKeyPosition(0)),this._keyCollected=t)},_.UpdateKeyPosition=function(t){if(this._ui.node_key.activeInHierarchy){var i=133*(q.BOTTLE_TOP_ANCHORS[this._skinId]-.5),e=this._ui.spr_bottle_fg.getComponent(c).height*this._ui.spr_bottle_fg.getComponent(c).anchorY-et-this.keyIndex*it.height-5,o=this._ui.spr_bottle_fg.getComponent(c).height*this._ui.spr_bottle_fg.getComponent(c).anchorY,n=Math.sqrt(i*i+e*e),s=t/180*Math.PI,_=Math.sin(s)*n,l=o-Math.cos(s)*n+et;this._ui.node_key.position=new S(_,l)}},_._UpdateColors=function(){if(this._maxProgress=this.GetLiquidCount()/this.colors.length,this._ui.spr_video.active=this._isVideoBottle,this._isVideoBottle){for(var t=0;t<this.bottleSize;t++){var i=this.liquids[t];i.SetLiquidColor(O.GetLiquidColor(0,this._subLevelIndex)),i.toggle.isChecked=!1,this.liquidUnknowns[t].node.active=!1}this.UpdateLiquidMask(this._ui.spr_bottle_bg.angle,0),this._isComplete=!0}else{this._UpdateUnkownIndex();for(var e=0;e<this.bottleSize;e++){var o=this.colors[e],n=this.liquids[e],s=o>0&&1==this._unknowns[e];if(n.SetLiquidColor(O.GetLiquidColor(o,this._subLevelIndex),s&&!this._isEditorBottle),n.toggle.isChecked=!1,this.liquidUnknowns[e].node.active=s,this._isEditorBottle&&o>0){this.liquidUnknowns[e].node.active=!0;var _=o.toString();s&&(_+="?"),this.liquidUnknowns[e]._ui.label_unknown.getComponent(b).string=_}}this.UpdateLiquidMask(this._ui.spr_bottle_bg.angle,this._maxProgress),this._isComplete=this.CheckComplete()}for(var l=this.bottleSize;l<this.liquids.length;l++)this.liquids[l].SetLiquidColor(O.GetLiquidColor(0,this._subLevelIndex)),this.liquidUnknowns[l].node.active=!1},_._UpdateUnkownIndex=function(){for(var t=this.colors.length-1,i=-1;t>=0&&(-1==i||i==this.colors[t]);)0!=this.colors[t]?(-1!=i||(i=this.colors[t]),t--):t--;for(var e=0;e<this._unknowns.length;e++)e>t&&(this._unknowns[e]=0)},_.UpdateUnknowns=function(t){this._unknowns=t,this._UpdateColors()},_.CheckComplete=function(){var t=this;return this._completeType!=T.EMPTY_NEXT&&((this._completeType==T.COMPLETE_NEXT||this._completeType==T.END)&&(this.colors[0]>0&&this.colors.every((function(i){return i==t.colors[0]}))))},_.UpdateComplete=function(t){void 0===t&&(t=!1);var i=this.CheckComplete();this._isComplete=i,i?t&&this.PlayCompleteAnim(!1):(this._ui.node_cork.active=!1,this._ui.spine_full.active=!1,this._ui.spine_complete.active=!1,this._ui.spine_complete_light.active=!1,this.unschedule(this.CompleteSpine),this.unschedule(this.CompleteSpineFinger),this.unschedule(this.CompleteSpineLight),this._isStoneBottle&&(this._ui.node_stone_bottle.active=!0,this._ui.spr_stone_bottle.getComponent(h.Skeleton).setAnimation(0,"idle",!1)))},_.UpdateToMaxProgress=function(){this._maxProgress=this.GetLiquidCount()/this.colors.length,this.liquidProgress=this._maxProgress},_.UpdateLiquidMask=function(t,i){var e=-t/180*Math.PI;i>this._maxProgress&&(i=this._maxProgress);var o=this._ui.node_mask.getComponent(c).contentSize,n=o.width/2*Math.tan(e/2);o.height,Math.cos(e),o.height;Math.abs(t);for(var s=0;s<this.bottleSize;s++){var _=this.liquids[s].isUnknown?q.LIQUID_COLOR_UNKNOWN:O.GetLiquidColor(this.colors[s],this._subLevelIndex);(i*this.bottleSize<=s||0==s)&&(_=O.GetLiquidColor(0));var l=this._liquidSize.width/(10-s+1)*Math.tan(e),a=void 0;a=(this._ui.layout_masks.getComponent(c).contentSize.height-et)*s/5+et-l;var u=(s-1)/4;a+=4*this._liquidSize.height*u*(1/Math.cos(e)-1),a+=Math.sin(e)*this._liquidSize.width/20;var r=0,p=Math.abs(t);p>80&&p<90?r=-(p-80)/2:p>90&&(r=(p-90)/10*20-5),this.liquidMasks[s]._ui.spr_mask_bottom.getComponent(m).color=_,this.liquidMasks[s].node.angle=-t;var d=O.GetLiquidPlaneScaleOfProgress(s/this.bottleSize,t,this.bottleType,this.bottleSize);this.liquidMasks[s].node.setScale(d/Math.cos(e),d),this.liquidMasks[s].node.setPosition(r,a-this._ui.layout_masks.getComponent(c).height*this._ui.layout_masks.getComponent(c).anchorY)}if(i<=0)this._ui.node_liquid_mask.active=!1;else{this._ui.node_liquid_mask.active=!0;var g=Math.ceil(i*this.bottleSize),k=this.colors[g-1],f=this._liquidSize.width/(10-g+1)*Math.tan(e),b=(this._ui.layout_liquids.getComponent(c).contentSize.height-et)*i*this.bottleSize/5-f+et,S=Math.abs(t),C=(i*this.bottleSize-1)/4;if(b+=4*this._liquidSize.height*C*(1/Math.cos(e)-1),b+=Math.sin(e)*this._liquidSize.width/20,i<1/this.bottleSize&&0==t&&(b=(this._liquidSize.height+et)*(i*this.bottleSize)),1==this.bottleSize){var y=0;S>0?y=S/22*5:S>22&&S<35&&(y=(35-S)/13*5),b-=y}var v=0;1==this.bottleSize?S>50&&S<70&&1==this.bottleSize?v=(S-50)/2:S>70&&S<80&&(v=-(S-80)):S>80&&S<90?v=-(S-80)/2:S>90&&(v=(S-90)/10*20-5),this._ui.node_liquid_mask.setPosition(v,b-this._ui.node_mask_parent.getComponent(c).height*this._ui.node_mask_parent.getComponent(c).anchorY),this._ui.spr_mask_liquid.getComponent(m).color=O.GetLiquidColor(k,this._subLevelIndex),this._ui.node_liquid_mask.angle=-t;var w=O.GetLiquidPlaneScaleOfProgress(i,t,this.bottleType,this.bottleSize);this._ui.node_liquid_mask.setScale(w/Math.cos(e),w);var T=b-this._ui.node_mask.getComponent(c).height*this._ui.node_mask.getComponent(c).anchorY;this._ui.spine_water_up.getComponent(h.Skeleton).color=O.GetLiquidColor(k,this._subLevelIndex),this._ui.spine_water_up.setPosition(0,T),this._ui.spine_water_wave.setPosition(0,T+7),this._ui.spine_water_drip.getComponent(h.Skeleton).color=O.GetDripColor(k,this._subLevelIndex),this._ui.spine_water_drip.setPosition(0,T),this._ui.spine_water_bubble.setPosition(0,T+60),this._ui.spine_water_splash.getComponent(h.Skeleton).color=O.GetDripColor(k,this._subLevelIndex),this._ui.spine_water_splash.setPosition(0,T+10)}},_.SetSwapEnable=function(t){this._ui.node_click.active=!t,this.liquids.forEach((function(i){i.toggle.enabled=t,i.toggle.interactable=t}))},_.SetSelected=function(t){var i=this._isSelected!=t;this._isSelected=t,this._ui.spr_select_light.active=t;var e=this.node.getComponent(C);if(t&&i){this._ui.spr_select_light.getComponent(d).updateAlignment();var o=this;f(o).tag(10001).repeatForever(f(o).to(1,{shakeRotation:1.5},{easing:"sineInOut"}).to(1,{shakeRotation:-1.5},{easing:"sineInOut"})).start(),f(o).tag(10001).delay(.25).repeatForever(f(o).to(1,{waterRotation:1.5},{easing:"sineInOut"}).to(1,{waterRotation:-1.5},{easing:"sineInOut"})).start(),z.IsABTestB_V3()&&this.PlayWaterShakeAnim(),e.play("pingzi_up"),L.playEffect(B.SOUND_PICK_BOTTLE)}else!t&&i&&(e.play("pingzi_luo"),this.ResetShakeRotation(),z.IsABTestB_V3()&&this.PlayWaterShakeAnim())},_.ResetSelected=function(){this._isSelected=!1,this._ui.spr_select_light.active=!1,this.node.getComponent(C).stop(),this._ui.node_parent.setPosition(0,0),this._ui.spine_task_bottle.setPosition(0,8),this._ui.spine_task_bottle_circle.setPosition(0,8),this._ui.node_parent_depth_num.setPosition(0,0),this._ui.spine_transfer_bottle_bg.setPosition(0,-2.5),this._ui.spine_transfer_bottle_fg.setPosition(0,-2.5),this._ui.spine_water_flow.setPosition(0,142),this.ResetShakeRotation()},_.ResetShakeRotation=function(){u.stopAllByTag(10001,this),u.stopAllByTag(10001,this),this.shakeRotation=0,this.waterRotation=0},_.update=function(t){},_._UpdateLiquidProgress=function(t){var i=this;this.liquids.forEach((function(e,o){if(0!=i.colors[o]){var n=t*i.bottleSize-o;n<0?n=0:n>1&&(n=1),e.SetFillProgress(n)}})),this.UpdateLiquidMask(0,t)},_._UpdateShakeRotation=function(t){this._ui.spr_bottle_bg.angle=t,this._ui.spr_bottle_fg.angle=t,this._ui.mask_light.angle=t,this._ui.node_mask.angle=t,this._ui.spr_select_light.angle=t,this._ui.spr_transition_decor.angle=t;var i=this._ui.node_parent.position.y,e=120*-Math.sin(t*Math.PI/180)*this.bottleSize/5;this._ui.node_parent.setPosition(e,i),[this._ui.spine_transfer_bottle_bg,this._ui.spine_transfer_bottle_fg,this._ui.node_parent_depth_num].forEach((function(t){var i=t.position.y;t.setPosition(-e,i)}))},_._UpdateWaterRotation=function(t){this._ui.node_liquid_mask.angle=4*-t},_._UpdatePourRotation=function(t){var i=this;this._ui.spr_bottle_bg.angle=t,this._ui.spr_bottle_fg.angle=t,this._ui.mask_light.angle=t,this._ui.node_mask.angle=t,this._ui.layout_liquids.angle=-t,this._ui.spr_transition_decor.angle=t,-90==t&&(t=-90.01),t>=89.99&&t<=90.01&&(t=t<90?89.99:90.01);var e=-t/180*Math.PI,o=this.IsLiquidTriangle(e),n=this.IsAllLiquidTriangle(t),s=this._ui.node_mask.getComponent(c).contentSize,_=s.width/2*Math.tan(e/2),l=(s.height/2-_)/Math.cos(e)-s.height/2-_,a=s.width/4;Math.abs(t)<=90?this._ui.layout_liquids.setPosition(a,l+this._initPosY):this._ui.layout_liquids.setPosition(a,l+this._initPosY+243);var h=this.GetPourProgress(e);this.liquids.forEach((function(t,s){var _=i._liquidSize.width,l=i._liquidSize.height;if(0==s){var a=i._liquidSize.height+et;l=n?a:o?Math.sqrt(i._liquidSize.width*a*2*Math.abs(Math.tan(e)))*Math.abs(Math.cos(e)):(a+i._liquidSize.width*Math.tan(e)/2)*Math.cos(e),h<.3&&(l+=i._liquidSize.height*(.3-h))}_=i._liquidSize.width/Math.cos(e)*3,t.getComponent(c).contentSize=new y(_,l)})),this.liquidProgress=h,this.UpdateLiquidMask(t,h),this.UpdateKeyPosition(t);var u=Math.abs(s.width*(q.BOTTLE_TOP_ANCHORS[this._skinId]-.5)),r=u*Math.cos(e),p=u*Math.sin(e);this._ui.node_parent.setPosition(-r,p)},_.GetPourRotation=function(t){for(var i=this.colors.length,e=0;e<i;e++)0==this.colors[e]&&t++;var o=(i-t)/i;return Math.acos((ot-nt)*o+nt)/Math.PI*180},_.GetPourProgress=function(t){var i=Math.cos(t);return i>ot&&(i=ot),(i-nt)/(ot-nt)},_.IsAllLiquidTriangle=function(t){return Math.abs(t)>st},_.IsLiquidTriangle=function(t){return Math.abs(Math.tan(t))>2*this._liquidSize.height/this._liquidSize.width},_.PlayPourInAnim=function(t,i){void 0===i&&(i=1),i<1&&(i=1),i>4&&(i=4);var e=q.MOVE_BOTTLE_TIME_SCALE*q.POUR_TIME_SCALES[i-1]*1.3;this._ui.spine_water_flow.active=!0;var o=this._ui.spine_water_flow.getComponent(h.Skeleton);o.timeScale=e,o.color=t,o.setAnimation(0,"animation",!1)},_.PlayWaterUpAnim=function(t,i){void 0===i&&(i=1),i<1&&(i=1),i>4&&(i=4);var e=1;1==i?(L.playEffect(B.SOUND_POUR_WATER_1),e=4):2==i?(L.playEffect(B.SOUND_POUR_WATER_2),e=2.8):3==i?(L.playEffect(B.SOUND_POUR_WATER_3),e=2):4==i&&(L.playEffect(B.SOUND_POUR_WATER_4),e=1.6);var o=this._ui.spine_water_up.getComponent(k);o.opacity=0,f(o).to(.4,{opacity:255}).timeScale(e).start();var n=this._ui.node_liquid_mask.getComponent(k),s=this._ui.node_liquid_mask;n.opacity=255,s.scale=new S(1,1,1);var _=this._ui.spine_water_wave.getComponent(h.Skeleton);_.timeScale=1,f(this._ui.spine_water_wave).delay(0).call((function(){_.node.active=!0,_.setAnimation(0,z.IsABTestB_V3()?"shuibo"+(i+1):"shuibo",!1)})).start();var l=this._ui.spine_water_drip.getComponent(h.Skeleton);l.timeScale=1,l.node.active=!0,l.setAnimation(0,z.IsABTestB_V3()?"shuidi"+(i+1):"shuidi",!1);var a=this._ui.spine_water_bubble.getComponent(h.Skeleton);a.timeScale=1,a.node.active=!0,a.setAnimation(0,"paopao",!1)},_.CheckIfShowComplete=function(t){this._isComplete&&(this._completeType==T.END?this.PlayCompleteAnim():this._completeType==T.COMPLETE_NEXT&&t())},_.PlayTransferNextBottleAnim=function(t){var i=this;L.playEffect(B.SOUND_TRANSFER_BOTTLE);var e=[this._ui.mask_transfer_bottle_bg.getComponent(r),this._ui.mask_transfer_bottle_fg.getComponent(r),this._ui.mask_transfer_bottle_mask.getComponent(r)];e.forEach((function(t){t.enabled=!0})),this._ui.spine_transfer_bottle_unlock.active=!0,this._ui.spine_transfer_bottle_unlock.getComponent(h.Skeleton).setAnimation(0,""+this.bottleSize,!1),f(this._ui.spine_transfer_bottle_unlock).delay(20*tt).call((function(){t&&t()})).start();var o=this._ui.node_mask.getComponent(c).anchorY,n=92-this._ui.node_mask.getComponent(c).height*(_t-o),s=[this._ui.spr_bottle_bg,this._ui.spr_bottle_fg,this._ui.node_mask,this._ui.mask_light],_=f().to(6*tt,{position:new S(0,n+13)}).to(7*tt,{position:new S(0,n+16)}).to(4*tt,{position:new S(0,n-79)}).to(3*tt,{position:new S(0,n-317)}).to(4*tt,{position:new S(0,n-50)}).to(6*tt,{position:new S(0,n+16)}).to(5*tt,{position:new S(0,n+13)}).to(5*tt,{position:new S(0,n)}).call((function(){i.PlayWaterSplashAnim(),e.forEach((function(t){t.enabled=!1}))})),l=f().delay(13*tt).to(4*tt,{scale:new v(.85,1.15)}).delay(3*tt).to(10*tt,{scale:new v(1,1)}),a=f().to(6*tt,{angle:1}).to(7*tt,{angle:-2}).to(7*tt,{angle:0});s.forEach((function(t){_.clone().target(t).start(),l.clone().target(t).start(),a.clone().target(t).start()}))},_.PlayTransferBottleCompleteAnim=function(){this._isTransferComplete||(this._isTransferComplete=!0,this._ui.spine_transfer_bottle_bg.getComponent(h.Skeleton).setAnimation(0,"2",!1),this._ui.spine_transfer_bottle_bg.getComponent(h.Skeleton).addAnimation(0,"3",!1),E.SetOpacity(this._ui.spine_transfer_bottle_fg,255),f(this._ui.spine_transfer_bottle_fg.getComponent(k)).to(15*tt,{opacity:0}).start())},_.UpdateTransferComplete=function(t,i){void 0===i&&(i=!1),t?i&&(this._isTransferComplete=!0,E.SetOpacity(this._ui.spine_transfer_bottle_fg,0),this._ui.spine_transfer_bottle_bg.getComponent(h.Skeleton).setAnimation(0,"3",!1)):this._isTransferComplete&&(this._isTransferComplete=!1,this._ui.spine_transfer_bottle_bg.getComponent(h.Skeleton).setAnimation(0,"1",!1),E.SetOpacity(this._ui.spine_transfer_bottle_fg,255))},_.PlayNextTaskAnim=function(t){var i=this;L.playEffect(B.SOUND_TASK_BOTTLE),this._ui.spine_task_next.active=!0,this._ui.spine_task_next.getComponent(h.Skeleton).setAnimation(0,""+this.bottleSize,!1),f(this._ui.spine_task_next).delay(15*tt).call((function(){t&&t()})).start();var e=f().to(3*tt,{scale:new v(.9,1.1)}).to(5*tt,{scale:new v(.99,1.01)}).to(7*tt,{scale:new v(1,1)}).delay(8*tt).to(3*tt,{scale:new v(.95,1.05)}).to(4*tt,{scale:new v(1,1)}),o=this._ui.spr_bottle_bg.getComponent(c).height,n=this._ui.spr_bottle_bg.getComponent(c).anchorY,s=o*n*.1,_=o*n*.01,l=o*n*.05,a=92-o*(_t-n),u=f().to(3*tt,{position:new v(0,s+a)}).to(5*tt,{position:new v(0,47.4+a+_)}).to(7*tt,{position:new v(0,52.2+a)}).to(4*tt,{position:new v(0,50.4+a)}).to(4*tt,{position:new v(0,a)}).call((function(){i.colors[0]>0&&i.PlayWaterSplashAnim()})).to(3*tt,{position:new v(0,a+l)}).to(4*tt,{position:new v(0,a)});[this._ui.spr_bottle_bg,this._ui.spr_bottle_fg,this._ui.node_mask,this._ui.mask_light].forEach((function(t){u.clone().target(t).start(),e.clone().target(t).start()}))},_.PlayCompleteTaskAnim=function(){this.PlayCompleteAnim()},_.HideTaskSpine=function(){var t=this;this._isTaskComplete||(this._isTaskComplete=!0,E.SetOpacity(this._ui.spine_task_bottle,255),E.SetOpacity(this._ui.spine_task_bottle_circle,255),f(this._ui.spine_task_bottle.getComponent(k)).to(15*tt,{opacity:0}).call((function(){t._ui.spine_task_bottle.active=!1})).start(),f(this._ui.spine_task_bottle_circle.getComponent(k)).to(15*tt,{opacity:0}).call((function(){t._ui.spine_task_bottle_circle.active=!1})).start())},_.UpdateTaskComplete=function(t,i){void 0===i&&(i=!1),t?i&&(this._isTaskComplete=!0,this._ui.spine_task_bottle.active=!1,this._ui.spine_task_bottle_circle.active=!1):this._isTaskComplete&&(this._isTaskComplete=!1,u.stopAllByTarget(this._ui.spine_task_bottle),u.stopAllByTarget(this._ui.spine_task_bottle_circle),this._ui.spine_task_bottle.active=!0,this._ui.spine_task_bottle_circle.active=!0,E.SetOpacity(this._ui.spine_task_bottle,255),E.SetOpacity(this._ui.spine_task_bottle_circle,255))},_.PlayCompleteAnim=function(t){void 0===t&&(t=!0);var i=this._ui.node_cork;i.active=!0,E.SetOpacity(i,0);var e=this.node.getComponent(C);t?(e.play("saizi"),this.PlayCompleteSpine(),this.PlayCompleteSpineFinger(),this.PlayCompleteSpineLight()):(e.play("saizi_jz"),this._ui.spine_complete.active=!0,this._ui.spine_complete.getComponent(h.Skeleton).setAnimation(0,"jz",!1),this._ui.node_stone_bottle.active=!1)},_.PlayCompleteSpine=function(){this._isDemo||this.scheduleOnce(this.CompleteSpine,6*tt)},_.CompleteSpine=function(t){this._ui.spine_full.active=!0,this._ui.spine_full.getComponent(h.Skeleton).setAnimation(0,"Boom"+w(1,5),!1),L.playEffect(B.SOUND_COLLECT_BOTTLE),this._isStoneBottle&&this.UpdateStoneBottle(!0)},_.PlayCompleteSpineFinger=function(){this._isDemo||(this._ui.spine_complete.getComponent(h.Skeleton).node.active=!1,this.scheduleOnce(this.CompleteSpineFinger,13*tt))},_.CompleteSpineFinger=function(){var t=this._ui.spine_complete.getComponent(h.Skeleton);t.node.active=!0,t.setAnimation(0,"open",!1)},_.PlayCompleteSpineLight=function(){this._isDemo||this.scheduleOnce(this.CompleteSpineLight,4*tt)},_.CompleteSpineLight=function(){var t=this._ui.spine_complete_light.getComponent(h.Skeleton);t.node.active=!0,t.setAnimation(0,"animation",!1)},_.PlayVanishColorAnim=function(t,i,e,o,n){var s=this;void 0===e&&(e=0);var _=this;f(this.node).delay(e).call((function(){L.playEffect(B.SOUND_VANISH_COLOR),_._ui.spine_vanish_color_bg.getComponent(h.Skeleton).setAnimation(0,s.bottleSize+"hou",!1),_._ui.spine_vanish_color_fg.getComponent(h.Skeleton).setAnimation(0,s.bottleSize+"qian",!1),_._unknowns=i,_.SetColors(t),_.UpdateDepth(o),n()})).start()},_.PlayWaterSplashAnim=function(){O.IsBottleEmpty(this.colors)||(this.UpdateLiquidMask(0,this._maxProgress),this._ui.spine_water_splash.active=!0,this._ui.spine_water_splash.getComponent(h.Skeleton).setAnimation(0,"animation",!1))},_.PlayWaterShakeAnim=function(t){void 0===t&&(t=0),f(this._ui.node_liquid_mask).delay(t).to(4*tt,{angle:4,scale:new S(1,1.1)}).to(5*tt,{angle:-3,scale:new S(1,.9)}).to(5*tt,{angle:2,scale:new S(1,1.05)}).to(6*tt,{angle:0,scale:new S(1,1)}).start()},_.AddAnimBottle=function(t){var i=M.getBottleItem(this.GetInitParams());return t.addChild(i.node),i.Init(i.colors.length),i.UpdateDefaultUI(),i.UpdateCollectType(),i.UpdateDepth(0),i._ui.layout_unknowns.active=!1,i._ui.spr_shadow.active=!1,i._ui.spr_lock.active=!1,i._ui.spine_task_bottle.active=!1,i._ui.spine_task_bottle_circle.active=!1,i._ui.node_hidden_bottle.active=!1,i},s(i,[{key:"isPouring",get:function(){return this._pouringCount>0}},{key:"bottleType",get:function(){return this._bottleType}},{key:"isComplete",get:function(){return this._isComplete}},{key:"isVideoBottle",get:function(){return this._isVideoBottle}},{key:"unlockId",get:function(){return this._unlockId}},{key:"isLockBottle",get:function(){return this._isLockBottle}},{key:"keyIndex",get:function(){return this._keyIndex}},{key:"unlockColor",get:function(){return this._unlockColor}},{key:"isHiddenBottle",get:function(){return this._isHiddenBottle}},{key:"unknowns",get:function(){return this._unknowns}},{key:"isStoneBottle",get:function(){return this._isStoneBottle}},{key:"liquidProgress",get:function(){return this._liquidProgress},set:function(t){this._liquidProgress=t,this._UpdateLiquidProgress(t)}},{key:"pourRotation",get:function(){return this._pourRotation},set:function(t){this._pourRotation=t,this._UpdatePourRotation(t)}},{key:"shakeRotation",get:function(){return this._shakeRotation},set:function(t){this._shakeRotation=t,this._UpdateShakeRotation(t)}},{key:"waterRotation",get:function(){return this._waterRotation},set:function(t){this._waterRotation=t,this._UpdateWaterRotation(t)}}]),i}(A))._prefabUrl="widget/BottleItem",J._className="BottleItem",j=i((K=J).prototype,"liquidPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=i(K.prototype,"liquidMaskPrefab",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=i(K.prototype,"liquidUnknownPrefab",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=K))||W));_._RF.pop()}}}));

System.register("chunks:///_virtual/BottleItemPool.ts",["cc","./BundleManager.ts","./Log.ts","./UIHelp.ts","./BottleItem.ts"],(function(t){var e,n,o,l,i,a;return{setters:[function(t){e=t.cclegacy,n=t.Tween},function(t){o=t.BundleManager},function(t){l=t.default},function(t){i=t.default},function(t){a=t.default}],execute:function(){e._RF.push({},"7130dOZBCBJxZqMp/6r/etv","BottleItemPool",void 0);var s=function(){function t(){this._bottlePrefab=void 0,this._bottleItemCache=[]}t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance};var e=t.prototype;return e.setBottlePrefab=function(t){null==this._bottlePrefab&&(this._bottlePrefab=t)},e.getBottleItem=function(t){var e;return this._bottleItemCache.length>0&&(e=this._bottleItemCache.pop()),null!=e&&e.isValid?(e.init([t]),e.node.setPosition(0,0)):e=i.CreateWidget(a,this._bottlePrefab,t),e},e.recycleBottleItem=function(t){n.stopAllByTarget(t),n.stopAllByTarget(t.node),n.stopAllByTarget(t._ui.spine_task_bottle),n.stopAllByTarget(t._ui.spine_task_bottle_circle),t.node.removeFromParent(),this._bottleItemCache.push(t)},e.clearCache=function(){this._bottleItemCache=[]},e.loadBottleSkins=function(t){o.loadBundle("texture",(function(e,n){n.loadDir("texture/bottle/skins",(function(e,n){l.log("loadBottleSkins",e,n),t&&t()}))}))},e.loadBottleSpines=function(t){o.loadBundle("animation",(function(e,n){n.loadDir("spines/bottle",(function(e,n){l.log("loadBottleSpines",e,n),t&&t()}))}))},t}();s._instance=void 0;t("default",s.getInstance());e._RF.pop()}}}));

System.register("chunks:///_virtual/BottleRackItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BottleData.ts","./DataManager.ts","./UIBase.ts","./BottleItemPool.ts","./UIUtil.ts","./auto_BottleRackItem.ts"],(function(t){var e,i,o,n,l,a,s,c,r,u,h,d,_,b,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,s=t.Prefab,c=t.UITransform,r=t.view,u=t.Layout},function(t){h=t.BottleType},function(t){d=t.default},function(t){_=t.GUIBase},function(t){b=t.default},function(t){f=t.UIUtil},function(t){p=t.default}],execute:function(){var k,g,I,C,L,v;l._RF.push({},"14873Sjg4JFRI6O30kCvWva","BottleRackItem",void 0);var y=a.ccclass,B=a.property;t("default",(k=y("BottleRackItem"),g=B(s),k(((v=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return(e=t.call.apply(t,[this].concat(l))||this)._ui=void 0,o(e,"bottlePrefab",L,n(e)),e._bottleList=[],e._bottleData=[],e._subLevelIndex=-1,e._isEditor=!1,e._isSwapEnable=!1,e._index=-1,e._spacingX=34,e.onClickListener=void 0,e.onLiquidCheckCallback=void 0,e}i(e,t);var l=e.prototype;return l.onInit=function(t){var e=t[0];this._index=e.index,this._bottleData=e.bottleData,this._spacingX=e.spacingX,this._isEditor=e.isEditor,this._subLevelIndex=e.subLevelIndex,this.onClickListener=e.onClickListener,this.onLiquidCheckCallback=e.onLiquidCheckCallback},l.onUILoad=function(){b.setBottlePrefab(this.bottlePrefab),this._ui=this.node.addComponent(p),this.UpdateRackData(this._bottleData),this.UpdateRackBg()},l.onUIStart=function(){},l.onUIEnable=function(){},l.onUIDisable=function(){},l.onUIDestroy=function(){this.onClickListener=void 0},l.UpdateRackData=function(t){var e=this;this.RecycleBottles(),this._bottleData=t;var i=0;this._bottleData.forEach((function(t){t.segment>i&&(i=t.segment)}));var o=339;4==i?o=301:3==i?o=281:i<=2&&(o=261),this.node.getComponent(c).setContentSize(r.getVisibleSize().width,o),this._ui.layout_bottles.getComponent(u).spacingX=this._spacingX;for(var n=d.Player.SkinId.val,l=0;l<this._bottleData.length;l++){var a=this._bottleData[l].showingBottle,s=a.bottle,_=a.unknowns;if((!_||0==_.length)&&(_=new Array(s.length).fill(0),a.unknown_bottle))for(var f=a.unknown_bottle_index||-1,p=0;p<s.length;p++)p<=f&&(_[p]=1);var k={subLevelIndex:this._subLevelIndex,liquids:s,isVideoBottle:a.video_bottle,unknowns:_,unlockId:this._bottleData[l].unlockId,keyIndex:a.key_index,keyCollected:a.key_collected,unlockColor:this._bottleData[l].unlockColor,isHiddenBottle:this._bottleData[l].unlockColor>0,isStoneBottle:1==this._bottleData[l].stoneBottle,skinId:n,isEditorBottle:this._isEditor,collectType:a.collect_type,completeType:a.complete_type,bottleType:this._bottleData[l].bottleType,showShadow:!0},g=b.getBottleItem(k);this._bottleData[l].bottleType==h.TRANSFER?g.node.setPosition(g.node.position.x,0):g.node.setPosition(g.node.position.x,-16),this._ui.layout_bottles.addChild(g.node),this._bottleList.push(g),g.Init(s.length),g.UpdateDefaultUI(),g.SetOnClickListener((function(t){e.OnBottleClick(t)})),this._isEditor&&(g.SetOnLiquidCheckListener((function(t,i){if(i.toggle.isChecked){var o=e._bottleList.findIndex((function(e){return e==t})),n=e._bottleList[o].liquids.findIndex((function(t){return t==i}));e.OnBottleLiquidCheck(e._index,o,n)}})),g.SetSwapEnable(this._isSwapEnable)),g.UpdateDepth(this._bottleData[l].remainDepth)}},l.OnBottleClick=function(t){if(null!=this.onClickListener){var e=this._bottleList.indexOf(t);this.onClickListener(this._index,e,t)}},l.OnBottleLiquidCheck=function(t,e,i){this.onLiquidCheckCallback&&this.onLiquidCheckCallback(t,e,i)},l.SetSpacingX=function(t){this._spacingX=t,this._ui.layout_bottles.getComponent(u).spacingX=t},l.UpdateRackBg=function(){f.SetRackBg(this._ui.spr_rack_bg,this._index<=2)},l.SetSwapEnable=function(t){this._isSwapEnable=t,this._bottleList.forEach((function(e){e.SetSwapEnable(t)}))},l.RecycleBottles=function(){for(var t=0;t<this._bottleList.length;t++)b.recycleBottleItem(this._bottleList[t]);this._bottleList=[]},e}(_))._prefabUrl="widget/BottleRackItem",v._className="BottleRackItem",L=e((C=v).prototype,"bottlePrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=C))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/BottleSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BottleData.ts","./Log.ts","./UIHelp.ts","./BottleItem.ts"],(function(t){var e,o,l,i,n,s,a,r,h,c,d,u,p,b,f,B,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,l=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Prefab,r=t.Node,h=t.Toggle,c=t.EditBox,d=t.Component},function(t){u=t.CompleteType,p=t.BottleType,b=t.BottleData},function(t){f=t.default},function(t){B=t.default},function(t){_=t.default}],execute:function(){var k,y,C,g,E,v,m,I,T,D,w,N,x,S,U,P,L;n._RF.push({},"b19a8MZkMpDJJG4FPtk7pF2","BottleSetting",void 0);var M=s.ccclass,z=s.property;t("default",(k=M("BottleSetting"),y=z(a),C=z(r),g=z(h),E=z(c),v=z(c),m=z(c),I=z(c),k((w=e((D=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,l(e,"bottlePrefab",w,i(e)),l(e,"bottleParent",N,i(e)),l(e,"completeType",x,i(e)),l(e,"bottleTypeEB",S,i(e)),l(e,"bottleColorsEB",U,i(e)),l(e,"unlockColorEB",P,i(e)),l(e,"keyIndexEB",L,i(e)),e._callback=void 0,e._liquidCheckCallback=void 0,e._bottleData=void 0,e.depthBottles=[],e.rackIndex=-1,e.selectedIndex=-1,e._selectedColor=0,e._videoBottle=!1,e._unknownBottleIndex=0,e._segment=4,e._swapEnable=!1,e}o(e,t);var n=e.prototype;return n.onLoad=function(){t.prototype.onLoad&&t.prototype.onLoad.call(this)},n.init=function(t){this._bottleData=t,this.UpdateUI()},n.setConfigCallback=function(t){this._callback=t},n.setBottleLiquidCheckListener=function(t){this._liquidCheckCallback=t},n.UpdateUI=function(){for(var t,e,o,l=Math.max((null==(t=this._bottleData)?void 0:t.bottles.length)||0,this.depthBottles.length),i=0;i<l;i++){var n;this.refreshBottle(i,null==(n=this._bottleData)?void 0:n.bottles[i])}this.completeType.setIsCheckedWithoutNotify(!(1==(null==(e=this._bottleData)?void 0:e.bottles.length)&&(null==(o=this._bottleData)?void 0:o.bottles[0].complete_type)==u.END)),this.bottleTypeEB.placeholder=this.getDefaultBottleType().toString()},n.getDefaultBottleType=function(){var t=p.COMMON;return this._bottleData.bottles.length>1&&(t=this._bottleData.bottles.some((function(t){return t.bottle.some((function(t){return 0==t}))}))?p.TASK:p.TRANSFER),t},n.getBottleType=function(){if(this._bottleData&&this._bottleData.bottles.length<=1)return p.COMMON;var t=Number.parseInt(this.bottleTypeEB.string);return Number.isNaN(t)&&(t=this.getDefaultBottleType()),t},n.getUnlockColor=function(){var t=Number.parseInt(this.unlockColorEB.string);return Number.isNaN(t)&&(t=0),t},n.refreshBottle=function(t,e){var o=this,l=this;if(e){var i={liquids:e.bottle,isVideoBottle:e.video_bottle,unknowns:[],isUnlockBottle:!1,unlockId:0,keyIndex:e.key_index,skinId:0,collectType:e.collect_type,isEditorBottle:!0};this.depthBottles[t]?(this.depthBottles[t].init([i]),this.depthBottles[t].node.active=!0,this.depthBottles[t].Init(e.bottle.length),this.depthBottles[t].UpdateDefaultUI(),this.depthBottles[t].SetSwapEnable(this._swapEnable)):(this.depthBottles[t]=B.CreateWidget(_,this.bottlePrefab,i),this.depthBottles[t].SetOnClickListener(this.onBottleClick.bind(this)),this.bottleParent.addChild(this.depthBottles[t].node),this.depthBottles[t].SetOnLiquidCheckListener((function(t,e){if(l._liquidCheckCallback&&e.toggle.isChecked){var i=o.depthBottles.findIndex((function(e){return e==t})),n=o.depthBottles[i].liquids.findIndex((function(t){return t==e}));l._liquidCheckCallback(l.rackIndex,l.selectedIndex,n,i)}})),this.depthBottles[t].SetSwapEnable(this._swapEnable),this.depthBottles[t].UpdateDepth(0))}else this.depthBottles[t]&&(this.depthBottles[t].node.active=!1)},n.onBottleClick=function(t){var e,o=this.depthBottles.indexOf(t);f.log("onBottleClick",o),null==(e=this._bottleData)||e.bottles.splice(o,1),this.UpdateUI()},n.setRackIndex=function(t){this.rackIndex=t},n.setSelectedIndex=function(t){this.selectedIndex=t},n.setSelectedColor=function(t){this._selectedColor=t},n.setSelectedSize=function(t){this._segment=t},n.setVideoBottle=function(t){this._videoBottle=t},n.setUnknownBottle=function(t){this._unknownBottleIndex=t},n.setSwapEnable=function(t){this._swapEnable=t,this.depthBottles.forEach((function(e){e.SetSwapEnable(t)}))},n.onClickAddEmpty=function(){var t=u.COMPLETE_NEXT;this.addBottle(new Array(this._segment).fill(0),this._videoBottle,this._unknownBottleIndex,t,this._selectedColor)},n.onClickAdd=function(){var t=u.EMPTY_NEXT;this.addBottle(new Array(this._segment).fill(this._selectedColor),this._videoBottle,this._unknownBottleIndex,t,0)},n.addBottle=function(t,e,o,l,i){for(var n,s=new Array(t.length).fill(0),a=0;a<o;a++)s[a]=1;var r=Number.parseInt(this.keyIndexEB.string);isNaN(r)&&(r=-1);var h=new b(t,s,r,!1,e,o>=0,o,l,i);null==(n=this._bottleData)||n.bottles.push(h),this.UpdateUI()},n.updateCompleteType=function(){var t;if(this._bottleData)if(1==this._bottleData.bottles.length)(null==(t=this._bottleData)?void 0:t.bottles[0]).complete_type=this.completeType.isChecked?u.NEVER:u.END;else if(this._bottleData.bottles.length>1){var e=this._bottleData.bottleType==p.TRANSFER?u.EMPTY_NEXT:u.COMPLETE_NEXT;this._bottleData.bottles.forEach((function(t){t.complete_type=e}))}},n.onClickSave=function(){this._bottleData.bottleType=this.getBottleType(),this._bottleData.unlockColor=this.getUnlockColor(),this.updateCompleteType(),this._callback&&this._callback(this.rackIndex,this.selectedIndex,this._bottleData),this.node.active=!1},n.onClickClose=function(){this.node.active=!1},n.onClickRandom=function(){},n.OnClickAddColorBottle=function(){var t=this.bottleColorsEB.string.split(","),e=t.map((function(t){return Number.parseInt(t)}));e.some((function(t){return isNaN(t)||t<=0||t>10}))?f.warn("颜色输入有误，请检查",t):this.addBottle(e,this._videoBottle,this._unknownBottleIndex,u.EMPTY_NEXT,0)},e}(d)).prototype,"bottlePrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(D.prototype,"bottleParent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(D.prototype,"completeType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(D.prototype,"bottleTypeEB",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(D.prototype,"bottleColorsEB",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(D.prototype,"unlockColorEB",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(D.prototype,"keyIndexEB",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=D))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/BundleManager.ts",["cc","./UIGameLayer.ts","./UIGuideLayer.ts","./BottleItem.ts","./BottleRackItem.ts","./LiquidItem.ts","./LiquidMaskItem.ts","./LiquidUnknownItem.ts","./ABTestUtil.ts","./DataManager.ts","./Log.ts"],(function(e){var n,t,r,o,a,u,i,l,d,c,s,f,g,p,B,x,h;return{setters:[function(e){n=e.cclegacy,t=e.assetManager,r=e.sp,o=e.resources,a=e.director,u=e.sys,i=e.game},function(e){l=e.UIGameLayer},function(e){d=e.default},function(e){c=e.default},function(e){s=e.default},function(e){f=e.LiquidItem},function(e){g=e.default},function(e){p=e.default},function(e){B=e.ABTestUtil},function(e){x=e.default},function(e){h=e.default}],execute:function(){n._RF.push({},"cee2fXKXzVC+I0QaUplLT09","BundleManager",void 0);var m=["configs","sounds","animation","texture"],v=["texture","texture/adpop","texture/avatars","texture/badge","texture/bg","texture/bottle","texture/bottle/skins","texture/common","texture/finish","texture/game","texture/guide","texture/jiazi","texture/rank","texture/reward","texture/setting","texture/share","texture/shopbg","texture/signin","texture/themeskin"],U=["spines/prop/spine_fanhui","spines/prop/spine_xiaochu","spines/prop/spine_pingzi"],b=["texture","texture/bg","texture/bottle/skins","texture/common","texture/game","texture/guide","texture/jiazi"],_=[l.getUrl(),d.getUrl(),c.getUrl(),s.getUrl(),f.getUrl(),g.getUrl(),p.getUrl()],L=e("BundleManager",function(){function e(){}return e.getBundle=function(e){return t.getBundle(e)},e.preloadBundles=function(e,n){var t=this;m.forEach((function(r,o){!function(r){t.loadBundle(r,(function(r,o){h.log("preload complete",r,o),r&&t._errorCount++,t._preloadCount++,e&&e(t._preloadCount,m.length),t._preloadCount==m.length&&n&&n(t._errorCount)}))}(t.getBundleUrl(r))}))},e.loadBundle=function(e,n){var r=t.getBundle(e);r?n&&n(null,r):t.loadBundle(e,(function(t,r){n&&n(t,r),t&&h.warn("loadBundle "+e+" error",t)}))},e.loadBundleRes=function(e,n,t){var r=this.getBundleUrl(e);this.loadBundle(r,(function(r,o){if(o){var a=o.get(n);null!=a?t&&t(null,a):o.load(n,(function(r,o){t&&t(r,o),r&&h.warn("loadBundleRes "+e+" "+n+" error",r)}))}}))},e.loadSound=function(e,n){this.loadBundleRes("sounds",e,n)},e.loadSpriteFrame=function(e,n){this.loadBundleRes("texture","texture/"+e+"/spriteFrame",n)},e.loadAnimation=function(e,n){this.loadBundleRes("animation",e,n)},e.loadConfig=function(e){this.loadBundleRes("configs",e)},e.loadConfigBundle=function(e){var n=this.getBundleUrl("configs");this.loadBundle(n,e)},e.loadPrefab=function(e,n){this.loadBundleRes("texture",e,n)},e.preloadPrefabs=function(e){var n=0,t=0,r=function(r){r&&h.warn("preloadPrefabs error",r),++n==t&&e&&e()};this.loadBundle("texture",(function(e,n){t++,n.loadDir("prefab/ui",(function(e){r(e)})),t++,n.loadDir("prefab/widget",(function(e){r(e)}))}))},e.preloadGamePrefabs=function(e){var n=0,t=0;this.loadBundle("texture",(function(r,o){_.forEach((function(r){t++,o.load(r,(function(o){++n==t&&e&&e(),o&&h.warn("preloadGamePrefabs "+r+" error",o)}))}))}))},e.preloadTextures=function(e){var n=0,t=0;this.loadBundle("texture",(function(r,o){v.forEach((function(r){t++,o.loadDir(r,(function(o){o&&h.warn("preloadDir "+r+" error",o),++n==t&&e&&e()}))}))}))},e.preloadSpines=function(e){var n=0,t=0;this.loadBundle("animation",(function(o,a){U.forEach((function(o){t++,a.load(o,r.SkeletonData,(function(r,a){r&&h.warn("preloadDir "+o+" error",r),++n==t&&e&&e(),h.log("preloadDir spines",o,r,a)}))}))}))},e.preloadGameTextures=function(e){var n=0,t=0;this.loadBundle("texture",(function(r,o){b.forEach((function(r){t++,o.loadDir(r,(function(o){o&&h.warn("preloadDir "+r+" error",o),++n==t&&e&&e()}))}))}))},e.preloadBackground=function(e){var n=x.Player.ThemeId.val;B.IsABTestC_V4()&&0==n&&(n="challenge");var t=["texture/bg/Game_bg_"+n];this.loadBundle("texture",(function(n,r){if(n)h.warn("preloadBackground error",n);else{var o=0;t.forEach((function(n){r.load(n+"/spriteFrame",(function(r){h.log("preloadBackground "+n,r),r&&h.warn("preloadBackground "+n+" error",r),++o==t.length&&e&&e()}))}))}}))},e.preloadLoadingLayer=function(e){this.loadBundle("texture",(function(n,t){t&&t.load("prefab/ui/UILoadingLayer",(function(n,t){n&&h.warn("preloadLoadingLayer error",n),e&&e()}))}))},e.preloadNoticeDialog=function(e){var n=0,t=0;t++,this.loadBundle("texture",(function(n,t){t&&t.load("prefab/ui/UINoticeLayer",(function(n,t){n&&h.warn("preloadLoadingLayer error",n),e&&e()}))})),t++;var o="spines/notice/spine_gonggao";this.loadBundle("animation",(function(a,u){u.load(o,r.SkeletonData,(function(r,a){r&&h.warn("preloadDir "+o+" error",r),++n==t&&e&&e(),h.log("preloadDir spines",o,r,a)}))}))},e.loadResources=function(e,n){o.load(e,(function(e,t){n&&n(e,t)}))},e.getBundleUrl=function(e){return e},e.getWxBundleUrl=function(e){return e},e.ClearGameCache=function(){var e,n;null==(e=a.getScene())||e.destroy(),null==(n=t.cacheManager)||n.clearCache(),u.localStorage.clear(),t.bundles.forEach((function(e){e.releaseAll()})),u.platform==u.Platform.BYTEDANCE_MINI_GAME?tt.restartMiniProgramSync():i.end()},e}());L._preloadCount=0,L._errorCount=0,n._RF.pop()}}}));

System.register("chunks:///_virtual/BytedancePlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./DataManager.ts","./ExceptionHandler.ts","./Log.ts","./UIFit.ts"],(function(t){var e,n,i,s,o,r,a,d,l,c,u;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,i=t._decorator,s=t.sys,o=t.Size,r=t.Vec2},function(t){a=t.default},function(t){d=t.default},function(t){l=t.ExceptionHandler},function(t){c=t.default},function(t){u=t.default}],execute:function(){var h,f;n._RF.push({},"09e36O5UVdPs7ww2vA4ecZS","BytedancePlatform",void 0);var _=i.ccclass,g=t("AD_UNIT_ID_REWARD_VIDEO","5f3j13h79c623s7pns"),k=t("AD_UNIT_ID_INTERSTITIAL","cpbc46adiadha0gdqt"),A=t("BytedancePlatform",_("BytedancePlatform")(((f=function(){function t(){this._sdk=void 0,this._selfInfo=void 0,this._menuHeight=0,this._menuTop=0,this._menuBottom=0,this._screenHeight=void 0,this._screenWidth=void 0,this._isInterstitialAdLoaded=!1,this._willShowAd=!1,this._endCallback=void 0,this.init()}t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance};var n=t.prototype;return n.getLocalUserInfo=function(){return this._selfInfo},n.init=function(){var t,e,n,i=this;null==typeof window.tt||s.platform!=s.Platform.BYTEDANCE_MINI_GAME?this._sdk=void 0:(this._sdk=window.tt,c.log("is Bytedance platform"),null==(t=this._sdk)||t.onError((function(t){c.error("tt onError:",t),i.saveError(t),l.showErrorOnScreen(t.message+"\n"+t.stack)})),null==(e=this._sdk)||e.onWindowResize((function(t){c.log("tt onWindowResize:",t),i.initTTInfo(),u.initFit(new o(750,1334))})),null==(n=this._sdk)||n.showShareMenu({menus:["share","record","screenShot"]}),this.loadAllAd())},n.postMessage=function(t){var e;this._sdk&&(null==(e=this._sdk)||null==(e=e.getOpenDataContext())||e.postMessage({text:t}))},n.toTTPosition=function(t){var e=this._screenWidth*t.x/u._DEFAULT_W,n=this._screenHeight*(u._DEFAULT_H-t.y)/u._DEFAULT_H;return new r(e,n)},n.toTTSize=function(t){var e=this._screenWidth*t.width/u._DEFAULT_W,n=this._screenHeight*t.height/u._DEFAULT_H;return new o(e,n)},n.initTTInfo=function(){if(!this._sdk)return this._menuTop=u._DEFAULT_H-u.SafeTop-30,this._menuBottom=u._DEFAULT_H-u.SafeTop-60,void(this._menuHeight=30);var t=this._sdk.getSystemInfoSync();if(t){this._screenHeight=t.screenHeight,this._screenWidth=t.screenWidth;var e=this._sdk.getMenuButtonBoundingClientRect();this._menuTop=u._DEFAULT_H-(e.bottom-.5*e.height)*(u._DEFAULT_H/t.screenHeight),this._menuBottom=u._DEFAULT_H-e.bottom*(u._DEFAULT_H/t.screenHeight),this._menuHeight=e.height*(u._DEFAULT_H/t.screenHeight)}else this._menuTop=u._DEFAULT_H-u.SafeTop-30,this._menuBottom=u._DEFAULT_H-u.SafeTop-60,this._menuHeight=30},n.onHide=function(t){this._sdk&&this._sdk.onHide((function(){t()}))},n.onShow=function(t){this._sdk&&this._sdk.onShow((function(e){t(e)}))},n.getUserInfo=function(t){var e=this;if(this._sdk)if(this._selfInfo)t&&t(this._selfInfo);else{var n=this;this._sdk.login({success:function(i){c.log("tt login success:",i),e._sdk.getUserInfo({success:function(e){n._selfInfo=e.userInfo,c.log("tt name="+n._selfInfo.nickName+", url="+n._selfInfo.avatarUrl),t&&t(n._selfInfo)},fail:function(e){c.log("tt getUserInfo fail:",e),t&&t()}})},fail:function(t){c.log("tt login fail:",t)}})}else t&&t()},n.setUserLevel=function(t){var e=this;if(!this._sdk)return Promise.resolve(!1);var n=this;return new Promise((function(i){n._sdk.setImRankData({zoneId:e.IsDebugEnv()?"test":"default",dataType:0,value:t.toString(),priority:0,success:function(t){c.log("tt setImRankData success",t.errMsg),i(!0)},fail:function(t){c.log("tt setImRankData fail",t.errMsg,t.errNo),i(!1)}})}))},n.IsDebugEnv=function(){if(!this._sdk)return!0;var t=this._sdk.getEnvInfoSync().microapp.envType;return"development"==t||"preview"==t},n.removeUserLevel=function(){this._sdk&&this._sdk.setImRankData({dataType:0,value:"0",priority:0,success:function(t){c.log("tt removeImRankData success",{res:t})},fail:function(t){c.log("tt removeImRankData fail",{res:t})}})},n.shareAppMessage=function(t,e){void 0===e&&(e=""),this._sdk&&this._sdk.shareAppMessage({query:e,templateId:"4onbcncagoh1q8caip",success:function(t){c.log("tt shareAppMessage success",t),d.User.CheckShareStatus()},fail:function(t){c.log("tt shareAppMessage fail",t),d.Player.LoginShareClick.val=!1,d.Player.ShareIsClick.val=!1,d.Player.saveData()}})},n.CheckNeedAuthUserInfo=function(){var t=this,e=this;return new Promise((function(n){t._sdk?null!=e._selfInfo?n(!1):t._sdk.getSetting({success:function(t){n(null==t.authSetting["scope.userInfo"])},fail:function(){n(!0)}}):n(!1)}))},n.SetNeedAuthUserInfo=function(t){},n.CheckIsAuthedFriendInfo=function(){return Promise.resolve(!0)},n.loadAllAd=function(){this._sdk&&this.loadRewardedVideoAd(g)},n.loadRewardedVideoAd=function(t){if(this._sdk){var e=this._sdk.createRewardedVideoAd({adUnitId:t,multiton:!1});null!=e&&(e.onLoad(this.onRewardVideoAdLoaded.bind(this)),e.onError(this.onRewardVideoAdError.bind(this)),e.onClose(this.onRewardVideoAdClose.bind(this)),e.load())}},n.onRewardVideoAdLoaded=function(){c.log("tt rewardedVideoAd onLoad")},n.onRewardVideoAdError=function(t){c.log("tt rewardVideoAd onError:"),this._willShowAd=!1,this._endCallback&&this._endCallback(!1),this._endCallback=void 0},n.onRewardVideoAdClose=function(t){c.log("tt rewardVideoAd onClose:",t),this._willShowAd=!1,this._endCallback&&this._endCallback(t.isEnded),this._endCallback=void 0},n.loadInterstitialAd=function(t){if(this._sdk){var e=this._sdk.createInterstitialAd({adUnitId:t});null!=e&&(e.onLoad(this.onInterstitilaAdLoaded.bind(this)),e.load())}},n.onInterstitilaAdLoaded=function(){c.log("tt interstitialAd onLoad")},n.createRewardedVideoAd=function(t,e,n){if(void 0===n&&(n=!1),!this._sdk)return c.warn("tt 不是抖音环境，不加载广告"),t&&t(),e&&e(s.isBrowser),null;if(!this._willShowAd){this._willShowAd=!0,t&&t(),this._sdk.getNetworkType({success:function(t){c.log("tt getNetworkType:",t)}});var i=this._sdk.createRewardedVideoAd({adUnitId:g,multiton:n}),o=this;if(null!=i)return this._endCallback=e,i.show().then((function(){c.log("tt rewardVideoAd show")})).catch((function(t){c.log("tt rewardVideoAd show error:",t),o._willShowAd=!1,e&&e(!1),i.load()})),i}},n.createInterstitialAd=function(t,e){var n=this;if(!this._sdk)return c.warn("tt 不是抖音环境，不加载广告"),t&&t(),e&&e(!1),null;if(!this._isInterstitialAdLoaded)return c.warn("tt 插屏广告未加载"),null;t&&t(),this._sdk.getNetworkType({success:function(t){c.log("tt getNetworkType:",t)}});var i=this._sdk.createInterstitialAd({adUnitId:k});if(null!=i){i.onError((function t(n){c.log("tt interstitialAd onError:",n),e&&e(!1),i.offError(t)}));i.onClose((function t(n){c.log("tt interstitialAd onClose:",n),e&&e(null!=n&&n.isEnded),a.resumeMusic(),i.offClose(t)}));var s=i.show();return c.log("tt interstitialAd show"),s.then((function(){n._isInterstitialAdLoaded=!1,c.log("tt interstitialAd showCallback")})).catch((function(t){c.log("tt interstitialAd show error:",t),e&&e(!1),i.load()})).finally((function(){c.log("tt interstitialAd show finally")})),i}},n.saveError=function(t){if(this._sdk){var e=this._sdk.getFileSystemManager(),n=tt.env.USER_DATA_PATH+"/error_log_"+Date.now()+".txt";e.writeFile({filePath:n,data:JSON.stringify(t),complete:function(t){c.log("tt writeFile complete",n,t)}})}},n.GetTTEnvVersion=function(){return this._sdk?this._sdk.getEnvInfoSync().microapp.envType:""},n.CheckSidebar=function(){var t=this;return new Promise((function(e,n){t._sdk?t._sdk.checkScene({scene:"sidebar",success:function(t){c.log("tt checkScene success",t.isExist,t.errMsg),e(t.isExist)},fail:function(t){c.warn("tt checkScene fail",t.errNo,t.errMsg),e(!1)}}):e(!1)}))},n.NavigateToSidebar=function(){this._sdk&&this._sdk.navigateToScene({scene:"sidebar"})},n.Login=function(){var t=this;return this._sdk?new Promise((function(e,n){t._sdk?t._sdk.login({success:function(t){c.log("tt login success",t.isLogin),e(t.isLogin)},fail:function(t){c.warn("tt login fail",t.errNo,t.errMsg),e(!1)}}):e(!0)})):Promise.resolve()},e(t,[{key:"MenuHeight",get:function(){return this._menuHeight}},{key:"MenuTop",get:function(){return this._menuTop}},{key:"MenuBottom",get:function(){return this._menuBottom}}]),t}()).instance=void 0,h=f))||h);t("default",A.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./Log.ts"],(function(n){var t,a,e,s,o,r;return{setters:[function(n){t=n.createClass},function(n){a=n.cclegacy,e=n._decorator,s=n.JsonAsset},function(n){o=n.BundleManager},function(n){r=n.default}],execute:function(){var i,c;a._RF.push({},"6f077uhhWRBbIZ4pJh4J86g","CfgManager",void 0);var u=e.ccclass,l=(e.property,u("CfgManager")(((c=function(){function n(){this._datas=new Map,this._load=!1}n.getInstance=function(){return null==this.instance&&(this.instance=new n),this.instance};var a=n.prototype;return a.loadAll=function(n){var t=this,a=this;o.loadConfigBundle((function(e,o){o.loadDir("/",s,(function(e,s){e?r.error("load json error: "+e):(s.forEach((function(n){n.json&&a._datas.set(n.name,n.json)})),t._load=!0,n&&n())}))}))},a.getCfg=function(n){var t={};return this._datas.has(n)&&(t=this._datas.get(n)),t},t(n,[{key:"IsLoad",get:function(){return this._load}}]),n}()).instance=void 0,i=c))||i);n("default",l.getInstance());a._RF.pop()}}}));

System.register("chunks:///_virtual/ChallengeBottleRackItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./DataManager.ts","./UIBase.ts","./GameUtils.ts","./BottleItemPool.ts","./LongBottleItemPool.ts","./auto_ChallengeBottleRackItem.ts","./BottleItem.ts","./LongBottleItem.ts"],(function(t){var e,i,o,n,l,a,s,c,r,h,u,_,d,f,b,g,p,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,s=t.Prefab,c=t.Layout,r=t.UITransform},function(t){h=t.GameDefine},function(t){u=t.default},function(t){_=t.GUIBase},function(t){d=t.default},function(t){f=t.default},function(t){b=t.default},function(t){g=t.default},function(t){p=t.default},function(t){k=t.default}],execute:function(){var I,L,C,B,m,v,y,D;l._RF.push({},"d6067eSFY9EnqzMtTHCF089","ChallengeBottleRackItem",void 0);var E=a.ccclass,S=a.property;t("default",(I=E("ChallengeBottleRackItem"),L=S(s),C=S(s),I(((D=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return(e=t.call.apply(t,[this].concat(l))||this)._ui=void 0,o(e,"bottlePrefab",v,n(e)),o(e,"longBottlePrefab",y,n(e)),e._bottleList=[],e._bottleData=[],e._isEditor=!1,e._isSwapEnable=!1,e._index=-1,e._maxShowHeight=-1,e.onClickListener=void 0,e.onLiquidCheckCallback=void 0,e}i(e,t);var l=e.prototype;return l.onInit=function(t){var e=t[0];this._index=e.index,this._bottleData=e.bottleData,this._isEditor=e.isEditor,this._maxShowHeight=e.maxShowHeight,this.onClickListener=e.onClickListener,this.onLiquidCheckCallback=e.onLiquidCheckCallback},l.onUILoad=function(){f.setBottlePrefab(this.bottlePrefab),b.setBottlePrefab(this.longBottlePrefab),this._ui=this.node.addComponent(g),this._ui.spr_rack_bg.active=this._isEditor,this.UpdateRackData(this._bottleData)},l.onUIStart=function(){},l.onUIEnable=function(){},l.onUIDisable=function(){},l.onUIDestroy=function(){this.onClickListener=void 0},l.UpdateRackData=function(t){var e=this;this.RecycleBottles(),this._bottleData=t;var i=0,o=0;this._bottleData.forEach((function(t){var e=t.segment;e>i&&(i=e),e>=h.LONG_BOTTLE_MIN_LENGTH&&(o+=e-h.LONG_BOTTLE_MIN_LENGTH+1)}));var n=d.GetChallengeBottleSpacingY(i);243*t.length+n*(t.length-1)+h.LIQUID_SIZE.height*o<this._maxShowHeight&&0==o&&(n=(this._maxShowHeight-243*t.length-h.LIQUID_SIZE.height*o)/(t.length-1)),this._ui.layout_bottles.getComponent(c).spacingY=n;for(var l=u.Player.SkinId.val,a=0;a<this._bottleData.length;a++){var s=this._bottleData[a].showingBottle,_=s.bottle,g=s.unknowns;if((!g||0==g.length)&&(g=new Array(_.length).fill(0),s.unknown_bottle))for(var k=s.unknown_bottle_index||-1,I=0;I<_.length;I++)I<=k&&(g[I]=1);var L=void 0;if(_.length>=h.LONG_BOTTLE_MIN_LENGTH){var C={liquids:_,isEditorBottle:this._isEditor,unknowns:g,isVideoBottle:s.video_bottle,collectType:s.collect_type};L=b.getBottleItem(C)}else{var B={subLevelIndex:0,liquids:_,isVideoBottle:s.video_bottle,unknowns:g,unlockId:this._bottleData[a].unlockId,keyIndex:s.key_index,unlockColor:this._bottleData[a].unlockColor,isHiddenBottle:this._bottleData[a].unlockColor>0,isStoneBottle:1==this._bottleData[a].stoneBottle,skinId:l,isEditorBottle:this._isEditor,collectType:s.collect_type,completeType:s.complete_type,bottleType:this._bottleData[a].bottleType,showShadow:!1};L=f.getBottleItem(B)}this._ui.layout_bottles.addChild(L.node),this._bottleList.push(L),L.Init(_.length),L.UpdateDefaultUI(),L.SetOnClickListener((function(t){e.OnBottleClick(t)})),this._isEditor&&(L.SetOnLiquidCheckListener((function(t,i){if(i.toggle.isChecked){var o=e._bottleList.findIndex((function(e){return e==t})),n=e._bottleList[o].liquids.findIndex((function(t){return t==i}));e.OnBottleLiquidCheck(e._index,o,n)}})),L.SetSwapEnable(this._isSwapEnable)),L instanceof p&&L.UpdateDepth(this._bottleData[a].remainDepth)}this._isEditor&&this.scheduleOnce((function(){var t=e._ui.spr_rack_bg.getComponent(r).contentSize;e._ui.spr_rack_bg.getComponent(r).setContentSize(t.width,e._ui.layout_bottles.getComponent(r).contentSize.height)}))},l.OnBottleClick=function(t){if(null!=this.onClickListener){var e=this._bottleList.indexOf(t);this.onClickListener(this._index,e,t)}},l.OnBottleLiquidCheck=function(t,e,i){this.onLiquidCheckCallback&&this.onLiquidCheckCallback(t,e,i)},l.SetSwapEnable=function(t){this._isSwapEnable=t,this._bottleList.forEach((function(e){e.SetSwapEnable(t)}))},l.RecycleBottles=function(){for(var t=0;t<this._bottleList.length;t++){var e=this._bottleList[t];e instanceof p?f.recycleBottleItem(e):e instanceof k&&b.recycleBottleItem(e)}this._bottleList=[]},e}(_))._prefabUrl="widget/ChallengeBottleRackItem",D._className="ChallengeBottleRackItem",v=e((m=D).prototype,"bottlePrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(m.prototype,"longBottlePrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=m))||B));l._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtils.ts",["cc"],(function(t){var n,o;return{setters:[function(t){n=t.cclegacy,o=t._decorator}],execute:function(){var c;n._RF.push({},"3fb52Waq5NONKSuG7wX2UwR","CommonUtils",void 0);var r=o.ccclass;o.property,t("CommonUtils",r("CommonUtils")(c=function(){function t(){}return t.isNull=function(t){return null==t},t}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./TASaveData.ts","./User.ts","./Defines.ts","./Utils.ts"],(function(e){var t,n,i,s,r,a,u;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy},function(e){i=e.Player},function(e){s=e.TASaveData},function(e){r=e.User},function(e){a=e.EChannel},function(e){u=e.default}],execute:function(){n._RF.push({},"f4804jPc5BIypjy1f/bt491","DataManager",void 0);var l=function(){function e(){this._debug=!0,this._channel=a.EChannel_Web,this._player=void 0,this._user=null,this._isNewUser=!1,this._TA=null}e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance};var n=e.prototype;return n.createPlayer=function(e){null!=this._player&&this.deletePlayer(),this._player=new i(e),this._player&&this._player.initData()},n.deletePlayer=function(e){void 0===e&&(e=!1),null!=this._player&&(e?this._player.deleteData():this._player.saveData(),this._player=null)},n.createUser=function(){var e=!1;return null==this._user&&(this._user=new r,e=0==this._user.UserFlag.val,this._user.initData()),this._isNewUser=e,e},n.getServerTime=function(){return u.GetTime()},n.createTA=function(){null==this._TA&&(this._TA=new s,this._TA.initData())},t(e,[{key:"Debug",get:function(){return this._debug}},{key:"Channel",get:function(){return this._channel},set:function(e){this._channel=e}},{key:"Player",get:function(){return this._player}},{key:"User",get:function(){return this._user}},{key:"isNewUser",get:function(){return this._isNewUser}},{key:"TA",get:function(){return this._TA}}]),e}();l.instance=void 0;e("default",l.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/DeepClone.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){var t;n._RF.push({},"fb835eW4ZpIe6h8WTmIKmQO","DeepClone",void 0);var a=e("DeepClone",function(){function e(){}return e.clone=function(r){var n=new Map;return e._clone(r,0,n)},e._clone=function(n,t,a){if(t>=e.maxDepth)throw new Error("DeepClone: Maximum depth of "+e.maxDepth+" exceeded");if(null===n||"object"!=typeof n)return n;if(e.handleCircular&&a.has(n))return a.get(n);for(var o,u=r(e.handlers);!(o=u()).done;){var c=o.value,l=c[0],f=c[1];if(n instanceof l)return f(n)}return Array.isArray(n)?e.defaultHandlers.array(n,t,a):n instanceof Date?e.defaultHandlers.date(n):n instanceof RegExp?e.defaultHandlers.regexp(n):n instanceof Map?e.defaultHandlers.map(n,t,a):n instanceof Set?e.defaultHandlers.set(n,t,a):e.defaultHandlers.object(n,t,a)},e.registerHandler=function(r,n){e.handlers.set(r,n)},e.unregisterHandler=function(r){e.handlers.delete(r)},e.clearHandlers=function(){e.handlers.clear()},e.setMaxDepth=function(r){if(r<1)throw new Error("Depth must be at least 1");e.maxDepth=r},e.getMaxDepth=function(){return e.maxDepth},e.setHandleCircular=function(r){e.handleCircular=r},e.getHandleCircular=function(){return e.handleCircular},e}());t=a,a.maxDepth=100,a.handleCircular=!0,a.handlers=new Map,a.defaultHandlers={array:function(e,r,n){if(n.has(e))return n.get(e);var a=[];n.set(e,a);for(var o=0;o<e.length;o++)a[o]=t._clone(e[o],r+1,n);return a},date:function(e){return new Date(e.getTime())},regexp:function(e){return new RegExp(e.source,e.flags)},map:function(e,r,n){if(n.has(e))return n.get(e);var a=new Map;return n.set(e,a),e.forEach((function(e,o){a.set(t._clone(o,r+1,n),t._clone(e,r+1,n))})),a},set:function(e,r,n){if(n.has(e))return n.get(e);var a=new Set;return n.set(e,a),e.forEach((function(e){a.add(t._clone(e,r+1,n))})),a},object:function(e,n,a){if(a.has(e))return a.get(e);var o=Object.getPrototypeOf(e),u=Object.create(o);a.set(e,u);for(var c,l=[].concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),f=r(l);!(c=f()).done;){var i=c.value,s=Object.getOwnPropertyDescriptor(e,i);s&&("value"in s&&(s.value=t._clone(s.value,n+1,a)),Object.defineProperty(u,i,s))}return u}},n._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(e){var n,_,T;return{setters:[function(e){n=e.cclegacy,_=e.Color,T=e.Size}],execute:function(){e({Constant:void 0,Debug:void 0,GameDefine:void 0,GameEvent:void 0,Sfx:void 0}),n._RF.push({},"28f5ecthwpGYZAeqGUFMMg9","Defines",void 0);var E,O;e("GAME_VERSION","1.0.12"),e("EChannel",function(e){return e[e.EChannel_Web=0]="EChannel_Web",e[e.EChannel_Google=1]="EChannel_Google",e[e.EChannel_Fackbook=2]="EChannel_Fackbook",e}({})),e("EGameTipsType",function(e){return e[e.EDailyTask=0]="EDailyTask",e[e.ETheme=1]="ETheme",e[e.ESkin=2]="ESkin",e[e.EAchieve=3]="EAchieve",e[e.EChallenge=4]="EChallenge",e}({}));(O=E||(E=e("Debug",{}))).LogEnable=1,O.Test=0,O.TestButton=0,O.NoShuffleMap=0,O.ServerTime10MinForOneDay=0,O.ServerTimeUseLoacalTime=0,O.ShowError=0,O.ABTest=0;var L,t,N,o,S,w,i,a,C=e("PROP_ID",function(e){return e[e.NONE=0]="NONE",e[e.REFRESH=1]="REFRESH",e[e.ADD_TIME=2]="ADD_TIME",e[e.VANISH_COLOR=3]="VANISH_COLOR",e[e.STEP_BACK=4]="STEP_BACK",e[e.UNLOCK_BOTTLE=5]="UNLOCK_BOTTLE",e}({}));(t=L||(L=e("Sfx",{}))).MUSIC_BG="bgmusic",t.SOUND_BUTTON="button",t.SOUND_COLLECT_BOTTLE="shot",t.SOUND_GAME_WIN="win",t.SOUND_GAME_FAIL="fail",t.SOUND_PICK_BOTTLE="pick",t.SOUND_VANISH_COLOR="up",t.SOUND_POUR_WATER_1="water1",t.SOUND_POUR_WATER_2="water2",t.SOUND_POUR_WATER_3="water3",t.SOUND_POUR_WATER_4="water4",t.SOUND_REFRESH_COLOR="star",t.SOUND_GFIT_BOX="box",t.SOUND_LEVEL_UP="levelup",t.SOUND_GET_GIFT="gift",t.SOUND_PROP_ADD_TIME="propaddtime",t.SOUND_PROP_STEP_BACK="propstepback",t.SOUND_PROP_UNLOCK_BOTTLE="propunlockbottle",t.SOUND_PROP_UNLOCK_BOTTLE_2="propunlockbottle2",t.SOUND_PROP_VANISH_COLOR="propvanishcolor",t.SOUND_RANK_UP="rankup",t.SOUND_TRANSFER_BOTTLE="transferbottle",t.SOUND_TASK_BOTTLE="taskbottle",t.SOUND_LOCK_BOOTLE="lockbottle",t.SOUND_PICK_UP_DRIP="pickupdrip",t.SOUND_DROP_DRIP="dropdrip",(o=N||(N=e("GameEvent",{}))).EventGameSettle="event_game_settle",o.EventGameTips="event_game_tips",o.EventPropCountChange="event_prop_count_change",o.EventGameGiveUp="event_game_give_up",o.EventSkipGuide="event_guide_skip",o.EventGameOneKeyClear="event_game_one_key_clear",o.EventChangeThemeChoose="Event_ChangeThemeChoose",o.EventChangeSkinChoose="Event_ChangeSkinChoose",o.EventShareSuccess="event_share_success",o.EventShowGameClube="Event_ShowGameClube",o.EventHideGameClube="Event_HideGameClube",o.EventShowSharReward="Event_ShowShareReward",o.EventWindowResize="Event_WindowResize",o.EventShowStartAnim="Event_ShowStartAnim",o.EventGameSkip="event_game_skip",o.EventSubLevelSkip="event_sub_level_skip",o.EventGameSkipToLevel="event_sub_level_skip_to_level",o.EventGameReduceTime="event_game_reduce_time",o.EventUIClose="EvenTaskUIClose",(w=S||(S=e("Constant",{}))).signInToolId=[C.STEP_BACK,C.STEP_BACK,C.VANISH_COLOR,C.STEP_BACK,C.STEP_BACK,C.STEP_BACK,C.VANISH_COLOR],w.signInToolNum=[1,1,1,1,1,1,1],w.totalSkinNum=10,w.totalThemeNum=10,w.challengeLevel=6,(a=i||(i=e("GameDefine",{}))).LiquidColors=[new _(0,0,0,0),new _(247,220,37,255),new _(40,214,15,255),new _(255,113,36,255),new _(24,220,255,255),new _(255,55,180,255),new _(6,179,135,255),new _(62,76,255,255),new _(178,106,67,255),new _(147,45,236,255),new _(255,40,24,255),new _(0,115,181,255),new _(118,122,0,255),new _(197,153,0,255),new _(25,242,202,255),new _(255,103,103,255)],a.DripColors=[new _(0,0,0,0),new _(255,244,75,255),new _(47,239,20,255),new _(255,143,83,255),new _(56,234,255,255),new _(255,119,204,255),new _(120,201,192,255),new _(70,135,255,255),new _(226,145,101,255),new _(186,107,255,255),new _(255,97,85,255),new _(80,153,223,255),new _(168,174,50,255),new _(223,186,58,255),new _(137,236,205,255),new _(255,148,146,255)],a.BottleColors=[new _(255,255,255,255),new _(255,248,200,255),new _(214,255,208,255),new _(255,236,212,255),new _(199,247,255,255),new _(255,211,239,255),new _(198,255,240,255),new _(219,235,255,255),new _(243,230,211,255),new _(235,213,255,255),new _(255,203,199,255),new _(218,241,255,255),new _(242,244,186,255),new _(252,253,209,255),new _(227,255,250,255),new _(255,240,240,255)],a.BottleShadowColors=[new _(255,255,255,255),new _(255,230,59,255),new _(111,255,90,255),new _(255,153,97,255),new _(0,216,255,255),new _(255,111,201,255),new _(0,171,157,255),new _(57,113,255,255),new _(148,112,93,255),new _(185,107,255,255),new _(255,55,41,255),new _(0,135,212,255),new _(118,122,0,255),new _(197,153,0,255),new _(6,235,193,255),new _(249,81,81,255)],a.HiddenBottleColors=[new _(255,255,255,255),new _(255,222,0,255),new _(30,236,0,255),new _(255,108,0,255),new _(0,216,255,255),new _(255,40,174,255),new _(0,163,150,255),new _(62,76,255,255),new _(198,101,47,255),new _(152,33,255,255),new _(255,40,24,255),new _(3,106,165,255),new _(118,122,0,255),new _(186,144,0,255),new _(75,255,222,255),new _(255,93,93,255)],a.LIQUID_COLOR_UNKNOWN=new _(68,66,61,255),a.BOTTLE_TYPE_EMPTY=0,a.BOTTLE_TYPE_VIDEO=-1,a.BOTTLE_TYPE_UNLOCK=-2,a.DEFAULT_BOTTLE_SEGEMENT=5,a.BOTTLE_WIDTH=79,a.LIQUID_SIZE=new T(133,35.8),a.LONG_BOTTLE_MIN_LENGTH=6,a.LEVEL_COUNT_PER_RANK_LEVEL=6,a.LEVEL_COUNT_PER_GIFT_BOX=5,a.LEVEL_COUNT_PER_GIFT_BOX_B=10,a.MOVE_BOTTLE_TIME_SCALE=2.2,a.POUR_TIME_SCALES=[1.2,1,.8,.6,.6],a.FRAME_TIME=1/30,a.BOTTLE_TOP_ANCHORS=[76/133,99/133,92/133,85/133,86/133,80/133,79/133,78/133,85/133,92/133],a.PLAYER_HEADER_DEFAULT="common/moren",a.LEVEL_GUIDE=1,a.GuideSteps=[{id:0,desc:"选中上面这个杯子。"},{id:1,desc:"倒入空杯中。"},{id:3,desc:"再选中这个颜色的杯子。"},{id:0,desc:"只能倒入最上面一层水相同颜色的杯子。",wrongIndexes:[1]},{id:3,desc:"按上述步骤完成接下来的操作吧。"},{id:1,desc:"按上述步骤完成接下来的操作吧。"},{id:3,desc:"按上述步骤完成接下来的操作吧。"},{id:0,desc:"按上述步骤完成接下来的操作吧。"}],a.MAP_ID_UNLOCK_BOTTLE_GUIDE=3001,a.StuckGuideSteps=[{id:0,desc:""},{id:1,desc:""},{id:3,desc:"解锁空瓶获得额外空间"}];e("NewTypeOpenLevels",function(e){return e[e.None=0]="None",e[e.UNKNOWN_BOTTLE=5]="UNKNOWN_BOTTLE",e[e.TRANSITION_BOTTLE=7]="TRANSITION_BOTTLE",e[e.COLOR_BOTTLE=9]="COLOR_BOTTLE",e[e.TRANSFER_BOTTLE=15]="TRANSFER_BOTTLE",e[e.TASK_BOTTLE=19]="TASK_BOTTLE",e[e.HIDDEN_BOTTLE=51]="HIDDEN_BOTTLE",e[e.STONE_BOTTLE=81]="STONE_BOTTLE",e[e.LOCK_BOTTLE=105]="LOCK_BOTTLE",e}({})),e("GuideType",function(e){return e[e.NONE=0]="NONE",e[e.UNKNOWN_BOTTLE=1]="UNKNOWN_BOTTLE",e[e.LOCK_BOTTLE=2]="LOCK_BOTTLE",e[e.COLOR_BOTTLE=3]="COLOR_BOTTLE",e[e.TRANSFER_BOTTLE=4]="TRANSFER_BOTTLE",e[e.TASK_BOTTLE=5]="TASK_BOTTLE",e[e.TRANSITION_BOTTLE=6]="TRANSITION_BOTTLE",e[e.HIDDEN_BOTTLE=7]="HIDDEN_BOTTLE",e[e.LONG_BOTTLE=8]="LONG_BOTTLE",e[e.STONE_BOTTLE=9]="STONE_BOTTLE",e[e.ALL_LONG_BOTTLE=10]="ALL_LONG_BOTTLE",e}({})),e("GameType",function(e){return e[e.NORMAL=1]="NORMAL",e[e.CHALLENGE=2]="CHALLENGE",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/DGPlatformInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DGPlatform.js","./DGJsb.js","./DGAdDefine.js","./DGDcb.js","./DGDcbDefault.js","./DGDcbDefine.js","./DGDcb_Android.js","./DGDcb_iOS.js","./DGDcb_Web.js","./DGIapDefine.js","./DGTA.js","./DGTADefault.js","./DGTA_Android.js","./DGTA_Web.js","./DGPlatformDefault.js","./DGPlatform_Android.js","./DGPlatform_Wx.js","./Defines.ts","./DataManager.ts","./Log.ts","./PlatformManager.ts","./TAData.ts"],(function(n){var t,e,l,s,a,c,i,o,u,r,f,D,g,d,G,h,A;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){l=n.cclegacy,s=n._decorator,a=n.director,c=n.sys,i=n.Component},function(n){o=n.DGPlatform},function(n){u=n.DGJsb},null,function(n){r=n.DGDcb},null,function(n){f=n.DGDcbServiceHost},null,null,null,null,null,null,null,null,null,null,null,function(n){D=n.Debug,g=n.GAME_VERSION},function(n){d=n.default},function(n){G=n.default},function(n){h=n.default},function(n){A=n.TAData}],execute:function(){var b,_;l._RF.push({},"ebebfNAmvdFEZtUHvHSgUpQ","DGPlatformInit",void 0);var j=s.ccclass;n("default",j("DGPlatformInit")(((_=function(n){function l(){for(var t,e=arguments.length,l=new Array(e),s=0;s<e;s++)l[s]=arguments[s];return(t=n.call.apply(n,[this].concat(l))||this)._isS3Init=!1,t._callback=void 0,t}t(l,n);var s=l.prototype;return s.onLoad=function(){var n,t,e,s,i,d;l.instance=this,a.addPersistRootNode(this.node);var A,b,_=!!D.Test,j=!!D.Test,p=h.GetPlatformPackageName(),v=g,T=f.Cn;(u.setLogging(_),null==(n=(t=o.getInstance()).setDebugMode)||n.call(t,_,j),null==(e=(s=o.getInstance()).setPackageName)||e.call(s,p),null==(i=(d=o.getInstance()).setAppVersion)||i.call(d,v),r.getInstance().listener={onConfigsLoaded:function(){G.log("DG onConfigsLoaded"),l.Mgr._isS3Init=!0,l.Mgr.checkLaunchTA()},onConfigsFailed:function(){G.log("DG onConfigsFailed"),l.Mgr._isS3Init=!0,l.Mgr.checkLaunchTA()}},c.isBrowser)?(G.log("DG isBrowser"),l.Mgr._isS3Init=!0,l.Mgr.checkLaunchTA()):(null==(A=(b=r.getInstance()).requestConfigs)||A.call(b,T),G.log("DG requestConfigs",T))},s.notifyABSet=function(n){this._isS3Init?this.launchTA(n):this._callback=n},s.checkLaunchTA=function(){this._callback&&(this.launchTA(this._callback),this._callback=void 0)},s.launchTA=function(n){d.createTA(),A.Mgr.launch(),A.Mgr.sendEventAppLaunch(d.isNewUser),n&&n()},e(l,null,[{key:"Mgr",get:function(){return l.instance}}]),l}(i)).instance=void 0,b=_))||b);l._RF.pop()}}}));

System.register("chunks:///_virtual/EllipsisLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,l,a,n,r,s,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,s=e.Label,o=e.UITransform,c=e.Component}],execute:function(){var h,u,b,p,d,g,f;n._RF.push({},"235fdpHth9CMrl13GbXVysx","EllipsisLabel",void 0);var C=r.ccclass,S=r.property;e("EllipsisLabel",(h=C("EllipsisLabel"),u=S(s),h(((f=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,l(t,"label",d,a(t)),l(t,"maxWidth",g,a(t)),t}i(t,e);var n=t.prototype;return n.onLoad=function(){this.updateTextWithEllipsis()},n.setString=function(e){this.label.string=e,this.label.updateRenderData(!0),this.updateTextWithEllipsis()},n.updateTextWithEllipsis=function(){var e=this.label.string,i=this.maxWidth||this.label.node.getComponent(o).width;if(this.label.node.getComponent(o).width>i){var l=t.GetLabelStringCache(e,i);if(""!=l)return this.label.string=l,void this.label.updateRenderData(!0);for(var a=e,n=e.length;n>0;n--)if(a=e.substring(0,n)+"...",this.label.string=a,this.label.updateRenderData(!0),this.label.node.getComponent(o).width<=i){t.AddLabelStringCache(e,a,i);break}}},t.AddLabelStringCache=function(e,i,l){null==t._labelStringCache[e]&&(t._labelStringCache[e]={}),t._labelStringCache[e][l]=i},t.ClearLabelStringCache=function(){t._labelStringCache={}},t.GetLabelStringCache=function(e,i){return null!=t._labelStringCache[e]&&null!=t._labelStringCache[e][i]?t._labelStringCache[e][i]:""},t}(c))._labelStringCache={},d=t((p=f).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(p.prototype,"maxWidth",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=p))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/ErrorInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,o,t,n,i,a,s,l,c,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,o=r.inheritsLoose,t=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){i=r.cclegacy,a=r._decorator,s=r.Label,l=r.UITransform,c=r.view,u=r.Component}],execute:function(){var f,p,h,b,g;i._RF.push({},"0de93H1+ZpAwbMrkCrhYFmv","ErrorInfo",void 0);var d=a.ccclass,v=a.property;r("ErrorInfo",(f=d("ErrorInfo"),p=v(s),f((g=e((b=function(r){function e(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=r.call.apply(r,[this].concat(i))||this,t(e,"errorLabel",g,n(e)),e}o(e,r);var i=e.prototype;return i.start=function(){},i.update=function(r){},i.setError=function(r){var e=this;this.errorLabel.string=r,this.scheduleOnce((function(){e.errorLabel.node.getComponent(l).height<c.getVisibleSize().height&&(e.errorLabel.overflow=s.Overflow.SHRINK,e.errorLabel.node.getComponent(l).setContentSize(c.getVisibleSize()))}))},i.getError=function(){return this.errorLabel.string},i.onClose=function(){this.node.removeFromParent(),this.node.destroy()},e}(u)).prototype,"errorLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=b))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["cc"],(function(n){var t,e,a;return{setters:[function(n){t=n.cclegacy,e=n._decorator,a=n.EventTarget}],execute:function(){var c,r;t._RF.push({},"12736Hj87ZOobLP/UDrXFn+","EventManager",void 0);var s=e.ccclass,i=(e.property,n("EventManager",s("EventManager")(((r=function(){function n(){}return n.getInstance=function(){return null==this.instance&&(this.instance=new a),this.instance},n}()).instance=void 0,c=r))||c));n("default",i.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/ExceptionHandler.ts",["cc","./ErrorInfo.ts","./Defines.ts","./UIHelp.ts"],(function(r){var n,e,o,t,i;return{setters:[function(r){n=r.cclegacy,e=r.sys},function(r){o=r.ErrorInfo},function(r){t=r.Debug},function(r){i=r.default}],execute:function(){n._RF.push({},"1fdd09bOhlF2re1e53q3WDH","ExceptionHandler",void 0);r("ExceptionHandler",function(){function r(){}return r.init=function(){window.addEventListener("error",r.handleWindowError),window.addEventListener("unhandledrejection",r.handlePromiseRejection),e.isNative&&(window.__errorHandler=function(n,e,o,t){console.warn("name: "+n),console.warn("line: "+e),console.warn("msg: "+o),console.warn("stack: "+t);var i=n+" "+e+" "+o+" "+t;r.showErrorOnScreen(i)})},r.handleWindowError=function(n){return console.warn("[Global Error]",n.message,n.filename,n.lineno,n.colno,n.error),r.reportError(n.error||n.message),!0},r.handlePromiseRejection=function(n){console.warn("[Unhandled Promise Rejection]",n.reason),r.reportError(n.reason),n.preventDefault()},r.handleNativeError=function(n){console.warn("[Native Error]",n.message,n.stack),r.reportError(n)},r.reportError=function(n){r.showErrorOnScreen(n.toString())},r.showErrorOnScreen=function(r){t.ShowError&&i.AddErrorInfoNode().then((function(n){var e=n.getComponent(o).getError();n.getComponent(o).setError(r+"\n"+e)})).catch((function(r){console.warn(r)}))},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/FinishRankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./UIHelp.ts","./BadgeUtil.ts","./auto_FinishRankItem.ts","./EllipsisLabel.ts","./tableViewCell.ts"],(function(e){var n,t,i,a,l,o,r,s,_,u,c,h;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,a=e.Color,l=e.Sprite,o=e.Label},function(e){r=e.GameDefine},function(e){s=e.default},function(e){_=e.BadgeUtil},function(e){u=e.default},function(e){c=e.EllipsisLabel},function(e){h=e.TableViewCell}],execute:function(){var p,g;t._RF.push({},"31449HA9xtM2JlVyNTo/EAH","FinishRankItem",void 0);var m=i.ccclass;i.property,e("default",m("FinishRankItem")(((g=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this)._ui=void 0,n._rankData=void 0,n}n(t,e);var i=t.prototype;return i.onInit=function(e){this._rankData=e[0]},i.onUILoad=function(){this._ui=this.node.addComponent(u),this._rankData&&this.setContent(this._rankData)},i.onUIStart=function(){},i.onUIEnable=function(){},i.onUIDisable=function(){},i.onUIDestroy=function(){},i.setContent=function(e){var n,t,i;switch(this._ui.spr_rank_node_bg.active=e.visible,e.rank){case 1:n=new a(255,179,36),t=new a(255,231,134),i=new a(145,51,0);break;case 2:n=new a(23,165,255),t=new a(138,210,255),i=new a(20,63,91);break;case 3:n=new a(38,208,171),t=new a(100,247,215),i=new a(16,79,65);break;default:e.isSelf?(n=new a(157,133,187),t=new a(199,180,226),i=new a(255,255,255)):(n=new a(227,225,230),t=new a(255,255,244),i=new a(130,115,150))}var u=e.isSelf&&e.rank>3;this._ui.spr_rank_node_bg.getComponent(l).color=n,this._ui.spr_rank_bg.getComponent(l).color=t,this._ui.lab_rank.getComponent(o).color=i,this._ui.lab_rank.getComponent(o).enableOutline=u,this._ui.label_rank_level.getComponent(o).color=i,this._ui.label_rank_level.getComponent(o).enableOutline=u,this._ui.label_nickname.getComponent(o).color=i,this._ui.label_nickname.getComponent(o).enableOutline=u,this._ui.label_level.getComponent(o).color=i,this._ui.label_level.getComponent(o).enableOutline=u,this._ui.lab_rank.getComponent(o).string=e.rank.toString(),e.localAvatar?s.SetSpriteFrame(this._ui.spr_header,e.localAvatar):e.avatarUrl?this._ui.spr_header.tag!=e.avatarUrl&&(s.SetSpriteFrame(this._ui.spr_header,r.PLAYER_HEADER_DEFAULT),s.SetRemoteSpriteFrame(this._ui.spr_header,e.avatarUrl)):(this._ui.spr_header.tag=null,this._ui.spr_header.getComponent(l).spriteFrame=null),this._ui.label_nickname.getComponent(c).setString(e.nickName),_.SetBadgeIcon(this._ui.spr_rank_icon,e.rankLevel),this._ui.label_rank_level.getComponent(o).string=_.GetBadgeName(e.rankLevel),0!=e.level||e.isSelf||(e.level=1),this._ui.label_level.getComponent(o).string=e.level.toString()},t}(h))._prefabUrl="widget/FinishRankItem",g._className="FinishRankItem",p=g))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameAdMgr.ts",["cc","./LevelMapLoader.ts","./DataManager.ts","./Log.ts","./Utils.ts","./PlatformManager.ts","./TAData.ts","./WechatManager.ts"],(function(e){var t,a,i,d,o,n,_,r,s,c;return{setters:[function(e){t=e.cclegacy,a=e._decorator},function(e){i=e.LevelMapLoader},function(e){d=e.default},function(e){o=e.default},function(e){n=e.default},function(e){_=e.default},function(e){r=e.TAData},function(e){s=e.AD_UNIT_ID_REWARD_VIDEO,c=e.AD_UNIT_ID_INTERSTITIAL}],execute:function(){var l,v;t._RF.push({},"15dc6o36qtEnZZgY1IiZZf7","GameAdMgr",void 0);var u=a.ccclass,h=(a.property,e("EAdPlayType",function(e){return e[e.ad_none=0]="ad_none",e[e.ad_video_skin=1]="ad_video_skin",e[e.ad_video_theme=2]="ad_video_theme",e[e.ad_video_signin=3]="ad_video_signin",e[e.ad_video_gift=4]="ad_video_gift",e[e.ad_video_unlock_bottle=101]="ad_video_unlock_bottle",e[e.ad_video_unlock_bottle_prop=102]="ad_video_unlock_bottle_prop",e[e.ad_video_add_time=103]="ad_video_add_time",e[e.ad_video_step_back=104]="ad_video_step_back",e[e.ad_video_refresh_color=105]="ad_video_refresh_color",e[e.ad_video_vanish_color=106]="ad_video_vanish_color",e[e.ad_video_reborn=107]="ad_video_reborn",e[e.ad_video_add_time_dialog=108]="ad_video_add_time_dialog",e[e.ad_inter_finish=201]="ad_inter_finish",e[e.ad_inter_restart=202]="ad_inter_restart",e}({})));e("GameAdMgr",u("GameAdMgr")(((v=function(){function e(){this._testNoAd=!1,this._lastShowAdTime=0}e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance};var t=e.prototype;return t.ShowRewardVideoAd=function(e,t,a){if(this._testNoAd)return o.log("----测试去广告----"),a&&a(),void(t&&t(!0));var i=n.RandomUUID()+"_wechat",c=this,l=this.getSceneByType(e),v=h[e];return seeg.recordAdClick&&seeg.recordAdClick(l,v),_.createRewardedVideoAd((function(){r.Mgr.sendEventShowAd(i,s,e,"rewardedvideo","wechat"),d.TA.TotalRvAdWatchTimes.val++,d.TA.saveData(),a&&a(),c._lastShowAdTime=n.GetTime()}),(function(a){t&&t(a),r.Mgr.sendEventCloseAd(i,s,e,"rewardedvideo","wechat",a),seeg.reportAd({complete:a,name:v}),a&&(seeg.onAdViewed(l,v),d.TA.TotalRvAdRewardedTimes.val++,d.TA.saveData())}))},t.ShowInterstitialAd=function(e){if(d.Player.LevelId.val<=i.getUnlockBottleFreeLevel())o.log("前三关不显示插屏广告");else{var t=n.GetTime();if(t-this._lastShowAdTime<6e4)o.log("插屏广告冷却中",t,this._lastShowAdTime);else{if(!this._testNoAd){var a=n.RandomUUID()+"_wechat",s=this;return _.createInterstitialAd((function(){s._lastShowAdTime=n.GetTime(),r.Mgr.sendEventShowAd(a,c,e,"interstitial","wechat"),d.TA.TotalFsAdTimes.val++,d.TA.saveData()}),(function(t){r.Mgr.sendEventCloseAd(a,c,e,"interstitial","wechat",!0)}))}o.log("----测试去广告----")}}},t.SetNoAd=function(e){this._testNoAd=e},t.getSceneByType=function(e){var t=Math.floor(e/100);return 0==t?"hall":1==t?"game":2==t?"interstitial":"unknown"},e}())._instance=void 0,l=v))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameLevelSaveData.ts",["cc","./DataManager.ts","./Log.ts","./BottleData.ts","./StepRecord.ts"],(function(e){var t,a,s,n,r;return{setters:[function(e){t=e.cclegacy},function(e){a=e.default},function(e){s=e.default},function(e){n=e.BottleData2},function(e){r=e.StepRecord}],execute:function(){t._RF.push({},"6a632+X/JhIaKIfLRTL9mYa","GameLevelSaveData",void 0);e("GameLevelSaveData",function(){function e(){this.levelMap=[],this.stepRecordsArr=[],this.stepRecords=new Map,this.levelCfg=null,this.levelMapCfg=[],this.remainTime=0,this.curLevel=1,this.subLevelIndex=0,this.stepCount=[],this.propTimes=[],this.vanishColorCounts=[],this.vanishColorUseCounts=[],this.unlockBottleFreeCounts=[],this.unlockBottleVideoCounts=[],this.unlockBottlePropCounts=[],this.stepBackCounts=[],this.addTimeCount=[],this.rebornTimes=[],this.rebornShowTimes=[],this.watchVideoCount=[],this.levelTime=[]}return e.getResotreData=function(){try{var e=a.Player.GameLevelSaveData.val;if(""==e)return;var t=JSON.parse(e);return t.levelMap=t.levelMap.map((function(e){return e.map((function(e){return e.map((function(e){return new n(e)}))}))})),t.stepRecords=new Map,t.stepRecordsArr.forEach((function(e){var a=e[0],s=e[1];t.stepRecords.set(a,new r(s))})),t}catch(e){return void s.warn(e)}},e.clearSaveData=function(){a.Player.GameLevelSaveData.val="",a.Player.saveData()},e.saveData=function(e){e.stepRecordsArr=Array.from(e.stepRecords),a.Player.GameLevelSaveData.val=JSON.stringify(e),a.Player.saveData(!1)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GameMacros.ts",["cc"],(function(r){var e,t,a;return{setters:[function(r){e=r.cclegacy,t=r._decorator,a=r.Size}],execute:function(){var n,o;e._RF.push({},"2f601HX/RxAc5B4SnOzLjoH","GameMacros",void 0);var O=t.ccclass,c=(t.property,r("GameMacros",O("GameMacros")(((o=function(){function r(){}return r.GetNumberResPath=function(r){var e=r-1;return e>=0&&e<u.length?"Texture/mahjong/0/"+u[e].toString()+"/spriteFrame":""},r.GetCardPlayTypeResPath=function(r,e){return r==c.ICE||r==c.VINE||r==c.BOX2||r==c.BOARDTOP||r==c.BOARDLEFT?"Texture/CardExtType/"+r.toString()+"/spriteFrame":""},r}()).MAP_CUBE_SIZE=new a(144,157),o.MAP_POS_PRE_X=16,o.MAP_POS_PRE_Y=15,o.MAP_POS_SPACE_X=-5,o.MAP_POS_SPACE_Y=-16,o.MAX_MAHJONG_NUM=30,n=o))||n),r("GameDiffMode",function(r){return r[r.Easy=0]="Easy",r[r.Hard=1]="Hard",r[r.Expert=2]="Expert",r}({})),r("CardPlayType",function(r){return r[r.Normal=10]="Normal",r[r.ICE=11]="ICE",r[r.VINE=12]="VINE",r[r.BOX2=13]="BOX2",r[r.BOARDLEFT=14]="BOARDLEFT",r[r.BOARDRIGHT=15]="BOARDRIGHT",r[r.BOARDTOP=16]="BOARDTOP",r[r.BOARDBOTTOM=17]="BOARDBOTTOM",r}({}))),u=r("MahjongTypes",new Array(11,12,13,14,15,21,22,23,24,25,31,32,33,34,35,41,42,43,44,45,51,52,53,54,19,61,62,63,64,29));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameModel.ts",["cc","./GameMacros.ts"],(function(e){var t,i,n,a,o;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Size},function(e){a=e.GameDiffMode,o=e.GameMacros}],execute:function(){var r,s;t._RF.push({},"afd90dHJQBJ6rQyrdbneHqK","GameModel",void 0);var f=i.ccclass,u=(i.property,e("GameModel",f("GameModel")(((s=function(){function e(){this.mGameDiffMode=a.Easy}e.getInstance=function(){return null!=this.instance&&null!=this.instance||(this.instance=new e),this.instance};var t=e.prototype;return t.initGameModel=function(){},t.isValidRow=function(e){return e>=0&&e<this.getRowCfg()},t.isValidCol=function(e){return e>=0&&e<this.getColCfg()},t.isValidRowCol=function(e,t){return this.isValidRow(e)&&this.isValidCol(t)},t.setGameDiffMode=function(e){this.mGameDiffMode=e},t.getRowCfg=function(){var e=8;return this.mGameDiffMode==a.Hard?e=10:this.mGameDiffMode==a.Expert&&(e=12),e},t.getColCfg=function(){var e=6;return this.mGameDiffMode==a.Hard?e=8:this.mGameDiffMode==a.Expert&&(e=10),e},t.getGameMapSize=function(){var e=this.getRowCfg(),t=this.getColCfg(),i=o.MAP_CUBE_SIZE,a=2*o.MAP_POS_PRE_X+i.width*t+o.MAP_POS_SPACE_X*(t-1),r=2*o.MAP_POS_PRE_Y+i.height*e+o.MAP_POS_SPACE_Y*(e-1)+5;return new n(a,r)},t.getMapInitTable=function(){for(var e=new Array,t=0;t<12;++t){var i=t+1;10==i&&(i+=1),e.push(i),e.push(i),e.push(i),e.push(i)}return e},e}()).instance=void 0,r=s))||r));e("default",u.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./DataManager.ts","./EventManager.ts","./SceneBase.ts","./UIBase.ts","./UIHelp.ts","./UIManager.ts","./UIGameLayer.ts","./UIHallLayer.ts","./UILoadingLayer.ts","./ABTestUtil.ts","./UIUtil.ts"],(function(e){var n,t,i,o,a,s,l,r,c,h,u,f,d,g,p,L,S,w,U;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Sprite},function(e){r=e.GameEvent},function(e){c=e.default},function(e){h=e.default},function(e){u=e.SceneBase},function(e){f=e.ViewZorder},function(e){d=e.default},function(e){g=e.default},function(e){p=e.UIGameLayer},function(e){L=e.default},function(e){S=e.default},function(e){w=e.ABTestUtil},function(e){U=e.UIUtil}],execute:function(){var m,y,I,v,_;a._RF.push({},"12c5dmYbOxMVZmScHxRMPhh","GameScene",void 0);var T=s.ccclass,b=s.property;e("GameScene",(m=T("GameScene"),y=b(l),m((_=n((v=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,i(n,"bgSpr",_,o(n)),n._willShowLoading=!1,n}t(n,e);var a=n.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),this.RefreshTheme()},a.onEnable=function(){h.on(r.EventChangeThemeChoose,this.RefreshTheme,this)},a.onDisable=function(){h.off(r.EventChangeThemeChoose,this.RefreshTheme,this)},a.RefreshTheme=function(){U.SetThemeBg(this.bgSpr.node)},a.start=function(){this.delayShowLoading();var e=this;w.IsABTestB_V4()&&c.Player.LevelId.val>1?g.openUI(L,f.Scene,(function(){e.hideLoading()})):g.openUI(p,f.Scene,(function(){e.hideLoading()}))},a.onDestroy=function(){},a.delayShowLoading=function(){this._willShowLoading||(this._willShowLoading=!0,this.scheduleOnce(this.showLoading,.5))},a.hideLoading=function(){this.unschedule(this.showLoading),this._willShowLoading=!1,null!=d.GetUI(S)&&d.CloseUI(S)},a.showLoading=function(){var e=this;if(this._willShowLoading){var n=this;d.ShowUI(S,(function(){n._willShowLoading||d.CloseUI(S),e._willShowLoading=!1}))}},n}(u)).prototype,"bgSpr",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=v))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameUtils.ts",["cc","./BottleData.ts","./Defines.ts","./DataManager.ts","./Log.ts","./UIFit.ts","./Utils.ts","./ABTestUtil.ts"],(function(t){var e,n,o,r,i,u,T,l,s,f,a,c,L,O;return{setters:[function(t){e=t.cclegacy,n=t.view},function(t){o=t.BottleType,r=t.CompleteType},function(t){i=t.GameDefine,u=t.PROP_ID,T=t.Debug,l=t.NewTypeOpenLevels,s=t.GuideType},function(t){f=t.default},function(t){a=t.default},function(t){c=t.default},function(t){L=t.default},function(t){O=t.ABTestUtil}],execute:function(){e._RF.push({},"ce39d2rX4tIRIKz0BaXpwhr","GameUtils",void 0);var E=i.LIQUID_SIZE.height,_=[31,28,31,30,31,30,31,31,30,31,30,31],B=t("default",function(){function t(){}return t.formatString=function(t,e){return Array.isArray(e)?t.replace(/{(\d+)}/g,(function(t,n){var o;return String(null!=(o=e[n])?o:t)})):t.replace(/{(\w+)}/g,(function(t,n){var o;return String(null!=(o=e[n])?o:t)}))},t.CalcComplexity=function(t){var e={sum:0},n=!0,o=!1,r=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)i.value.forEach((function(t,n,o){if(t!==o[n+1]&&o[n+1]>0){void 0===e[t]&&(e[t]=0);var r=o.length-n-1;e[t]+=r,e.sum+=r}}))}catch(t){o=!0,r=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw r}}return e},t.IsBottleEmpty=function(t){return t.every((function(t){return 0==t}))},t.IsBottlePure=function(t){for(var e=!0,n=-1,o=0;o<t.length;o++){if(!(t[o]>0)){e=!1;break}if(-1===n)n=t[o];else if(n!==t[o]){e=!1;break}}return e},t.ArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},t.GetBottleTopTypeAndCount=function(t){for(var e=-1,n=0,o=t.length-1;o>=0&&(0!=t[o]&&-1==e?(e=t[o],n=1):t[o]===e&&n++,-1===e||t[o]===e);o--);return-1===e&&(e=0,n=0),[e,n]},t.GetBottleTopTypeAndEmptyCount=function(t){for(var e=0,n=0,o=t.length-1;o>=0;o--){if(0!==t[o]){n=t[o];break}e++}return[n,e]},t.GetBottleLiquidCount=function(t){for(var e=0,n=0;n<t.length;n++)t[n]>0&&e++;return e},t.IsTransferBottleComplete=function(t){return t.bottleType==o.TRANSFER&&this.IsBottleEmpty(t.showingBottle.bottle)},t.IsTaksBottleComplete=function(t){return t.bottleType==o.TASK&&t.curDepth==t.depth-1},t.CalcRackSize=function(t){return t<=24?6:t<=40?8:10},t.CalcMapScale=function(t,e,o){var r=n.getVisibleSize().height-c.SafeTop-c.SafeBottom-128-181-52;o&&(r=n.getVisibleSize().height-302-391);var u=r/(339*e+-40*(e-1));u>1.1&&(u=1.1);var T,l=n.getVisibleSize().width,s=i.BOTTLE_WIDTH*t,f=(l-s)/(t+1);return f<5?(f=5,T=l/(s+5*(t+1))):f>34?(f=34,T=l/(s+34*(t+1))):T=1,T>1.1&&(T=1.1),u>T&&(u=T),a.log("CalcMapScale:",r,t,e,u),[u,f]},t.CalcChallengeMapAdjust=function(t){var e=this,o=n.getVisibleSize().height-c.SafeTop-c.SafeBottom-128-181-52-50,r=0;t.forEach((function(t){var n=0,o=0;t.forEach((function(t){var e=t.segment;o<e&&(o=e),e>=i.LONG_BOTTLE_MIN_LENGTH&&(n+=e-i.LONG_BOTTLE_MIN_LENGTH+1)}));var u=e.GetChallengeBottleSpacingY(o),T=243*t.length+u*(t.length-1)+n*E;r<T&&(r=T)}));var u=o/r;u>1.1&&(u=1.1);var T=(n.getVisibleSize().width-40)/(79*t.length+30*(t.length-1));return T>1.1&&(T=1.1),{mapScale:Math.min(T,u),maxShowHeight:r}},t.GetChallengeBottleSpacingY=function(t){var e=40;return 4==t?e=2:3==t?e=-18:t<=2&&(e=-38),e},t.GetChallengeDayIdByDate=function(t){for(var e=0,n=0;n<t.getMonth();n++)e+=_[n];return e+=t.getDate(),t.getFullYear()%4==0&&t.getMonth()>=2&&e++,e},t.GetLevelReward=function(e){if(e%this.GetLevelCountPerGiftBox()==0){var n={};n.prop={id:u.STEP_BACK,count:1};var o=t.GetNextBgReward();return-1!=o&&(n.bg={id:o}),n}return null},t.GetLevelCountPerGiftBox=function(){return O.IsABTestB_V1()||O.IsABTestC_V1()?i.LEVEL_COUNT_PER_GIFT_BOX_B:i.LEVEL_COUNT_PER_GIFT_BOX},t.GetNextBgReward=function(){for(var t=1;f.Player.ThemeList.isUnLock(t);)t++;return t<=9?t:-1},t.GetLiquidPlaneScaleOfProgress=function(t,e,n,r){return void 0===n&&(n=o.COMMON),void 0===r&&(r=5),n==o.TRANSFER?5==r||4==r||3==r?1-.25*t:2==r?1-.2*t:1:1},t.RandomShuffleLiquidColors=function(t,e){this._LiquidColors=[];for(var n=0;n<e;n++){var o=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];if(T.NoShuffleMap)this._LiquidColors.push(o);else{var r=t[n]||-1;this._LiquidColors.push(L.shuffleArray(o,r))}}a.log("TestV RandomShuffleLiquidColors",this._LiquidColors)},t.ListLiquidColors=function(){this._LiquidColors.push([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])},t.getColorId=function(t,e){return t||(t=0),0==t?0:this._LiquidColors[e][t-1]},t.GetLiquidColor=function(t,e){return void 0===e&&(e=0),i.LiquidColors[this.getColorId(t,e)]},t.GetDripColor=function(t,e){return void 0===e&&(e=0),i.DripColors[this.getColorId(t,e)]},t.GetBottleColor=function(t,e){return void 0===e&&(e=0),i.BottleColors[this.getColorId(t,e)]},t.GetBottleShadowColor=function(t,e){return void 0===e&&(e=0),i.BottleShadowColors[this.getColorId(t,e)]},t.GetHiddenBottleColor=function(t,e){return void 0===e&&(e=0),i.HiddenBottleColors[this.getColorId(t,e)]},t.GetNextTypeOpenLevel=function(t){return t<l.UNKNOWN_BOTTLE?[s.UNKNOWN_BOTTLE,l.UNKNOWN_BOTTLE-t-1]:t<l.TRANSITION_BOTTLE?[s.TRANSITION_BOTTLE,l.TRANSITION_BOTTLE-t-1]:t<l.COLOR_BOTTLE?[s.COLOR_BOTTLE,l.COLOR_BOTTLE-t-1]:t<l.TRANSFER_BOTTLE?[s.TRANSFER_BOTTLE,l.TRANSFER_BOTTLE-t-1]:t<l.TASK_BOTTLE?[s.TASK_BOTTLE,l.TASK_BOTTLE-t-1]:t<l.HIDDEN_BOTTLE?[s.HIDDEN_BOTTLE,l.HIDDEN_BOTTLE-t-1]:t<l.STONE_BOTTLE?[s.STONE_BOTTLE,l.STONE_BOTTLE-t-1]:t<l.LOCK_BOTTLE?[s.LOCK_BOTTLE,l.LOCK_BOTTLE-t-1]:[s.NONE,-1]},t.GetMapGuideType=function(t,e){return void 0===e&&(e=!1),e&&!f.User.IsShowNewTypeDialogGuide(s.ALL_LONG_BOTTLE)&&t.every((function(t){return t.every((function(t){return 1==t.bottles.length&&t.bottles[0].complete_type==r.NEVER||t.segment>=i.LONG_BOTTLE_MIN_LENGTH}))}))?s.ALL_LONG_BOTTLE:e||f.User.IsShowNewTypeDialogGuide(s.LONG_BOTTLE)||!t.some((function(t){return t.some((function(t){return t.bottles.some((function(t){return t.bottle.length>=i.LONG_BOTTLE_MIN_LENGTH}))}))}))?!f.User.IsShowNewTypeDialogGuide(s.UNKNOWN_BOTTLE)&&t.some((function(t){return t.some((function(t){return t.bottles.some((function(t){return t.unknown_bottle}))}))}))?s.UNKNOWN_BOTTLE:!f.User.IsShowNewTypeDialogGuide(s.COLOR_BOTTLE)&&t.some((function(t){return t.some((function(t){return t.bottles.some((function(t){return t.collect_type>0}))}))}))?s.COLOR_BOTTLE:!f.User.IsShowNewTypeDialogGuide(s.TRANSFER_BOTTLE)&&t.some((function(t){return t.some((function(t){return t.bottleType==o.TRANSFER}))}))?s.TRANSFER_BOTTLE:!f.User.IsShowNewTypeDialogGuide(s.TASK_BOTTLE)&&t.some((function(t){return t.some((function(t){return t.bottleType==o.TASK}))}))?s.TASK_BOTTLE:!f.User.IsShowNewTypeDialogGuide(s.TRANSITION_BOTTLE)&&t.some((function(t){return t.some((function(t){return t.bottles.some((function(t){return t.complete_type==r.NEVER}))}))}))?s.TRANSITION_BOTTLE:!f.User.IsShowNewTypeDialogGuide(s.HIDDEN_BOTTLE)&&t.some((function(t){return t.some((function(t){return t.unlockColor>0}))}))?s.HIDDEN_BOTTLE:!f.User.IsShowNewTypeDialogGuide(s.STONE_BOTTLE)&&t.some((function(t){return t.some((function(t){return 1==t.stoneBottle}))}))?s.STONE_BOTTLE:!f.User.IsShowNewTypeDialogGuide(s.LOCK_BOTTLE)&&t.some((function(t){return t.some((function(t){return t.unlockId>0}))}))?s.LOCK_BOTTLE:void 0:s.LONG_BOTTLE},t}());B._LiquidPlaneFuncs=[function(t,e){return 1},function(t,e){return 1},function(t,e){var n=1;return n=t>.9?.5:t>.5?1.975-1.75*t:1.1-.2*(.5-t),0!=e&&(n+=-e/30*(1-n))>1&&(n=1),n},function(t,e){return 1},function(t,e){return t>.2?1.2-.5*t:1+.5*t},function(t,e){return 1},function(t,e){return t>.8?.9-2*(t-.8):t>.6?1-(t-.6)/2:t>.4?(t-.4)/4+.95:t>.2?(t-.2)/2+.85:1-.75*t},function(t,e){return 1},function(t,e){var n=1;return t>.435?n=.6:t>.2?(n=1.15*Math.sqrt(.0576-(t-.23)*(t-.23))/.24,0!=e&&(n+=-e/30*(1.2-n))>1.15&&(n=1.15)):n=1.05+.5*t,n},function(t,e){return 1.2-t/.8*.5}],B._LiquidColors=[],e._RF.pop()}}}));

System.register("chunks:///_virtual/grid-layout.ts",["./rollupPluginModLoBabelHelpers.js","cc","./yx-collection-view.ts"],(function(t){var i,e,r,n,o,a,s,h,l;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t.UITransform,n=t.warn,o=t.math},function(t){a=t.YXCollectionView,s=t.YXLayoutAttributes,h=t.YXIndexPath,l=t.YXLayout}],execute:function(){e._RF.push({},"02a96qsjFJCAbivx+1JqubU","grid-layout",void 0);t("GridLayout",function(t){function e(){for(var i,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(i=t.call.apply(t,[this].concat(r))||this).itemSize=new o.Size(100,100),i.horizontalSpacing=0,i.verticalSpacing=0,i.alignment=1,i._maxItemsPerRow=null,i}i(e,t);var l=e.prototype;return l.getMaxItemsPerRow=function(t){if(null==this._maxItemsPerRow){for(var i=1,e=t.node.getComponent(r).contentSize.width;i*this.itemSize.width+(i-1)*this.horizontalSpacing<=e;)i++;i=Math.max(1,i-1),this._maxItemsPerRow=i}return this._maxItemsPerRow},l.prepare=function(t){if(t.scrollDirection!==a.ScrollDirection.VERTICAL)return t.scrollDirection===a.ScrollDirection.HORIZONTAL?(n("GridLayout 仅支持垂直方向排列"),void this._prepare_vertical(t)):void 0;this._prepare_vertical(t)},l._prepare_vertical=function(t){t.scrollView.horizontal=!1,t.scrollView.vertical=!0;var i=[],e=t.node.getComponent(r).contentSize.clone(),o=e.width;this._maxItemsPerRow=null;var a=this.getMaxItemsPerRow(t),l=0;1==this.alignment&&(l=.5*(o-(a*this.itemSize.width+(a-1)*this.horizontalSpacing)));2==this.alignment&&(l=o-(a*this.itemSize.width+(a-1)*this.horizontalSpacing));t.getNumberOfSections()>1&&n("GridLayout 暂时不支持分区模式");for(var c=t.getNumberOfItems(0),u=0;u<c;u++){var m=Math.floor(u/a),g=u%a,f=l+(this.itemSize.width+this.horizontalSpacing)*g,p=(this.itemSize.height+this.verticalSpacing)*m,S=s.layoutAttributesForCell(new h(0,u));S.frame.x=f,S.frame.y=p,S.frame.width=this.itemSize.width,S.frame.height=this.itemSize.height,i.push(S),e.height=Math.max(e.height,S.frame.yMax)}this.attributes=i,this.contentSize=e},l.initOffset=function(t){t.scrollView.scrollToTop()},l.layoutAttributesForElementsInRect=function(t,i){return this.visibleElementsInRect(t,i)},l.visibleElementsInRect=function(t,i){if(this.attributes.length<=100)return this.attributes;var e=Math.floor(t.y/(this.itemSize.height+this.verticalSpacing)),r=Math.ceil(t.yMax/(this.itemSize.height+this.verticalSpacing)),n=this.getMaxItemsPerRow(i),o=Math.max(e*n,0),a=r*n;return this.attributes.slice(o,a)},e}(l));e._RF.pop()}}}));

System.register("chunks:///_virtual/HallRankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./auto_HallRankItem.ts","./UIBase.ts"],(function(n){var t,e,o,a,l;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator},function(n){a=n.default},function(n){l=n.GUIBase}],execute:function(){var c,i;e._RF.push({},"7f41dTYUOlOaqpeEZcHWGwJ","HallRankItem",void 0);var r=o.ccclass;o.property,n("default",r("HallRankItem")(((i=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))||this)._ui=void 0,t}t(e,n);var o=e.prototype;return o.onInit=function(n){},o.onUILoad=function(){this._ui=this.node.addComponent(a)},o.onUIStart=function(){},o.onUIEnable=function(){},o.onUIDisable=function(){},o.onUIDestroy=function(){},e}(l))._prefabUrl="widget/HallRankItem",i._className="HallRankItem",c=i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/IPhoneXCompat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIFit.ts"],(function(t){var e,o,i,n,r,a,p,l,u,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,p=t.Widget,l=t.CCBoolean,u=t.Component},function(t){s=t.default}],execute:function(){var c,h,d,m,f,g,b,C;r._RF.push({},"386f09qI+lNc4V5pV8TOvMG","IPhoneXCompat",void 0);var y=a.ccclass,_=a.requireComponent,v=a.property;t("IPhoneXCompat",(c=y("IPhoneXCompat"),h=_(p),d=v(l),m=v(l),c(f=h((b=e((g=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"top",b,n(e)),i(e,"bottom",C,n(e)),e._widget=void 0,e}o(e,t);var r=e.prototype;return r.onLoad=function(){this.updateCompat()},r.updateCompat=function(){this._widget=this.getComponent(p),null!=this._widget&&(this.top&&(this._widget.top=s.SafeTop),this.bottom&&(this._widget.bottom=s.SafeBottom),this._widget.updateAlignment())},e}(u)).prototype,"top",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(g.prototype,"bottom",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=g))||f)||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelConfig.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9db4cHw/JtL9YgMqWeBpwug","LevelConfig",void 0);e("MapConfig",(function(){this.levelMap="",this.rare_color=[],this.segment=0,this.pickLongBottle=0})),e("LevelConfig",(function(){this.levels=[],this.time=-1}));t._RF.pop()}}}));

System.register("chunks:///_virtual/LevelMapLoader.ts",["cc","./BottleData.ts","./Defines.ts","./CfgManager.ts","./ABTestUtil.ts"],(function(e){var t,l,n,r,g,a,o,f,i;return{setters:[function(e){t=e.cclegacy,l=e.sys},function(e){n=e.BottleData2,r=e.BottleType,g=e.CompleteType},function(e){a=e.Debug,o=e.GameDefine},function(e){f=e.default},function(e){i=e.ABTestUtil}],execute:function(){t._RF.push({},"0324bZXO6ZE3IthB7aBo+5o","LevelMapLoader",void 0);var u=e("LevelMapLoader",function(){function e(){}return e.getLevelConfig=function(e){return-1==e?this.getTestLevelCfg():(this.checkLevelMapCfg(),e>150?(e=(e-150-1)%64+1,null==this._cycleLevelCfg[e]?null:this._cycleLevelCfg[e]):null==this._levelCfg[e]?null:this._levelCfg[e])},e.getLevelMapConfig=function(e){if(this.checkLevelMapCfg(),-1==e)return this.getTestMapCfg();var t=this._levelMapCfg[e];if(!t)return null;if(!t.segment){var l=t.levelMap;if(!l)return null;var r=JSON.parse(l).map((function(e){return e.map((function(e){return new n(e)}))}));t.segment=this.CheckSegment(r)}return this._levelMapCfg[e]},e.getLevelMap=function(e){this.checkLevelMapCfg();var t=this.getLevelMapConfig(e);if(null==t||null==t.levelMap)return[];var l=t.levelMap;if(!l)return[];var r=JSON.parse(l).map((function(e){return e.map((function(e){return new n(e)}))}));return null==t.segment&&null!=t.levelMap&&(t.segment=this.CheckSegment(r)),r},e.getLevelSegment=function(e){this.checkLevelMapCfg();var t=this.getLevelMapConfig(e);return null==t?0:t.segment||0},e.getLevelTime=function(e){var t;return this.checkLevelMapCfg(),(null==(t=this.getLevelConfig(e))?void 0:t.time)||0},e.getLevelRareColor=function(e){this.checkLevelMapCfg();var t=this.getLevelMapConfig(e);return null==t||null==t.rare_color?[]:t.rare_color},e.getFullLevelMap=function(e,t){void 0===t&&(t=!0);var l=this.getLevelMap(e);if(t&&!a.NoShuffleMap&&-1!=e){for(var n=[],r=0;r<l.length;r++)for(var g=0;g<l[r].length;g++){var o=l[r][g];1!=o.bottles.length||-1!=o.bottles[0].key_index&&null!=o.bottles[0].key_index||0!=o.unlockId||0!=o.unlockColor||!o.bottles[0].bottle.every((function(e){return e>0}))||o.bottles[0].unknown_bottle||n.push([r,g])}for(var f=n.length-1;f>=0;f--){var i=Math.floor(Math.random()*(f+1)),u=n[f],v=n[i];n[f]=v,n[i]=u;var c=l[u[0]][u[1]];l[u[0]][u[1]]=l[v[0]][v[1]],l[v[0]][v[1]]=c}}return l},e.getNormalColorTypeCount=function(e){if(-1==e)return[1];var t=[],l=this.getLevelConfig(e);if(null==l)return[0];for(var n=0;n<l.levels.length;n++){var r=l.levels[n];t[n]=this.getLevelMap(r)}return this.getColorTypeCount(t)},e.checkLevelMapCfg=function(){null==this._levelMapCfg&&(this._levelMapCfg=f.getCfg("levelMap")),null==this._levelCfg&&(i.IsABTestD_V1()?this._levelCfg=f.getCfg("levelCfgD"):i.IsABTestB_V1()||i.IsABTestC_V1()?this._levelCfg=f.getCfg("levelCfgB"):this._levelCfg=f.getCfg("levelCfg"),this._cycleLevelCfg=f.getCfg("cyclelevelcfg"))},e.getChallengeLevelConfig=function(e){return-1==e?this.getTestLevelCfg():(this.checkChallengeLevelMapCfg(),null==this._challengeLevelCfg[e]?null:this._challengeLevelCfg[e])},e.getChallengeLevelMapConfig=function(e){if(-1==e)return this.getTestMapCfg();this.checkChallengeLevelMapCfg();var t=this._challengeLevelMapCfg[e];if(!t)return null;if(!t.segment){var l=0,r=t.levelMap;if(!r)return null;var g=JSON.parse(r).map((function(e){return e.map((function(e){return new n(e)}))}));t.pickLongBottle?g.forEach((function(e){e.forEach((function(e){e.segment>=o.LONG_BOTTLE_MIN_LENGTH&&(l=Math.max(l,e.segment))}))})):g.forEach((function(e){e.forEach((function(e){e.segment<o.LONG_BOTTLE_MIN_LENGTH&&(l=Math.max(l,e.segment))}))})),t.segment=l}return t},e.getChallengeLevelMap=function(e){this.checkChallengeLevelMapCfg();var t=this.getChallengeLevelMapConfig(e);if(null==t||null==t.levelMap)return[];var l=t.levelMap;return l?JSON.parse(l).map((function(e){return e.map((function(e){return new n(e)}))})):[]},e.getChallengeLevelTime=function(e){var t;return this.checkChallengeLevelMapCfg(),(null==(t=this.getChallengeLevelConfig(e))?void 0:t.time)||0},e.getChallengeFullLevelMap=function(e,t){return this.getChallengeLevelMap(e)},e.getChallengeColorTypeCount=function(e){if(-1==e)return[1];var t=[],l=this.getChallengeLevelConfig(e);if(null==l)return[0];for(var n=0;n<l.levels.length;n++){var r=l.levels[n];t[n]=this.getChallengeLevelMap(r)}return this.getColorTypeCount(t)},e.checkChallengeLevelMapCfg=function(){null==this._challengeLevelMapCfg&&(this._challengeLevelMapCfg=f.getCfg("dailychallenge")),null==this._challengeLevelCfg&&(this._challengeLevelCfg=f.getCfg("challengecfg"))},e.getTestMapCfg=function(){return this.checkTestLevelMapCfg(),this._testMapCfg},e.getTestLevelCfg=function(){return{levels:[-1],time:-1}},e.checkTestLevelMapCfg=function(){if(null==this._testMapCfg){var e=l.localStorage.getItem("WaterSortResolver_LEVEL_MAP"),t=l.localStorage.getItem("WaterSortResolver_SEGMENT"),n=l.localStorage.getItem("WaterSortResolver_LONG_BOTTLE_CAN_PICK");e&&t&&(this._testMapCfg={levelMap:e,segment:Number.parseInt(t),rare_color:[],pickLongBottle:Number.parseInt(n)})}},e.getUnlockBottleFreeLevel=function(){return 4},e.getRebornDisableLevel=function(){return 3},e.getColorTypeCount=function(e){var t=[];return e.forEach((function(e){var l=0;e.forEach((function(e){e.forEach((function(e){e.bottles.forEach((function(e){e.bottle.forEach((function(e){e>l&&(l=e)}))}))}))})),t.push(l)})),t},e.CheckSegment=function(e){for(var t=0;t<e.length;t++)for(var l=e[t],n=0;n<e[t].length;n++){var a=l[n];if(a.bottleType==r.TASK)return a.segment;for(var o=0;o<a.bottles.length;o++){var f=a.bottles[o];if(f.complete_type==g.END||f.complete_type==g.COMPLETE_NEXT||f.collect_type>0)return f.bottle.length}}return 0},e}());u._levelMapCfg=void 0,u._levelCfg=void 0,u._cycleLevelCfg=void 0,u._challengeLevelMapCfg=void 0,u._challengeLevelCfg=void 0,u._testMapCfg=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/LifecycleManager.ts",["cc","./UICollectGameLayer.ts","./UIHallLayer.ts","./UISideBarLayer.ts","./PlatformManager.ts","./TAData.ts","./AudioManager.ts","./Log.ts","./UIHelp.ts"],(function(e){var n,t,a,i,o,r,c,u,s,f,l,d,m;return{setters:[function(e){n=e.cclegacy,t=e.game,a=e.Game,i=e.resources,o=e.sys},function(e){r=e.default},function(e){c=e.default},function(e){u=e.default},function(e){s=e.default},function(e){f=e.TAData},function(e){l=e.default},function(e){d=e.default},function(e){m=e.default}],execute:function(){n._RF.push({},"4565cx7lfRI24wJbfBfIqOH","LifecycleManager",void 0);var h=function(){function e(){this.enterBackgroundTime=0}e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance};var n=e.prototype;return n.init=function(){this.registerEvent()},n.registerEvent=function(){t.on(a.EVENT_SHOW,this.onGameShow,this),t.on(a.EVENT_HIDE,this.onGameHide,this)},n.onGameShow=function(){if(d.log("onGameShow"),Date.now()-this.enterBackgroundTime>1e4){f.Mgr.sendEventAppLaunch(!1);var e=i.get("font/AlimamaFangYuanTi-BoldRound");e&&e.isValid||i.load("font/AlimamaFangYuanTi-BoldRound",(function(e,n){d.warn("fontRes reload",e,n)}))}s.CheckIsAuthedFriendInfo().then((function(e){e||s.removeUserLevel()}));var n=m.GetUI(c);if(n&&(n.checkSidebar(),n.checkCollection()),l.resumeMusic(),o.platform==o.Platform.BYTEDANCE_MINI_GAME){var t=m.GetUI(u);null==t||t.CheckIsEnterFromSideBar()}if(o.platform==o.Platform.WECHAT_GAME){var a=m.GetUI(r);null==a||a.UpdateUI()}},n.onGameHide=function(){d.log("onGameHide"),this.enterBackgroundTime=Date.now()},e}();h.instance=void 0;e("default",h.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/LiquidItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./UIBase.ts","./auto_LiquidItem.ts"],(function(n){var e,t,i,o,s,r,u,c,h,a;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){i=n.cclegacy,o=n._decorator,s=n.Toggle,r=n.Sprite,u=n.UITransform},function(n){c=n.GameDefine},function(n){h=n.UIBase},function(n){a=n.default}],execute:function(){var d,l;i._RF.push({},"fe3a2uqXyBBpo8w1sY1w8J/","LiquidItem",void 0);var g=o.ccclass;o.property,n("LiquidItem",g("LiquidItem")(((l=function(n){function i(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))||this)._ui=void 0,e._isUnknown=!1,e.toggle=null,e.onCheckChangedListener=void 0,e}e(i,n);var o=i.prototype;return o.onUILoad=function(){this._ui=this.node.addComponent(a)},o.onUIDestroy=function(){this.onCheckChangedListener=void 0},o.Init=function(){this.toggle=this.getComponent(s)},o.SetOnCheckChangedListener=function(n){this.onCheckChangedListener=n},o.OnCheckChanged=function(){null!=this.onCheckChangedListener&&this.onCheckChangedListener(this)},o.SetLiquidColor=function(n,e){void 0===e&&(e=!1),this._isUnknown=e,this._ui.spr_liquid.getComponent(r).color=e?c.LIQUID_COLOR_UNKNOWN:n},o.SetFillProgress=function(n){var e=this.getComponent(u).height;this._ui.spr_liquid.getComponent(u).height=e*n},t(i,[{key:"isUnknown",get:function(){return this._isUnknown}}]),i}(h))._prefabUrl="widget/LiquidItem",l._className="LiquidItem",d=l))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/LiquidMaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./auto_LiquidMaskItem.ts","./UIBase.ts"],(function(t){var n,i,o,e,a;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator},function(t){e=t.default},function(t){a=t.GUIBase}],execute:function(){var u,s;i._RF.push({},"91a28XSsMRL/Y060RbfaJ9F","LiquidMaskItem",void 0);var r=o.ccclass;o.property,t("default",r("LiquidMaskItem")(((s=function(t){function i(){for(var n,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this)._ui=void 0,n}n(i,t);var o=i.prototype;return o.onInit=function(t){},o.onUILoad=function(){this._ui=this.node.addComponent(e)},o.onUIStart=function(){},o.onUIEnable=function(){},o.onUIDisable=function(){},o.onUIDestroy=function(){},i}(a))._prefabUrl="widget/LiquidMaskItem",s._className="LiquidMaskItem",u=s))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/LiquidUnknownItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./auto_LiquidUnknownItem.ts","./UIBase.ts"],(function(n){var t,o,i,e,u;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator},function(n){e=n.default},function(n){u=n.GUIBase}],execute:function(){var r,c;o._RF.push({},"5dcb0KF/rtEm7qERBFk8Qu7","LiquidUnknownItem",void 0);var a=i.ccclass;i.property,n("default",a("LiquidUnknownItem")(((c=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(t=n.call.apply(n,[this].concat(i))||this)._ui=void 0,t}t(o,n);var i=o.prototype;return i.onInit=function(n){},i.onUILoad=function(){this._ui=this.node.addComponent(e)},i.onUIStart=function(){},i.onUIEnable=function(){},i.onUIDisable=function(){},i.onUIDestroy=function(){},o}(u))._prefabUrl="widget/LiquidUnknownItem",c._className="LiquidUnknownItem",r=c))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ExceptionHandler.ts","./LifecycleManager.ts","./SceneBase.ts","./SceneManager.ts"],(function(n){var e,t,o,c,a,r,i,s;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,c=n.assetManager},function(n){a=n.ExceptionHandler},function(n){r=n.default},function(n){i=n.SceneBase},function(n){s=n.default}],execute:function(){var u;t._RF.push({},"95c35VJrEhJBZCkLRwcDXOy","LoadingScene",void 0);var l=o.ccclass;o.property,n("LoadingScene",l("LoadingScene")(u=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var o=t.prototype;return o.onLoad=function(){n.prototype.onLoad.call(this),s.onGameInit(),r.init(),a.init(),c.downloader.maxRetryCount=10,c.downloader.retryInterval=3e3},o.start=function(){},t}(i))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Log.ts",["cc","./Defines.ts"],(function(t){var r,n,e,o,a;return{setters:[function(t){r=t.cclegacy,n=t.log,e=t.warn,o=t.error},function(t){a=t.Debug}],execute:function(){r._RF.push({},"301deXEbvVAWqhq3ZnqI79M","Log",void 0);t("default",function(){function t(){}return t.log=function(){for(var r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];if(a.LogEnable){var i=console.log||n,l=Array.prototype.slice.call(arguments),c=t.stack(2)+t.getDateString()+" ";l.splice(0,0,c),i.apply(i,l)}},t.warn=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var a=console.warn||e,i=Array.prototype.slice.call(arguments),l=t.stack(2)+t.getDateString()+" ";i.splice(0,0,l),a.apply(a,i)},t.error=function(){for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];var a=console.error||o,i=Array.prototype.slice.call(arguments),l=t.stack(2)+t.getDateString()+" ";i.splice(0,0,l),a.apply(a,i)},t.getDateString=function(){var t=new Date,r=t.getHours().toString(),n="";return n+=(1==r.length?"0"+r:r)+":",n+=(1==(r=t.getMinutes().toString()).length?"0"+r:r)+":",n+=(1==(r=t.getSeconds().toString()).length?"0"+r:r)+":",1==(r=t.getMilliseconds().toString()).length&&(r="00"+r),2==r.length&&(r="0"+r),n="["+(n+=r)+"]"},t.stack=function(t){var r;void 0===t&&(t=2);var n=null==(r=(new Error).stack)?void 0:r.split("\n");n.shift();var e=[];n.forEach((function(t){var r,n=(t=t.substring(7)).split(" ");n.length<2?e.push(n[0]):e.push(((r={})[n[0]]=n[1],r))}));var o=[];if(t<e.length-1)for(var a in e[t])o.push(a);var i=0==o.length?"anonymous":o[0].split(".");return i[0]+".js->"+i[1]+":"},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LongBottleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./Log.ts","./UIBase.ts","./UIHelp.ts","./GameUtils.ts","./UIUtil.ts","./auto_LongBottleItem.ts","./UIPropUseLayer.ts","./LiquidItem.ts","./LiquidMaskItem.ts","./LiquidUnknownItem.ts"],(function(t){var i,e,o,n,s,l,a,_,r,h,u,p,c,d,g,m,C,f,k,S,w,v,q,y,U,P,L,b,I,T,A,O,D,B,E,z,M,G;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){l=t.cclegacy,a=t._decorator,_=t.Prefab,r=t.Tween,h=t.Mask,u=t.instantiate,p=t.UITransform,c=t.Widget,d=t.Vec3,g=t.Sprite,m=t.Color,C=t.sp,f=t.Label,k=t.tween,S=t.v3,w=t.v2,v=t.UIOpacity,q=t.Animation,y=t.randomRangeInt},function(t){U=t.GameDefine,P=t.PROP_ID,L=t.Sfx},function(t){b=t.default},function(t){I=t.default},function(t){T=t.GUIBase},function(t){A=t.default},function(t){O=t.default},function(t){D=t.UIUtil},function(t){B=t.default},function(t){E=t.default},function(t){z=t.LiquidItem},function(t){M=t.default},function(t){G=t.default}],execute:function(){var R,N,x,F,V,W,H,Y,K,j;l._RF.push({},"be59181lbpBs4hzRKSRyAkS","LongBottleItem",void 0);var Q=U.FRAME_TIME,Z=U.LIQUID_SIZE,J=10,X=a.ccclass,$=a.property;t("default",(R=X("LongBottleItem"),N=$(_),x=$(_),F=$(_),R(((j=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),l=0;l<e;l++)s[l]=arguments[l];return(i=t.call.apply(t,[this].concat(s))||this)._ui=void 0,o(i,"liquidPrefab",H,n(i)),i._liquidSize=void 0,i.liquids=[],o(i,"liquidMaskPrefab",Y,n(i)),i.liquidMasks=[],o(i,"liquidUnknownPrefab",K,n(i)),i.liquidUnknowns=[],i._isEditorBottle=!1,i.colors=[],i.bottleSize=5,i.onClickListener=void 0,i.onLiquidCheckListener=void 0,i._maxProgress=1,i._isVideoBottle=!1,i._waterUpTweenTag=1001,i._pouringCount=0,i._collectType=0,i._unknowns=[],i._isComplete=!1,i._liquidProgress=0,i._isHide=!1,i._isSelected=!1,i._isMovingDrip=!1,i}e(i,t);var l=i.prototype;return l.setPouring=function(){this._pouringCount++},l.stopPouring=function(){this._pouringCount--,this._pouringCount<0&&(this._pouringCount=0)},l.onInit=function(t){var i=t[0];this.colors=i.liquids,this._isEditorBottle=i.isEditorBottle,this._isVideoBottle=i.isVideoBottle,this._collectType=i.collectType,this._unknowns=i.unknowns},l.onUILoad=function(){var t;this._ui=this.node.addComponent(B),this.Init(this.colors.length),this.UpdateDefaultUI(),this._waterUpTweenTag=(null==(t=this.node.parent)||null==(t=t.parent)?void 0:t.getSiblingIndex())||0},l.UpdateDefaultUI=function(){this.SetSkin(),this.SetColors(this.colors),this.SetSwapEnable(!1),this.ResetSelected(),this._ui.spine_water_flow.active=!1,this._ui.spine_complete.active=!1,this._ui.spine_complete_light.active=!1,this._ui.node_cork.active=!1,this.SetMirrored(!1),this.SetWaterFlowMirrored(!1),this.Show(),this.UpdateCollectType()},l.onUIStart=function(){},l.onUIEnable=function(){this.registerClick(this._ui.node_click,this.OnBottleClick)},l.onUIDisable=function(){},l.onUIDestroy=function(){this.liquids=[],this.onClickListener=void 0,this.onLiquidCheckListener=void 0,this.unscheduleAllCallbacks();r.stopAllByTarget(this)},l.SetOnClickListener=function(t){this.onClickListener=t},l.SetOnLiquidCheckListener=function(t){this.onLiquidCheckListener=t},l.OnBottleClick=function(){null==this.onClickListener||this._isHide||this._isMovingDrip||this.onClickListener(this)},l.OnLiquidItemClick=function(t){null!=this.onLiquidCheckListener&&this.onLiquidCheckListener(this,t)},l.Hide=function(){this._isHide=!0,this._ui.node_parent.children.forEach((function(t){A.SetOpacity(t,0)}))},l.Show=function(){this._isHide=!1,this._ui.node_parent.children.forEach((function(t){A.SetOpacity(t,255)})),this._ui.node_mask.getComponent(h).enabled=!1,this._ui.node_mask.getComponent(h).enabled=!0},l.Init=function(t){var i=this;this.bottleSize=t,this.liquids.forEach((function(t){null!=t&&(t.node.active=!1,t.node.removeFromParent())})),this.liquids=[],this.liquidMasks.forEach((function(t){null!=t&&(t.node.active=!1,t.node.removeFromParent())})),this.liquidMasks=[],this.liquidUnknowns.forEach((function(t){null!=t&&(t.node.active=!1,t.node.removeFromParent())})),this.liquidUnknowns=[],this._liquidSize=Z;for(var e=0;e<t;e++){var o=this.liquids[e];o?o.node.active=!0:(o=u(this.liquidPrefab).getComponent(z),this._ui.layout_liquids.addChild(o.node),o.Init(),this.liquids[e]=o,o.SetOnCheckChangedListener((function(t){i.OnLiquidItemClick(t)})));var n=this._liquidSize.height;0==e&&(n+=J),o.getComponent(p).setContentSize(2*this._liquidSize.width,n),o._ui.spr_liquid.getComponent(p).setContentSize(2*this._liquidSize.width,n);var s=this.liquidMasks[e];s?s.node.active=!0:(s=u(this.liquidMaskPrefab).getComponent(M),this._ui.layout_masks.addChild(s.node),this.liquidMasks[e]=s);var l=this._liquidSize.height*e+J-this._ui.layout_masks.getComponent(p).height*this._ui.layout_masks.getComponent(p).anchorY;s.node.setPosition(0,l);var a=this.liquidUnknowns[e];a?a.node.active=!0:(a=u(this.liquidUnknownPrefab).getComponent(G),this._ui.layout_unknowns.addChild(a.node),this.liquidUnknowns[e]=a);var _=this._liquidSize.height*(e+.5)-this._ui.layout_unknowns.getComponent(p).height*this._ui.layout_unknowns.getComponent(p).anchorY;a.node.setPosition(0,_)}},l.SetSkin=function(){var t=(this.bottleSize-5)*Z.height,i=243+t;this._ui.node_parent.getComponent(p).setContentSize(133,i),this.node.getComponent(p).setContentSize(79,i);var e=i/(i+50);this._ui.spr_bottle_fg.getComponent(p).anchorY=e,this._ui.spr_bottle_bg.getComponent(p).anchorY=e,this._ui.node_mask.getComponent(p).anchorY=e,this._ui.mask_light.getComponent(p).anchorY=e,this._ui.layout_liquids.getComponent(c).updateAlignment(),this._ui.layout_masks.getComponent(c).updateAlignment(),this._ui.layout_unknowns.getComponent(c).updateAlignment(),this._ui.node_mask_parent.getComponent(c).updateAlignment(),this._ui.spr_cork.setPosition(0,t),this._ui.node_click.getComponent(p).setContentSize(100,i);var o=(Z.height*this.bottleSize+J)/2+14;this._ui.spine_complete.setPosition(0,o),this._ui.spr_video.setPosition(0,o);var n=(349+t)/349;this._ui.spine_water_flow.scale=new d(1,n,1),this._ui.spine_water_flow.setPosition(0,142+t/2)},l.SetColors=function(t){this.colors=t,this._UpdateColors()},l.GetColors=function(){return this.colors},l.UpdateCollectType=function(t){void 0===t&&(t=-1),t>=0&&(this._collectType=t),A.SetOpacity(this._ui.mask_light,this._collectType>0?255:0),this._collectType>0?(this._ui.mask_light.getComponent(c).updateAlignment(),this._collectType>U.LiquidColors.length&&I.log("error collect type: ",this._collectType),this._ui.spr_bottle_bg.getComponent(g).color=O.GetBottleColor(this._collectType),this._ui.spr_bottle_fg.getComponent(g).color=O.GetBottleColor(this._collectType),this._ui.mask_light.getComponent(g).color=O.GetBottleShadowColor(this._collectType)):(this._ui.spr_bottle_bg.getComponent(g).color=m.WHITE,this._ui.spr_bottle_fg.getComponent(g).color=m.WHITE)},l.SetMirrored=function(t){t?(this.node.scale=new d(-1,1,1),this._ui.spr_bottle_bg.scale=new d(-1,1,1),this._ui.spr_liquid_alpha.scale=new d(-1,1,1),this._ui.spr_bottle_fg.scale=new d(-1,1,1),this._ui.layout_unknowns.scale=new d(-1,1,1)):(this.node.scale=new d(1,1,1),this._ui.spr_bottle_bg.scale=new d(1,1,1),this._ui.spr_liquid_alpha.scale=new d(1,1,1),this._ui.spr_bottle_fg.scale=new d(1,1,1),this._ui.layout_unknowns.scale=new d(1,1,1))},l.SetWaterFlowMirrored=function(t){var i=this._ui.spine_water_flow.scale;this._ui.spine_water_flow.scale=new d(t?-1:1,i.y,i.z)},l.UpdateVideoBottleType=function(t){A.SetSpriteFrame(this._ui.spr_video,"bottle/"+(t?"Game_icon_free":"Game_icon_shipin"))},l.UnlockVideoBottle=function(t,i){var e=this;void 0===t&&(t=!0),this._isVideoBottle=!1,t?A.ShowUI(E,void 0,{propID:P.UNLOCK_BOTTLE,callback:function(){b.playEffect(L.SOUND_PROP_UNLOCK_BOTTLE_2),e._ui.spine_unlock_video_bottle.getComponent(C.Skeleton).setAnimation(0,"5",!1),e._UpdateColors(),i&&i()}}):(this._UpdateColors(),i&&i())},l.GetLiquidCount=function(){for(var t=0,i=0;i<this.colors.length;i++)0!=this.colors[i]&&t++;return t},l._UpdateColors=function(){if(this._maxProgress=this.GetLiquidCount()/this.colors.length,this._UpdateUnkownIndex(),this._ui.spr_video.active=this._isVideoBottle,this._isVideoBottle){for(var t=0;t<this.bottleSize;t++){var i=this.liquids[t];i.SetLiquidColor(O.GetLiquidColor(0)),i.toggle.isChecked=!1,this.liquidUnknowns[t].node.active=!1}this.UpdateLiquidMask(0),this._isComplete=!0}else for(var e=0;e<this.bottleSize;e++){var o=this.colors[e],n=this.liquids[e],s=o>0&&1==this._unknowns[e];if(n.SetLiquidColor(O.GetLiquidColor(o),s&&!this._isEditorBottle),n.toggle.isChecked=!1,this.liquidUnknowns[e].node.active=s,this._isEditorBottle&&o>0){this.liquidUnknowns[e].node.active=!0;var l=o.toString();s&&(l+="?"),this.liquidUnknowns[e]._ui.label_unknown.getComponent(f).string=l}}this.UpdateLiquidMask(this._maxProgress),this._isComplete=this.CheckComplete();for(var a=this.bottleSize;a<this.liquids.length;a++)this.liquids[a].SetLiquidColor(O.GetLiquidColor(0))},l._UpdateUnkownIndex=function(){for(var t=this.colors.length-1,i=-1;t>=0&&(-1==i||i==this.colors[t]);)0!=this.colors[t]?(-1!=i||(i=this.colors[t]),t--):t--;for(var e=0;e<this._unknowns.length;e++)e>t&&(this._unknowns[e]=0)},l.UpdateUnknowns=function(t){this._unknowns=t,this._UpdateColors()},l.CheckComplete=function(){var t=this;return this.colors[0]>0&&this.colors.every((function(i){return i==t.colors[0]}))},l.UpdateComplete=function(t){void 0===t&&(t=!1);var i=this.CheckComplete();this._isComplete=i,i?t&&this.PlayCompleteAnim(!1):(this._ui.node_cork.active=!1,this._ui.spine_full.active=!1,this._ui.spine_complete.active=!1,this._ui.spine_complete_light.active=!1,this.unschedule(this.CompleteSpine),this.unschedule(this.CompleteSpineFinger),this.unschedule(this.CompleteSpineLight))},l.UpdateToMaxProgress=function(){this._maxProgress=this.GetLiquidCount()/this.colors.length,this.liquidProgress=this._maxProgress},l.UpdateLiquidMask=function(t){t>this._maxProgress&&(t=this._maxProgress);for(var i=0;i<this.bottleSize;i++){var e=this.liquids[i].isUnknown?U.LIQUID_COLOR_UNKNOWN:O.GetLiquidColor(this.colors[i]);(t*this.bottleSize<=i||0==i)&&(e=O.GetLiquidColor(0));var o;o=(this._ui.layout_masks.getComponent(p).contentSize.height-J)*i/this.bottleSize+J,this.liquidMasks[i]._ui.spr_mask_bottom.getComponent(g).color=e,this.liquidMasks[i].node.setPosition(0,o-this._ui.layout_masks.getComponent(p).height*this._ui.layout_masks.getComponent(p).anchorY)}if(t<=0)this._ui.node_liquid_mask.active=!1;else{this._ui.node_liquid_mask.active=!0;var n=Math.ceil(t*this.bottleSize-1e-4),s=this.colors[n-1],l=(this._ui.layout_liquids.getComponent(p).contentSize.height-J)*t+J;t<1/this.bottleSize&&(l=(this._liquidSize.height+J)*(t*this.bottleSize)),this._ui.node_liquid_mask.setPosition(0,l-this._ui.node_mask_parent.getComponent(p).height*this._ui.node_mask_parent.getComponent(p).anchorY),this._ui.spr_mask_liquid.getComponent(g).color=this.liquids[n-1].isUnknown?U.LIQUID_COLOR_UNKNOWN:O.GetLiquidColor(s);var a=l-this._ui.node_mask.getComponent(p).height*this._ui.node_mask.getComponent(p).anchorY;this._ui.spine_water_up.getComponent(C.Skeleton).color=O.GetLiquidColor(s),this._ui.spine_water_up.setPosition(0,a),this._ui.spine_water_wave.setPosition(0,a+7),this._ui.spine_water_drip.getComponent(C.Skeleton).color=O.GetDripColor(s),this._ui.spine_water_drip.setPosition(0,a),this._ui.spine_water_bubble.setPosition(0,a+60),this._ui.spine_water_splash.getComponent(C.Skeleton).color=O.GetDripColor(s),this._ui.spine_water_splash.setPosition(0,a+10),this._ui.spine_water_drip_splash.getComponent(C.Skeleton).color=O.GetDripColor(s),this._ui.spine_water_drip_splash.setPosition(0,a+20)}},l.SetSwapEnable=function(t){this._ui.node_click.active=!t,this.liquids.forEach((function(i){i.toggle.enabled=t,i.toggle.interactable=t}))},l.SetSelected=function(t,i){var e=this._isSelected!=t;this._isSelected=t;var o=O.GetBottleTopTypeAndCount(i||this.colors),n=o[0],s=o[1];t&&e?this.DripUp(n,s):!t&&e&&this.DripDown(n,s)},l.ResetSelected=function(){this._isSelected=!1,r.stopAllByTarget(this._ui.node_water_drip_select),this._isMovingDrip=!1,this._ui.node_water_drip_select.active=!1},l.DripUp=function(t,i){b.playEffect(L.SOUND_PICK_UP_DRIP),r.stopAllByTarget(this._ui.node_water_drip_select),r.stopAllByTag(this._waterUpTweenTag),this._isMovingDrip=!1,this._ui.spine_water_drip_splash.active=!1;var e=(this.GetLiquidCount()-i)/this.colors.length,o=this._ui.layout_liquids.getComponent(p).height*e+8+Z.height*i/2,n=this._ui.node_parent.getComponent(p).height+57;this._ui.spine_water_drip_select.getComponent(C.Skeleton).color=O.GetDripColor(t),this._ui.node_water_drip_select.active=!0,this._ui.spine_water_drip_select.getComponent(C.Skeleton).setAnimation(0,"shang",!1),this._ui.spine_water_drip_select.getComponent(C.Skeleton).addAnimation(0,"idle",!0),this._ui.spine_water_drip_select_light.getComponent(C.Skeleton).setAnimation(0,"shang",!1),this._ui.spine_water_drip_select_light.getComponent(C.Skeleton).addAnimation(0,"idle",!0),this._ui.node_water_drip_select.setPosition(new d(0,o)),k(this._ui.node_water_drip_select).to(3*Q,{position:new d(0,n)},{easing:"cubicOut"}).start(),this.liquidProgress=e},l.DripDown=function(t,e,o){var n=this;r.stopAllByTarget(this._ui.node_water_drip_select),r.stopAllByTag(this._waterUpTweenTag),this._isMovingDrip=!1;var s=this.GetLiquidCount(),l=(s-e)/this.colors.length,a=this._ui.layout_liquids.getComponent(p).height*l+8+Z.height*e/2,_=this._ui.node_parent.getComponent(p).height+57;this.liquidProgress=l,this._ui.spine_water_drip_select.getComponent(C.Skeleton).color=O.GetDripColor(t),this._ui.node_water_drip_select.active=!0,this._ui.spine_water_drip_select.getComponent(C.Skeleton).setAnimation(0,"xia",!1),this._ui.spine_water_drip_select.getComponent(C.Skeleton).addAnimation(0,"idle",!0),this._ui.spine_water_drip_select_light.getComponent(C.Skeleton).setAnimation(0,"xia",!1),this._ui.spine_water_drip_select_light.getComponent(C.Skeleton).addAnimation(0,"idle",!0),this._ui.node_water_drip_select.setPosition(new d(0,_));var h=this.getComponent(i);k(this._ui.node_water_drip_select).to(3*Q,{position:new d(0,a)},{easing:"linear"}).call((function(){n._ui.node_water_drip_select.active=!1;var t=Q*e;t>6*Q&&(t=6*Q),k(h).tag(n._waterUpTweenTag).to(t,{liquidProgress:s/n.colors.length}).start(),n.PlayWaterDripSplash(),o&&o()})).start()},l.MoveDripTo=function(t,i,e,o){this._isMovingDrip=!0,this._ui.spine_water_drip_select.getComponent(C.Skeleton).color=O.GetDripColor(t),this._ui.node_water_drip_select.active=!0,this._ui.spine_water_drip_select.getComponent(C.Skeleton).setAnimation(0,"idle",!0),this._ui.spine_water_drip_select_light.getComponent(C.Skeleton).setAnimation(0,"idle",!0);var n=this.node.worldPosition.clone(),s=this._ui.node_parent.getComponent(p).height+57;n.y+=s;var l=S(0,s),a=i.subtract(n).multiplyScalar(1/e),_=l.clone().add(a).toVec2(),r=w((l.x+_.x)/2,l.y+100);D.BezierTo(this._ui.node_water_drip_select,6*Q,_,r,l,{}).start(),k(this.node).delay(6*Q).call((function(){o&&o()})).start()},l.PlayWaterDripSplash=function(){b.playEffect(L.SOUND_DROP_DRIP),this._ui.spine_water_drip_splash.active=!0,this._ui.spine_water_drip_splash.getComponent(C.Skeleton).setAnimation(0,"shui",!1)},l._UpdateLiquidProgress=function(t){var i=this;this.liquids.forEach((function(e,o){if(0!=i.colors[o]){var n=t*i.bottleSize-o;n<0?n=0:n>1&&(n=1),e.SetFillProgress(n)}})),this.UpdateLiquidMask(t)},l.PlayPourInAnim=function(t,i){void 0===i&&(i=1),i<1&&(i=1),i>4&&(i=4);var e=U.MOVE_BOTTLE_TIME_SCALE*U.POUR_TIME_SCALES[i-1]*1.3;this._ui.spine_water_flow.active=!0;var o=this._ui.spine_water_flow.getComponent(C.Skeleton);o.timeScale=e,o.color=t,o.setAnimation(0,"animation",!1)},l.PlayWaterUpAnim=function(t,i){void 0===i&&(i=1),i<1&&(i=1),i>4&&(i=4);var e=1;1==i?(b.playEffect(L.SOUND_POUR_WATER_1),e=4):2==i?(b.playEffect(L.SOUND_POUR_WATER_2),e=2.8):3==i?(b.playEffect(L.SOUND_POUR_WATER_3),e=2):4==i&&(b.playEffect(L.SOUND_POUR_WATER_4),e=1.6);var o=this._ui.spine_water_up.getComponent(v);o.opacity=0,k(o).to(.4,{opacity:255}).timeScale(e).start();var n=this._ui.node_liquid_mask.getComponent(v),s=this._ui.node_liquid_mask;n.opacity=255,s.scale=new d(1,1,1);var l=this._ui.spine_water_wave.getComponent(C.Skeleton);l.timeScale=1,k(this._ui.spine_water_wave).delay(0).call((function(){l.node.active=!0,l.setAnimation(0,"shuibo",!1)})).start();var a=this._ui.spine_water_drip.getComponent(C.Skeleton);a.timeScale=1,a.node.active=!0,a.setAnimation(0,"shuidi",!1);var _=this._ui.spine_water_bubble.getComponent(C.Skeleton);_.timeScale=1,_.node.active=!0,_.setAnimation(0,"paopao",!1)},l.CheckIfShowComplete=function(){this._isComplete&&(this.unschedule(this.PlayCompleteAnim),this.scheduleOnce(this.PlayCompleteAnim,10*Q))},l.PlayCompleteAnim=function(t){void 0===t&&(t=!0);var i=this._ui.node_cork;i.active=!0,A.SetOpacity(i,0);var e=this.node.getComponent(q);t?(e.play("saizi"),this.PlayCompleteSpine(),this.PlayCompleteSpineFinger(),this.PlayCompleteSpineLight()):(e.play("saizi_jz"),this._ui.spine_complete.active=!0,this._ui.spine_complete.getComponent(C.Skeleton).setAnimation(0,"jz",!1))},l.PlayCompleteSpine=function(){this.scheduleOnce(this.CompleteSpine,6*Q)},l.CompleteSpine=function(t){this._ui.spine_full.active=!0,this._ui.spine_full.getComponent(C.Skeleton).setAnimation(0,"Boom"+y(1,5),!1),b.playEffect(L.SOUND_COLLECT_BOTTLE)},l.PlayCompleteSpineFinger=function(){this._ui.spine_complete.getComponent(C.Skeleton).node.active=!1,this.scheduleOnce(this.CompleteSpineFinger,13*Q)},l.CompleteSpineFinger=function(){var t=this._ui.spine_complete.getComponent(C.Skeleton);t.node.active=!0,t.setAnimation(0,"open",!1)},l.PlayCompleteSpineLight=function(){this.scheduleOnce(this.CompleteSpineLight,4*Q)},l.CompleteSpineLight=function(){var t=this._ui.spine_complete_light.getComponent(C.Skeleton);t.node.active=!0,t.setAnimation(0,"animation",!1)},l.PlayVanishColorAnim=function(t,i,e,o,n){void 0===e&&(e=0);var s=this;k(this.node).delay(e).call((function(){b.playEffect(L.SOUND_VANISH_COLOR),s._ui.spine_vanish_color_bg.getComponent(C.Skeleton).setAnimation(0,"5hou",!1),s._ui.spine_vanish_color_fg.getComponent(C.Skeleton).setAnimation(0,"5qian",!1),s._unknowns=i,s.SetColors(t),n()})).start()},s(i,[{key:"isVideoBottle",get:function(){return this._isVideoBottle}},{key:"isPouring",get:function(){return this._pouringCount>0}},{key:"unknowns",get:function(){return this._unknowns}},{key:"isComplete",get:function(){return this._isComplete}},{key:"liquidProgress",get:function(){return this._liquidProgress},set:function(t){this._liquidProgress=t,this._UpdateLiquidProgress(t)}}]),i}(T))._prefabUrl="widget/LongBottleItem",j._className="LongBottleItem",H=i((W=j).prototype,"liquidPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=i(W.prototype,"liquidMaskPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=i(W.prototype,"liquidUnknownPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=W))||V));l._RF.pop()}}}));

System.register("chunks:///_virtual/LongBottleItemPool.ts",["cc","./BundleManager.ts","./Log.ts","./UIHelp.ts","./LongBottleItem.ts"],(function(t){var e,n,o,i,l,a;return{setters:[function(t){e=t.cclegacy,n=t.Tween},function(t){o=t.BundleManager},function(t){i=t.default},function(t){l=t.default},function(t){a=t.default}],execute:function(){e._RF.push({},"9e8acWfjCtFWY/gYhGw8FIM","LongBottleItemPool",void 0);var s=function(){function t(){this._bottlePrefab=void 0,this._bottleItemCache=[]}t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance};var e=t.prototype;return e.setBottlePrefab=function(t){null==this._bottlePrefab&&(this._bottlePrefab=t)},e.getBottleItem=function(t){var e;return this._bottleItemCache.length>0&&(e=this._bottleItemCache.pop()),null!=e&&e.isValid?(e.init([t]),e.node.setPosition(0,0)):e=l.CreateWidget(a,this._bottlePrefab,t),e},e.recycleBottleItem=function(t){n.stopAllByTarget(t),n.stopAllByTarget(t.node),t.node.removeFromParent(),this._bottleItemCache.push(t)},e.clearCache=function(){this._bottleItemCache=[]},e.loadBottleSkins=function(t){o.loadBundle("texture",(function(e,n){n.loadDir("texture/bottle/skins",(function(e,n){i.log("loadBottleSkins",e,n),t&&t()}))}))},e.loadBottleSpines=function(t){o.loadBundle("animation",(function(e,n){n.loadDir("spines/bottle",(function(e,n){i.log("loadBottleSpines",e,n),t&&t()}))}))},t}();s._instance=void 0;t("default",s.getInstance());e._RF.pop()}}}));

System.register("chunks:///_virtual/MahjongItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIHelp.ts","./GameMacros.ts"],(function(e){var t,r,a,i,n,o,p,u,l,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,p=e.Node,u=e.Component},function(e){l=e.default},function(e){c=e.GameMacros,s=e.CardPlayType}],execute:function(){var m,h,y,b,d,f,T,S,g,v,C;n._RF.push({},"c24e02PCohL0YOrXgbg4akf","MahjongItem",void 0);var B=o.ccclass,N=o.property;e("MahjongItem",(m=B("MahjongItem"),h=N({type:p}),y=N({type:p}),b=N({type:p}),d=N({type:p}),m((S=t((T=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"numberSp",S,i(t)),a(t,"cardTypeSp",g,i(t)),a(t,"leftBoard",v,i(t)),a(t,"topBoard",C,i(t)),t.mNumber=0,t.mCubeType=0,t.mCubeTypeExt=0,t}r(t,e);var n=t.prototype;return n.start=function(){this.numberSp.name},n.update=function(e){},n.getNumber=function(){return this.mNumber},n.setNumber=function(e,t){void 0===t&&(t=!0),this.mNumber=e,t&&this.updateNumber()},n.updateNumber=function(){this.numberSp.name,null!=this.numberSp&&l.SetLocalSpriteFrame(this.numberSp,c.GetNumberResPath(this.mNumber))},n.getCubeExtTypeData=function(){return this.mCubeTypeExt},n.setCubeExtTypeData=function(e){this.mCubeTypeExt=e},n.setCardType=function(e){if(this.mCubeType=e,e==s.Normal)return null!=this.cardTypeSp&&(this.cardTypeSp.active=!1),this.leftBoard&&(this.leftBoard.active=!1),void(this.topBoard&&(this.topBoard.active=!1));e!=s.BOARDLEFT?e!=s.BOARDTOP?null!=this.cardTypeSp&&(e==s.ICE||e==s.VINE?l.SetLocalSpriteFrame(this.cardTypeSp,c.GetCardPlayTypeResPath(e)):e==s.BOX2&&(this.mCubeTypeExt=2,l.SetLocalSpriteFrame(this.cardTypeSp,c.GetCardPlayTypeResPath(e))),this.cardTypeSp.active=!0):this.topBoard.active=!0:this.leftBoard.active=!0},t}(u)).prototype,"numberSp",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(T.prototype,"cardTypeSp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(T.prototype,"leftBoard",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(T.prototype,"topBoard",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=T))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./TableCreator.ts","./GameMacros.ts","./GameModel.ts","./MahjongItem.ts","./UI_GameMap.ts","./grid-layout.ts","./yx-collection-view.ts","./yx-table-layout.ts","./CommonUtils.ts","./DeepClone.ts","./WebHelper.mjs_cjs=&original=.js","./TableCalcWokerManager.ts","./TableCalcWorker.ts","./TableGenerateWokerManager.ts","./TableGenerateWorker.ts","./WorkerHelper.mjs_cjs=&original=.js","./WorkerHelper.ts","./Defines.ts","./GameAdMgr.ts","./GameScene.ts","./GameUtils.ts","./LoadingScene.ts","./SceneManager.ts","./WechatManager.ts","./LevelMapLoader.ts","./RankDataMgr.ts","./BottleData.ts","./GameLevelSaveData.ts","./LevelConfig.ts","./Player.ts","./ProvinceRank.ts","./RankData.ts","./SaveData.ts","./SignIn.ts","./Skin.ts","./StepRecord.ts","./TASaveData.ts","./Theme.ts","./User.ts","./ActionHelp.ts","./AudioManager.ts","./BundleManager.ts","./CfgManager.ts","./DataManager.ts","./EventManager.ts","./ExceptionHandler.ts","./LifecycleManager.ts","./Log.ts","./SceneBase.ts","./UIBase.ts","./UIFit.ts","./UIHelp.ts","./UIManager.ts","./Utils.ts","./auto_ABItem.ts","./auto_BottleItem.ts","./auto_BottleRackItem.ts","./auto_ChallengeBottleRackItem.ts","./auto_FinishRankItem.ts","./auto_HallRankItem.ts","./auto_LiquidItem.ts","./auto_LiquidMaskItem.ts","./auto_LiquidUnknownItem.ts","./auto_LongBottleItem.ts","./auto_MoreItem.ts","./auto_SkinItem.ts","./auto_UIABTestLayer.ts","./auto_UIChallengeGameFinish.ts","./auto_UIChallengeGameLayer.ts","./auto_UIChallengeLayer.ts","./auto_UICollectGameLayer.ts","./auto_UICommonAdDialog.ts","./auto_UIFlyThemeLayer.ts","./auto_UIGameLayer.ts","./auto_UIGameResult.ts","./auto_UIGameResultRank.ts","./auto_UIGetGiftBox.ts","./auto_UIGiftLayer.ts","./auto_UIGuideLayer.ts","./auto_UIHallLayer.ts","./auto_UIHallSetting.ts","./auto_UILoading.ts","./auto_UILoadingLayer.ts","./auto_UILoginShareLayer.ts","./auto_UIMoreLayer.ts","./auto_UINewTypeGuideDialog.ts","./auto_UINoticeLayer.ts","./auto_UIPermission.ts","./auto_UIPropUseLayer.ts","./auto_UIRankLayer.ts","./auto_UIRankUpgrade.ts","./auto_UIRebornDialog.ts","./auto_UIShareLayer.ts","./auto_UIShareRewardLayer.ts","./auto_UISideBarLayer.ts","./auto_UISignInLayer.ts","./auto_UISignInReward.ts","./auto_UITestLayer.ts","./auto_UIThemeSkin.ts","./BgShake.ts","./EllipsisLabel.ts","./IPhoneXCompat.ts","./Palette.ts","./RoundRectMask.ts","./tableView.ts","./tableViewCell.ts","./BaseUIGameLayer.ts","./UIABTestLayer.ts","./UIChallengeGameFinish.ts","./UIChallengeGameLayer.ts","./UIChallengeLayer.ts","./UICollectGameLayer.ts","./UICommonAdDialog.ts","./UIFlyThemeLayer.ts","./UIGameLayer.ts","./UIGameResult.ts","./UIGameResultRank.ts","./UIGetGiftBox.ts","./UIGiftLayer.ts","./UIGuideLayer.ts","./UIHallLayer.ts","./UIHallSetting.ts","./UILoading.ts","./UILoadingLayer.ts","./UILoginShareLayer.ts","./UIMoreLayer.ts","./UINewTypeGuideDialog.ts","./UINoticeLayer.ts","./UIPermission.ts","./UIPropUseLayer.ts","./UIRankLayer.ts","./UIRankUpgrade.ts","./UIRebornDialog.ts","./UIShareLayer.ts","./UIShareRewardLayer.ts","./UISideBarLayer.ts","./UISignInLayer.ts","./UISignInReward.ts","./UITestLayer.ts","./UIThemeSkin.ts","./ABItem.ts","./BottleItem.ts","./BottleRackItem.ts","./ChallengeBottleRackItem.ts","./FinishRankItem.ts","./HallRankItem.ts","./LiquidItem.ts","./LiquidMaskItem.ts","./LiquidUnknownItem.ts","./LongBottleItem.ts","./MoreItem.ts","./RankLevelItem.ts","./SkinItem.ts","./ThemeItem.ts","./BytedancePlatform.ts","./PlatformManager.ts","./saGameConfig.ts","./seeg_td.mjs_cjs=&original=.js","./tdanalytics.mg.cocoscreator.min.mjs_cjs=&original=.js","./ABTestUtil.ts","./BadgeUtil.ts","./BottleItemPool.ts","./DGPlatformInit.ts","./LongBottleItemPool.ts","./S3Util.ts","./SolveGameUtil.ts","./TAData.ts","./UITask.ts","./UIUtil.ts","./VibrateUtil.ts","./BottleSetting.ts","./ErrorInfo.ts","./TestScene.ts","./WaterSortGenerator.ts","./WaterSortGeneratorChallenge.ts","./WaterSortResolver.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MoreItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./AudioManager.ts","./Defines.ts","./UIHelp.ts","./WechatManager.ts"],(function(e){var t,n,i,a,r,l,o,s,p,c,u,f,b,g,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Label,s=e.Node,p=e.UITransform,c=e.Size},function(e){u=e.GUIBase},function(e){f=e.default},function(e){b=e.Sfx},function(e){g=e.default},function(e){_=e.default}],execute:function(){var m,h,y,I,d,v,D,z,U,w,M,S,x,L;r._RF.push({},"0c5a0s6r8JFbIRf3NrMg6Aq","MoreItem",void 0);var N=l.ccclass,R=l.property;e("default",(m=N("MoreItem"),h=R({type:o}),y=R({type:s}),I=R({type:s}),d=R({type:o}),v=R({type:o}),m(((L=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this)._ui=void 0,i(t,"name_label",U,a(t)),i(t,"icon_sp",w,a(t)),i(t,"tag_sp",M,a(t)),i(t,"tag_label",S,a(t)),i(t,"btn_label",x,a(t)),t.m_index=0,t.appID="",t.url="",t}n(t,e);var r=t.prototype;return r.onInit=function(e){},r.onUILoad=function(){},r.SetData=function(e,t){var n=this;this.m_index=e,this.name_label.string=t.name,g.SetRemoteSpriteFrame(this.icon_sp,t.imgUrls[0],(function(){null!=n.icon_sp&&(n.icon_sp.getComponent(p).contentSize=new c(102,102))}));for(var i=t.tag.split("#"),a=0;a<i.length;a++)this.tag_sp[a].active=!0,this.tag_label[a].string=i[a],this.tag_sp[a].getComponent(p).contentSize=new c(24*i[a].length+12,30);this.url=t.startPath,this.appID=t.appID,this.btn_label.string=t.btnDes},r.toClickItem=function(e,t){f.playEffect(b.SOUND_BUTTON),_.openWeChatURL(this.url,this.appID,this.m_index)},t}(u))._prefabUrl="widget/MoreItem",L._className="MoreItem",U=t((z=L).prototype,"name_label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(z.prototype,"icon_sp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(z.prototype,"tag_sp",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(z.prototype,"tag_label",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(z.prototype,"btn_label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=z))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/Palette.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,r,e,i,n,c,l,a,p,u,s;return{setters:[function(o){t=o.applyDecoratedDescriptor,r=o.inheritsLoose,e=o.initializerDefineProperty,i=o.assertThisInitialized,n=o.createClass},function(o){c=o.cclegacy,l=o.UIRenderer,a=o._decorator,p=o.warn,u=o.Component,s=o.Color}],execute:function(){var y,h,f,b,_,d,g,L,R,B,T,v;c._RF.push({},"470193Y5ipM95J/OKfzafY6","Palette",void 0);var w=a,m=w.ccclass,P=w.property,C=w.executeInEditMode,D=w.requireComponent,O=w.menu;o("Palette",(y=D(l),h=O("Public/Palette"),f=P({displayName:"↙ 左下"}),b=P({displayName:"↘ 右下"}),_=P({displayName:"↖ 左上"}),d=P({displayName:"↗ 右上"}),m(g=C(g=y(g=h((R=t((L=function(o){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=o.call.apply(o,[this].concat(n))||this,e(t,"_colorLB",R,i(t)),e(t,"_colorRB",B,i(t)),e(t,"_colorLT",T,i(t)),e(t,"_colorRT",v,i(t)),t.ur=void 0,t}r(t,o);var c=t.prototype;return c.onLoad=function(){var o;if(this.ur=this.node.getComponent(l),36!==(null==(o=this.ur._renderData)?void 0:o.chunk.vb.length))return p("Palette只对cc.Sprite和cc.Label有效！"),void this.destroy();this.ur._useVertexOpacity=!0},c.updateColor=function(){var o=this.ur._renderData.chunk.vb,t=this._colorLB,r=this._colorRB,e=this._colorLT,i=this._colorRT;o[5]=t.r/255,o[6]=t.g/255,o[7]=t.b/255,o[8]=t.a/255,o[14]=r.r/255,o[15]=r.g/255,o[16]=r.b/255,o[17]=r.a/255,o[23]=e.r/255,o[24]=e.g/255,o[25]=e.b/255,o[26]=e.a/255,o[32]=i.r/255,o[33]=i.g/255,o[34]=i.b/255,o[35]=i.a/255},c.onEnable=function(){this.updateColor()},c.onDisable=function(){var o=this.ur._renderData.chunk.vb,t=this.ur.color;o[5]=o[14]=o[23]=o[32]=t.r/255,o[6]=o[15]=o[24]=o[33]=t.g/255,o[7]=o[16]=o[25]=o[34]=t.b/255,o[8]=o[17]=o[26]=o[35]=t.a/255},n(t,[{key:"colorLB",get:function(){return this._colorLB},set:function(o){this._colorLB=o,this.updateColor()}},{key:"colorRB",get:function(){return this._colorRB},set:function(o){this._colorRB=o,this.updateColor()}},{key:"colorLT",get:function(){return this._colorLT},set:function(o){this._colorLT=o,this.updateColor()}},{key:"colorRT",get:function(){return this._colorRT},set:function(o){this._colorRT=o,this.updateColor()}}]),t}(u)).prototype,"_colorLB",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(255,255,255,255)}}),t(L.prototype,"colorLB",[f],Object.getOwnPropertyDescriptor(L.prototype,"colorLB"),L.prototype),B=t(L.prototype,"_colorRB",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(255,255,255,255)}}),t(L.prototype,"colorRB",[b],Object.getOwnPropertyDescriptor(L.prototype,"colorRB"),L.prototype),T=t(L.prototype,"_colorLT",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(255,255,255,255)}}),t(L.prototype,"colorLT",[_],Object.getOwnPropertyDescriptor(L.prototype,"colorLT"),L.prototype),v=t(L.prototype,"_colorRT",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(255,255,255,255)}}),t(L.prototype,"colorRT",[d],Object.getOwnPropertyDescriptor(L.prototype,"colorRT"),L.prototype),g=L))||g)||g)||g)||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformManager.ts",["cc","./Log.ts","./WechatManager.ts","./BytedancePlatform.ts"],(function(t){var o,r,e,n,a,f,l;return{setters:[function(t){o=t.cclegacy,r=t._decorator,e=t.sys,n=t.randomRangeInt},function(t){a=t.default},function(t){f=t.default},function(t){l=t.default}],execute:function(){var E,A;o._RF.push({},"97228W0KCJEd78ffsyzQC0i","PlatformManager",void 0);var m=r.ccclass,i=t("PlatformManager",m("PlatformManager")(((A=function(){function t(){this._willShowAd=!1,this.init()}t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance};var o=t.prototype;return o.getLocalUserInfo=function(){return e.platform==e.Platform.WECHAT_GAME?f.getLocalUserInfo():e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.getLocalUserInfo():void 0},o.init=function(){},o.postMessage=function(t){e.platform==e.Platform.WECHAT_GAME?f.postMessage(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.postMessage(t)},o.toWxPosition=function(t){return e.platform==e.Platform.WECHAT_GAME?f.toWxPosition(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.toTTPosition(t):void 0},o.toWxSize=function(t){return e.platform==e.Platform.WECHAT_GAME?f.toWxSize(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.toTTSize(t):void 0},o.initPlatformInfo=function(){e.platform==e.Platform.WECHAT_GAME?f.initWxInfo():e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.initTTInfo()},o.onHide=function(t){e.platform==e.Platform.WECHAT_GAME?f.onHide(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.onHide(t)},o.onShow=function(t){e.platform==e.Platform.WECHAT_GAME?f.onShow(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.onShow(t)},o.getUserInfo=function(t){e.platform==e.Platform.WECHAT_GAME?f.getUserInfo(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.getUserInfo(t):t&&t()},o.setUserLevel=function(t){return e.platform==e.Platform.WECHAT_GAME?f.setUserLevel(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.setUserLevel(t):Promise.resolve(!1)},o.removeUserLevel=function(){e.platform==e.Platform.WECHAT_GAME?f.removeUserLevel():e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.removeUserLevel()},o.shareAppMessage=function(t,o){if(void 0===o&&(o=""),e.platform==e.Platform.WECHAT_GAME){var r=n(0,3);f.shareAppMessage(t,o,r)}else e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.shareAppMessage(t,o)},o.createBlubBtn=function(t,o,r){if(void 0===o&&(o=60),void 0===r&&(r=60),e.platform==e.Platform.WECHAT_GAME)return f.createBlubBtn(t,o,r);e.platform,e.Platform.BYTEDANCE_MINI_GAME},o.AddGetUserInfoButton=function(t,o,r){if(e.platform==e.Platform.WECHAT_GAME)return f.AddGetUserInfoButton(t,o,r);e.platform,e.Platform.BYTEDANCE_MINI_GAME},o.CheckNeedAuthUserInfo=function(){return e.platform==e.Platform.WECHAT_GAME?new Promise((function(t){f.requirePrivacyAuthorize().then((function(o){o?f.CheckNeedAuthUserInfo().then((function(o){a.log("wx need auth user info: ",o),t(o)})):t(!1)}))})):e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.CheckNeedAuthUserInfo():Promise.resolve(!0)},o.SetNeedAuthUserInfo=function(t){e.platform==e.Platform.WECHAT_GAME?f.SetNeedAuthUserInfo(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.SetNeedAuthUserInfo(t)},o.CheckIsAuthedFriendInfo=function(){return e.platform==e.Platform.WECHAT_GAME?f.CheckIsAuthedFriendInfo():e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.CheckIsAuthedFriendInfo():Promise.resolve(!0)},o.loadAllAd=function(){e.platform==e.Platform.WECHAT_GAME?f.loadAllAd():e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.loadAllAd()},o.createRewardedVideoAd=function(t,o,r){return void 0===r&&(r=!1),e.platform==e.Platform.WECHAT_GAME?f.createRewardedVideoAd(t,o,r):e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.createRewardedVideoAd(t,o,r):void 0},o.createInterstitialAd=function(t,o){return e.platform==e.Platform.WECHAT_GAME?f.createInterstitialAd(t,o):e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.createInterstitialAd(t,o):void 0},o.saveError=function(t){e.platform==e.Platform.WECHAT_GAME?f.saveError(t):e.platform==e.Platform.BYTEDANCE_MINI_GAME&&l.saveError(t)},o.GetPlatformEnvVersion=function(){return e.platform==e.Platform.WECHAT_GAME?f.GetWxEnvVersion():e.platform==e.Platform.BYTEDANCE_MINI_GAME?l.GetTTEnvVersion():"unknown"},o.GetABTestString=function(t){if(e.platform==e.Platform.WECHAT_GAME)return f.GetABTestString(t)},o.GetPlatformPackageName=function(){return e.platform==e.Platform.WECHAT_GAME?"com.diguo.wechatgame.watersort":e.platform==e.Platform.BYTEDANCE_MINI_GAME?"com.diguo.bytedanceminigame.watersort":"watersort.unknown"},o.GetChannel=function(){return e.platform==e.Platform.WECHAT_GAME?"wechatminigame":e.platform==e.Platform.BYTEDANCE_MINI_GAME?"bytedanceminigame":"unknown"},o.GetUserEnterScene=function(){return e.platform==e.Platform.WECHAT_GAME?f.GetUserEnterScene():e.platform==e.Platform.BYTEDANCE_MINI_GAME?0:"unknown"},t}()).instance=void 0,E=A))||E);t("default",i.getInstance());o._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SignIn.ts","./Defines.ts","./DataManager.ts","./EventManager.ts","./Log.ts","./Utils.ts","./ProvinceRank.ts","./SaveData.ts","./Skin.ts","./Theme.ts"],(function(e){var a,t,r,o,i,l,n,s,d,h,c,u,C,P,p,v,m,S;return{setters:[function(e){a=e.inheritsLoose},function(e){t=e.cclegacy},function(e){r=e.SignIn},function(e){o=e.PROP_ID,i=e.GameEvent},function(e){l=e.default},function(e){n=e.default},function(e){s=e.default},function(e){d=e.default},function(e){h=e.ProvinceRank},function(e){c=e.SaveDataInt,u=e.SaveDataBool,C=e.SaveDataFloat,P=e.SaveDataMapInt,p=e.SaveDataStr,v=e.SaveData},function(e){m=e.SkinList},function(e){S=e.ThemeList}],execute:function(){t._RF.push({},"7d0d656RVNM44+tF42prcZW","Player",void 0);e("AwardType",function(e){return e[e.Coin=0]="Coin",e[e.Turn=1]="Turn",e[e.Theme=2]="Theme",e}({})),e("Player",function(e){function t(a){var t;return(t=e.call(this)||this)._playerId=void 0,t._willUpdate=!1,t.tempData={},t._playerId=a,t.prefix=t._playerId.toString(),t}a(t,e);var r=t.prototype;return r.initData=function(){this.load(),this.saveData(!1)},r.saveData=function(e){void 0===e&&(e=!0),e&&this.uploadDataToServer(),this.save()},r.deleteData=function(){this.remove()},r.bSholdShowShare=function(){var e=l.Player.ShareTime.val,a=l.getServerTime();return!d.IsSameDay(e,a)&&a>e},r.bShouldShowDailyShare=function(){var e=l.Player.LastShowLoginShareTime.val,a=l.getServerTime();return l.TA.TotalLoginDays.val>1&&!d.IsSameDay(e,a)&&a>e},r.AddProp=function(e,a,t){switch(void 0===t&&(t=!0),e){case o.REFRESH:this.RefreshPropCount.val+=a;break;case o.ADD_TIME:this.AddTimePropCount.val+=a;break;case o.VANISH_COLOR:this.VanishColorPropCount.val+=a;break;case o.STEP_BACK:this.StepBackPropCount.val+=a;break;case o.UNLOCK_BOTTLE:this.UnlockBottlePropCount.val+=a}this.saveData(),t&&n.emit(i.EventPropCountChange)},r.UseProp=function(e,a){switch(e){case o.REFRESH:this.RefreshPropCount.val-=a;break;case o.ADD_TIME:this.AddTimePropCount.val-=a;break;case o.VANISH_COLOR:this.VanishColorPropCount.val-=a;break;case o.STEP_BACK:this.StepBackPropCount.val-=a;break;case o.UNLOCK_BOTTLE:this.UnlockBottlePropCount.val-=a}this.saveData(),n.emit(i.EventPropCountChange)},r.GetPropCount=function(e){var a=0;switch(e){case o.REFRESH:a=this.RefreshPropCount.val;break;case o.ADD_TIME:a=this.AddTimePropCount.val;break;case o.VANISH_COLOR:a=this.VanishColorPropCount.val;break;case o.STEP_BACK:a=this.StepBackPropCount.val;break;case o.UNLOCK_BOTTLE:a=this.UnlockBottlePropCount.val}return a},r.SetChallengeComplete=function(e,a,t){var r=new Date(e,a,t).getTime();this.ChallengeCompleteDate.updateValue(r,1),this.saveData()},r.GetChallengeComplete=function(e,a,t){var r=new Date(e,a,t).getTime();return this.ChallengeCompleteDate.getValue(r)},r.setPrivacyAuthed=function(e){this.PrivacyAuthedStatus.val=e,this.saveData()},r.isPrivacyRejected=function(){return 0==this.PrivacyAuthedStatus.val},r.SetUserInfoAuthedRejected=function(){this.UserInfoAuthedRejected.val=!0,this.saveData()},r.IsUserInfoRejected=function(){return 1==this.UserInfoAuthedRejected.val},r.uploadDataToServer=function(){if(l.Player.SignIn.dirty||l.Player.RefreshPropCount.dirty||l.Player.VanishColorPropCount.dirty||l.Player.AddTimePropCount.dirty||l.Player.StepBackPropCount.dirty||l.Player.UnlockBottlePropCount.dirty||l.Player.ThemeId.dirty||l.Player.ThemeList.dirty||l.Player.LevelId.dirty||l.Player.RoundId.dirty||l.Player.ShareTime.dirty||l.Player.LastShowLoginShareTime.dirty||l.Player.SidebarAwardClaim.dirty||l.Player.CollectionAwardClaim.dirty||l.Player.ChallengeCompleteDate.dirty){var e=this.tempData;if(e.SignIn=l.Player.SignIn.str(),e.RefreshPropCount=l.Player.RefreshPropCount.val,e.VanishColorPropCount=l.Player.VanishColorPropCount.val,e.AddTimePropCount=l.Player.AddTimePropCount.val,e.StepBackPropCount=l.Player.StepBackPropCount.val,e.UnlockBottlePropCount=l.Player.UnlockBottlePropCount.val,e.ThemeId=l.Player.ThemeId.val,e.ThemeList=l.Player.ThemeList.str(),e.LevelId=l.Player.LevelId.val,e.RoundId=l.Player.RoundId.val,e.ShareTime=l.Player.ShareTime.val,e.LastShowLoginShareTime=l.Player.LastShowLoginShareTime.val,e.SidebarAwardClaim=l.Player.SidebarAwardClaim.val,e.CollectionAwardClaim=l.Player.CollectionAwardClaim.val,e.ChallengeCompleteDate=l.Player.ChallengeCompleteDate.str(),s.log("seeg setUserData",e),Object.keys(e).length>0){var a=l.Player.LastUpdateTime.val,t=l.getServerTime();if(t-a<1e4)if(this._willUpdate)s.log("seeg PlayerData syncServerData too fast");else{this._willUpdate=!0;var r=this;setTimeout((function(){if(r._willUpdate){var e=l.getServerTime();r.tempData.LastUpdateTime=e,l.Player.LastUpdateTime.val=e,l.Player.saveData(!1),seeg.setUserData(r.tempData),s.log("seeg PlayerData syncServerData in schedule",r.tempData),r.tempData={},r._willUpdate=!1}}),1e4)}else e.LastUpdateTime=t,l.Player.LastUpdateTime.val=t,seeg.setUserData(this.tempData),s.log("seeg PlayerData syncServerData immediately",this.tempData),this.tempData={}}}else s.log("seeg PlayerData no need to syncServerData")},r.syncServerData=function(e){e.LastUpdateTime&&e.LastUpdateTime<this.LastUpdateTime.val||(e.SignIn&&l.Player.SignIn.load(e.SignIn),e.RefreshPropCount&&(l.Player.RefreshPropCount.val=e.RefreshPropCount),e.VanishColorPropCount&&(l.Player.VanishColorPropCount.val=e.VanishColorPropCount),e.AddTimePropCount&&(l.Player.AddTimePropCount.val=e.AddTimePropCount),e.StepBackPropCount&&(l.Player.StepBackPropCount.val=e.StepBackPropCount),e.UnlockBottlePropCount&&(l.Player.UnlockBottlePropCount.val=e.UnlockBottlePropCount),e.ThemeId&&(l.Player.ThemeId.val=e.ThemeId),e.ThemeList&&l.Player.ThemeList.load(e.ThemeList),e.LevelId&&(l.Player.LevelId.val=e.LevelId),e.RoundId&&(l.Player.RoundId.val=e.RoundId),e.ShareTime&&(l.Player.ShareTime.val=e.ShareTime),e.LastShowLoginShareTime&&(l.Player.LastShowLoginShareTime.val=e.LastShowLoginShareTime),e.SidebarAwardClaim&&(l.Player.SidebarAwardClaim.val=e.SidebarAwardClaim),e.CollectionAwardClaim&&(l.Player.CollectionAwardClaim.val=e.CollectionAwardClaim),e.LastUpdateTime&&(l.Player.LastUpdateTime.val=e.LastUpdateTime),e.ChallengeCompleteDate&&l.Player.ChallengeCompleteDate.load(e.ChallengeCompleteDate),l.Player.saveData(!1))},r.clearServerData=function(){this._willUpdate=!1;var e={SignIn:"",RefreshPropCount:0,VanishColorPropCount:0,AddTimePropCount:0,StepBackPropCount:0,UnlockBottlePropCount:0,ThemeId:0,ThemeList:"",LevelId:1,RoundId:1,ShareTime:0,LastShowLoginShareTime:0,SidebarAwardClaim:!1,CollectionAwardClaim:!1,ChallengeCompleteDate:""};seeg.setUserData(e)},t}(function(e){function t(){var a;return(a=e.call(this)||this).LastUpdateTime=a.createData(c,"LastUpdateTime","0"),a.SignIn=a.createData(r,"signIn"),a.SkinId=a.createData(c,"skinId","0"),a.SkinList=a.createData(m,"skinList"),a.ThemeId=a.createData(c,"themeId","0"),a.ThemeList=a.createData(S,"themeList"),a.LevelId=a.createData(c,"levelId","1"),a.RoundId=a.createData(c,"roundId","1"),a.ShareTime=a.createData(c,"shareTime","0"),a.ShareIsClick=a.createData(u,"shareIsClick","false"),a.LastShowLoginShareTime=a.createData(C,"LastShowLoginShareTime","0"),a.LoginShareClick=a.createData(u,"loginShareClick","false"),a.SidebarNavigated=a.createData(u,"SidebarNavigated","false"),a.SidebarAwardClaim=a.createData(u,"SidebarAwardClaim","false"),a.CollectionAwardClaim=a.createData(u,"CollectionAwardClaim","false"),a.ProvinceRank=a.createData(h,"provincerank"),a.ProvinceRankTime=a.createData(c,"provinceranktime","0"),a.GiftLastTime=a.createData(c,"giftlasttime","0"),a.GiftIsGet=a.createData(u,"giftisget","false"),a.SignBottleIndex=a.createData(C,"signBottleIndex","-1"),a.FriendInteraction=a.createData(u,"friendInteraction","false"),a.ChallengeCompleteDate=a.createData(P,"ChallengeCompleteDate",""),a.RefreshPropCount=a.createData(c,"refreshPropCount","0"),a.VanishColorPropCount=a.createData(c,"vanishColorPropCount","0"),a.AddTimePropCount=a.createData(c,"addTimePropCount","0"),a.StepBackPropCount=a.createData(c,"stepBackPropCount","0"),a.UnlockBottlePropCount=a.createData(c,"UnlockBottlePropCount","0"),a.GameLevelSaveData=a.createData(p,"GameLevelSaveData",""),a.IsShownPropHintBubble=a.createData(u,"IsShownPropHintBubble","false"),a.PrivacyAuthedStatus=a.createData(c,"PrivacyAuthedStatus","-1"),a.UserInfoAuthedRejected=a.createData(u,"SaveDataBool",""),a}return a(t,e),t}(v)));t._RF.pop()}}}));

System.register("chunks:///_virtual/ProvinceRank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SaveData.ts","./Utils.ts","./DataManager.ts"],(function(t){var a,r,n,i,e,s,o;return{setters:[function(t){a=t.inheritsLoose,r=t.createForOfIteratorHelperLoose,n=t.createClass},function(t){i=t.cclegacy},function(t){e=t.SaveDataStr},function(t){s=t.default},function(t){o=t.default}],execute:function(){i._RF.push({},"42016DL4RhITp9xSc9w1X3U","ProvinceRank",void 0);t("ProvinceRank",function(t){function i(a){var r;return(r=t.call(this,a)||this)._rankList=[],r}a(i,t);var e=i.prototype;return e.load=function(t){var a=this;this._rankList=[],s.SplitStr(t,";").forEach((function(t){a._rankList.push(Number(t))})),this._rankList.length<=0&&(this.initData(),this.str(),this._dirty=!0,o.Player.saveData())},e.str=function(){for(var t,a="",n=r(this._rankList.values());!(t=n()).done;){a+=""+t.value,a+=";"}return a},e.initData=function(){if(!(this._rankList.length>0)){for(var t=0;t<100;t++){var a=4*t+Math.floor(4*Math.random());this._rankList.push(a)}o.Player.ProvinceRankTime.val=s.GetTime()}},e.updateData=function(){if(0!=this._rankList.length&&!s.IsSameDay(o.Player.ProvinceRankTime.val,s.GetTime())){for(var t=Math.floor(100*Math.random()),a=[],r=0;r<4;r++)this._rankList[t]!=4*t+r&&a.push(4*t+r);var n=Math.floor(3*Math.random());this._rankList[t]=a[n],o.Player.ProvinceRankTime.val=s.GetTime(),this._dirty=!0,o.Player.saveData()}},n(i,[{key:"RankList",get:function(){return this._rankList}}]),i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/RankData.ts",["cc"],(function(t){var a;return{setters:[function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"ef91flyHYFDIJ/T1VOPHs6N","RankData",void 0);t("RankData",(function(){this.rank=0,this.avatarUrl="",this.localAvatar="",this.nickName="",this.rankLevel=0,this.level=0,this.isSelf=!1,this.visible=!0}));a._RF.pop()}}}));

System.register("chunks:///_virtual/RankDataMgr.ts",["cc","./RankData.ts","./Defines.ts","./CfgManager.ts","./Utils.ts","./PlatformManager.ts","./BadgeUtil.ts"],(function(a){var e,t,n,c,r,i,f,d;return{setters:[function(a){e=a.cclegacy,t=a.pseudoRandomRangeInt},function(a){n=a.RankData},function(a){c=a.GameDefine},function(a){r=a.default},function(a){i=a.default},function(a){f=a.default},function(a){d=a.BadgeUtil}],execute:function(){e._RF.push({},"891cendDMFCCYOIdvBa8L4/","RankDataMgr",void 0);var l=a("RankDataMgr",function(){function a(){}return a.GetCurRankData=function(a){return this.UpdateRankData(a),this._curRankData},a.GetCurRank=function(a){var e;this.UpdateRankData(a);var t=this._curRankData.findIndex((function(a){return a.isSelf}));return(null==(e=this._curRankData[t])?void 0:e.level)==a?t:-1},a.UpdateRankData=function(a){this.LoadFakeData(a),this._curRankData.forEach((function(a){a.visible=!0}))},a.InsertSelfRankData=function(a,e){if(a.length>0&&a[a.length-1].level>e.level)return e.rank=a.length+1,a.push(e),a.length;for(var t=a.length-1;t>=0;t--){if(a[t].level==e.level)return e.rank=t+2,a.splice(t+1,0,e),t+1;a[t].rank=t+2}return-1},a.LoadWxRankData=function(){this._curRankData=[]},a.LoadFakeData=function(a){if(0==this._curRankData.length||-1==this._curRankData.findIndex((function(e){return e.isSelf&&e.level==a}))){var e=Math.floor(a/c.LEVEL_COUNT_PER_RANK_LEVEL);this._curRankData=this.LoadFakeDataOfLevel(e);var t=f.getLocalUserInfo(),r=new n;null!=t?(r.avatarUrl=t.avatarUrl,r.nickName=t.nickName):(r.localAvatar=c.PLAYER_HEADER_DEFAULT,r.nickName="你"),r.isSelf=!0,r.rankLevel=d.GetBageIndexByLevel(a),r.level=a,this.InsertSelfRankData(this._curRankData,r)}},a.UpdateSelfData=function(){if(0!=this._curRankData.length){var a=this._curRankData.find((function(a){return a.isSelf}));if(a){var e=f.getLocalUserInfo();null!=e?(a.avatarUrl=e.avatarUrl,a.nickName=e.nickName,a.localAvatar=""):(a.avatarUrl="",a.localAvatar=c.PLAYER_HEADER_DEFAULT,a.nickName="你")}}},a.LoadFakeDataOfLevel=function(a){var e=[],f=i.GetToday(),d=a*c.LEVEL_COUNT_PER_RANK_LEVEL;d<0&&(d=0);for(var l=d+c.LEVEL_COUNT_PER_RANK_LEVEL,u=r.getCfg("settlementrank"),s=r.getCfg("gamename"),o=s.length,k=1,v=l-1;v>=d&&k<100;v--)for(var h=u[v%(5*c.LEVEL_COUNT_PER_RANK_LEVEL)].level_grade,p=0;p<h&&k<100;p++){var R=f+100*k+a,_=new n;_.rank=k,_.localAvatar="avatars/touxiang_"+(t(R,0,370)+1),_.nickName=s[t(R,0,o)].play_name,_.rankLevel=a+1,_.level=v,e.push(_),k++}return e},a.LoadTestData=function(){this._curRankData=[];for(var a=0;a<99;a++){var e=new n;e.rank=a+1,e.avatarUrl=this._testAvatars[a],e.nickName=a+"_NickName$",e.rankLevel=2,e.level=Math.ceil((100-a)/20)+5,this._curRankData.push(e)}},a}());l._curRankData=[],l._testAvatars=["http://pics0.baidu.com/feed/f11f3a292df5e0fe28a54e86282bb5a65fdf7256.jpeg","http://pics0.baidu.com/feed/9345d688d43f87943caf3cdca4508ffa1ad53a4d.jpeg","http://pics0.baidu.com/feed/00e93901213fb80e152a4c1e419aae20bb3894dd.jpeg","http://pics0.baidu.com/feed/dcc451da81cb39dba7679d78a95d882aaa1830d6.jpeg","http://pics0.baidu.com/feed/8b13632762d0f70319d70f2f7db1d0332797c5b2.jpeg","http://pics0.baidu.com/feed/b2de9c82d158ccbfa8896b0860933d30b13541a1.jpeg","http://pics0.baidu.com/feed/d53f8794a4c27d1e7012340d6e9e2c60dcc43898.jpeg","http://pics0.baidu.com/feed/63d9f2d3572c11dfab37a4a2146ce3def603c222.jpeg","http://pics0.baidu.com/feed/962bd40735fae6cd33503da178f88e2a40a70fe7.jpeg","http://pics0.baidu.com/feed/622762d0f703918f29c72ec11b90139958eec4e6.jpeg"],e._RF.pop()}}}));

System.register("chunks:///_virtual/RankLevelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIHelp.ts","./BadgeUtil.ts"],(function(e){var t,l,a,n,i,r,o,s,p,b,u,c,g,_,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,o=e.Node,s=e.Label,p=e.Color,b=e.Sprite,u=e.UITransform,c=e.Size},function(e){g=e.GUIBase},function(e){_=e.default},function(e){m=e.BadgeUtil}],execute:function(){var h,f,d,w,y,v,I,z,S,k,C,U,R,B,L,D,F,O,N,P;i._RF.push({},"bbcc6aODzJP+4lP+Igy4YIy","RankLevelItem",void 0);var A=r.ccclass,G=r.property;e("default",(h=A("RankItem"),f=G({type:o}),d=G({type:o}),w=G({type:s}),y=G({type:o}),v=G({type:s}),I=G({type:o}),z=G({type:s}),S=G({type:s}),h(((P=function(e){function t(){for(var t,l=arguments.length,i=new Array(l),r=0;r<l;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"spr_bg",U,n(t)),a(t,"icon_sp",R,n(t)),a(t,"num_label",B,n(t)),a(t,"head_sp",L,n(t)),a(t,"name_label",D,n(t)),a(t,"badge_sp",F,n(t)),a(t,"badge_label",O,n(t)),a(t,"level_label",N,n(t)),t}l(t,e);var i=t.prototype;return i.onInit=function(e){},i.SetData=function(e,t){var l,a,n,i=this,r=e+1;switch(this.num_label.getComponent(s).string=""+r,r){case 1:l=new p(255,179,36),a=new p(255,231,134),n=new p(145,51,0);break;case 2:l=new p(23,165,255),a=new p(138,210,255),n=new p(20,63,91);break;case 3:l=new p(38,208,171),a=new p(100,247,215),n=new p(16,79,65);break;default:t.isSelf?(l=new p(157,133,187),a=new p(199,180,226),n=new p(255,255,255)):(l=new p(227,225,230),a=new p(255,255,244),n=new p(130,115,150))}var o=t.isSelf&&r>3;this.spr_bg.getComponent(b).color=l,this.icon_sp.getComponent(b).color=a,this.num_label.color=n,this.num_label.enableOutline=o,this.name_label.color=n,this.name_label.enableOutline=o,this.badge_label.color=n,this.badge_label.enableOutline=o,this.level_label.color=n,this.level_label.enableOutline=o,t.localAvatar?_.SetSpriteFrame(this.head_sp,t.localAvatar):t.avatarUrl?_.SetRemoteSpriteFrame(this.head_sp,t.avatarUrl,(function(){i.head_sp.getComponent(u).contentSize=new c(80,80)})):(this.head_sp.tag=null,this.head_sp.getComponent(b).spriteFrame=null);var g=t.nickName;g.length>4?(g=g.substring(0,4),this.name_label.getComponent(s).string=g+"..."):this.name_label.getComponent(s).string=""+g;var h=t.level;0!=h||t.isSelf||(h=1),this.level_label.getComponent(s).string=""+h,m.SetBadgeIcon(this.badge_sp,t.rankLevel),this.badge_label.getComponent(s).string=m.GetBadgeName(t.rankLevel)},t}(g))._prefabUrl="widget/RankItem",P._className="RankItem",U=t((C=P).prototype,"spr_bg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(C.prototype,"icon_sp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(C.prototype,"num_label",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(C.prototype,"head_sp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(C.prototype,"name_label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(C.prototype,"badge_sp",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(C.prototype,"badge_label",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(C.prototype,"level_label",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=C))||k));i._RF.pop()}}}));

System.register("chunks:///_virtual/RoundRectMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,i,o,a,s,u,p,c,h,d,l,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,s=t._decorator,u=t.macro,p=t.Mask,c=t.CCInteger,h=t.UITransform,d=t.game,l=t.Game,m=t.Component}],execute:function(){var f,g,k,y,_,C,R;a._RF.push({},"840f2jvShVFP6KZ/OqsrAQ2","RoundRectMask",void 0);var v=s.ccclass,M=s.property,w=s.requireComponent;s.menu;u.ENABLE_WEBGL_ANTIALIAS=!0;t("RoundRectMask",(f=v("RoundRectMask"),g=w(p),k=M(c),y=M({tooltip:"圆角半径:\n0-1之间为最小边长比例值, \n>1为具体像素值"}),f(_=g((R=e((C=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"_radius",R,i(e)),e.mask=void 0,e}n(e,t);var a=e.prototype;return a.onEnable=function(){this.mask=this.getComponent(p),this.updateMask(this.radius)},a.updateMask=function(t){var e=t>=0?t:0;e<1&&(e=Math.min(this.node.getComponent(h).width,this.node.getComponent(h).height)*e),this.mask.radius=e,this.mask.onDraw=this.onDraw.bind(this.mask),this.mask._updateGraphics=this._updateGraphics.bind(this.mask),this.mask.type=p.Type.GRAPHICS_RECT},a._updateGraphics=function(){var t=this._graphics;t&&this.onDraw(t)},a.onDraw=function(t){t.clear();var e=this.node,n=e.getComponent(h).width,r=e.getComponent(h).height,i=-n*e.getComponent(h).anchorX,o=-r*e.getComponent(h).anchorY;t.roundRect(i,o,n,r,this.radius||0),d.renderType===l.RENDER_TYPE_CANVAS?t.stroke():t.fill()},o(e,[{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t,this.updateMask(t)}}]),e}(m)).prototype,"_radius",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),e(C.prototype,"radius",[y],Object.getOwnPropertyDescriptor(C.prototype,"radius"),C.prototype),_=C))||_)||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/S3Util.ts",["cc","./DGPlatform.js","./DGJsb.js","./DGAdDefine.js","./DGDcb.js","./DGDcbDefault.js","./DGDcbDefine.js","./DGDcb_Android.js","./DGDcb_iOS.js","./DGDcb_Web.js","./DGIapDefine.js","./DGTA.js","./DGTADefault.js","./DGTA_Android.js","./DGTA_Web.js","./DGPlatformDefault.js","./DGPlatform_Android.js","./DGPlatform_Wx.js","./Log.ts"],(function(l){var n,t,e;return{setters:[function(l){n=l.cclegacy},null,null,null,function(l){t=l.DGDcb},null,null,null,null,null,null,null,null,null,null,null,null,null,function(l){e=l.default}],execute:function(){n._RF.push({},"cfad3K/EDBMfZ2MZqs4cVe9","S3Util",void 0);var u=l("NOTICE_TITLE_EMPTY","暂无公告"),c=l("NOTICE_CONTENT_EMPTY","暂无公告内容");l("S3Util",function(){function l(){}return l.getNoticeTitle=function(){var l,n,c=null==(l=(n=t.getInstance()).getGameSetting)?void 0:l.call(n,"notice_title","");return e.log("S3Util getNoticeTitle",c),""==c||null==c?u:c.replace(/\$/g,"\n")},l.getNoticeContent=function(){var l,n,u=null==(l=(n=t.getInstance()).getGameSetting)?void 0:l.call(n,"notice_content","");return e.log("S3Util getNoticeContent",u),""==u||null==u?c:u.replace(/\$/g,"\n")},l}());n._RF.pop()}}}));

System.register("chunks:///_virtual/saGameConfig.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var r;t._RF.push({},"44b88ZsfhZMd4CvnMN5VeA+","saGameConfig",void 0);var u=n.ccclass,i=(n.property,function(){function e(){}return e.getNumber=function(e,t){return t},e.getString=function(e,t){return t},e.getBool=function(e,t){return t},e}());e("SaGameConfig",u("SaGameConfig")(r=function(){function e(){}return e.GetBannerAdStartLevel=function(){return i.getNumber("06_bannerStartLevel",0)},e.GetInterAdStartLevel=function(){return i.getNumber("06_fullScreenAdStartLevel",2)},e.GetMoreStartDay=function(){return i.getNumber("06_MoreStartDay",2)},e.GetMoreStartLevel=function(){return i.getNumber("06_MoreStartLevel",5)},e.GetBounsDisapreLevelNum=function(){return i.getNumber("09_BounsDisapreLevelNum",1)},e.GetFlipRequestTypeDowngradeLevel=function(){return i.getNumber("09_FlipDowngradeLevel",1)},e.GetFlipTimesOneDay=function(){return i.getNumber("09_FlipTimesOneDay",3)},e.GetISAuditedVersion=function(){return i.getBool("01_ISAuditedVersion",!1)},e.GetCurrentVersion=function(){return i.getString("01_CurrentVersion","1.0.0")},e.GetForceUpdateMinVersion=function(){return i.getString("01_ForceUpdateMinVersion","1.0.0")},e.GetRewardNumUpdateToCurVersion=function(){return i.getNumber("01_UpdateToNowReward",200)},e.GetRewardNumUpdateToNextVersion=function(){return i.getNumber("01_UpdateToNextReward",200)},e.GetVideoCountDownTime=function(){return i.getNumber("04_BundleTime",120)},e.GetBundleTime=function(){return i.getNumber("04_BundleTime",21600)},e.GetRateInStoreProb=function(){return i.getNumber("03_RateInStoreProb",100)},e.GetRateInStoreCountry=function(){return i.getString("03_RateInStoreCountry","[]")},e.GetRateHiddenCountries=function(){return i.getString("03_RateHiddenCountries","[]")},e.GetMiniGameTimeForFinishInter=function(){return i.getNumber("05_MiniGameTimeForFinishInter",120)},e.GetDcbTimesOneDay=function(){return i.getNumber("dcb_full",3)},e.GetFinishInterDisplayType=function(){return i.getNumber("05_FinishInterDisplayType",0)},e.GetPauseLayerShowTime=function(){return i.getNumber("PauseShowTimeSpace",10)},e.GetPauseLayerShowADTime=function(){return i.getNumber("PauseFullAdShowTimeSpace",60)},e.GetShareGetCoinsStartDay=function(){return i.getNumber("10_shareGetCoinsStartDay",3)},e}())||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/SaveData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var a,n,e,i,r;return{setters:[function(t){a=t.createClass,n=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,r=t.sys}],execute:function(){i._RF.push({},"7498cp3+MpDcIMEOo7Vfzgg","SaveData",void 0);var s=t("SaveDataObjBase",function(){function t(t){this._key=void 0,this._val=void 0,this._dirty=!1,this._dataChangeEvent=[],this._key=t,this._dirty=!1}var n=t.prototype;return n.load=function(t){},n.str=function(){return""},n.addDataChangeEvent=function(t){var a;null==(a=this._dataChangeEvent)||a.push(t)},n.removeDataChangeEvent=function(t){var a;null==(a=this._dataChangeEvent)||a.splice(this._dataChangeEvent.indexOf(t),1)},n.clearDataChangeEvent=function(){this._dataChangeEvent=[]},n.notifyDataChangeEvent=function(){var t,a=this;null==(t=this._dataChangeEvent)||t.forEach((function(t){t(a._val)}))},a(t,[{key:"key",get:function(){return this._key}},{key:"val",get:function(){return this._val},set:function(t){this._val=t,this._dirty=!0}},{key:"dirty",get:function(){return this._dirty},set:function(t){this._dirty=t}}]),t}()),u=(t("SaveDataBool",function(t){function a(a){var n;return(n=t.call(this,a)||this)._val=!1,n}n(a,t);var e=a.prototype;return e.load=function(t){this._val="1"==t},e.str=function(){return this._val?"1":"0"},a}(s)),t("SaveDataInt",function(t){function a(a){var n;return(n=t.call(this,a)||this)._val=0,n}n(a,t);var e=a.prototype;return e.load=function(t){""!==t&&(this._val=parseInt(t))},e.str=function(){return this._val.toString()},a}(s)),t("SaveDataFloat",function(t){function a(a,n){var e;return void 0===n&&(n=0),(e=t.call(this,a)||this)._val=n,e}n(a,t);var e=a.prototype;return e.load=function(t){""!==t&&(this._val=parseFloat(t))},e.str=function(){return this._val.toString()},a}(s)),t("SaveDataStr",function(t){function a(a){var n;return(n=t.call(this,a)||this)._val="",n}n(a,t),a.create=function(t){return new a(t)};var e=a.prototype;return e.load=function(t){this._val=t},e.str=function(){return this._val},a}(s)));t("SaveDataMapInt",function(t){function i(a){var n;return(n=t.call(this,a)||this)._data=new Map,n}n(i,t);var r=i.prototype;return r.load=function(t){if(this._data.clear(),""!=t)for(var a=t.split(";"),n=0;n<a.length;++n){var e=a[n].split(",");if(e.length>1){var i=parseInt(e[0]),r=parseInt(e[1]);this._data.has(i)||this._data.set(i,r)}}},r.str=function(){for(var t,a="",n=e(this._data.entries());!(t=n()).done;){var i=t.value;a+=i[0]+","+i[1],a+=";"}return a},r.getValue=function(t,a){void 0===a&&(a=0);var n=a;return this._data.has(t)&&(n=this._data.get(t)),n},r.updateValue=function(t,a){this._data.set(t,a),this.dirty=!0},r.delValue=function(t){this._data.has(t)&&(this._data.delete(t),this.dirty=!0)},r.clear=function(){this._data.clear(),this.dirty=!0},a(i,[{key:"length",get:function(){return this._data.size}},{key:"keys",get:function(){return this._data.keys()}},{key:"values",get:function(){return this._data.values()}}]),i}(u)),t("SaveDataMapStr",function(t){function i(a){var n;return(n=t.call(this,a)||this)._data=new Map,n}n(i,t);var r=i.prototype;return r.load=function(t){if(this._data.clear(),""!=t)for(var a=t.split(";"),n=0;n<a.length;++n){var e=a[n].split(",");if(e.length>1){var i=e[0],r=e[1];this._data.has(i)||this._data.set(i,r)}}},r.str=function(){for(var t,a="",n=e(this._data.entries());!(t=n()).done;){var i=t.value;a+=i[0]+","+i[1],a+=";"}return a},r.getValue=function(t,a){void 0===a&&(a="");var n=a;return this._data.has(t)&&(n=this._data.get(t)),n},r.updateValue=function(t,a){this._data.set(t,a),this.dirty=!0},r.delValue=function(t){this._data.has(t)&&(this._data.delete(t),this.dirty=!0)},r.clear=function(){this._data.clear(),this.dirty=!0},a(i,[{key:"length",get:function(){return this._data.size}},{key:"keys",get:function(){return this._data.keys()}},{key:"values",get:function(){return this._data.values()}}]),i}(u)),t("SaveDataObj",function(t){function i(a){var n;return(n=t.call(this,a)||this)._data=new Map,n}n(i,t);var r=i.prototype;return r.load=function(t){if(this._data.clear(),""!=t)for(var a=t.split(";"),n=0;n<a.length;++n){var e=a[n].split(",");e.length>1&&(this._data.has(e[0])||this._data.set(e[0],e[1]))}},r.str=function(){for(var t,a="",n=e(this._data.entries());!(t=n()).done;){var i=t.value;a+=i[0]+","+i[1],a+=";"}return a},r.getValue=function(t,a){void 0===a&&(a="");var n=a;return this._data.has(t)&&(n=this._data.get(t)),n},r.updateValue=function(t,a){this._data.set(t,a),this.dirty=!0},r.delValue=function(t){this._data.has(t)&&(this._data.delete(t),this.dirty=!0)},r.clear=function(){this._data.clear(),this.dirty=!0},a(i,[{key:"length",get:function(){return this._data.size}},{key:"keys",get:function(){return this._data.keys()}},{key:"values",get:function(){return this._data.values()}}]),i}(u)),t("SaveDataArrInt",function(t){function e(a){var n;return(n=t.call(this,a)||this)._data=[],n}n(e,t);var i=e.prototype;return i.load=function(t){if(this._data.length=0,""!=t)for(var a=t.split(";"),n=0;n<a.length;++n)this._data.push(parseInt(a[n]))},i.str=function(){var t="";return this._data.forEach((function(a){t+=a+";"})),t},i.getValue=function(t,a){void 0===a&&(a=0);var n=a;return this._data.length>t&&(n=this._data[t]),n},i.updateValue=function(t,a){this._data.length>t&&(this._data[t]=a,this.dirty=!0)},i.pushValue=function(t){this._data.push(t)},i.clear=function(){this._data.length=0,this.dirty=!0},a(e,[{key:"length",get:function(){return this._data.length}},{key:"values",get:function(){return this._data.values()}}]),e}(u)),t("SaveDataArrStr",function(t){function e(a){var n;return(n=t.call(this,a)||this)._data=[],n}n(e,t);var i=e.prototype;return i.load=function(t){if(this._data.length=0,""!=t)for(var a=t.split(";"),n=0;n<a.length;++n)this._data.push(a[n])},i.str=function(){var t="";return this._data.forEach((function(a){t+=a+";"})),t},i.getValue=function(t,a){void 0===a&&(a="");var n=a;return this._data.length>t&&(n=this._data[t]),n},i.updateValue=function(t,a){this._data.length>t&&(this._data[t]=a,this.dirty=!0)},i.pushValue=function(t){this._data.push(t)},i.clear=function(){this._data.length=0,this.dirty=!0},a(e,[{key:"length",get:function(){return this._data.length}},{key:"values",get:function(){return this._data.values()}}]),e}(u)),t("SaveData",function(){function t(){this._datas=[],this._prefix=""}var n=t.prototype;return n.createData=function(t,a,n){void 0===n&&(n="");var e=new t(this._prefix+a);return""!=n&&e.load(n),this._datas.push(e),e},n.save=function(){var t=this;this._datas.forEach((function(a){if(a.dirty){var n=t._prefix+a.key;r.localStorage.setItem(n,a.str()),a.dirty=!1,a.notifyDataChangeEvent()}}))},n.load=function(){var t=this;this._datas.forEach((function(a){var n=t._prefix+a.key,e=r.localStorage.getItem(n);a.load(e||a.val),a.dirty=!1}))},n.remove=function(){var t=this;this._datas.forEach((function(a){var n=t._prefix+a.key;r.localStorage.removeItem(n)}))},a(t,[{key:"prefix",get:function(){return this._prefix},set:function(t){this._prefix=t}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/SceneBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIManager.ts"],(function(e){var n,t,i,o,r,a,c,s,u,l,d;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,o=e.director,r=e.Node,a=e.Layers,c=e.UITransform,s=e.view,u=e.Component},function(e){l=e.ViewZorder},function(e){d=e.default}],execute:function(){var f;t._RF.push({},"b06cdKHOj1Pjq9p3wW12M4E","SceneBase",void 0);var v=i.ccclass;i.property,e("SceneBase",v("SceneBase")(f=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onLoad=function(){d.removeDirtyUI(),this.initUIZorder()},i.initUIZorder=function(){var e,n=null==(e=o.getScene())?void 0:e.getChildByName("Canvas");if(n)for(var t=l.Scene;t<l.Loading;++t){var i=new r(t.toString());i.layer=a.Enum.UI_2D,i.addComponent(c).contentSize=s.getVisibleSize(),n.addChild(i)}},i.onWindowResize=function(){var e,n=null==(e=o.getScene())?void 0:e.getChildByName("Canvas");if(null!=n)for(var t=l.Scene;t<l.Loading;++t){var i=n.getChildByName(t.toString());if(null!=i)i.getComponent(c).contentSize=s.getVisibleSize()}},t}(u))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./SceneBase.ts","./UIFit.ts","./GameScene.ts","./LoadingScene.ts","./EventManager.ts","./Defines.ts"],(function(e){var n,t,i,c,a,s,o,r,u,l,f,S,d,g;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,i=e._decorator,c=e.profiler,a=e.screen,s=e.Size,o=e.director},function(e){r=e.default},function(e){u=e.SceneBase},function(e){l=e.default},function(e){f=e.GameScene},function(e){S=e.LoadingScene},function(e){d=e.default},function(e){g=e.GameEvent}],execute:function(){var h,p;t._RF.push({},"a9b13LybOFKhInQgbb5nTfr","SceneManager",void 0);var _=i.ccclass,v=(i.property,e("SceneType",function(e){return e[e.SceneType_Loading=0]="SceneType_Loading",e[e.SceneType_Game=1]="SceneType_Game",e}({}))),y=e("SceneManager",_("SceneManager")(((p=function(){function e(){this._sceneType=v.SceneType_Loading,this._sceneCtrl=void 0,this._bInit=!1,this._canvas=void 0}e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance};var t=e.prototype;return t.SceneCtrl=function(){return this._sceneCtrl},t.onGameInit=function(){c&&c.hideStats(),a.on("window-resize",this.onWindowResize,this),l.initFit(new s(750,1334)),this.setSceneCtrl()},t.getSceneName=function(e){var n="";switch(e){case v.SceneType_Loading:n="loading";break;case v.SceneType_Game:n="game"}return n},t.setSceneCtrl=function(){var e;if(this._canvas=null==(e=o.getScene())?void 0:e.getChildByName("Canvas"),this._canvas)switch(this._sceneType){case v.SceneType_Loading:this._sceneCtrl=this._canvas.getComponent(S);break;case v.SceneType_Game:this._sceneCtrl=this._canvas.getComponent(f);break;default:this._sceneCtrl=null}else r.error("Scene not Canvas!!!")},t.onWindowResize=function(){l.initFit(new s(750,1334)),l.initSafeInfo();var e=o.getScene();null!=e&&e.getComponentInChildren(u).onWindowResize(),d.emit(g.EventWindowResize)},t.onSceneChange=function(e){var n=this,t=this.getSceneName(e);""!=t&&o.loadScene(t,(function(t,i){n._sceneType=e,n.setSceneCtrl()}))},t.preloadScene=function(e,n){var t=this.getSceneName(e);""!=t&&o.preloadScene(t,(function(e,i){e?r.error("preload "+t+" Scene Error"):n&&n()}))},t.getZorderNode=function(e){var n=this._canvas.getChildByName(e.toString());if(n)return n;r.error("Canvas not "+e+" zOrder node!!!")},t.loadRes=function(){r.log("loadRes start")},n(e,[{key:"SceneType",get:function(){return this._sceneType}},{key:"isInit",get:function(){return this._bInit},set:function(e){this._bInit=e}}]),e}()).instance=void 0,h=p))||h);e("default",y.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/seeg_td.js",["./cjs-loader.mjs"],(function(e,t){var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0);var r=e("__cjsMetaURL",t.meta.url);n.define(r,(function(t,n,r,i,o){!function(){var e={132:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpManager=void 0;var n=function(){function e(){this.config={timeout:5e3}}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.request=function(e){var t=this;if(!e.success)return new Promise((function(n,r){t._dealRequest(e,n,r)}));this._dealRequest(e,e.success,e.fail,e.complete)},e.prototype._dealRequest=function(e,t,n,r,i){var o=this;void 0===i&&(i=0);var a,s,c=e.data;c&&"object"==typeof c&&(c=JSON.stringify(c)),"ali"===zs.pf?s=e.header:a=e.header,zs.request({url:e.url,data:c,header:a,headers:s,method:e.method||"POST",timeout:e.timeout||this.config.timeout,success:function(e){null==t||t(e.data),null==r||r()},fail:function(a){i<(e.retryTimes||0)?o._dealRequest(e,t,n,r,i+1):(a.errCode=a.errCode||a.errno,null==n||n(a),null==r||r())}})},e._instance=null,e}();t.HttpManager=n},188:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TodayHelper=void 0;var r=n(841),i=function(){function e(){this._todayNum=null,this._syncTime=0,this._dayStartTime=0,this._dayEndTime=0,this._runTime=0}return Object.defineProperty(e.prototype,"todayNum",{get:function(){return this._todayNum},enumerable:!1,configurable:!0}),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initData=function(e){this._todayNum=e.today_num||{},this._syncTime=e.sync_time||0,this._checkSameDay();var t=zs.getStorageSync("zs_report_online");if(t){var n=t.split("_");(n[1]&&Number(n[1])||0)>this._dayStartTime&&(Number(n[0])>this._todayNum.online&&(this._todayNum.online=Number(n[0])),this._todayNum.online=this._todayNum.online+this._runTime)}},e.prototype.updateOnline=function(){0!=this._dayStartTime?this._updateTodayNum("online",1)%5==0&&this._setTempOnline():this._runTime++},e.prototype._setTempOnline=function(){zs.setStorage({key:"zs_report_online",data:"".concat(this._todayNum.online,"_").concat(this._syncTime)})},e.prototype._updateTodayNum=function(e,t,n){return this._todayNum[e]=this.getTodayNum(e)+t,this._todayNum[e]},e.prototype.getTodayNum=function(e){return this._checkSameDay(),this._todayNum[e]||0},e.prototype._checkSameDay=function(){var e=r.TimeUtil.getTime();if(0==this._dayStartTime&&(this._dayStartTime=r.TimeUtil.getDayStartTime(e),this._dayEndTime=r.TimeUtil.getDayEndTime(e)),this._syncTime<this._dayStartTime||this._syncTime>this._dayEndTime){for(var t in this._todayNum)this._todayNum[t]=0;this._syncTime=e}},e._instance=null,e}();t.TodayHelper=i},258:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WxPredictionHelper=void 0;var r=n(916),i=n(733),o=n(841),a="zs_wx_prediction_stats",s=function(){function e(){this._miniGameCommon=null,this._initialized=!1,this._adViewStats={scene:"",name:"",value:0,success:0},this._syncTime=0,this._dayStartTime=0,this._dayEndTime=0,this.loadStatsFromStorage();try{this.initPlugin()}catch(e){r.Logger.log("插件初始化失败，将在使用时重试",e)}}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initPlugin=function(){if("wx"!==zs.pf)return r.Logger.log("非微信环境，不初始化预测插件"),!1;try{if("undefined"==typeof requirePlugin)return r.Logger.log("requirePlugin未定义，可能不在微信环境"),!1;var e=requirePlugin("MiniGameCommon",{enableRequireHostModule:!0,customEnv:{wx:wx}}).default;return"function"!=typeof e?(r.Logger.error("createMiniGameCommon不是函数"),!1):(this._miniGameCommon=e(),void 0===this._miniGameCommon||void 0===this._miniGameCommon.canIUse?(r.Logger.error("miniGameCommon创建失败或无法使用"),!1):(this._initialized=!0,r.Logger.log("预测插件初始化成功"),!0))}catch(e){return r.Logger.error("初始化预测插件失败:",e),this._initialized=!1,!1}},e.prototype.ensureInitialized=function(){return!!this._initialized||this.initPlugin()},e.prototype.loadStatsFromStorage=function(){try{var e=zs.getStorageSync(a);if(e){var t=JSON.parse(e);this._adViewStats=t.stats||{scene:"",name:"",value:0,success:0},this._syncTime=t.syncTime||0,this._checkSameDay(),r.Logger.log("从缓存恢复广告统计数据",this._adViewStats)}else this._syncTime=o.TimeUtil.getTime(),this._adViewStats={scene:"",name:"",value:0,success:0},this.saveStatsToStorage()}catch(e){r.Logger.error("加载广告统计数据出错",e),this._syncTime=o.TimeUtil.getTime(),this._adViewStats={scene:"",name:"",value:0,success:0},this.saveStatsToStorage()}},e.prototype.saveStatsToStorage=function(){try{this._syncTime=o.TimeUtil.getTime();var e={stats:this._adViewStats,syncTime:this._syncTime};zs.setStorage({key:a,data:JSON.stringify(e)}),r.Logger.log("广告统计数据已保存到缓存",this._adViewStats)}catch(e){r.Logger.error("保存广告统计数据出错",e)}},e.prototype._checkSameDay=function(){var e=o.TimeUtil.getTime(),t=new Date(e),n=t.getFullYear(),i=t.getMonth(),a=t.getDate(),s=new Date(this._syncTime),c=s.getFullYear(),u=s.getMonth(),l=s.getDate();n!==c||i!==u||a!==l?(this._adViewStats.value=0,this._adViewStats.success=0,this._syncTime=e,this._dayStartTime=o.TimeUtil.getDayStartTime(e),this._dayEndTime=o.TimeUtil.getDayEndTime(e),r.Logger.log("新的一天，重置广告统计数据"),this.saveStatsToStorage()):(this._dayStartTime=o.TimeUtil.getDayStartTime(e),this._dayEndTime=o.TimeUtil.getDayEndTime(e))},e.prototype.recordAdView=function(e,t,n){void 0===n&&(n=!1),this._checkSameDay(),e&&(this._adViewStats.scene=e),t&&(this._adViewStats.name=t),n?this._adViewStats.success++:this._adViewStats.value++,this.saveStatsToStorage(),r.Logger.debug("记录广告查看",{scene:this._adViewStats.scene,name:this._adViewStats.name,totalViews:this._adViewStats.value,successViews:this._adViewStats.success})},e.prototype.reportAfterDelay=function(e){var t=this;if(void 0===e&&(e=30),this.ensureInitialized()){this._checkSameDay();var n={gift_scene:this._adViewStats.scene,gift_name:this._adViewStats.name,gift_value:this._adViewStats.value,gift_value_success:this._adViewStats.success},o=JSON.stringify(n);setTimeout((function(){try{t._miniGameCommon.getUserLabel({reportData:o,labelId:"iaa_feature"}).then((function(e){r.Logger.log("获取预测数据成功:",e),e&&e.encryptedData&&e.iv?i.ZSHttp.instance.reportWxData({encryptedData:e.encryptedData,iv:e.iv}).then((function(){r.Logger.log("微信预测数据上报成功")})).catch((function(e){r.Logger.error("微信预测数据上报失败",e)})):r.Logger.log("未获取到有效的加密数据")})).catch((function(e){r.Logger.error("获取预测数据失败:",e)}))}catch(e){r.Logger.error("调用getUserLabel失败:",e)}}),1e3*e)}else r.Logger.log("预测插件未初始化成功，无法上报数据")},e.prototype.onAdViewed=function(e,t){this.recordAdView(e,t,!0),this.reportAfterDelay()},e.prototype.getStats=function(){return this._checkSameDay(),{totalViews:this._adViewStats.value,successViews:this._adViewStats.success,scene:this._adViewStats.scene,name:this._adViewStats.name}},e._instance=null,e}();t.WxPredictionHelper=s},325:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=void 0;var n=function(){function e(){}return e.isEmpty=function(e){return null==e||""===e},e.copyObj=function(e){var t;if(!e||"object"!=typeof e)return e;for(var n in t="[object Array]"===Object.prototype.toString.call(e)?[]:{},e)null==e[n]?t[n]=e[n]:"object"==typeof e[n]?t[n]=this.copyObj(e[n]):t[n]=e[n];return t},e}();t.StringUtil=n},480:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TKHelper=void 0;var r=n(132),i=n(325),o=n(841),a=n(655),s=function(){function e(){this._accountId="",this._ssData=[],this._timeout=null,this.open=!1,this.extraProperties=null}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.registerEvent=function(e){if(this.open){this._accountId=e.uuid,this.onEvent("register");var t=a.ZSUtil.getLaunchOptionsSync(),n=t.tag_id,r=t.channel_id,i=t.advertiser_id,o=t.ad_id,s=t.creative_id,c=t.scene;this.reportUserInfo("user_setOnce",{gid:zs.gameConfig.gid,openid:e.openId,channel:this.getSSChanel(),register_time:e.regTime,first_login_time:e.regTime,tag_id:n,channel_id:r,from_advertiser_id:i,from_ad_id:o,from_creative_id:s,from_scene:c,ab_test:e.abTest,reg_cfg_version:e.cfgVersion,reg_game_version:e.gameVersion})}},e.prototype.loginEvent=function(e){if(this.open){this._accountId=e.uuid;var t=a.ZSUtil.getLaunchOptionsSync().scene;this.onEvent("login",{from_scene:t}),this.reportUserInfo("user_set",{gid:zs.gameConfig.gid,openid:e.openId,channel:this.getSSChanel(),register_time:e.regTime,first_login_time:e.regTime,last_login_time:e.loginTime,login_cfg_version:e.cfgVersion,login_game_version:e.gameVersion}),this._dealReport()}},e.prototype.lineEvent=function(e){this.report&&this.onEvent("online_estimate",{"#duration":e.duration})},e.prototype.loadStart=function(){},e.prototype.loadComplete=function(e){this.report&&this.onEvent("load_success",{"#duration":e.duration})},e.prototype.reportUserInfo=function(e,t,n){void 0===n&&(n=!1),this.report&&this.report(e,null,t,n)},e.prototype.onEvent=function(e,t){this.report&&this.report("track",e,t)},e.prototype.report=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),this.report&&!i.StringUtil.isEmpty(this._accountId)){var s={account_id:this._accountId,type:e,event_name:t,properties:i.StringUtil.copyObj(n),time:o.TimeUtil.formatTime(o.TimeUtil.getTime(),"yyyy-MM-dd hh:mm:ss.SSS")};this._ssData.push(s),r?this._dealReport():null==this._timeout&&(this._timeout=setTimeout((function(){a._dealReport()}),1e3))}},e.prototype._dealReport=function(){if(this.report&&!zs.gameConfig.debug&&0!==this._ssData.length){var e=JSON.stringify({gid:zs.gameConfig.gid,version:zs.gameConfig.v,data:this._ssData});this._ssData.length=0,this._timeout=null,r.HttpManager.instance.request({url:"https://moderate.aslk2018.com/shushu/batchAdd",data:e,success:function(){}})}},e.prototype.getSSChanel=function(){return"wx"===zs.pf?101:"tt"===zs.pf?102:"ks"===zs.pf?106:"bili"===zs.pf?107:0},e._instance=null,e}();t.TKHelper=s},486:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var a=n(480),s=n(188),c=n(733),u=n(916),l=n(325),d=n(841),f=n(258);n(753),n(740),function(){var e=this,t=!1,n=!1,p=!0,h=[],g=[],v=0,m=0,y=null,_=0,S=null,w=null,T=null,b=[],E=[],I=[],O={},D=null,k=null,L=!1,N=20,x=180;setInterval((function(){s.TodayHelper.instance.updateOnline(),S&&(0==--N&&(N=20,c.ZSHttp.instance.reportOnline(s.TodayHelper.instance.getTodayNum("online"))),0==--x&&(x=180,a.TKHelper.instance.lineEvent({duration:180})))}),1e3);var R=window.seeg=window.seeg||{};function z(){var e=d.TimeUtil.getTime(),t={},n=!1;b.length>0&&(b.forEach((function(e){t[e]=S[e]})),t._saveTime=e,b.length=0,n=!0),!t.today_num&&s.TodayHelper.instance.todayNum&&(t.today_num=s.TodayHelper.instance.todayNum);var r={};E.length>0&&(E.forEach((function(e){r[e]=w[e]})),r._saveTime=e,E.length=0,n=!0);var i={};I.length>0&&(I.forEach((function(e){i[e]=T[e]})),I.length=0,n=!0),n&&c.ZSHttp.instance.setUserData(t,r,i).catch((function(){}))}function U(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=100);var a=d.TimeUtil.getTime(),s=0===r?d.TimeUtil.getDayEndTime(a):1===r?d.TimeUtil.getWeekEndTime(a):d.TimeUtil.getMonthEndTime(a);try{c.ZSHttp.instance.changeRankDataOld(e,t,n,Math.ceil((s-a)/1e3),i,o)}catch(e){}}function P(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:if(w)return null==e||e({errCode:0,data:w}),[2];if(e&&g.push(e),p)return[2];p=!0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c.ZSHttp.instance.getUserData()];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),p=!1,g.forEach((function(e){e({errCode:(null==n?void 0:n.errCode)||-1,errMsg:"获取数据失败"})})),g.length=0,[2];case 4:return s.TodayHelper.instance.initData(t.base),S=t.base,w=t.game,T=t.report,D||(D=setInterval((function(){z()}),6e4)),g.forEach((function(e){e({errCode:0,data:t.game})})),g.length=0,[2]}}))}))}function C(e,t){return r(this,arguments,void 0,(function(e,t,r){var o,s,f,g,v,m;return void 0===r&&(r=2),i(this,(function(i){switch(i.label){case 0:if(n)return u.Logger.debug("正在登录中..."),[2];n=!0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,c.ZSHttp.instance.login({code:e})];case 2:return o=i.sent(),[3,4];case 3:return s=i.sent(),n=!1,t<r?(C(e,t+1,r),[2]):(u.Logger.error("用户登录失败",s),[2]);case 4:return L&&tdAppSdk.setOpenId(o.openid),f=Number(o.version.split(".")[1]),g=d.TimeUtil.getTime(),y={userId:o.user_id,openId:o.openid,isTest:1===o.is_white_list,abTest:f,avatar:o.avatar,nickname:o.nickname,gender:o.gender,regTime:1e3*(o.add_time||o.update_time||0)||g,isNew:1===o.is_new},_=d.TimeUtil.getDiffDayNum(y.regTime,g),h.length>0&&(v=Object.assign({},y),h.forEach((function(e){null==e||e(v)}))),h.length=0,p=!1,P(),c.ZSHttp.instance.dmp().then((function(){u.Logger.debug("投放用户上报成功")})).catch((function(e){u.Logger.debug("投放用户上报失败",e)})),u.Logger.debug("用户登录成功"),m=zs.gameConfig.gid+"_"+(l.StringUtil.isEmpty(y.openId)?y.userId:y.openId),y.isNew&&a.TKHelper.instance.registerEvent({uuid:m,openId:y.openId,channel:zs.pf,regTime:y.regTime,abTest:y.abTest.toString(),cfgVersion:o.version,gameVersion:zs.gameConfig.v}),a.TKHelper.instance.loginEvent({uuid:m,openId:y.openId,channel:zs.pf,platform:y.abTest,loginTime:d.TimeUtil.getTime(),regTime:y.regTime,abTest:y.abTest.toString(),token:o.token,cfgVersion:o.version,gameVersion:zs.gameConfig.v}),[2]}}))}))}R.init=function(e){if(!t){if(null==e)throw"参数不能为空";if(e.loggerLevel&&u.Logger.setLoggerLevel(e.loggerLevel),l.StringUtil.isEmpty(e.gid))u.Logger.error("gid不能为空");else{var n=e.gid.split("_");if(1!==n.length)if("web"==zs.pf||"bili"==zs.pf||e.gid.startsWith(zs.pf)){u.Logger.debug("SDK开始集成，版本=","1.1.2"),t=!0,zs.gameConfig=zs.gameConfig||{},zs.gameConfig.gid=e.gid,zs.gameConfig.v=e.version||"1.0.0",e.oldSdkVer=e.oldSdkVer||3,zs.gameConfig.server="v".concat(e.oldSdkVer),l.StringUtil.isEmpty(e.tdAppKey)?(u.Logger.warn("使用的是集成TD的版本，但没有填写TD参数，请检查。如果确定不需要TD，请尽量选择无TD版本SDK，可以减少包体大小。"),L=!1):L=!0;var r="1.0.0",i=zs.getAccountInfoSync&&zs.getAccountInfoSync()||null;i&&i.miniProgram&&i.miniProgram.version&&(r=i.miniProgram.version),L&&tdAppSdk.init({versionCode:1,versionName:r,displayName:n[1],appKey:e.tdAppKey||"",channel:e.gid}),a.TKHelper.instance.open=!0,C(e.testCode,0)}else u.Logger.error("请填写正确的gid，或者请勿在该sdk前修改ks、tt、wx等平台全局变量");else u.Logger.error("请填写正确的gid")}}},R.getGameConfig=function(e){R.onLoginRet((function(){var t=e.success,n=e.fail;c.ZSHttp.instance.getGameConfig().then((function(e){null==t||t(e)})).catch((function(e){null==n||n(e)}))}))},R.onLoginRet=function(e){y?null==e||e(Object.assign({},y)):h.push(e)},R.getUserData=P,R._getOldUserData=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:if(!y)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c.ZSHttp.instance.getUserData(!0)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),null==e||e({errCode:(null==n?void 0:n.errCode)||-1,errMsg:"获取数据失败"}),[2];case 4:return null==e||e({errCode:0,data:t.game}),[2]}}))}))},R.reportAd=function(e){y?(c.ZSHttp.instance.reportAd(e).then((function(){u.Logger.debug("广告上报成功")})).catch((function(e){u.Logger.error("广告上报失败",e)})),e.name&&e.complete&&function(e){var t="rv_".concat(e);if(S[t]=(S[t]||0)+1,S.rv_sum=(S.rv_sum||0)+1,b.push(t,"rv_sum"),_<=7||14===_||30===_){var n="rv_sum_".concat(_);S[n]=(S[n]||0)+1,b.push(n)}z()}(e.name)):C(null,0,0)},R.onAdViewed=function(e,t){if("wx"===zs.pf)try{f.WxPredictionHelper.instance.onAdViewed(e,t)}catch(e){u.Logger.error("处理广告观看事件失败:",e)}},R.recordAdClick=function(e,t){if("wx"===zs.pf)try{f.WxPredictionHelper.instance.recordAdView(e,t,!1)}catch(e){u.Logger.error("记录广告点击事件失败:",e)}},R.now=d.TimeUtil.getTime,R.onEvent=function(e,t){L&&tdAppSdk.event({id:e,params:t})},R.reportEvent=function(e,t){T&&(I.push(e),T[e]=t)},R.reportEventAdd=function(e,t){T&&R.reportEvent(e,(T[e]||0)+t)},R.reportEventStart=function(e){O[e]=d.TimeUtil.getTime()},R.reportEventEnd=function(e){R.reportEventAdd("time_".concat(e),d.TimeUtil.getTime()-O[e])},R.setUserData=function(e){if(w){var t=d.TimeUtil.getTime();(!v||t-v>6e4)&&(v=t,m=0),++m>6&&u.Logger.debug("一分钟内请求该接口超过6次，请注意检查逻辑"),Object.assign(w,e),E.push.apply(E,Object.keys(e)),z()}},R.reportUserInfo=function(e,t,n){c.ZSHttp.instance.reportUserInfo(e,t,n).catch((function(){}))},R.getUserProvince=function(){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return k?[2,k]:[4,c.ZSHttp.instance.getUserProvince().catch((function(){}))];case 1:return[2,k=e.sent()]}}))}))},R.getProvinceList=function(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return r(e,o([t],n,!0),void 0,(function(e,t,n){var r,o,a,s;return void 0===t&&(t=0),void 0===n&&(n=0),i(this,(function(i){switch(i.label){case 0:return[4,c.ZSHttp.instance.getProvinceList(e,t,n).catch((function(){}))];case 1:for(s in null==(r=i.sent())&&(r={list:[]}),null==r.list&&(r.list=[]),a=function(e){r.list.find((function(t){return t.province_code==e}))||r.list.push({province:o[e],province_code:e,num:1})},o={p11:"北京",p12:"天津",p13:"河北",p14:"山西",p15:"内蒙古",p21:"辽宁",p22:"吉林",p23:"黑龙江",p31:"上海",p32:"江苏",p33:"浙江",p34:"安徽",p35:"福建",p36:"江西",p37:"山东",p41:"河南",p42:"湖北",p43:"湖南",p44:"广东",p45:"广西",p46:"海南",p50:"重庆",p51:"四川",p52:"贵州",p53:"云南",p54:"西藏",p61:"陕西",p62:"甘肃",p63:"青海",p64:"宁夏",p65:"新疆",p71:"台湾",p81:"香港",p82:"澳门"})a(s);return[2,r]}}))}))},R.addProvinceData=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1);try{c.ZSHttp.instance.addProvinceData(e,t,n)}catch(e){}},R.changeRankData=function(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=100),c.ZSHttp.instance.changeRankData(e,t,n,r,i,o)},R.getRankList=function(t,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return r(e,o([t,n],a,!0),void 0,(function(e,t,n,r){return void 0===n&&(n=100),void 0===r&&(r=0),i(this,(function(i){return[2,c.ZSHttp.instance.getRankList(e,t,n,r).catch((function(){}))]}))}))},R.changeDayRankData=function(e,t,n,r,i){void 0===r&&(r=""),void 0===i&&(i=100),U(e,t,n,0,r,i)},R.changeWeekRankData=function(e,t,n,r,i){void 0===r&&(r=""),void 0===i&&(i=100),U(e,t,n,1,r,i)},R.changeMonthRankData=function(e,t,n,r,i){void 0===r&&(r=""),void 0===i&&(i=100),U(e,t,n,2,r,i)},R.addGRank=function(e,t){c.ZSHttp.instance.addGRank(e,t).catch((function(){}))},R.getGRank=function(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return r(e,o([t],n,!0),void 0,(function(e,t){return void 0===t&&(t=100),i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.ZSHttp.instance.getGRank(e,t)];case 1:return[2,n.sent()];case 2:return n.sent(),[2,{list:[]}];case 3:return[2]}}))}))},R.getUserGRank=function(t){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,c.ZSHttp.instance.getUserGRank(t)];case 1:return[2,e.sent()];case 2:return e.sent(),[2,{rank:0}];case 3:return[2]}}))}))},R.setZWData=function(e,t,n,r){try{c.ZSHttp.instance.setZWData(e,t,n,r)}catch(e){u.Logger.warn(e)}},R.ss={reportUserInfo:function(e,t){a.TKHelper.instance.reportUserInfo(e,t)},onEvent:function(e,t){a.TKHelper.instance.onEvent(e,t)},loadComplete:function(e){a.TKHelper.instance.loadComplete({duration:e})}}}()},655:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ZSUtil=void 0;var r=n(325),i=function(){function e(){}return e.getLaunchOptionsSync=function(){var e,t;if(null!=this._launchOptions)return this._launchOptions;var n=zs.pf,i=zs.getLaunchOptionsSync(),o=(null==i?void 0:i.query)||{};if("wx"===n)if(r.StringUtil.isEmpty(o.gdt_vid)){var a=o.advertiser_id,s=(h=void 0===a?"":a,g=o.request_id,v=o.etag,o.adid),c=(m=void 0===s?"":s,o.creativeid),u=void 0===c?"":c,l=o.clue_token,d=o.project_id,f=void 0===d?"":d;r.StringUtil.isEmpty(g)&&(g=o.req_id||""),r.StringUtil.isEmpty(m)&&(m=o.promotion_id||""),r.StringUtil.isEmpty(v)&&(v=o.channel||""),r.StringUtil.isEmpty(l)&&(l=o.clickid||""),this._launchOptions={advertiser_id:h,request_id:g,etag:v,ad_id:m,creative_id:u,clue_token:l,group_id:f,dmpChanel:2}}else{var p=o.gdt_vid,h=void 0===p?"":p,g=o.request_id,v=o.etag,m=o.ad_id,y=o.tag_id,_=void 0===y?"":y,S=o.channel_id,w=void 0===S?"":S;r.StringUtil.isEmpty(g)&&(g=h),r.StringUtil.isEmpty(m)&&(m=(null===(e=o.weixinadinfo)||void 0===e?void 0:e.split(".")[0])||""),this._launchOptions={advertiser_id:h,request_id:g,etag:v,ad_id:m,tag_id:_,channel_id:w,dmpChanel:1}}else if("tt"===n){var T=o.advertiser_id,b=(h=void 0===T?"":T,g=o.request_id,v=o.etag,o.adid),E=(m=void 0===b?"":b,o.creativeid),I=(u=void 0===E?"":E,o.clickid),O=(l=void 0===I?"":I,o.projectid);f=void 0===O?"":O,r.StringUtil.isEmpty(g)&&(g=o.requestid||""),r.StringUtil.isEmpty(m)&&(m=o.promotionid||""),r.StringUtil.isEmpty(v)&&(v=o.channel||""),this._launchOptions={advertiser_id:h,request_id:g,etag:v,ad_id:m,creative_id:u,clue_token:l,group_id:f,dmpChanel:2}}else if("ks"===n){var D=o.advertiser_id,k=(h=void 0===D?"":D,o.ksCampaignId),L=(m=void 0===k?"":k,o.ksCreativeId),N=(u=void 0===L?"":L,l=o.callback,o.ksUnitId);f=void 0===N?"":N,this._launchOptions={advertiser_id:h,etag:"kuaishou",ad_id:m,creative_id:u,clue_token:l,group_id:f,dmpChanel:3}}if(!this._launchOptions){var x=o.advertiser_id,R=(h=void 0===x?"":x,o.ad_id),z=(m=void 0===R?"":R,o.creative_id),U=(u=void 0===z?"":z,o.group_id),P=(f=void 0===U?"":U,o.request_id);g=void 0===P?"":P,v=o.etag||o.channel||"",this._launchOptions={advertiser_id:h,ad_id:m,creative_id:u,group_id:f,request_id:g,etag:v}}return"ali"===n&&r.StringUtil.isEmpty(this._launchOptions.etag)&&(this._launchOptions.etag="other"),this._launchOptions.scene=(null==i?void 0:i.scene)||"",this._launchOptions.launch_from=(null===(t=null==i?void 0:i.extra)||void 0===t?void 0:t.launch_from)||"",r.StringUtil.isEmpty(this._launchOptions.clue_token)&&r.StringUtil.isEmpty(this._launchOptions.ad_id)&&r.StringUtil.isEmpty(this._launchOptions.advertiser_id)&&(this._launchOptions.dmpChanel=0),this._launchOptions},e._launchOptions=null,e}();t.ZSUtil=i},733:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZSHttp=void 0;var o,a=n(916),s=n(325),c=n(841),u=n(655),l=n(132);!function(e){e.LOGIN="game/login",e.CONFIG="game/config",e.VIDEO="game/video",e.USER_INFO_UPDATE="game/batchEdit",e.USER_DATA_UPDATE="game/batchUpdate",e.USER_DATA_INFO="game/download",e.USER_DATA_UPDATE_NEW="game/saveArchive",e.USER_DATA_INFO_NEW="game/loadArchive",e.USER_PROVINCE="rank/province/data",e.USER_PROVINCE_RANK="rank/province/list",e.USER_PROVINCE_RANK_CHANGE="rank/province/edit",e.USER_RANK="rank/generalPeriodList",e.USER_RANK_CHANGE="rank/generalPeriodEdit",e.USER_RANK_OLD="rank/generalList",e.USER_RANK_CHANGE_OLD="rank/generalEdit",e.G_RANK_CHANGE="rank/globalEdit",e.G_RANK="rank/globalList",e.G_RANK_USER="rank/globalUserRank",e.DY_REPORT="attribution/dyReport",e.DY_ZT="attribution/ztReport",e.KS_REPORT="attribution/allReport",e.KS_ZT="attribution/ksZtReport",e.WX_REPORT="attribution/jlwxReportActive",e.WX_ZT="attribution/jlwxReport",e.REPORT_ONLINE="attribution/online"}(o||(o={}));var d=function(){function e(){this._loginInfo=null,this._reportData={data:{},callback:[]},this._canSave=!1}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.req=function(e,t,n){var o,s,u=this;void 0===t&&(t=null);var d={};(null===(o=this._loginInfo)||void 0===o?void 0:o.version)?(d.v=this._loginInfo.version,d.version=this._loginInfo.version):(d.v=zs.gameConfig.v,d.version=zs.gameConfig.v),d.reqId=Date.now()+"_"+Math.ceil(1e3*Math.random()),d.gid=zs.gameConfig.gid,Object.assign(d,t||{});var f="".concat(zs.gameConfig.debug?"https://test-gameapi2.zxmn2018.com/":"https://gamesapi2.aslk2018.com/","v2/").concat(e),p={"content-type":"application/json"};return(null===(s=this._loginInfo)||void 0===s?void 0:s.token)&&(p.authorization=this._loginInfo.token,d.uid||(d.uid=this._loginInfo.user_id)),new Promise((function(t,o){return r(u,void 0,void 0,(function(){var r,s;return i(this,(function(i){switch(i.label){case 0:return r={url:f,header:p,data:d},n&&Object.assign(r,n),[4,l.HttpManager.instance.request(r).catch((function(t){a.Logger.log("网络请求错误, router=",e,"params=",d,"errCode=",t.errCode,"errMsg=",t.errMsg),o(t)}))];case 1:if(s=i.sent()){if(s.timestamp&&c.TimeUtil.updateServerTime(1e3*s.timestamp),1===s.code)return a.Logger.log("网络请求成功, route=",e,"params=",d,"data=",s.data),t(s.data),[2];if(4006===s.code||4007===s.code)return a.Logger.log("您的登录已过期或在其它地点登录"),[2];a.Logger.log("网络请求错误, router=",e,"params=",d,"errCode=",s.code,"errMsg=",s.msg),o({errCode:s.code,errMsg:s.msg})}return[2]}}))}))}))},e.prototype.login=function(e){return r(this,void 0,void 0,(function(){var t,n,r,c,l,d,f,p,h,g,v,m,y,_,S,w,T,b,E;return i(this,(function(i){switch(i.label){case 0:return t=null,s.StringUtil.isEmpty(zs.gameConfig.gid)?[2,Promise.reject({errCode:-1,errMsg:"没有填写gid"})]:(n=e.code,e.account,e.password,r=null,n?(r={pf:"zs",code:n},[3,3]):[3,1]);case 1:return[4,this.zsLogin()];case 2:r=i.sent(),"ks"===zs.pf&&r.unionID&&(r.openid=r.unionID),i.label=3;case 3:r||(r={}),r.gid=zs.gameConfig.gid,c=u.ZSUtil.getLaunchOptionsSync(),l=c.advertiser_id,d=void 0===l?"":l,f=c.etag,p=void 0===f?"":f,h=c.ad_id,g=void 0===h?"":h,v=c.creative_id,m=void 0===v?"":v,y=c.group_id,_=void 0===y?"":y,S=c.request_id,w=void 0===S?"":S,T=c.scene,b=void 0===T?"":T,r.scene=b,r.ad_param={advertiser_id:d,channel:p,ad_id:g,creative_id:m,group_id:_,request_id:w},i.label=4;case 4:return i.trys.push([4,6,,7]),[4,this.req(o.LOGIN,r)];case 5:return t=i.sent(),[3,7];case 6:return E=i.sent(),a.Logger.error("登录错误",E),[2,Promise.reject(E)];case 7:return this._loginInfo=t,"0"!=zs.gameConfig.v.split(".")[1]&&(this._loginInfo.version=zs.gameConfig.v),[2,this._loginInfo]}}))}))},e.prototype.getGameConfig=function(){return this.req(o.CONFIG,{type:"json"})},e.prototype.dmp=function(){var e,t=null,n=null;if("ks"===zs.pf){var r=u.ZSUtil.getLaunchOptionsSync(),i=r.clue_token,a=r.creative_id,c=r.advertiser_id,l=r.ad_id,d=r.group_id;if(s.StringUtil.isEmpty(i))return Promise.reject({errCode:-1,errMsg:"非快手投放场景，请忽略"});t=o.KS_REPORT,n={clue_token:i,creative_id:a,advertiser_id:c,ad_id:l,group_id:d,channel:"kuaishou",event_type:"1"}}else if("tt"===zs.pf){var f=u.ZSUtil.getLaunchOptionsSync(),p=f.clue_token,h=f.etag,g=(a=f.creative_id,c=f.advertiser_id,l=f.ad_id,f.request_id);if(d=f.group_id,s.StringUtil.isEmpty(p))return Promise.reject({errCode:-1,errMsg:"非抖音投放场景，请忽略"});t=o.DY_REPORT,n={click_id:p,channel:h,creative_id:a,advertiser_id:c,ad_id:l,request_id:g,group_id:d,event_type:"active"}}else if("wx"===zs.pf){var v=u.ZSUtil.getLaunchOptionsSync();if(i=v.clue_token,c=v.advertiser_id,d=v.group_id,l=v.ad_id,g=v.request_id,s.StringUtil.isEmpty(i))return Promise.reject({errCode:-1,errMsg:"非巨量投放场景，请忽略"});t=o.WX_REPORT,n={clue_token:i,advertiser_id:c,group_id:d,ad_id:l,request_id:g,event_type:"0",channel:"wxjl"}}return t?this.req(t,Object.assign({v:"1.0.0",version:"1.0.0",uid:null===(e=this._loginInfo)||void 0===e?void 0:e.user_id,os:"ios"===zs.getSystemInfoSync().platform?"1":"2"},n)):Promise.reject({errCode:-1,errMsg:"非直投渠道，请忽略"})},e.prototype.reportAd=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,c;return i(this,(function(i){switch(i.label){case 0:if(t={uid:null===(c=this._loginInfo)||void 0===c?void 0:c.user_id,v:"1.0.0",version:"1.0.0",uvid:"1",video_id:"default",video_name:"默认视频",video_type:"1",os:"ios"===zs.getSystemInfoSync().platform?"1":"2",scene:zs.getLaunchOptionsSync().scene},n=null,"ks"===zs.pf?(t.channel="kuaishou",n=o.KS_ZT):n="tt"===zs.pf?o.DY_ZT:o.VIDEO,r=null,!n)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.req(n,t)];case 2:return i.sent(),[3,4];case 3:return s=i.sent(),r=s,[3,4];case 4:return e.complete&&this.req(o.VIDEO,{uvid:"1",video_id:"default",video_name:"默认视频",video_type:"3",ecpm:0,timestamp:Date.now()}).catch((function(e){a.Logger.debug("普通广告事件上报失败",e)})),r?[2,Promise.reject(r)]:[2,!0]}}))}))},e.prototype.reportWxData=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,c,u,l;return i(this,(function(i){switch(i.label){case 0:if(a.Logger.log("开始上报预测数据",e.encryptedData,e.iv,null===(c=this._loginInfo)||void 0===c?void 0:c.is_active),1!=(null===(u=this._loginInfo)||void 0===u?void 0:u.is_active))return[2,Promise.reject({errCode:-1,errMsg:"用户未激活，请先激活用户"})];if(!e.encryptedData)return[2,Promise.reject({errCode:-2,errMsg:"没有获取到encryptedData加密数据参数"})];if(!e.iv)return[2,Promise.reject({errCode:-2,errMsg:"没有获取到iv初始向量数据参数"})];if(t={uid:null===(l=this._loginInfo)||void 0===l?void 0:l.user_id,encrypted_data:e.encryptedData,iv:e.iv},n=null,"wx"===zs.pf&&(n=o.WX_ZT),r=null,!n)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.req(n,t)];case 2:return i.sent(),[3,4];case 3:return s=i.sent(),r=s,[3,4];case 4:return r?[2,Promise.reject(r)]:[2,!0]}}))}))},e.prototype.getUserData=function(){return r(this,arguments,void 0,(function(e){var t,n,r,o,a,s,u,l,d,f,p,h,g,v;return void 0===e&&(e=!1),i(this,(function(i){switch(i.label){case 0:return[4,this._getUserData(e)];case 1:if((t=i.sent())||(t={}),n={},r={},o={},e||"v3"!==zs.gameConfig.server){for(a in t)"base"===(s=a.split("_",1)[0])?(u=a.substring(5),n[u]=t[a]):"game"===s?(u=a.substring(5),r[u]=t[a]):"report"===s&&(u=a.substring(5),o[u]=t[a]);if(e)return[2,{game:r,base:n,report:o}]}else Object.assign(n,t.base),Object.assign(r,t.game),Object.assign(o,t.report);return this._canSave=!0,l=zs.getSystemInfoSync(),d=zs.getLaunchOptionsSync(),f={},t.login?f.login=t.login:f.login={},(null==(p=d.query)?void 0:p.ad_params)&&delete p.ad_params,t.reg||(f.reg={version:this._loginInfo.version,device:"".concat(l.brand,"-").concat(l.model),appVersion:l.version,scene:d.scene,launchQuery:d.query,seegVersion:"1.1.2"}),Object.assign(f.login,{version:this._loginInfo.version,device:"".concat(l.brand,"-").concat(l.model),appVersion:l.version,system:l.system,scene:d.scene,launchQuery:d.query}),((h=c.TimeUtil.getDiffDayNum(1e3*((null===(v=this._loginInfo)||void 0===v?void 0:v.add_time)||0),Date.now()))<=7||14==h||30==h)&&(g="login_".concat(h),f.login[g]=(f.login[g]||0)+1),this._setUserData(f,[]),[2,{base:n,game:r,report:o}]}}))}))},e.prototype.setUserData=function(e,t,n){return r(this,void 0,void 0,(function(){var r,o,a=this;return i(this,(function(i){if(r={},"v2"===zs.gameConfig.server||"v1"===zs.gameConfig.server){if(e)for(o in e)r["base_"+o]=e[o];if(t)for(o in t)r["game_"+o]=t[o];if(n)for(o in n)r["report_"+o]=n[o]}else{for(o in e)r["base."+o]=e[o];for(o in t)r["game."+o]=t[o];for(o in n)r["report."+o]=n[o]}return[2,new Promise((function(e,t){a._setUserData(r,[function(n){null==n?e(!0):t(n)}])}))]}))}))},e.prototype.reportUserInfo=function(e,t,n){return this.req(o.USER_INFO_UPDATE,{data:{avatar:e,nickname:t}})},e.prototype.getUserProvince=function(){return this.req(o.USER_PROVINCE)},e.prototype.getProvinceList=function(e,t,n){return this.req(o.USER_PROVINCE_RANK,{type:e,period_type:this._getPeriodType(t),prev_period_num:n})},e.prototype.addProvinceData=function(e,t,n){return this.req(o.USER_PROVINCE_RANK_CHANGE,{type:e,period_type:this._getPeriodType(t),num:n})},e.prototype.getRankList=function(e,t,n,r){return t?this.req(o.USER_RANK,{type:e,limit:n,period_type:this._getPeriodType(t),prev_period_num:r}):this.req(o.USER_RANK_OLD,{type:e,limit:n})},e.prototype.changeRankData=function(e,t,n,r,i,a){return this.req(o.USER_RANK_CHANGE,{type:e,value_type:t,num:n,limit:a,period_type:this._getPeriodType(r),rank_data:i})},e.prototype._getPeriodType=function(e){return 0===e?null:1===e?"day":2===e?"week":"month"},e.prototype.changeRankDataOld=function(e,t,n,r,i,a){return this.req(o.USER_RANK_CHANGE_OLD,{type:e,value_type:t,num:n,limit:a,time_duration:r,rank_data:i})},e.prototype.addGRank=function(e,t){return this.req(o.G_RANK_CHANGE,{type:e,num:t})},e.prototype.getGRank=function(e,t){return this.req(o.G_RANK,{type:e,limit:t})},e.prototype.getUserGRank=function(e){return this.req(o.G_RANK_USER,{type:e})},e.prototype.reportOnline=function(e){"web"!==zs.pf&&this.req(o.REPORT_ONLINE,{duration:e}).catch((function(){}))},e.prototype.setZWData=function(e,t,n,r){var i;return this.req(o.USER_DATA_UPDATE_NEW,{data:(i={},i["zw.".concat(e)]={scene:e,content_ids:t,extra:r,timestamp:Math.ceil(n/1e3)},i)})},e.prototype._getUserData=function(){return r(this,arguments,void 0,(function(e){return void 0===e&&(e=!1),i(this,(function(t){return"v2"===zs.gameConfig.server||e?[2,this.req(o.USER_DATA_INFO)]:[2,this.loadUserArchive(this._loginInfo.user_id,["base","game","report","reg","login"])]}))}))},e.prototype.loadUserArchive=function(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.req(o.USER_DATA_INFO_NEW,{user_id:e,keys:t})];case 1:return[2,n.sent().archives];case 2:throw n.sent();case 3:return[2]}}))}))},e.prototype._setUserData=function(e,t){return r(this,void 0,void 0,(function(){var n,r,a,s,c,u,l,d;return i(this,(function(i){switch(i.label){case 0:if(!this._canSave){if("v2"!==zs.gameConfig.server&&"v1"!==zs.gameConfig.server)for(c in s=void 0,e)for(u in s=c+".",this._reportData.data)u.startsWith(s)&&delete this._reportData.data[u];return Object.assign(this._reportData.data,e),(d=this._reportData.callback).push.apply(d,t),[2]}this._canSave=!1,i.label=1;case 1:return i.trys.push([1,6,,7]),"v1"!==zs.gameConfig.server&&"v2"!==zs.gameConfig.server?[3,3]:[4,this.req(o.USER_DATA_UPDATE,{data:e})];case 2:return i.sent(),[3,5];case 3:return[4,this.req(o.USER_DATA_UPDATE_NEW,{data:e})];case 4:i.sent(),i.label=5;case 5:for(l=0;l<t.length;l++)t[l]&&t[l](null);return this._canSave=!0,n=this._reportData.data,Object.keys(n).length>0&&(this._reportData.data={},(r=this._reportData.callback).length>0&&(this._reportData.callback=[]),this._setUserData(n,r)),[3,7];case 6:if(a=i.sent(),"v2"!==zs.gameConfig.server)for(c in s=void 0,this._reportData.data)for(u in s=c+".",e)u.startsWith(s)&&delete e[u];for(this._reportData.data=Object.assign(e,this._reportData.data),l=0;l<t.length;l++)t[l]&&t[l](a);return this._canSave=!0,[3,7];case 7:return[2]}}))}))},e.prototype.zsLogin=function(){return new Promise((function(e,t){zs.login({old:"v1"===zs.gameConfig.server,success:function(t){e(t)},fail:function(e){t(e)}})}))},e._instance=null,e}();t.ZSHttp=d},740:function(e,t,n){function r(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
r=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n,r){return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(t,n,r,i){var o=n&&n.prototype instanceof h?n:h,a=Object.create(o.prototype);return l(a,"_invoke",function(t,n,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=b(s,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var u=f(t,n,r);if("normal"===u.type){if(i=r.done?4:2,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=4,r.method="throw",r.arg=u.arg)}}}(t,r,new O(i||[])),!0),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p={};function h(){}function g(){}function v(){}var m={};l(m,s,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(D([])));_&&_!==n&&o.call(_,s)&&(m=_);var S=v.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,a,s,c){var u=f(e[r],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==i(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var r;l(this,"_invoke",(function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}),!0)}function b(t,n){var r=n.method,i=t.i[r];if(i===e)return n.delegate=null,"throw"===r&&t.i.return&&(n.method="return",n.arg=e,b(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=f(i,t.i,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var a=o.arg;return a?a.done?(n[t.r]=a.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function E(e){this.tryEntries.push(e)}function I(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function O(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function D(t){if(null!=t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return g.prototype=v,l(S,"constructor",v),l(v,"constructor",g),g.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},w(T.prototype),l(T.prototype,c,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new T(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(S),l(S,u,"Generator"),l(S,s,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},t.values=D,O.prototype={constructor:O,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e){a.type="throw",a.arg=t,n.next=e}for(var i=n.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],s=this.prev,c=o[1],u=o[2];if(-1===o[0])return r("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<c)return this.method="next",this.arg=e,r(c),!0;if(s<u)return r(u),!1}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===e||"continue"===e)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i[2],p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[2]===e)return this.complete(n[4],n[3]),I(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[0]===e){var r=n[4];if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={i:D(t),r:n,n:r},"next"===this.method&&(this.arg=e),p}},t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e);var o=function(e,t){return e.orderId&&"string"==typeof e.orderId?"number"!=typeof e.amount||e.amount!=e.amount?(console.warn("请填写正确的订单金额"),!1):"string"!=typeof e.currencyType||3!==e.currencyType.length?(console.warn("请填写正确的货币类型"),!1):!t||"string"==typeof e.paymentType||void 0===e.paymentType||(console.warn("请填写正确的支付方式"),!1):(console.warn("请填写正确的订单ID"),!1)},a="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)},s=null,c=[],u=["1","0","10"],l={device:!0,network:!0,uid:!0},d={sdk:{version:u[0],minorVersion:u[1],build:u[2],platform:"Weapp",partner:""},app:{versionCode:"1",versionName:"1.0.0",installTime:0,displayName:"",appKey:"",uniqueId:"wxAppId",channel:""},device:{type:"mobile",softwareConfig:{},hardwareConfig:{},deviceId:{}},networks:[{type:"wifi",available:!1,connected:!1},{type:"cellular",available:!1,connected:!1,current:[]},{type:"unknown",available:!1,connected:!1}],locations:[{}],appContext:{}},f=(function(e){function t(e,t,n,i){var o=t&&t.prototype instanceof r?t:r,a=Object.create(o.prototype),s=new p(i||[]);return a._invoke=u(e,n,s),a}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function i(){}function o(){}function s(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function c(e){function t(r,i,o,s){var c=n(e[r],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"===(void 0===l?"undefined":a(l))&&y.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return t("throw",e,o,s)}))}s(c.arg)}var r;this._invoke=function(e,n){function i(){return new Promise((function(r,i){t(e,n,r,i)}))}return r=r?r.then(i,i):i()}}function u(e,t,r){var i=b;return function(o,a){if(i===I)throw new Error("Generator is already running");if(i===O){if("throw"===o)throw a;return g()}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=l(s,r);if(c){if(c===D)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===b)throw i=O,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=I;var u=n(e,t,r);if("normal"===u.type){if(i=r.done?O:E,u.arg===D)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=O,r.method="throw",r.arg=u.arg)}}}function l(e,t){var r=e.iterator[t.method];if(r===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,l(e,t),"throw"===t.method))return D;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,D;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,D):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,D)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function h(e){if(e){var t=e[S];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:v,done:!0}}var v,m=Object.prototype,y=m.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},S=_.iterator||"@@iterator",w=_.asyncIterator||"@@asyncIterator",T=_.toStringTag||"@@toStringTag";e.wrap=t;var b="suspendedStart",E="suspendedYield",I="executing",O="completed",D={},k={};k[S]=function(){return this};var L=Object.getPrototypeOf,N=L&&L(L(h([])));N&&N!==m&&y.call(N,S)&&(k=N);var x=o.prototype=r.prototype=Object.create(k);i.prototype=x.constructor=o,o.constructor=i,o[T]=i.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,T in e||(e[T]="GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},s(c.prototype),c.prototype[w]=function(){return this},e.AsyncIterator=c,e.async=function(n,r,i,o){var a=new c(t(n,r,i,o));return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},s(x),x[T]="Generator",x[S]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,D):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),D},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),D}}}("object"===a(e)?e.exports:{}),function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){function r(){l=!1,s.length?u=s.concat(u):d=-1,u.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=u.length;t;){for(s=u,u=[];++d<t;)s&&s[d].run();d=-1,t=u.length}s=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,c=t.exports={},u=[],l=!1,d=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=a,c.addListener=a,c.once=a,c.off=a,c.removeListener=a,c.removeAllListeners=a,c.emit=a,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(e,t,n){function i(e){o=function(e){for(var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array(256).keys())),n=0,r=(e=function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(e.charCodeAt(n));return t}(e),0),i=t.length;i>r;r++){var o=[t[n=(n+t[r]+e[r%e.length])%256],t[r]];t[r]=o[0],t[n]=o[1]}return t}(e)}var o="",a=r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,i=0;case 1:return i=(i+t[n=(n+1)%256])%256,o=[t[i],t[n]],t[n]=o[0],t[i]=o[1],e.next=9,t[(t[n]+t[i])%256];case 9:e.next=1;break;case 11:case"end":return e.stop()}}),e,this)}));i.prototype.encrypt=function(e){for(var t=function(e){var t,n,r=new Array;t=e.length;for(var i=0;i<t;i++)(n=e.charCodeAt(i))>=65536&&n<=1114111?(r.push(n>>18&7|240),r.push(n>>12&63|128),r.push(n>>6&63|128),r.push(63&n|128)):n>=2048&&n<=65535?(r.push(n>>12&15|224),r.push(n>>6&63|128),r.push(63&n|128)):n>=128&&n<=2047?(r.push(n>>6&31|192),r.push(63&n|128)):r.push(255&n);return r}(e),n=t.length,r=new ArrayBuffer(n),i=a(o.slice(0)),s=new Int8Array(r),c=0;n>c;c++)s[c]=t[c]^i.next().value;return s},i.prototype.decrypt=function(e){for(var t="",n=a(o.slice(0)),r=0,i=(e=e.match(/[a-z0-9]{2}/gi)).length;i>r;r++)t+=String.fromCharCode(parseInt(e[r],16)^n.next().value);return t},t.exports=i},{}],3:[function(e,t,r){(function(e,n){function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":void 0===e?"undefined":a(e)}!function(n){function i(e,t,n,r){var i=Object.create((t||a).prototype),o=new g(r||[]);return i._invoke=f(e,n,o),i}function o(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function s(){}function c(){}function u(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function l(e){this.arg=e}function d(t){function n(e,n){var r=t[e](n),i=r.value;return i instanceof l?Promise.resolve(i.arg).then(o,a):Promise.resolve(i).then((function(e){return r.value=e,r}))}"object"===(void 0===e?"undefined":r(e))&&e.domain&&(n=e.domain.bind(n));var i,o=n.bind(t,"next"),a=n.bind(t,"throw");n.bind(t,"return"),this._invoke=function(e,t){function r(){return n(e,t)}return i=i?i.then(r,r):new Promise((function(e){e(r())}))}}function f(e,t,n){var r=b;return function(i,a){if(r===I)throw new Error("Generator is already running");if(r===O){if("throw"===i)throw a;return m()}for(;;){var s=n.delegate;if(s){if("return"===i||"throw"===i&&s.iterator[i]===y){n.delegate=null;var c=s.iterator.return;if(c&&"throw"===(u=o(c,s.iterator,a)).type){i="throw",a=u.arg;continue}if("return"===i)continue}var u;if("throw"===(u=o(s.iterator[i],s.iterator,a)).type){n.delegate=null,i="throw",a=u.arg;continue}if(i="next",a=y,!(l=u.arg).done)return r=E,l;n[s.resultName]=l.value,n.next=s.nextLoc,n.delegate=null}if("next"===i)n._sent=a,n.sent=r===E?a:y;else if("throw"===i){if(r===b)throw r=O,a;n.dispatchException(a)&&(i="next",a=y)}else"return"===i&&n.abrupt("return",a);if(r=I,"normal"===(u=o(e,t,n)).type){r=n.done?O:E;var l={value:u.arg,done:n.done};if(u.arg!==D)return l;n.delegate&&"next"===i&&(a=y)}else"throw"===u.type&&(r=O,i="throw",a=u.arg)}}}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function g(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(p,this),this.reset(!0)}function v(e){if(e){var t=e[S];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(_.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var y,_=Object.prototype.hasOwnProperty,S="function"==typeof Symbol&&Symbol.iterator||"@@iterator",w="object"===(void 0===t?"undefined":r(t)),T=n.regeneratorRuntime;if(T)w&&(t.exports=T);else{(T=n.regeneratorRuntime=w?t.exports:{}).wrap=i;var b="suspendedStart",E="suspendedYield",I="executing",O="completed",D={},k=c.prototype=a.prototype;s.prototype=k.constructor=c,c.constructor=s,s.displayName="GeneratorFunction",T.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):e.__proto__=c,e.prototype=Object.create(k),e},T.awrap=function(e){return new l(e)},u(d.prototype),T.async=function(e,t,n,r){var o=new d(i(e,t,n,r));return T.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},u(k),k[S]=function(){return this},k.toString=function(){return"[object Generator]"},T.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},T.values=v,g.prototype={constructor:g,reset:function(e){if(this.prev=0,this.next=0,this.sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&_.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=_.call(i,"catchLoc"),s=_.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&_.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),D},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),h(n),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},D}}}}("object"===(void 0===n?"undefined":r(n))?n:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:void 0)}).call(this,e("_process"),void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],4:[function(e,t,n){t.exports={full:"1.2.0",major:"1",minor:"2",dot:"0"}},{}]},{},[2])(2)),p={firstInit:!1,initTime:0,sessionId:"",sessionStartTime:0,appLaunchInfo:null,sendFailTimes:0,bakData:{},Store:{set:function(e,t){try{zs.setStorageSync("TDSDK_"+e,t)}catch(e){}p.bakData["TDSDK_"+e]=t},get:function(e){var t=null;try{t=zs.getStorageSync("TDSDK_"+e)}catch(e){}return t||(t=p.bakData["TDSDK_"+e]||null),t},remove:function(e){try{zs.removeStorageSync("TDSDK_"+e)}catch(e){}delete p.bakData["TDSDK_"+e]},getInfo:function(){try{return zs.getStorageInfoSync()||{}}catch(e){return{}}}},random:function(){for(var e="",t=0;t<12;t++)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(Math.floor(62*Math.random()));return e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},timestamp:function(){return(new Date).getTime()},deviceId:function(){return"weapp-"+this.timestamp()+"-"+this.random()},getEventId:function(e){if(!e&&!/0{1}/.test(e))return"";var t="";try{t=e.toString()}catch(n){try{t=JSON.stringify(e)}catch(e){}}return t.split(" ")[0].slice(0,64)},addStoreData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="EVENT_"+p.sessionId,n=p.Store.get(t);n=n&&n.length?n.concat(e):e,p.Store.set(t,n),n.length>=30&&(w.sessionContinue(),w.startLoop())},eventHandle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n={eventId:e,count:1,startTime:p.timestamp()};if("WeappShare"===e){n.shareTickets=t.shareTickets;var r={};r.user=p.deviceId,r.title=t.title,r.desc=t.desc;var i=t.path;i?i=(i=p.getUrl("",p.getSearchParams(t.path))).substring(1):console.log("分享事件的path参数缺少有效值"),r.path=i,n.params=r}p.addStoreData([n])}},getCacheData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),n=[],r=[];return t.length&&t.forEach((function(t){var i=e[t];i&&i.sendFail&&i.data&&(n=n.concat(i.data),r.push(t))})),{data:n,keys:r}},sendCacheList:{},updateSendTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=d.device.deviceId,r=p.Store.get("uid"),i=p.Store.get("deviceId");return e.forEach((function(o,a){if(!o.device.deviceId.tid&&!o.device.deviceId.uid)if(n.tid){if(o.device.deviceId.tid=n.tid,n.uid)return o.device.deviceId.uid=n.uid,!0}else{if(n.uid)return o.device.deviceId.uid=n.uid,o.device.deviceId.tid=n.uid,!0;if(h.isWaitingForOpenid){if(r)return o.device.deviceId.uid=r,o.device.deviceId.tid=r,n.uid=r,n.tid=r,!0;if(i)o.device.deviceId.tid=i,o.device.deviceId.uid="";else{var s=p.deviceId();n.tid=s,n.uid="",p.Store.set("deviceId",s),o.device.deviceId.tid=s,o.device.deviceId.uid="",h.shouldOverwriteTid=!1}}else o.device.deviceId.tid=n.tid,o.device.deviceId.uid=n.uid}o.action&&o.action.data&&(e[a].action.data.start=t)})),e},getRequestData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=JSON.parse(JSON.stringify(e)),n=p.sendCacheList;if(Object.keys(n).length){var r=p.getCacheData(n);t=t.concat(r.data),r.keys.forEach((function(e){return delete n[e]}))}var i=t.length;if(i){var o=[];i>=30?(JSON.stringify(t).length>61440&&o.push(t.splice(0,i/2)),o.push(t)):o.push(t),o.forEach((function(e){var t=p.timestamp();n[t]={data:e,sendFail:!1};var r=p.updateSendTime(e,p.timestamp());p.request(t,r)}))}},handleData:function(e){return new f("r5czusfu0wjcaz4pp01v2k7qte55xc25fngq4ylby2civ230vdy6uy6goz9w4kgfqjk31l8khfzfvbxj7emcprjyy8nngf0r9dvxzwbhm2uw7ljre52jt95lg0knyp8e5c4go44s3z5ciy58h0tuosmwhupa62rdnkeicgdba6w6f0kenp0xac7so8j1vdbjpqwyprx2ouenv22isustwnpltt9ui5plnijd4bq4013o3mzdkllozn26zwds9x38").encrypt(e)},request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=p.handleData(JSON.stringify(t));zs.request({url:"https://h5.udrig.com/app/wx/v1",data:n.buffer,header:{"content-type":"application/octet-stream","decrypt-version":"v1.0.0"},method:"POST",success:function(t){200===t.statusCode&&(delete p.sendCacheList[e],p.sendFailTimes=0,b.appIsHide||(clearTimeout(w.timeout),w.timeout=null,w.startLoop()))},fail:function(){b.appIsHide?(p.Store.set("RESEND_"+e,t),delete p.sendCacheList[e]):(p.sendCacheList[e].sendFail=!0,p.sendFailTimes<5&&p.sendFailTimes++)}})},getUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t).sort()||[],r=n.length?e+"?":e;return n.forEach((function(e,n){0!==n&&(r+="&"),r+=e+"="+t[e]})),r},getSearchParams:function(e){if(!e)return{};var t={};return e.split("&").forEach((function(e){var n=e.split("=");2===n.length&&(t[n[0]]=n[1])})),t}},h={shouldOverwriteTid:!0,isWaitingForOpenid:!0,isFirst:!0,init:function(){var e=this,t=p.Store.get("deviceId"),n=p.Store.get("uid");if(n){var r=t||n;e.setData(r,n)}else new Promise(this.getOpenid).then((function(n){var r=void 0;t?r=t:(r=n,p.Store.set("deviceId",n)),e.setData(r,n),p.Store.set("uid",n),h.isWaitingForOpenid=!1})).catch((function(n){var r;r=t||p.deviceId(),e.setData(r,""),h.shouldOverwriteTid&&p.Store.set("deviceId",r),h.isWaitingForOpenid=!1}))},setData:function(e,t){h.shouldOverwriteTid?d.device.deviceId={tid:e,uid:t}:d.device.deviceId.uid=t,l.uid=!1,w.getAppProfile()},getOpenid:function(e,t){s?e(s):c.push(e)},reGetOpenid:function(e,t){h.isFirst=!1,h.getOpenid(e,t)}},g={placeOrder:{domain:"iap",name:"placeOrder"},orderPaySucc:{domain:"iap",name:"pay"},cancelOrder:{domain:"iap",name:"cancelOrder"},register:{domain:"account",name:"register"},login:{domain:"account",name:"login"},update:{domain:"account",name:"update"}},v={sendTime:0,statusType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=JSON.parse(JSON.stringify(d)),r={domain:e.domain,name:e.name,data:e.data};n.ts=e.data.start||p.timestamp(),n.action=r,t.push(n),p.getRequestData(t)},dataType:function(e,t){var n=this.getStoreList(e,t);p.getRequestData(n)},getEventType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g[e.domainName];if(t)return t;if(e.pageEvent)return{domain:"page",name:"leave"};if(e.eventId){var n={};switch(e.eventId){case"WeappShare":n={domain:"user",name:"share"};break;case"WeappPullDownRefresh":n={domain:"page",name:"pullDownRefresh"};break;case"WeappReachBottom":n={domain:"page",name:"reachBottom"};break;default:n={domain:"appEvent",name:""}}return n}},getStoreList:function(e,t){var n=this,r=[],i=e||p.sessionId,o=JSON.stringify(d),a=p.Store.get("EVENT_"+i);return a&&a.length&&(a.forEach((function(e){var i=n.getEventType(e),a=JSON.parse(o);t&&a.appContext&&(a.appContext.sessionStartTime=t);var s=JSON.parse(JSON.stringify(e));s.pageEvent&&delete s.pageEvent,s.domainName||(s.status=2),s.domainName&&delete s.domainName;var c={domain:i.domain,name:i.name,data:s};a.ts=s.startTime?s.startTime:p.timestamp(),a.action=c,r.push(a)})),p.Store.remove("EVENT_"+i)),r}},m={handleData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=function(e){var t={},n=p.Store.get("account")||{};return"update"!==e&&"setProfile"!==e||(t=n||{}),{getInfo:function(){return t},setId:function(e){if("string"!=typeof e||""===e)return"accountId 类型错误";e===n.accountId?t=n:t.accountId=e},setName:function(e){if("string"!=typeof e)return"profile name 类型错误";t.name=e},setAge:function(e){if(!p.isNumber(e))return"profile age 类型错误";t.age=e},setGender:function(e){var n=Number(e);if(0!==n&&1!==n&&2!==n)return"profile gender 类型错误";t.gender=n},setType:function(e){var n=Number(e);if(!(p.isNumber(n)&&/^[0-9][0-9]*$/.test(n)&&(n>=0&&n<=6||n>=11&&n<=20)))return"account type 类型错误";t.type=n},setProperty:function(e,n){if(!p.isNumber(n)&&"string"!=typeof n)return"profile "+e+" 类型错误";t[e]=n}}}(t),r={name:"setName",gender:"setGender",age:"setAge",accountType:"setType"},i=!1,o=new RegExp("^property[1-9]$");if(e.accountId&&"update"!==t&&"setProfile"!==t){var a=n.setId(e.accountId);if(a)return i=!0,console.error(a)}if(Object.keys(e).forEach((function(t){if(!i){var a=e[t],s=r[t];if(s){var c=n[s](a);if(c)return i=!0,console.error(c)}else if(o.test(t)||"property10"===t){var u=n.setProperty(t,a);if(u)return i=!0,console.error(u)}}})),!i){var s=n.getInfo();if(m.updateAccountInfo("account",s),"register"===t||"login"===t||"update"===t){var c=Object.assign({domainName:t},e);p.addStoreData([c])}}},updateAccountInfo:function(e,t){p.Store.set(e,t),m.assignAccount(t)},setAccountInfo:function(e){var t=p.Store.get(e);"[object Object]"===Object.prototype.toString.call(t)&&m.assignAccount(t)},assignAccount:function(e){d.appContext.account=e}},y={register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.accountId?e.accountType||0===e.accountType?void m.handleData(e,"register"):console.error("Register事件缺少accountType字段"):console.error("Register事件缺少accountId字段")},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.accountId?e.accountType||0===e.accountType?void m.handleData(e,"login"):console.error("Login事件缺少accountType字段"):console.error("Login事件缺少accountId字段")},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.handleData(e,"update")}},_={placeOrder:function(e){if(!o(e))return!1;var t={orderId:e.orderId,amount:e.amount,currencyType:e.currencyType,domainName:"placeOrder"};p.addStoreData([t])},orderPaySucc:function(e){if(!o(e,!0))return!1;var t={orderId:e.orderId,amount:e.amount,currencyType:e.currencyType,payType:e.paymentType,domainName:"orderPaySucc"};p.addStoreData([t])},cancelOrder:function(e){if(!o(e))return!1;var t={orderId:e.orderId,amount:e.amount,currencyType:e.currencyType,domainName:"cancelOrder"};p.addStoreData([t])}},S=!1,w={timeout:null,init:function(e){d.app.versionCode=e.versionCode||"1",d.app.versionName=e.versionName,d.app.displayName=e.displayName||"",d.app.appKey=e.appKey||"",d.app.channel=e.channel||"";var t=zs.getLaunchOptionsSync();p.appLaunchInfo=JSON.parse(JSON.stringify(t)),p.appLaunchInfo.scene=t.scene?t.scene.toString():"",h.init(),w.judgeRequireData(),w.getLocalParams(),w.getSystemInfo(),w.getNetwork()},launchRequest:function(){v.statusType({domain:"app",name:"init",data:{first:!0}})},sessionStart:function(e){var t=p.appLaunchInfo||{},n={status:1,duration:0,name:t.path,scene:t.scene,query:t.query||{},shareTicket:t.shareTicket,referrerInfo:t.referrerInfo};e&&w.setNewSession(),n.start=p.Store.get("session_time")||p.timestamp(),n.url=p.getUrl(n.name,n.query),v.statusType({domain:"session",name:"begin",data:n})},sessionContinue:function(){v.dataType()},sessionEnd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={status:3,start:e.startTime,duration:e.duration};v.statusType({domain:"session",name:"end",data:t})},sendTmpSession:function(){w.sessionContinue(),w.startLoop()},startLoop:function(){w.timeout&&(clearTimeout(w.timeout),w.timeout=null);var e=3e3*(p.sendFailTimes+1);w.timeout=setTimeout((function(){w.sendTmpSession()}),e)},judgeRequireData:function(){d.app.appKey||(d.app.appKey="",console.error("请填写您在TalkingData申请的App ID")),d.app.displayName||(d.app.displayName="appname",console.error("请填写您的小程序名称"))},getLocalParams:function(){var e=p.Store.get("initTime");e?p.initTime=e:(p.initTime=p.timestamp(),p.Store.set("initTime",p.initTime),p.firstInit=!0),d.app.installTime=p.initTime,m&&m.setAccountInfo("account"),w.setNewSession()},setNewSession:function(){p.sessionId=p.deviceId(),p.sessionStartTime=p.timestamp(),p.Store.set("session_time",p.sessionStartTime),d.appContext.sessionId=p.sessionId,d.appContext.sessionStartTime=p.sessionStartTime},getLaunchInfo:function(){var e=JSON.parse(JSON.stringify(w.launchOptions));return e.type="appLaunch",e},getAppProfile:function(){if(!S){var e=!0;["device","network","uid"].forEach((function(t){l[t]&&(e=!1)})),e&&(S=!0,this.startRequest())}},startRequest:function(){p.firstInit&&w.launchRequest(),this.sessionStart(),this.startLoop()},getLocation:function(){},getNetwork:function(){zs.getNetworkType({success:function(e){var t=d.networks,n=e.networkType;"wifi"===n?(t[0].available=!0,t[0].connected=!0):"unknown"===n?(t[2].available=!0,t[2].connected=!0):"none"!==n&&(t[1].available=!0,t[1].connected=!0,t[1].current.push({type:n})),l.network=!1,w.getAppProfile()}})},getSystemInfo:function(){zs.getSystemInfo({success:function(e){if(e.model||e.system||e.SDKVersion){var t={model:e.model,pixel:e.screenWidth+"*"+e.screenHeight+"*"+e.pixelRatio,densityDpi:e.pixelRatio,brand:e.brand},n={os:e.system,local:e.language,language:"zh_CN",osVersionCode:e.version,timezone:-(new Date).getTimezoneOffset()/60,mpVersion:e.SDKVersion};d.device.hardwareConfig=t,d.device.softwareConfig=n}l.device=!1,w.getAppProfile()}})}},T={init:w.init,setOpenId:function(e){s=e,c.forEach((function(e){return e(s)})),c.length=0},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p.getEventId(e.id);if(t){var n={};n.eventId=t,n.label=p.getEventId(e.label),n.count=e.count||1,n.params=e.params,n.startTime=p.timestamp(),void 0!==e.value?"number"!=typeof e.value?console.error('自定义事件"'+t+'"中value对应的值的类型需为Number类型'):isNaN(e.value)?console.error('自定义事件"'+t+'"中请输入有效的Number类型数值'):(n.value=e.value,p.addStoreData([n])):p.addStoreData([n])}},share:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p.eventHandle("WeappShare",e)},pullDownRefresh:function(){p.eventHandle("WeappPullDownRefresh")},reachBottom:function(){p.eventHandle("WeappReachBottom")},setProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.handleData(e,"setProfile")},profile:y,iap:_},b={isHide2Show:!1,appIsHide:!1,show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(b.appIsHide=!1,b.getlastTmpData(),b.isHide2Show){var t=p.Store.get("TMP_time_end_"+p.sessionId),n=e.scene?e.scene.toString():"";e.scene&&p.appLaunchInfo&&n===p.appLaunchInfo.scene?p.timestamp()-t>3e4?b.sessionRestart(t):p.Store.remove("TMP_time_end_"+p.sessionId):(p.appLaunchInfo=JSON.parse(JSON.stringify(e)),p.appLaunchInfo.scene=n,b.sessionRestart(t)),b.isHide2Show=!1,w.startLoop()}},sessionRestart:function(e){var t=p.Store.get("TMP_time_start_"+p.sessionId),n={startTime:t,duration:parseInt((e-t)/1e3)};w.sessionEnd(n),p.Store.remove("TMP_time_start_"+p.sessionId),p.Store.remove("TMP_time_end_"+p.sessionId),p.Store.remove("session_time"),w.sessionStart(!0)},hide:function(){b.appIsHide=!0,clearTimeout(w.timeout),w.timeout=null,w.sessionContinue(),b.isHide2Show=!0,p.Store.set("TMP_time_start_"+p.sessionId,p.Store.get("session_time")),p.Store.set("TMP_time_end_"+p.sessionId,p.timestamp())},getlastTmpData:function(){var e=[],t=p.Store.getInfo().keys||[],n=void 0,r=void 0;t&&t.length&&(n=t.filter((function(e){return e.indexOf("TDSDK_EVENT")>-1})),r=t.filter((function(e){return e.indexOf("TDSDK_RESEND")>-1}))),n&&n.length&&(n.forEach((function(t){var n={};t.split("_")[2],n.id=t.split("_")[2],n.time=n.id.split("-")[1],e.push(n)})),b.sendLastTmpData(e)),r&&r.length&&r.forEach((function(e){zs.getStorage({key:e,success:function(t){p.getRequestData(t.data),zs.removeStorageSync(e)}})}))},sendLastTmpData:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){v.dataType(e.id,e.time)}))}};window.tdAppSdk=T,zs.onShow(b.show),zs.onHide(b.hide)},753:function(){!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof GameGlobal?GameGlobal:{};"undefined"==typeof window&&(e.window=e),window.zs=window.zs||{};var t=void 0!==window.ks?window.ks:void 0!==window.tt?window.tt:void 0!==window.bl?window.bl:void 0!==window.wx?window.wx:null,n=void 0!==window.ks?"ks":void 0!==window.tt?"tt":void 0!==window.bl?"bili":void 0!==window.wx?"wx":"web";if(zs.pf=n,!t)return zs.login=function(e){var t,n=function(){var t,n;null==e||null===(t=e.fail)||void 0===t||t.call(e,{errCode:-1,errMsg:"平台不支持"}),null==e||null===(n=e.complete)||void 0===n||n.call(e)};("zs_sdk",t=[{name:"device",keyPath:"name"}],2,new Promise((function(e,n){if(window.indexedDB){var r=window.indexedDB.open("zs_sdk",2);r.onerror=function(e){n&&n({errCode:-1,errMsg:"登录失败"})},r.onsuccess=function(t){var n=t.target.result;e(n)},r.onupgradeneeded=function(e){var n=e.target.result;t.forEach((function(e){n.objectStoreNames.contains(e.name)||(e.keyPath?n.createObjectStore(e.name,{keyPath:e.keyPath}):n.createObjectStore(e.name,{autoIncrement:!0}))}))}}else n&&n({errCode:-1,errMsg:"平台不支持"})}))).then((function(t){(function(e,t){return new Promise((function(n,r){e.transaction(t).objectStore(t).openCursor().onsuccess=function(e){var t=e.target.result;t?("uuid"===t.key&&n(t.value),t.continue()):n(null)}}))})(t,"device").then((function(n){var r,i,o;null==n?(o="web_"+Math.random().toString(36).substring(2),function(e,t,n){new Promise((function(r,i){var o=e.transaction([t],"readwrite").objectStore(t).put(n);o.onsuccess=function(e){},o.onerror=function(e){}}))}(t,"device",{name:"uuid",value:o})):o=n.value,null==e||null===(r=e.success)||void 0===r||r.call(e,{pf:"zs",code:o}),null==e||null===(i=e.complete)||void 0===i||i.call(e)})).catch((function(){n()}))})).catch((function(){n()}))},zs.request=function(e){var t;if(null!=e){var n=!0,r=e.url;if(null!=r&&""!==r){var i,o=e.responseType||"text",a=e.dataType||"json",s=e.timeout||6e4,c=new XMLHttpRequest,u=e.method||"GET",l=null;if("application/octet-stream"!==(null===(t=e.header)||void 0===t?void 0:t["content-type"])&&e.data&&"string"!=typeof e.data?"GET"===u||"application/x-www-form-urlencoded"===(null===(i=e.header)||void 0===i?void 0:i["content-type"])?(l=function(e){var t="";for(var n in e)t+="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n]),"&");return t.slice(0,t.length-1)}(e.data),"GET"===u&&(r+=l)):l=JSON.stringify(e.data):l=e.data,c.onreadystatechange=function(){if(4==c.readyState){if(c.status>=200&&c.status<400){var t,n,r=null;if(r="arraybuffer"===o?c.response:c.responseText,"json"===a)try{r=JSON.parse(r)}catch(e){return void f(-1,"服务器数据解析失败")}return null===(t=e.success)||void 0===t||t.call(e,{data:r,statusCode:c.status,header:c.getAllResponseHeaders()}),void(null===(n=e.complete)||void 0===n||n.call(e))}f(c.status,"网络请求失败")}},c.onerror=function(e){f(-1,"网络请求错误")},c.ontimeout=function(){f(-1,"网络请求超时")},c.timeout=s,c.responseType=o,c.open(u,r,!0),e.header)for(var d in e.header)c.setRequestHeader(d,e.header[d]);return"POST"===u&&null!=l?c.send(l):c.send(),c}f(-1,"网络请求地址为空")}function f(t,r){var i,o;n&&(n=!1,null===(i=e.fail)||void 0===i||i.call(e,{errCode:t,errMsg:r}),null===(o=e.complete)||void 0===o||o.call(e))}},zs.getLaunchOptionsSync=function(){return{}},zs.getSystemInfoSync=function(){return{}},zs.getSystemInfo=function(e){var t,n;null==e||null===(t=e.success)||void 0===t||t.call(e,{}),null==e||null===(n=e.complete)||void 0===n||n.call(e,{})},zs.setStorage=function(e){var t,n;localStorage.setItem(e.key,e.data),null==e||null===(t=e.success)||void 0===t||t.call(e),null==e||null===(n=e.complete)||void 0===n||n.call(e)},zs.setStorageSync=function(e,t){window.localStorage.setItem(e,t)},zs.getStorage=function(e){var t,n,r=localStorage.getItem(e.key);null==e||null===(t=e.success)||void 0===t||t.call(e,r),null==e||null===(n=e.complete)||void 0===n||n.call(e)},zs.getStorageSync=function(e){return window.localStorage.getItem(e)},zs.removeStorageSync=localStorage.removeItem,zs.getStorageInfoSync=function(){return null},zs.getNetworkType=function(e){var t,n;null==e||null===(t=e.success)||void 0===t||t.call(e,{networkType:"unknown"}),null==e||null===(n=e.complete)||void 0===n||n.call(e,{networkType:"unknown"})},zs.onShow=function(){},zs.onHide=function(){},void(zs.getAccountInfoSync=function(){return{miniProgram:{envVersion:"develop",version:"1.0.0"}}});if(zs.login=function(e){t.login({success:function(r){var i;"ks"===n&&e.old?t.getUserInfo({success:function(t){var n;null!=t&&t.unionID?e.success({pf:"ks",is_old:0,unionID:t.unionID}):null===(n=e.fail)||void 0===n||n.call(e,{errCode:-1,errMsg:"不支持"})},fail:e.fail,complete:e.complete}):(r.pf=n,"ks"===n&&(r.is_old=1),null===(i=e.success)||void 0===i||i.call(e,r))},fail:function(t){var n,r;null===(n=e.fail)||void 0===n||n.call(e,t),null===(r=e.complete)||void 0===r||r.call(e)},complete:e.complete})},zs.request=t.request,zs.getLaunchOptionsSync=function(){var e=t.getLaunchOptionsSync();return"ks"===n&&(e.scene=e.from),e},zs.getSystemInfoSync=t.getSystemInfoSync,zs.getSystemInfo=t.getSystemInfo,zs.setStorage=t.setStorage,zs.setStorageSync=t.setStorageSync,zs.getStorage=t.getStorage,zs.getStorageSync=t.getStorageSync,zs.removeStorageSync=t.removeStorageSync,zs.getStorageInfoSync=t.getStorageInfoSync,zs.getNetworkType=t.getNetworkType,zs.onShow=t.onShow,zs.onHide=t.onHide,"tt"===n){var r=null;zs.getAccountInfoSync=function(){if(r)return{miniProgram:r};r={};var e=zs.getLaunchOptionsSync();if(e&&e.extra&&(r.version=e.extra.mpVersion,r.appId=e.extra.appId),tt.getEnvInfoSync){var t=tt.getEnvInfoSync().microapp.envType;r.envVersion="production"===t?"release":"development"===t?"trial":"preview"===t?"develop":t}return{miniProgram:r}}}else zs.getAccountInfoSync=t.getAccountInfoSync}()},841:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TimeUtil=void 0;var n=864e5,r=function(){function e(){}return e.updateServerTime=function(e){this._diff=e-(new Date).getTime()},e.getTime=function(){return(new Date).getTime()+this._diff},e.getDayStartTime=function(e){return new Date(e).setHours(0,0,0,0)},e.getDayEndTime=function(e){return new Date(e).setHours(23,59,59,999)},e.getWeekEndTime=function(e){var t=new Date(e).getDay();return this.getDayEndTime(e)+(0===t?0:(7-t)*n)},e.getMonthEndTime=function(e){var t=new Date(e);return 11===t.getMonth()?t.setFullYear(t.getFullYear()+1,0,0):t.setMonth(t.getMonth()+1,0),t.setHours(23,59,59,999)},e.getDiffDayNum=function(e,t){var r=this.getDayStartTime(e),i=this.getDayStartTime(t);return Math.ceil(Math.abs(r-i)/n)},e.formatTime=function(e,t){var n,r={"M+":(n="number"==typeof e?new Date(e):e).getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),"S+":n.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substring(4-RegExp.$1.length))),r)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[i]:((2===RegExp.$1.length?"00":"000")+r[i]).substring((""+r[i]).length)));return t},e._diff=0,e}();t.TimeUtil=r},916:function(e,t){var n,r,i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LoggerLevel=void 0,function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.DEBUG=3]="DEBUG",e[e.INFO=4]="INFO",e[e.ALL=5]="ALL"}(n||(t.LoggerLevel=n={})),function(e){var t="[Seeg SDK]",r=n.OFF;e.setLoggerLevel=function(e){r=e},e.log=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];r===n.ALL&&console.log.apply(console,i([t],e,!0))},e.debug=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];r>=n.DEBUG&&console.debug.apply(console,i([t],e,!0))},e.info=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];r>=n.INFO&&console.info.apply(console,i([t],e,!0))},e.warn=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];r>=n.WARN&&console.warn.apply(console,i([t],e,!0))},e.error=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];r>=n.ERROR&&console.error.apply(console,i([t],e,!0))}}(r||(t.Logger=r={}))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n(486)}(),e("default",r.exports)}),{})}}}));

System.register("chunks:///_virtual/seeg_td.mjs_cjs=&original=.js",["./seeg_td.js","./cjs-loader.mjs"],(function(e,t){var s,r;return{setters:[function(t){s=t.__cjsMetaURL;var r={};r.__cjsMetaURL=t.__cjsMetaURL,r.default=t.default,e(r)},function(e){r=e.default}],execute:function(){s||r.throwInvalidWrapper("./seeg_td.js",t.meta.url),r.require(s)}}}));

System.register("chunks:///_virtual/SignIn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./DataManager.ts","./Utils.ts","./TAData.ts","./SaveData.ts"],(function(i){var t,e,n,s,r,a,g,u;return{setters:[function(i){t=i.inheritsLoose,e=i.createClass},function(i){n=i.cclegacy},function(i){s=i.Debug},function(i){r=i.default},function(i){a=i.default},function(i){g=i.TAData},function(i){u=i.SaveDataStr}],execute:function(){n._RF.push({},"0d344KRoVBESa1W/Abaaq2M","SignIn",void 0);i("SignIn",function(i){function n(t){var e;return(e=i.call(this,t)||this)._signTime=0,e._signDay=0,e._signBottle=-1,e._bGuide=!1,e}t(n,i);var u=n.prototype;return u.load=function(i){if(""!=i){var t=i.split(";");t.length>=1&&(this._signTime=parseInt(t[0])),t.length>=2&&(this._signDay=parseInt(t[1])),t.length>=3&&(this._bGuide=1==parseInt(t[2]))}},u.str=function(){var i=this._signTime+";"+this._signDay+";"+(this._bGuide?1:0);return i},u.isSignIn=function(){if(s.ServerTime10MinForOneDay)return!(Math.abs(r.getServerTime()-this._signTime)>6e5);var i=r.getServerTime();return a.IsSameDay(this._signTime,i)||this._signTime>=i},u.isNeedSignIn=function(){var i=!1;return!(r.getServerTime()<=0)&&(!this.isSignIn()&&(this._signTime<=0&&(i=!0),i))},u.getSignDays=function(){var i=a.AddDate(this._signTime,1);return a.IsSameDay(i,r.getServerTime()),this._signDay},u.getSignBottle=function(){return-1},u.signIn=function(){var i=this.getSignDays();this._signTime=r.getServerTime(),++i>=7&&(i=0,r.Player.SignBottleIndex.val=-1),this._signDay=i,this.dirty=!0,r.Player.saveData(),g.Mgr.sendEventSignIn(i)},e(n,[{key:"SignTime",get:function(){return this._signTime}},{key:"Guide",get:function(){return this._bGuide},set:function(i){this._bGuide=i,this.dirty=!0}}]),n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/Skin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./EventManager.ts","./SaveData.ts","./Utils.ts","./DataManager.ts","./TAData.ts"],(function(t){var n,e,i,a,s,r,o,u,d,c,h,f;return{setters:[function(t){n=t.createClass,e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator},function(t){r=t.GameEvent,o=t.EGameTipsType},function(t){u=t.default},function(t){d=t.SaveDataStr},function(t){c=t.default},function(t){h=t.default},function(t){f=t.TAData}],execute:function(){var l,S;a._RF.push({},"459b7kxN3FAkq6Dl7H0ggs2","Skin",void 0);var _=s.ccclass,k=(s.property,t("Skin",_("Skin")(l=function(){function t(){this._id=-1,this._bUsed=!1}return t.LoadSkin=function(n){var e=null,i=c.SplitInt(n,"|");return i.length>=2&&(e=t.CreateSkin(i[0],i[1])),e},t.CreateSkin=function(n,e){void 0===e&&(e=0);var i=new t;return i.Id=n,i.Used=0!=e,i},t.prototype.str=function(){return this._id+"|"+(this._bUsed?1:0)},n(t,[{key:"Id",get:function(){return this._id},set:function(t){this._id=t}},{key:"Used",get:function(){return this._bUsed},set:function(t){this._bUsed=t}}]),t}())||l));t("SkinList",_("SkinList")(S=function(t){function a(n){var e;return(e=t.call(this,n)||this)._data=new Map,e._has_newSkin=!1,e}e(a,t);var s=a.prototype;return s.load=function(t){var n=this;if(this._data.clear(),c.SplitStr(t,";").forEach((function(t){var e=k.LoadSkin(t);null!=e&&(e.Used||(n._has_newSkin=!0),n._data.set(e.Id,e))})),this._data.size<=0){var e=k.CreateSkin(0,1);null!=e&&this._data.set(e.Id,e)}},s.str=function(){for(var t,n="",e=i(this._data.values());!(t=e()).done;){n+=""+t.value.str(),n+=";"}return n},s.getUnlockSize=function(){return this._data.size},s.getUnlockCompleteSize=function(){return this._data.size},s.isUsed=function(t){return!!this._data.has(t)&&this._data.get(t).Used},s.setUsed=function(t){var n=this._data.get(t);n&&(n.Used||(n.Used=!0,this.HasNewSkin=this.isShowSkinSign(),this.dirty=!0,f.Mgr.sendEventThemeChange("material","first_use",n.Id.toString())))},s.getUsedCount=function(){var t=0,n=this._data.values();if(n)for(var e,a=i(n);!(e=a()).done;){e.value.Used&&t++}return t},s.unLockSkin=function(t){if(!this._data.has(t)){var n=k.CreateSkin(t,0);null!=n&&(this._data.set(n.Id,n),this.HasNewSkin=!0,f.Mgr.sendEventThemeChange("material","unlock",n.Id.toString())),this.dirty=!0,h.Player.saveData()}},s.isUnLock=function(t){return this._data.has(t)},s.useSkin=function(t){h.Player.SkinId.val=t,this.setUsed(t),h.Player.saveData(),u.emit(r.EventChangeSkinChoose,t)},s.isShowSkinSign=function(){for(var t=1;t<this._data.size;t++)if(!this.isUsed(t))return!0;return!1},n(a,[{key:"HasNewSkin",get:function(){return this._has_newSkin},set:function(t){t!=this._has_newSkin&&(this._has_newSkin=t,u.emit(r.EventGameTips,o.ESkin,t))}}]),a}(d))||S);a._RF.pop()}}}));

System.register("chunks:///_virtual/SkinItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./DataManager.ts","./UIBase.ts","./UIHelp.ts","./GameAdMgr.ts","./UIShareLayer.ts","./UIThemeSkin.ts"],(function(e){var t,i,n,r,a,o,l,s,c,u,p,f,h,b,d,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node},function(e){s=e.Sfx},function(e){c=e.default},function(e){u=e.default},function(e){p=e.GUIBase},function(e){f=e.default},function(e){h=e.GameAdMgr,b=e.EAdPlayType},function(e){d=e.default},function(e){_=e.default}],execute:function(){var v,y,I,S,g,m,k,x,w,U,z,L,P,A,B,D,F,G,M,T;a._RF.push({},"1b8dd41/b9HAYJZgIrbpkhY","SkinItem",void 0);var N=o.ccclass,E=o.property;e("default",(v=N("SkinItem"),y=E({type:l}),I=E({type:l}),S=E({type:l}),g=E({type:l}),m=E({type:l}),k=E({type:l}),x=E({type:l}),w=E({type:l}),v(((T=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"spr_bg",L,r(t)),n(t,"icon_sp",P,r(t)),n(t,"uselabel",A,r(t)),n(t,"video_sp",B,r(t)),n(t,"select_sp",D,r(t)),n(t,"video_icon",F,r(t)),n(t,"video_label",G,r(t)),n(t,"share_label",M,r(t)),t.cellIndex=0,t.chooseIndex=0,t}i(t,e);var a=t.prototype;return a.onInit=function(e){},a.onUIEnable=function(){},a.SetData=function(e,t,i){this.cellIndex=e,this.chooseIndex=0;for(var n=0;n<3;n++){var r=3*e+n,a=r<t,o=r<t?r:0,l=u.Player.SkinList.isUnLock(r);0==r&&(l=!0),this.spr_bg[n].active=a,a&&(l?f.SetSpriteFrame(this.spr_bg[n],"themeskin/Game_frame_lv"):f.SetSpriteFrame(this.spr_bg[n],"themeskin/Game_frame_hui"),f.SetSpriteFrame(this.icon_sp[n],"bottle/pingzi_"+o),9==r?(this.video_label[n].active=!1,this.video_icon[n].active=!1,this.share_label[n].active=!0):(this.video_label[n].active=!0,this.video_icon[n].active=!0,this.share_label[n].active=!1),this.video_sp[n].active=!l,this.uselabel[n].active=i==r,this.select_sp[n].active=i==r)}},a.toChooseItem=function(e,t){c.playEffect(s.SOUND_BUTTON);var i=parseInt(t);this.chooseIndex=3*this.cellIndex+i;var n=this;u.Player.SkinList.isUnLock(this.chooseIndex)?u.Player.SkinList.useSkin(this.chooseIndex):9==this.chooseIndex?(f.CloseUI(_),f.ShowUI(d)):h.getInstance().ShowRewardVideoAd(b.ad_video_skin,(function(e){if(e){var t=n.chooseIndex;u.Player.SkinList.unLockSkin(t),u.Player.SkinList.useSkin(t),t==u.Player.SignBottleIndex.val&&(u.Player.SignBottleIndex.val=-1,u.Player.SignIn.getSignBottle())}}))},t}(p))._prefabUrl="widget/SkinItem",T._className="SkinItem",L=t((z=T).prototype,"spr_bg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(z.prototype,"icon_sp",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=t(z.prototype,"uselabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(z.prototype,"video_sp",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(z.prototype,"select_sp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(z.prototype,"video_icon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=t(z.prototype,"video_label",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(z.prototype,"share_label",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=z))||U));a._RF.pop()}}}));

System.register("chunks:///_virtual/SolveGameUtil.ts",["cc","./BottleData.ts","./Defines.ts","./Log.ts","./GameUtils.ts"],(function(t){var e,o,n,l,r,s,i;return{setters:[function(t){e=t.cclegacy,o=t.randomRangeInt},function(t){n=t.CompleteType},function(t){l=t.GameType,r=t.GameDefine},function(t){s=t.default},function(t){i=t.default}],execute:function(){e._RF.push({},"b9f32LMARBPMZ4xDgG5L4dt","SolveGameUtil",void 0),t("SolveGameUtil",function(){function t(){this.gameType=l.NORMAL,this.longBottleCanPickToggle=!1}t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance};var e=t.prototype;return e.SolveGame=function(t,e,o){void 0===o&&(o=!1),this.gameType=e,this.longBottleCanPickToggle=o;var n=[];return t.forEach((function(t){t.forEach((function(t){t.bottles.some((function(t){return t.video_bottle}))||n.push(t.clone())}))})),this.Solve(new u(n,0),1e3,!0).solvable[0].map((function(t){return[t.from,t.to]}))},e.Solve=function(t,e,o){var n=this;void 0===o&&(o=!1);for(var l,r=this.GetTargetCollectColors(t),i=[{parent:null,children:[],collectColors:[],targetColors:r,keysCount:0,from:-1,to:-1,doneState:t,step:0,complexity:this.calcComplexity(t,r).sum,f:this.calcComplexity(t,r).sum,reachable:void 0}],u=[],c=[],a=function(){i.sort(n.sortWithF);var t=i.shift();if(s.log("maxDeath",e,u.length),u.length>e){var l;if(c.length>0)l=c[0];else{l=[];for(var r=t;null!=r;)l.push(r),r=r.parent;l.reverse()}return s.warn("当前结果:",l),s.warn("超过最大尝试次数:",e),{v:{solvable:c,close:u}}}if(n.checkIsWin(t)){for(var a=[],f=t;null!=f;)a.push(f),f=f.parent;if(a.reverse(),c.push(a),u.push(t),o)return s.log("步数:",a.length,"最终解:",a),{v:{solvable:c,close:u}}}else{n.listOptions(t).forEach((function(e){var o=u.findIndex((function(t){return n.ArrayEqualAfterSort(t.doneState.tubes,e.doneState.tubes)}));o<0?(i.push(e),t.children.push(e)):t.children.push(u[o])})),u.push(t)}};i.length>0;)if(l=a())return l.v;return s.log("跑完了所有的情况"),{solvable:c,close:u}},e.checkIsWin=function(t){return this.gameType==l.NORMAL?0==t.complexity:this.gameType==l.CHALLENGE?this.longBottleCanPickToggle?0==t.complexity:t.doneState?t.doneState.tubes.every((function(t){return t.bottles.every((function(t){return t.bottle.length<r.LONG_BOTTLE_MIN_LENGTH||t.bottle.every((function(t){return t>0}))}))})):0==t.complexity:void 0},e.sortWithF=function(t,e){return t.f==e.f?o(-1,1):t.f-e.f},e.listOptions=function(t){for(var e=t.doneState.tubes,o=[],l=0;l<e.length;l++){var s=e[l].curDepth,i=this.GetBottleTopTypeAndCount(e[l].bottles[s].bottle),u=i[0],c=i[1];if((!(e[l].unlockColor>0)||t.collectColors.includes(e[l].unlockColor))&&((c!==e[l].segment||e[l].bottles[s].complete_type!=n.COMPLETE_NEXT)&&!(e[l].bottles[s].collect_type>0)&&1!=e[l].stoneBottle&&!(e[l].unlockId>0&&e[l].unlockId>t.keysCount)&&(!(e[l].bottles[s].bottle.length>=r.LONG_BOTTLE_MIN_LENGTH)||this.longBottleCanPickToggle)&&c>0))for(var a=0;a<e.length;a++)if(a!==l){var f=e[a].curDepth;if(e[a].bottles[f].complete_type!=n.EMPTY_NEXT&&(!(e[a].unlockColor>0)||t.collectColors.includes(e[a].unlockColor))&&!(e[a].unlockId>0&&e[a].unlockId>t.keysCount||e[a].bottles[f].collect_type>0&&e[a].bottles[f].collect_type!=u)){var h=this.GetBottleTopTypeAndEmptyCount(e[a].bottles[f].bottle),p=h[0];if(h[1]>0&&(-1===p||p===u)){var b=this.SwapIndex(e,l,a,c),v=this.calcComplexity({tubes:b},t.targetColors),g=[].concat(t.collectColors);if(b[a].bottles[f].isComplete()){var m=b[a].bottles[f].bottle[0];g.includes(m)||g.push(m)}var y=t.keysCount,d=b[l].bottles[s].bottle,E=b[l].bottles[s].key_index;null==E&&(E=-1),!b[l].bottles[s].key_collected&&E>=0&&0==d[E]&&(b[l].bottles[s].key_collected=!0,y++),o.push({parent:t,children:[],collectColors:g,keysCount:y,targetColors:t.targetColors,from:l,to:a,doneState:{tubes:b},step:t.step+1,complexity:v.sum,f:v.sum,reachable:void 0})}}}}return o},e.calcComplexity=function(t,e){var o={sum:0},s=!0,u=!1,c=void 0;try{if(this.gameType==l.NORMAL)for(var a=t.tubes[Symbol.iterator]();!(s=(f=a.next()).done);s=!0)f.value.bottles.forEach((function(t,e,l){t.collect_type>0?(o.sum+=3*t.bottle.length,t.bottle.forEach((function(t,e,n){t>0&&(o.sum-=3)}))):t.complete_type==n.EMPTY_NEXT?t.bottle.forEach((function(t,e,n){t>0&&o.sum++})):i.IsBottlePure(t.bottle)?t.bottle.forEach((function(t,e,n){0==t&&o.sum++})):t.bottle.forEach((function(t,e,n){if(n[e+1]&&t!==n[e+1]){n.length;o.sum+=2}})),null!=t.key_index&&t.key_index>=0&&0==t.key_collected&&o.sum++}));else if(this.gameType==l.CHALLENGE)if(this.longBottleCanPickToggle)for(a=t.tubes[Symbol.iterator]();!(s=(f=a.next()).done);s=!0)f.value.bottles.forEach((function(t,e,n){i.IsBottlePure(t.bottle)?t.bottle.forEach((function(t,e,n){0==t&&o.sum++})):t.bottle.forEach((function(t,e,n){if(n[e+1]&&t!==n[e+1]){n.length;o.sum+=2}}))}));else{var f;for(a=t.tubes[Symbol.iterator]();!(s=(f=a.next()).done);s=!0)f.value.bottles.forEach((function(t,n,l){t.bottle.forEach((function(t,n,l){l.length<r.LONG_BOTTLE_MIN_LENGTH&&l[n+1]&&t!==l[n+1]&&(e.includes(t)?o.sum+=2:o.sum+=1)}))}))}}catch(t){u=!0,c=t}finally{try{s||null==a.return||a.return()}finally{if(u)throw c}}return o},e.GetBottleTopTypeAndCount=function(t){for(var e=-1,o=0,n=t.length-1;n>=0&&(0!=t[n]&&-1==e?(e=t[n],o=1):t[n]===e&&o++,-1===e||t[n]===e);n--);return-1===e&&(e=0,o=0),[e,o]},e.GetBottleTopTypeAndEmptyCount=function(t){for(var e=0,o=-1,n=t.length-1;n>=0;n--){if(0!==t[n]){o=t[n];break}e++}return[o,e]},e.GetTargetCollectColors=function(t){var e=[];return this.gameType==l.CHALLENGE&&t.tubes.forEach((function(t){t.bottles.forEach((function(t){t.bottle.length>=r.LONG_BOTTLE_MIN_LENGTH&&e.push(t.bottle[0])}))})),e},e.SwapIndex=function(t,e,o,n){for(var l=t.map((function(t){return t.clone()})),r=0,s=l[o].segment-1;s>=0&&0===l[o].showingBottle.bottle[s];s--)r++;r<n&&(n=r);for(var i=-1,u=l[e].segment-1;u>=0;u--)if(0!=l[e].showingBottle.bottle[u]){i=l[e].showingBottle.bottle[u];for(var c=0;c<n;c++){if(u-c<0)throw"数组越界:i:"+u+",j:"+c;l[e].showingBottle.bottle[u-c]=0}break}if(-1==i)return l;for(var a=0;a<l[o].segment;a++)if(0==l[o].showingBottle.bottle[a]){for(var f=0;f<n;f++){if(a+f>=l[o].segment)throw"数组越界:i:"+a+",j:"+f;l[o].showingBottle.bottle[a+f]=i}break}return l},e.SortWithHash=function(t,e){var o=t.hash-e.hash;return o>0?1:o<0?-1:0},e.ArrayEqualAfterSort=function(t,e){if(t.length!==e.length)return!1;var o=[];t.forEach((function(t){var e=t.clone();e.updateHash(),o.push(e)}));var n=[];e.forEach((function(t){var e=t.clone();e.updateHash(),n.push(e)})),o.sort(this.SortWithHash),n.sort(this.SortWithHash);for(var l=0;l<o.length;l++)if(o[l].hash!==n[l].hash)return!1;return!0},t}())._instance=void 0;var u=t("State",(function(t,e){this.tubes=void 0,this.tubes=t}));e._RF.pop()}}}));

System.register("chunks:///_virtual/StepRecord.ts",["cc","./BottleData.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.BottleData2}],execute:function(){e._RF.push({},"ad17exqbUZF4biH3r/1OrhW","StepRecord",void 0);t("StepRecord",(function(t){this.stepId=0,this.levelMap=[],this.fromIndex=[-1,-1,-1],this.toIndex=[-1,-1,-1],t&&(this.stepId=t.stepId,this.levelMap=t.levelMap.map((function(t){return t.map((function(t){return new n(t)}))})),this.fromIndex=t.fromIndex,this.toIndex=t.toIndex)}));e._RF.pop()}}}));

System.register("chunks:///_virtual/TableCalcWokerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./TableCalcWorker.ts"],(function(e){var r,a,o,t,n,s;return{setters:[function(e){r=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){o=e.cclegacy,t=e._decorator},function(e){n=e.default},function(e){s=e.default}],execute:function(){var c,l;o._RF.push({},"c059cioBk1G66+Cfyg+zWqj","TableCalcWokerManager",void 0);var i=t.ccclass;t.property,e("TableCalcWokerManager",i("TableCalcWokerManager")(((l=function(){function e(){this.workerPool=[],this.busyWorkers=new Set}var o=e.prototype;return o.initWorkerPool=function(e){var r=Math.min(navigator.hardwareConcurrency||4,e);n.log("[TableCalcWokerManager] 正在创建 "+r+" 个 Web Workers");for(var a=0;a<r;a++){var o=new Worker(s,{type:"module"});this.workerPool.push(o)}},o.execTask=function(e,r,a){var o=this;return new Promise((function(t,n){var s=o.getAvailableWorker();s?(s.onmessage=function(r){var a=r.data,c=a.type,l=a.taskId,i=a.success;if(e===l)switch(c){case"RESULT":o.releaseWorker(s),i?t(r.data.data):n(r.data.error);break;case"ERROR":o.releaseWorker(s),n(r.data.error)}},s.postMessage({type:"CALCULATE",taskId:e,data:r,args:a})):n("没有可用的 Worker")}))},o.getAvailableWorker=function(){for(var e,a=r(this.workerPool);!(e=a()).done;){var o=e.value;if(!this.busyWorkers.has(o))return this.busyWorkers.add(o),o}return null},o.releaseWorker=function(e){this.busyWorkers.delete(e)},o.terminateAll=function(){n.log("[TableCalcWokerManager] 正在终止所有 Web Workers"),this.workerPool.forEach((function(e){try{e.postMessage({type:"TERMINATE"})}catch(e){n.error("终止 Worker 时出错: "+e)}})),this.workerPool=[],this.busyWorkers.clear()},a(e,null,[{key:"Instance",get:function(){return e.instance||(e.instance=new e),e.instance}}]),e}()).instance=null,c=l))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/TableCalcWorker.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"c1455n2htFCd4h4V0kpKhro","TableCalcWorker",void 0);var n=function(){function e(e,r){return e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e))+e}var r=function(){function e(e,r){this.x=0,this.y=0,this.x=e,this.y=r}return e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},e}(),n=function(e){return e[e.NONE=10]="NONE",e[e.ICE=11]="ICE",e[e.VINE=12]="VINE",e[e.BOX2=13]="BOX2",e[e.BOARDLEFT=14]="BOARDLEFT",e[e.BOARDRIGHT=15]="BOARDRIGHT",e[e.BOARDTOP=16]="BOARDTOP",e[e.BOARDBOTTOM=17]="BOARDBOTTOM",e}({});var t=function(){function e(){this.row=0,this.col=0,this.num=0,this.type=10,this.typeExtData=0}var n=e.prototype;return n.ResetData=function(){this.num=0,this.type=10,this.typeExtData=0},n.GetRowCol=function(){return new r(this.row,this.col)},n.equals=function(e){return void 0!==e&&null!=e&&(this.row===e.row&&this.col===e.col&&this.num===e.num)},n.Clone=function(){var r=new e;return r.row=this.row,r.col=this.col,r.num=this.num,r.type=this.type,r.typeExtData=this.typeExtData,r},e}(),a=function(){this.cubeRc=new r(0,0),this.mergeRcs=[]};self.onmessage=function(e){var r=e.data,n=r.type,t=r.taskId,a=r.data,i=r.args;try{switch(n){case"CALCULATE":!function(e){var r=e.rowCfg,n=e.colCfg,t=e.calcIndex;u=r,o=n,f=t}(i);for(var s=JSON.parse(a.encodeData),l=a.start;l<=a.end;l++)x(f,s[l-a.start]);var c=JSON.stringify(s);self.postMessage({type:"RESULT",taskId:t,success:!0,data:c});break;case"TERMINATE":self.close()}}catch(e){self.postMessage({type:"ERROR",taskId:t,success:!1,error:e})}};var u=0,o=0,f=0,i=Array.from({length:u},(function(){return Array(o).fill(null)})),s=[];function l(e,n,t){var a=new r(t.x,t.y);return n.equals(e)||(n.x!=e.x?t.y==e.y&&(n.x<e.x&&t.x<e.x?a.x-=e.x-n.x:n.x>e.x&&t.x>e.x&&(a.x+=n.x-e.x)):t.x==e.x&&(n.y<e.y&&t.y<e.y?a.y-=e.y-n.y:n.y>e.y&&t.y>e.y&&(a.y+=n.y-e.y))),a}function c(e){return e.x>=0&&e.x<u&&e.y>=0&&e.y<o}function h(e,n,a,f){var s=new Array;if(!c(new r(e,n)))return s;for(var l=function(){for(var e=new Array,r=0;r<i.length;++r){for(var n=new Array,a=0;a<i[r].length;++a){var u=new t;u.row=i[r][a].row,u.col=i[r][a].col,u.num=i[r][a].num,u.type=i[r][a].type,u.typeExtData=i[r][a].typeExtData,n.push(u)}e.push(n)}return e}(),h=u,y=o,v=function(r){if(-1!==f.findIndex((function(n){return n.x===e&&n.y===r})))return 0;var n=l[e][r];return n.num>0?(n.num==a&&s.push(n.Clone()),0):void 0},p=n-1;p>=0&&0!==v(p);--p);for(var w=function(r){if(-1!==f.findIndex((function(n){return n.x===e&&n.y===r})))return 0;var n=l[e][r];return n.num>0?(n.num==a&&s.push(n.Clone()),0):void 0},m=n+1;m<y&&0!==w(m);++m);for(var g=function(e){if(-1!==f.findIndex((function(r){return r.x===e&&r.y===n})))return 0;var r=l[e][n];return r.num>0?(r.num==a&&s.push(r.Clone()),0):void 0},x=e-1;x>=0&&0!==g(x);--x);for(var b=function(e){if(-1!==f.findIndex((function(r){return r.x===e&&r.y===n})))return 0;var r=l[e][n];return r.num>0?(r.num==a&&s.push(r.Clone()),0):void 0},R=e+1;R<h&&0!==b(R);++R);return s}function y(e){var n=new Array;if(!c(new r(e.row,e.col))||0==e.num)return n;for(var t=u,a=o,f=e.row,s=e.col,l=s-1;l>=0&&0!=i[f][l].num;--l)n.push(i[f][l].Clone());for(var h=s+1;h<a&&0!=i[f][h].num;++h)n.push(i[f][h].Clone());for(var y=f-1;y>=0&&0!=i[y][s].num;--y)n.push(i[y][s].Clone());for(var v=f+1;v<t&&0!=i[v][s].num;++v)n.push(i[v][s].Clone());return n}function v(e,t){var a=[];return e>0&&null!=i[e-1][t]&&i[e-1][t].type==n.BOX2&&a.push(new r(e-1,t)),e<u-1&&null!=i[e+1][t]&&i[e+1][t].type==n.BOX2&&a.push(new r(e+1,t)),t>0&&null!=i[e][t-1]&&i[e][t-1].type==n.BOX2&&a.push(new r(e,t-1)),t<o-1&&null!=i[e][t+1]&&i[e][t+1].type==n.BOX2&&a.push(new r(e,t+1)),a}function p(e,t,a){if(!c(e))return!1;var f=i[e.x][e.y];if(0==f.num)return!1;if(f.type==n.ICE)return!1;if(f.type==n.VINE)return!1;if(f.type==n.BOX2)return!1;if(h(e.x,e.y,f.num,new Array).length>0&&(t.push(e),!a))return!0;var v=y(f),p=function(e){for(var r=new Array,n=0;n<e.length;++n)r.push(e[n].Clone());return r}(v);p.push(f);for(var w=new Array,m=0;m<p.length;++m)w.push(p[m].GetRowCol());for(var g=function(e){var t=new Array;if(0==e.num)return t;for(var a=u,f=o,l=e.row,c=e.col,h=new r(-1,-1),y=0,v=c-1;v>=0;--v){for(var p=i[l][v],w=!1,m=0;m<s.length;++m)if(!s[m].isDirH()&&s[m].rc1==new r(l,v)){w=!0;break}if(w)break;if(h.equals(new r(-1,-1))&&(p.type==n.ICE||p.type==n.VINE||p.type==n.BOX2))break;if(0==p.num&&h.equals(new r(-1,-1))&&(h=new r(l,v)),!h.equals(new r(-1,-1))){if(p.num>0)break;y++}}for(var g=1;g<=y;++g)t.push(new r(l,c-g));h=new r(-1,-1),y=0;for(var x=c+1;x<f;++x){for(var b=i[l][x],R=!1,C=0;C<s.length;++C)if(!s[C].isDirH()&&s[C].rc2==new r(l,x)){R=!0;break}if(R)break;if(h.equals(new r(-1,-1))&&(b.type==n.ICE||b.type==n.VINE||b.type==n.BOX2))break;if(0==b.num&&h.equals(new r(-1,-1))&&(h=new r(l,x)),!h.equals(new r(-1,-1))){if(b.num>0)break;y++}}for(var O=1;O<=y;++O)t.push(new r(l,c+O));h=new r(-1,-1),y=0;for(var E=l-1;E>=0;--E){for(var D=i[E][c],d=!1,I=0;I<s.length;++I)if(s[I].isDirH()&&s[I].rc1==new r(E,c)){d=!0;break}if(d)break;if(h.equals(new r(-1,-1))&&(D.type==n.ICE||D.type==n.VINE||D.type==n.BOX2))break;if(0==D.num&&h.equals(new r(-1,-1))&&(h=new r(E,c)),!h.equals(new r(-1,-1))){if(D.num>0)break;y++}}for(var N=1;N<=y;++N)t.push(new r(l-N,c));h=new r(-1,-1),y=0;for(var A=l+1;A<a;++A){for(var M=i[A][c],k=!1,T=0;T<s.length;++T)if(s[T].isDirH()&&s[T].rc2==new r(A,c)){k=!0;break}if(k)break;if(h.equals(new r(-1,-1))&&(M.type==n.ICE||M.type==n.VINE||M.type==n.BOX2))break;if(0==M.num&&h.equals(new r(-1,-1))&&(h=new r(A,c)),!h.equals(new r(-1,-1))){if(M.num>0)break;y++}}for(var B=1;B<=y;++B)t.push(new r(l+B,c));return t}(f),x=0;x<g.length;++x){for(var b=g[x],R=new Array,C=0;C<v.length;++C){var O=l(e,b,v[C].GetRowCol());R.push(O)}if(c(b)){for(var E=h(b.x,b.y,f.num,R),D=function(e){var r=E.findIndex((function(r){return r.equals(p[e])}));-1!==r&&E.splice(r,1)},d=0;d<p.length;++d)D(d);if(E.length>0&&(t.push(b),!a))return!0}}return t.length>0}function w(t,f){for(var s=new Array,c=0;c<u;++c)for(var m=0;m<o;++m){var g=new Array;if(p(new r(c,m),g,!0)){var x=new a;x.cubeRc=new r(c,m),x.mergeRcs=g,s.push(x)}}if(s.length>0){for(;t>=f.canMergeCubeNums.length;)f.canMergeCubeNums.push([]);f.canMergeCubeNums[t].push(s.length);var b=s[e(0,s.length)],R=b.cubeRc,C=b.mergeRcs,O=C[e(0,C.length)],E=y(i[b.cubeRc.x][b.cubeRc.y]),D=i[R.x][R.y].num;i[R.x][R.y].ResetData();for(var d=0;d<E.length;++d){var I=E[d].GetRowCol();i[I.x][I.y].ResetData()}i[O.x][O.y].num=D;for(var N=0;N<E.length;++N){var A=l(R,O,E[N].GetRowCol());i[A.x][A.y].num=E[N].num}var M=h(O.x,O.y,D,new Array);if(M.length>0){var k=M[e(0,M.length)].GetRowCol();i[k.x][k.y].ResetData(),i[O.x][O.y].ResetData();var T=0;T=(R.x,O.x,Math.abs(R.y-O.y));var B=0;B=O.x==k.x?Math.abs(O.y-k.y)-1:Math.abs(O.x-k.x)-1,B=Math.max(0,B),f.gameScoreTmp+=1+T+B,M.length>1&&(f.multipleTimes+=1),f.gameMergeTimes+=1;for(var q=v(O.x,O.y),X=v(k.x,k.y),V=0;V<X.length;++V)q.indexOf(X[V])<0&&q.push(X[V]);for(var S=0;S<q.length;++S){var G=q[S],L=i[G.x][G.y];null!=L&&L.type==n.BOX2&&(L.typeExtData<=1?i[G.x][G.y].ResetData():L.typeExtData-=1)}f.gameMergeTimes%3==0&&function(){var r=function(e){for(var r=[],n=0;n<i.length;++n)for(var t=0;t<i[n].length;++t){var a=i[n][t];null!=a&&a.type==e&&r.push(a)}return r}(n.VINE);if(0==r.length)return;for(var t=function(){for(var e=[],r=0;r<i.length;++r)for(var n=0;n<i[r].length;++n){var t=i[r][n];null!=t&&t.num>0&&e.push(t)}return e}().filter((function(e){return null!=e&&e.type===n.NONE})),a=function(){if(0==t.length)return 1;var a=e(0,t.length),o=t[a];o.type=n.VINE,r[u].type=n.NONE,t=t.filter((function(e){return null!=e&&e.num!=o.num}))},u=0;u<r.length&&!a();++u);}()}w(t,f)}}function m(e,r){!function(e){g(e);for(var r=function(){for(var e=new Array,r=0;r<u;++r)for(var n=0;n<o;++n)e.push(i[r][n]);return e}(),n=0;n<r.length-1;++n){var t=r[n];if(0!=t.num)for(var a=n+1;a<r.length;++a){var f=r[a];if(0!=f.num){var s=1==Math.abs(t.col-f.col)&&t.row==f.row,l=1==Math.abs(t.row-f.row)&&t.col==f.col;if(t.num==f.num&&(s||l)){i[t.row][t.col].ResetData(),i[f.row][f.col].ResetData(),e.initMergeNum+=1;break}}}}}(r),g(r),s=r.boardData,w(e,r);for(var n=0,t=0;t<u;++t)for(var a=0;a<o;++a)i[t][a].num>0&&n++;if(0==n)r.winTimes++,r.gameScoreTotal+=r.gameScoreTmp;else{for(;e>=r.canMergeCubeNums.length;)r.canMergeCubeNums.push([]);if(r.canMergeCubeNums[e].length<r.nums.length/2)for(var f=r.canMergeCubeNums[e].length;f<r.nums.length/2;++f)r.canMergeCubeNums[e].push(0);r.leftCubes+=n}r.gameScoreTmp=0}function g(e){!function(e){if(i=[],e)for(var r=0;r<u;++r){for(var n=new Array,a=0;a<o;++a){var f=new t;f.row=r,f.col=a,f.ResetData(),n.push(f)}i.push(n)}}(!0);for(var r=0;r<u;++r)for(var a=0;a<o;++a){var f=r*o+a;if(f<e.nums.length){var s=e.nums[f],l=new t;l.row=r,l.col=a,l.num=s,l.type=e.extData[f],l.type==n.BOX2&&(l.typeExtData=2),i[r][a]=l}}}function x(e,r){r.gameMergeTimes=0,m(e,r)}}.toString(),t=n.substring(n.indexOf("{")+1,n.lastIndexOf("}")),a=new Blob([t],{type:"application/javascript"});e("default",URL.createObjectURL(a));r._RF.pop()}}}));

System.register("chunks:///_virtual/TableCreator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./TableGenerateWokerManager.ts","./DeepClone.ts","./TableCalcWokerManager.ts","./CommonUtils.ts","./yx-collection-view.ts","./yx-table-layout.ts","./UI_GameMap.ts","./GameMacros.ts","./UIHelp.ts"],(function(e){var t,a,n,r,i,s,l,o,h,u,c,C,T,g,p,b,f,m,S,d,y,v,w,G,x,k,I,D,R,N,E,P,A,M,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){l=e.cclegacy,o=e._decorator,h=e.Node,u=e.EditBox,c=e.Label,C=e.Prefab,T=e.Vec2,g=e.instantiate,p=e.Size,b=e.UITransform,f=e.Vec3,m=e.tween,S=e.sys,d=e.randomRangeInt,y=e.Button,v=e.EventHandler,w=e.Toggle,G=e.Component},function(e){x=e.default},function(e){k=e.TableGenerateWokerManager},function(e){I=e.DeepClone},function(e){D=e.TableCalcWokerManager},function(e){R=e.CommonUtils},function(e){N=e.YXCollectionView},function(e){E=e.YXTableLayout},function(e){P=e.UI_GameMap},function(e){A=e.CardPlayType,M=e.GameMacros},function(e){B=e.default}],execute:function(){var O,L,z,F,U,j,W,V,_,X,H,J,Y,q,K,Z,Q,$,ee,te,ae,ne,re,ie,se,le,oe,he,ue,ce,Ce,Te,ge,pe,be,fe,me;l._RF.push({},"a3987PsT+NL+4VcP+zvRyXZ","TableCreator",void 0);var Se=o.ccclass,de=o.property,ye=e("TableData",(function(){this.nums=new Array,this.extData=new Array,this.boardData=new Array,this.winTimes=0,this.leftCubes=0,this.initMergeNum=0,this.multipleTimes=0,this.gameScoreTmp=0,this.gameScoreTotal=0,this.winTimesAvg=0,this.leftCubesAvg=0,this.initMergeNumberAvg=0,this.multipleTimesAvg=0,this.canMergeCubeNums=[],this.canMergeCubeNumsAvg=[]})),ve=e("TableBoardInfo",function(){function e(e,t){this.rc1=new T(-1,-1),this.rc2=new T(-1,-1),this.rc1=e,this.rc2=t}return e.prototype.isDirH=function(){return this.rc1.x!=this.rc2.x&&this.rc1.y==this.rc2.y},e}()),we=function(e){return e[e.NONE=10]="NONE",e[e.ICE=11]="ICE",e[e.VINE=12]="VINE",e[e.BOX2=13]="BOX2",e[e.BOARD=14]="BOARD",e}(we||{}),Ge=function(e){return e[e.NONE=0]="NONE",e[e.Generate=1]="Generate",e[e.Cacl=2]="Cacl",e}(Ge||{}),xe=function(e){return e[e.STOPED=0]="STOPED",e[e.STARTED=1]="STARTED",e}(xe||{});e("TableCreator",(O=Se("TableCreator"),L=de({type:h}),z=de({type:h}),F=de({type:u}),U=de({type:u}),j=de({type:u}),W=de({type:u}),V=de({type:u}),_=de({type:u}),X=de({type:u}),H=de({type:h}),J=de({type:c}),Y=de({type:u}),q=de({type:h}),K=de({type:P}),Z=de({type:u}),Q=de({type:C}),$=de({type:h}),O((ae=t((te=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).RowCfg=0,t.ColCfg=0,t.NumberTypeCount=0,t.SingleNumberCount=0,t.InitRowCount=0,t.InitColCount=0,t.CreateTablesCount=0,t.IsForceStopCalc=!1,n(t,"ToastContent",ae,r(t)),n(t,"ToastItem",ne,r(t)),n(t,"InputRow",re,r(t)),n(t,"InputCol",ie,r(t)),n(t,"InputNumberTypeCount",se,r(t)),n(t,"InputSingleNumberCount",le,r(t)),n(t,"InputInitRowCount",oe,r(t)),n(t,"InputInitColCount",he,r(t)),n(t,"InputCreateTablesCount",ue,r(t)),n(t,"TableCreatorMask",ce,r(t)),n(t,"LabelTableCreatorProgress",Ce,r(t)),n(t,"InputCalcTotalCount",Te,r(t)),n(t,"TableListView",ge,r(t)),n(t,"GameMapLayer",pe,r(t)),t.GenerateBatchSize=100,t.GenerateCompletedTasks=0,t.GenerateTableResults=[],t.GenerateTableExtData=[],t.GenerateTablBoardData=[],t.CalcBatchSize=10,t.CalcCompletedTask=0,t.CalcSingleTimes=1,t.CalcTableDatas=new Array,t.CurrentTaskType=Ge.NONE,t.CurrentTaskState=xe.STOPED,t.WebFileInput=null,n(t,"InputCubeTypeGenCount",be,r(t)),t.CurrentMahjongSpecialType=we.NONE,t.CurrentMahjongSpecialCount=4,n(t,"PrefabButtonCardSelect",fe,r(t)),n(t,"LayoutCardList",me,r(t)),t.AllButtonCardSelect=[],t.CurrentSelectCard=null,t.CurrentSelectTableIndex=-1,t}a(t,e);var l=t.prototype;return l.onLoad=function(){this.UpdateTableListView(),this.InitCardsSelectLayer()},l.start=function(){},l.update=function(e){},l.onDestroy=function(){this.FinishAllGenerateWorks()},l.GetAndCheckAllConfig=function(){var e=parseInt(this.InputRow.string);if(e<=0)return this.ShowToast("行配置输入错误！"),!1;this.RowCfg=e;var t=parseInt(this.InputCol.string);if(t<=0)return this.ShowToast("列配置输入错误！"),!1;this.ColCfg=t;var a=parseInt(this.InputNumberTypeCount.string);if(a<=0)return this.ShowToast("数字种类配置错误！"),!1;this.NumberTypeCount=a;var n=parseInt(this.InputSingleNumberCount.string);if(n<=0||n*this.NumberTypeCount!=this.RowCfg*this.ColCfg)return this.ShowToast("单个数字出现的次数配置错误！"),!1;this.SingleNumberCount=n;var r=parseInt(this.InputInitRowCount.string);if(r<=0)return this.ShowToast("初始横向配置错误！"),!1;this.InitRowCount=r;var i=parseInt(this.InputInitColCount.string);if(i<=0)return this.ShowToast("初始纵向配置错误！"),!1;if(this.InitColCount=i,2*this.InitRowCount+2*this.InitColCount>this.RowCfg*this.ColCfg)return this.ShowToast("初始横向和纵向配对个数错误！"),!1;var s=parseInt(this.InputCubeTypeGenCount.string);return this.CurrentMahjongSpecialType!==we.NONE&&(s<=0||s>8||s%2!=0)?(this.ShowToast("特殊块配置数量错误！"),!1):(this.CurrentMahjongSpecialCount=s,!0)},l.ShowToast=function(e,t){if(void 0===t&&(t=0),e){var a=g(this.ToastItem);a.getChildByName("LabelToast").getComponent(c).string=e,this.ToastContent.addChild(a);var n=new p(a.getComponent(b).contentSize);n.width=0,n.height=0;var r=new f(a.scale);r.x=0,r.y=0,m(a.getComponent(b)).delay(t).delay(1.5).to(.3,{contentSize:n}).start(),m(a).delay(t).call((function(){a.active=!0})).delay(1.5).to(.3,{scale:r}).removeSelf().start()}},l.OnBtnCreateClicked=function(){if(this.GetAndCheckAllConfig()){var e=parseInt(this.InputCreateTablesCount.string);e<=0?this.ShowToast("需要生成的阵型数量配置错误！"):(this.CreateTablesCount=e,this.StartGenerateTables())}},l.OnBtnDownloadTables=function(){if(0!=this.GenerateTableResults.length){var e=this.GetAllGenerateTablesString(),t=new Blob([e],{type:"application/json"}),a=document.createElement("a");a.download="生成阵型-"+this.CreateTablesCount.toString()+"关.xlsx",a.href=URL.createObjectURL(t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)}else this.ShowToast("没有可下载数据！")},l.GetAllGenerateTablesString=function(){var e="";if(this.GenerateTableResults.length!==this.GenerateTableExtData.length)return this.ShowToast("生成数据出错！无法下载！"),e;for(var t=0;t<this.GenerateTableResults.length;++t){var a=this.GenerateTableResults[t],n=this.GenerateTableExtData[t];e+="[";for(var r=0;r<a.length;++r)e+=n[r].toString(),e+=a[r].toString().padStart(2,"0"),r<a.length-1&&(e+=",");e+="]",t<this.GenerateTableResults.length-1&&(e+="\n")}return e},l.OnBtnUploadTables=function(){this.InitUploadElement(),this.WebFileInput.click()},l.InitUploadElement=function(){var e=this;S.platform!==S.Platform.DESKTOP_BROWSER&&S.platform!==S.Platform.MOBILE_BROWSER||(null!=this.WebFileInput&&(document.body.removeChild(this.WebFileInput),this.WebFileInput=null),this.WebFileInput=document.createElement("input"),this.WebFileInput.type="file",this.WebFileInput.accept=".xlsx",this.WebFileInput.style.display="none",document.body.appendChild(this.WebFileInput),this.WebFileInput.onchange=function(t){var a=t.target.files[0],n=new FileReader;n.onload=function(){var t=n.result;e.ParseUploadTableData(t.toString())},n.readAsText(a)})},l.ParseUploadTableData=function(e){if(this.GetAndCheckAllConfig()||this.ShowToast("生成阵型参数错误，无法计算！"),R.isNull(e))this.ShowToast("数据错误，上传阵型失败！");else{var t=(e=(e=e.replaceAll('"',"")).replaceAll("\r","")).split("\n"),a=e.split(" ");if(t.length<=0&&a.length<=0)this.ShowToast("数据错误，上传阵型失败！");else{var n=t.length>a.length?t:a;this.GenerateTableResults=[],this.GenerateTableExtData=[];for(var r=0;r<n.length;++r)if(""!=n[r]){for(var i=[],s=[],l=JSON.parse(n[r]),o=0;o<l.length;++o){var h=l[o];h<1e3&&(h+=1e3);var u=h.toString();if(4!=u.length&&2!=u.length)return this.GenerateTableResults=[],this.GenerateTableExtData=[],void this.ShowToast("数据错误，上传阵型数值长度不为4！");i.push(parseInt(u.substring(0,2))),s.push(parseInt(u.substring(2)))}if(this.GenerateTableExtData.push(i),this.GenerateTableResults.push(s),s.length!==i.length||s.length!==this.RowCfg*this.ColCfg)return this.GenerateTableResults=[],this.GenerateTableExtData=[],void this.ShowToast("数据错误，上传阵型与生成阵型配置不符！")}this.ProgressGenerateExtData(),this.UpdateTableListView(),this.ShowToast("上传阵型成功，并已处理为对应特殊阵型")}}},l.OnBtnVerifyClicked=function(){this.GameTableVerify()},l.GameTableVerify=function(){var e=this;if(this.GenerateTableResults.length<=0)this.ShowToast("对不起，没有找到有效的阵型数据！");else{for(var t=new Array,a=function(a){for(var r=e.GenerateTableResults[a],i=(r.length,e.SingleNumberCount,function(n){if(r.filter((function(e){return e==r[n]})).length!=e.SingleNumberCount)return t.push(a+1),a=e.GenerateTableResults.length,1}),s=0;s<r.length&&!i(s);++s);n=a},n=0;n<this.GenerateTableResults.length;++n)a(n);if(t.length>0){for(var r="",i=0;i<t.length;++i)r+=t[i].toString(),r+=",";this.ShowToast("非法阵型: "+r)}else this.ShowToast("校验完成，未发现非法阵型！")}},l.OnBtnDownloadCalcData=function(){if(0!=this.CalcTableDatas.length){var e=this.GetAllCalcTablesString(),t=new Blob([e],{type:"application/json"}),a=document.createElement("a");a.download="通关数据-"+this.CreateTablesCount.toString()+"关.xlsx",a.href=URL.createObjectURL(t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)}else this.ShowToast("未找到计算数据！")},l.GetAllCalcTablesString=function(){var e="阵型\t通关率\t特殊块类型\t特殊块数量\t胜局平均得分\t初始相邻消除对数\t失败时剩余对数\t多选触发率";if(this.CalcTableDatas.length>0)for(var t=0;t<this.CalcTableDatas[0].nums.length/2;++t)e+="\t",e+="step"+(t+1).toString();e+="\n";for(var a=0;a<this.CalcTableDatas.length;++a){var n=this.CalcTableDatas[a],r=this.GenerateTableExtData[a];e+="[";for(var i=0;i<n.nums.length;++i)e+=r[i].toString(),e+=n.nums[i].toString().padStart(2,"0"),i<n.nums.length-1&&(e+=",");e+="]",e+="\t",e+=n.winTimesAvg.toFixed(2),e+="%",e+="\t",e+=this.CurrentMahjongSpecialType,e+="\t",e+=this.CurrentMahjongSpecialCount,e+="\t",n.winTimes>0?e+=(n.gameScoreTotal/n.winTimes).toFixed(2):e+="0",e+="\t",e+=n.initMergeNumberAvg.toFixed(2),e+="\t",e+=n.leftCubesAvg.toFixed(2),e+="\t",e+=n.multipleTimesAvg.toFixed(2);for(var s=0;s<n.nums.length/2;++s)e+="\t",e+=n.canMergeCubeNumsAvg[s].toFixed(2);a<this.CalcTableDatas.length-1&&(e+="\n")}return e},l.OnBtnCalcClicked=function(){var e=parseInt(this.InputCalcTotalCount.string);e<=0?this.ShowToast("计算次数不能为0！"):(this.CalcSingleTimes=e,this.StartCalcTables())},l.OnBtnStopCreatorClicked=function(){this.FinishAllGenerateWorks(),this.FinishAllCalcWorks(),this.ShowTaskMask(!1)},l.FinishAllGenerateWorks=function(){k.Instance.terminateAll(),this.CurrentTaskType=Ge.NONE,this.CurrentTaskState=xe.STOPED},l.ClearTasks=function(){this.CurrentTaskState=xe.STOPED,this.CurrentTaskType=Ge.NONE},l.ClearGenerateTableDatas=function(){this.GenerateTableResults=[],this.GenerateCompletedTasks=0},l.StartGenerateTables=function(){var e=i(s().mark((function e(){var t,a,n,r,i,l,o,h,u,c=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.ClearGenerateTableDatas(),this.FinishAllGenerateWorks(),this.ClearTasks(),this.CurrentTaskType=Ge.Generate,this.CurrentTaskState=xe.STARTED,this.ShowTaskMask(!0),t=Date.now(),x.log("开始大规模计算:"+t.toString()),a=Math.ceil(this.CreateTablesCount/this.GenerateBatchSize),n=navigator.hardwareConcurrency||4,r=n<a?n:a,k.Instance.initWorkerPool(r),i=new Set,l=s().mark((function e(){var t,a,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.CurrentTaskState!==xe.STOPED){e.next=4;break}return c.ClearGenerateTableDatas(),c.ShowToast("生成任务已终止！"),e.abrupt("return",{v:void 0});case 4:if(t=h*c.GenerateBatchSize,a=Math.min(t+c.GenerateBatchSize-1,c.CreateTablesCount-1),(n=c.ExecGenerateBatch(t,a)).finally((function(){i.delete(n)})),i.add(n),!(i.size>=r)){e.next=12;break}return e.next=12,Promise.race(i);case 12:case"end":return e.stop()}}),e)})),h=0;case 15:if(!(h<a)){e.next=23;break}return e.delegateYield(l(),"t0",17);case 17:if(!(o=e.t0)){e.next=20;break}return e.abrupt("return",o.v);case 20:h++,e.next=15;break;case 23:return e.next=25,Promise.all(i);case 25:u=Date.now(),x.log("所有计算任务完成！:"+u.toString()+",  总耗时："+(u-t).toString()+"毫秒"),this.ShowTaskMask(!1),this.ClearTasks(),this.ProgressGenerateTableResults(),this.ShowToast("所有阵型生成完毕！",.3);case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.ExecGenerateBatch=function(){var e=i(s().mark((function e(t,a){var n,r,i,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="task-"+t+"-"+a,x.log("开始处理任务: "+n),e.prev=2,i={rowCfg:this.RowCfg,colCfg:this.ColCfg,maxCubeNum:this.NumberTypeCount,singleNumCount:this.SingleNumberCount,initRowCount:this.InitRowCount,initColCount:this.InitColCount},e.next=6,k.Instance.execTask(n,{start:t,end:a},i);case 6:l=e.sent,(r=this.GenerateTableResults).push.apply(r,l),this.GenerateCompletedTasks+=a-t+1,this.UpdateTaskProgress(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),x.error("任务 "+n+" 失败: "+e.t0);case 15:return e.abrupt("return",Promise.resolve());case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t,a){return e.apply(this,arguments)}}(),l.ProgressGenerateTableResults=function(){this.ProgressGenerateExtData(),this.UpdateTableListView()},l.ProgressGenerateExtData=function(){this.GenerateTableExtData=[],this.CurrentMahjongSpecialType==we.NONE?this.ProgressGamePlayNormal():this.CurrentMahjongSpecialType==we.ICE?this.ProgressGamePlayIce():this.CurrentMahjongSpecialType==we.VINE?this.ProgressGamePlayVine():this.CurrentMahjongSpecialType==we.BOX2?this.ProgressGamePlayBox2():this.CurrentMahjongSpecialType==we.BOARD&&this.ProgressGamePlayBoard()},l.ProgressGamePlayNormal=function(){this.GenerateTableExtData=[];for(var e=0;e<this.GenerateTableResults.length;++e){for(var t=this.GenerateTableResults[e],a=new Array,n=0;n<t.length;++n)a.push(A.Normal);this.GenerateTableExtData.push(a)}},l.ProgressGamePlayIce=function(){this.GenerateTableExtData=[],this.ProgressGamePlayNormal();for(var e=[],t=0;t<this.GenerateTableResults.length;++t){for(var a=this.GenerateTableResults[t],n=this.GenerateTableExtData[t],r=0;r<this.CurrentMahjongSpecialCount;){var i=d(0,a.length);e.indexOf(a[i])>=0||n[i]==A.Normal&&(n[i]=A.ICE,e.push(a[i]),r++)}e=[]}},l.ProgressGamePlayVine=function(){this.GenerateTableExtData=[],this.ProgressGamePlayNormal();for(var e=[],t=0;t<this.GenerateTableResults.length;++t){for(var a=this.GenerateTableResults[t],n=this.GenerateTableExtData[t],r=0;r<this.CurrentMahjongSpecialCount;){var i=d(0,a.length);e.indexOf(a[i])>=0||n[i]==A.Normal&&(n[i]=A.VINE,e.push(a[i]),r++)}e=[]}},l.ProgressGamePlayBox2=function(){this.GenerateTableExtData=[],this.ProgressGamePlayNormal();for(var e=[],t=0;t<this.GenerateTableResults.length;++t){for(var a=this.GenerateTableResults[t],n=this.GenerateTableExtData[t],r=0;r<this.CurrentMahjongSpecialCount;){var i=d(0,a.length);if(!(e.indexOf(a[i])>=0)&&n[i]==A.Normal){var s=this.GetAllSameCubes(a[i],a);if(!(s.length<4))for(var l=0;l<s.length&&l<4&&r<this.CurrentMahjongSpecialCount;++l){var o=s[l];n[o]=A.BOX2,e.push(a[o]),r++}}}e=[]}},l.ProgressGamePlayBoard=function(){this.GenerateTableExtData=[],this.GenerateTablBoardData=[],this.ProgressGamePlayNormal();for(var e=0;e<this.GenerateTableResults.length;++e){this.GenerateTableResults[e];for(var t=this.GenerateTableExtData[e],a=1e3,n=this.CurrentMahjongSpecialCount,r=[];n>0;){if(0!=d(0,2))for(;a>0;){for(var i=d(0,this.RowCfg-1),s=d(0,this.ColCfg),l=new T(i,s),o=new T(l.x+1,l.y),h=!1,u=0;u<r.length;++u){var c=r[u];if(c.rc1.x==l.x||c.rc2.x==l.x||c.rc1.y==l.y||c.rc2.y==l.y||c.rc1.x==o.x||c.rc2.x==o.x||c.rc1.y==o.y||c.rc2.y==o.y){h=!0;break}}if(!h){r.push(new ve(l,o));break}a--}else for(;a>0;){for(var C=d(0,this.RowCfg),g=d(0,this.ColCfg-1),p=new T(C,g),b=new T(p.x,p.y+1),f=!1,m=0;m<r.length;++m){var S=r[m];if(S.rc1.x==p.x||S.rc2.x==p.x||S.rc1.y==p.y||S.rc2.y==p.y||S.rc1.x==b.x||S.rc2.x==b.x||S.rc1.y==b.y||S.rc2.y==b.y){f=!0;break}}if(!f){r.push(new ve(p,b));break}a--}n--}if(r.length==this.CurrentMahjongSpecialCount)for(var y=0;y<r.length;++y){var v=r[y];if(v.isDirH()){for(var w=v.rc2,G=0;G<t.length;++G)if(G==w.x*this.ColCfg+w.y){t[G]=A.BOARDTOP;break}}else for(var x=v.rc2,k=0;k<t.length;++k)if(k==x.x*this.ColCfg+x.y){t[k]=A.BOARDLEFT;break}}else e--}},l.GetAllSameCubes=function(e,t){for(var a=[],n=0;n<t.length;++n)t[n]==e&&a.push(n);return a},l.ShowTaskMask=function(e){this.TableCreatorMask.active=e,e&&this.UpdateTaskProgress()},l.UpdateTaskProgress=function(){var e="";if(this.CurrentTaskType==Ge.Generate)e="当前生成进度:"+Math.ceil(100*this.GenerateCompletedTasks/this.CreateTablesCount)+"%\n"+this.GenerateCompletedTasks.toString()+"/"+this.CreateTablesCount.toString();else if(this.CurrentTaskType==Ge.Cacl){var t=this.CalcTableDatas.length*this.CalcSingleTimes;e="当前计算进度:"+Math.ceil(100*this.CalcCompletedTask/t)+"%\n"+this.CalcCompletedTask.toString()+"/"+t.toString()}this.LabelTableCreatorProgress.string=e},l.FinishAllCalcWorks=function(){D.Instance.terminateAll(),this.CurrentTaskType=Ge.NONE,this.CurrentTaskState=xe.STOPED},l.PrepareCalcDatas=function(){this.CalcTableDatas=[];for(var e=0;e<this.GenerateTableResults.length;++e){var t=new ye;t.nums=I.clone(this.GenerateTableResults[e]),t.extData=I.clone(this.GenerateTableExtData[e]),this.CalcTableDatas.push(t)}},l.ClearCalcTempDatas=function(){this.CalcTableDatas=[],this.CalcCompletedTask=0},l.StartCalcTables=function(){var e=i(s().mark((function e(){var t,a,n,r,i,l,o,h,u,c,C=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ClearCalcTempDatas(),this.PrepareCalcDatas(),0!==this.CalcTableDatas.length){e.next=5;break}return this.ShowToast("对不起，未找到待计算数据！"),e.abrupt("return");case 5:this.FinishAllCalcWorks(),this.ClearTasks(),this.CurrentTaskType=Ge.Cacl,this.CurrentTaskState=xe.STARTED,this.ShowTaskMask(!0),t=Date.now(),x.log("开始大规模计算:"+t.toString()),a=Math.ceil(this.CalcTableDatas.length/this.CalcBatchSize),n=navigator.hardwareConcurrency||4,r=n<a?n:a,D.Instance.initWorkerPool(r),i=new Set,l=0;case 18:if(!(l<this.CalcSingleTimes)){e.next=34;break}o=s().mark((function e(){var t,a,n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.CurrentTaskState!==xe.STOPED){e.next=4;break}return C.CalcTableDatas=[],C.ShowToast("计算任务已终止！"),e.abrupt("return",{v:void 0});case 4:if(t=u*C.CalcBatchSize,a=Math.min(t+C.CalcBatchSize-1,C.CalcTableDatas.length-1),n=C.CalcTableDatas.slice(t,a+1),(o=C.ExecCalcBatch(t,a,l,n)).finally((function(){i.delete(o)})),i.add(o),!(i.size>=r)){e.next=13;break}return e.next=13,Promise.race(i);case 13:case"end":return e.stop()}}),e)})),u=0;case 21:if(!(u<a)){e.next=29;break}return e.delegateYield(o(),"t0",23);case 23:if(!(h=e.t0)){e.next=26;break}return e.abrupt("return",h.v);case 26:u++,e.next=21;break;case 29:return e.next=31,Promise.all(i);case 31:++l,e.next=18;break;case 34:c=Date.now(),x.log("所有计算任务完成！:"+c.toString()+",  总耗时："+(c-t).toString()+"毫秒"),this.ShowTaskMask(!1),this.ClearTasks(),this.ProgressCalcTableResults(),this.ShowToast("所有阵型计算完毕！",.3);case 40:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.ExecCalcBatch=function(){var e=i(s().mark((function e(t,a,n,r){var i,l,o,h,u,c,C,T,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="task-"+t+"-"+a,e.prev=1,l={rowCfg:this.RowCfg,colCfg:this.ColCfg,calcIndex:n},o=JSON.stringify(r),h={start:t,end:a,encodeData:o},e.next=7,D.Instance.execTask(i,h,l);case 7:if(u=e.sent,c=a-t+1,(C=JSON.parse(u)).length===c)for(T=t;T<=a;++T)g=C[T-t],this.CalcTableDatas[T]=g;this.CalcCompletedTask+=a-t+1,this.UpdateTaskProgress(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),x.error("任务 "+i+" 失败: "+e.t0);case 18:return e.abrupt("return",Promise.resolve());case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),l.ProgressCalcTableResults=function(){for(var e=this.RowCfg*this.ColCfg/2,t=0;t<this.CalcTableDatas.length;++t){for(var a=this.CalcTableDatas[t],n=new Array,r=0;r<e;++r)n.push(0);if(a.winTimes<=0){a.canMergeCubeNumsAvg=new Array;for(var i=0;i<e;++i)a.canMergeCubeNumsAvg.push(0);this.CalcTableDatas[t]=a}else{for(var s=0;s<n.length;++s)for(var l=0;l<this.CalcSingleTimes;++l)n[s]+=a.canMergeCubeNums[l][s];null==a.canMergeCubeNumsAvg&&(a.canMergeCubeNumsAvg=new Array);for(var o=0;o<n.length;++o){var h=n[o]/this.CalcSingleTimes;a.canMergeCubeNumsAvg.push(h)}this.CalcTableDatas[t]=a}}for(var u=0;u<this.CalcTableDatas.length;++u){var c=this.CalcTableDatas[u];c.winTimesAvg=100*c.winTimes/this.CalcSingleTimes,this.CalcSingleTimes>c.winTimes?c.leftCubesAvg=.5*c.leftCubes/(this.CalcSingleTimes-c.winTimes):c.leftCubesAvg=0,c.initMergeNumberAvg=c.initMergeNum/this.CalcSingleTimes,c.multipleTimesAvg=c.multipleTimes/this.CalcSingleTimes,this.CalcTableDatas[u]=c}},l.UpdateTableListView=function(){var e=this,t=this.GenerateTableResults.length,a=this.TableListView.getComponent(N);a.numberOfItems=t,a.cellForItemAt=function(t,a){var n=a.dequeueReusableCell("listcell");n.tag=t.item,n.getComponent(y).clickEvents=[];var r=new v;return r.target=e.node,r.component="TableCreator",r.handler="OnBtnTableCellClicked",n.getComponent(y).clickEvents.push(r),n.getChildByName("id").getComponent(c).string=t.item.toString()+".",n.getChildByName("data").getComponent(c).string=e.GenerateTableResults[t.item].toString(),n};var n=new E;n.spacing=10,n.rowHeight=60,a.layout=n,a.reloadData()},l.OnBtnTableCellClicked=function(e,t){var a,n=e.target;x.log(null==(a=n.tag)?void 0:a.toString());var r=n.tag;if(this.CurrentSelectTableIndex=-1,r<this.GenerateTableResults.length){var i=I.clone(this.GenerateTableResults[r]),s=I.clone(this.GenerateTableExtData[r]);this.GameMapLayer.Editor_InitMap(this.RowCfg,this.ColCfg,i,s),this.CurrentSelectTableIndex=r}},l.InitCardsSelectLayer=function(){this.LayoutCardList.destroyAllChildren(),this.AllButtonCardSelect=[];for(var e=1;e<=M.MAX_MAHJONG_NUM;++e){var t=g(this.PrefabButtonCardSelect);B.SetLocalSpriteFrame(t,M.GetNumberResPath(e)),t.parent=this.LayoutCardList,t.getComponent(y).clickEvents=[];var a=new v;a.target=this.node,a.component="TableCreator",a.handler="onBtnSelectCardClicked",a.customEventData=e.toString(),t.getComponent(y).clickEvents.push(a),this.AllButtonCardSelect.push(t)}},l.onBtnSelectCardClicked=function(e,t){this.ClearAllSelectCards();var a=e.target;a.getChildByName("SpLight").active=!0,this.CurrentSelectCard=a,this.GameMapLayer.SelectCardNum=parseInt(t)},l.ClearAllSelectCards=function(){for(var e=0;e<this.AllButtonCardSelect.length;++e){this.AllButtonCardSelect[e].getChildByName("SpLight").active=!1}this.CurrentSelectCard=null},l.OnBtnTableSaveClicked=function(){if(this.CurrentSelectTableIndex>=0&&this.CurrentSelectTableIndex<this.GenerateTableResults.length){var e=this.GameMapLayer.getAllCubes();if(e.length!==this.RowCfg*this.ColCfg)return void this.ShowToast("棋盘不完整，无法保存！");for(var t=this.GenerateTableResults[this.CurrentSelectTableIndex],a=[],n=0;n<this.RowCfg;++n)for(var r=0;r<this.ColCfg;++r){var i=n*this.ColCfg+r;if(i>=t.length)return void this.ShowToast("棋盘数据错误，保存失败！");var s=e[i];a.push(s.getNumber())}this.GenerateTableResults[this.CurrentSelectTableIndex]=a,this.CalcTableDatas.length>this.CurrentSelectTableIndex&&(this.CalcTableDatas[this.CurrentSelectTableIndex].nums=I.clone(a)),this.UpdateTableListView(),this.ShowToast("保存阵型成功！")}else this.ShowToast("当前选择阵型错误，无法保存！")},l.OnBtnTableResetClicked=function(){if(this.CurrentSelectTableIndex<0)this.ShowToast("当前未选择阵型！");else if(this.CurrentSelectTableIndex>=this.GenerateTableResults.length||this.CurrentSelectTableIndex>=this.GenerateTableExtData.length)this.ShowToast("数据出错！");else{var e=this.GenerateTableResults[this.CurrentSelectTableIndex],t=this.GenerateTableExtData[this.CurrentSelectTableIndex];this.GameMapLayer.Editor_InitMap(this.RowCfg,this.ColCfg,e,t)}},l.OnMahjongTypeSelectChanged=function(e,t){var a;null!=e&&(null!=(a=e.getComponent(w))&&a.isChecked&&(this.CurrentMahjongSpecialType=parseInt(t)+we.NONE,x.log("选择麻将类型:"+this.CurrentMahjongSpecialType.toString())))},t}(G)).prototype,"ToastContent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(te.prototype,"ToastItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(te.prototype,"InputRow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(te.prototype,"InputCol",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(te.prototype,"InputNumberTypeCount",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(te.prototype,"InputSingleNumberCount",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(te.prototype,"InputInitRowCount",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(te.prototype,"InputInitColCount",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(te.prototype,"InputCreateTablesCount",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(te.prototype,"TableCreatorMask",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(te.prototype,"LabelTableCreatorProgress",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(te.prototype,"InputCalcTotalCount",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(te.prototype,"TableListView",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(te.prototype,"GameMapLayer",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(te.prototype,"InputCubeTypeGenCount",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(te.prototype,"PrefabButtonCardSelect",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(te.prototype,"LayoutCardList",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=te))||ee));l._RF.pop()}}}));

System.register("chunks:///_virtual/TableGenerateWokerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Log.ts","./TableGenerateWorker.ts"],(function(e){var r,a,t,o,n,s;return{setters:[function(e){r=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){t=e.cclegacy,o=e._decorator},function(e){n=e.default},function(e){s=e.default}],execute:function(){var i,c;t._RF.push({},"a57c6LopEdANLh7GTRP/zuX","TableGenerateWokerManager",void 0);var l=o.ccclass;o.property,e("TableGenerateWokerManager",l("TableGenerateWokerManager")(((c=function(){function e(){this.workerPool=[],this.busyWorkers=new Set}var t=e.prototype;return t.initWorkerPool=function(e){var r=Math.min(navigator.hardwareConcurrency||4,e);n.log("[TableGenerateWokerManager] 正在创建 "+r+" 个 Web Workers");for(var a=0;a<r;a++){var t=new Worker(s);this.workerPool.push(t)}},t.execTask=function(e,r,a){var t=this;return new Promise((function(o,s){var i=t.getAvailableWorker();i?(i.onmessage=function(r){var a=r.data,c=a.type,l=a.taskId,u=a.success;if(e===l)switch(n.log("worker.onmessage,  takskid: "+e.toString()),c){case"RESULT":t.releaseWorker(i),u?o(r.data.data):s(r.data.error);break;case"ERROR":t.releaseWorker(i),s(r.data.error)}},i.postMessage({type:"CALCULATE",taskId:e,data:r,args:a})):s("没有可用的 Worker")}))},t.getAvailableWorker=function(){for(var e,a=r(this.workerPool);!(e=a()).done;){var t=e.value;if(!this.busyWorkers.has(t))return this.busyWorkers.add(t),t}return null},t.releaseWorker=function(e){this.busyWorkers.delete(e)},t.terminateAll=function(){n.log("[TableGenerateWokerManager] 正在终止所有 Web Workers"),this.workerPool.forEach((function(e){try{e.postMessage({type:"TERMINATE"})}catch(e){n.error("终止 Worker 时出错: "+e)}})),this.workerPool=[],this.busyWorkers.clear()},a(e,null,[{key:"Instance",get:function(){return e.instance||(e.instance=new e),e.instance}}]),e}()).instance=null,i=c))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/TableGenerateWorker.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"83d46ywLqNKF4iy2QivvTAm","TableGenerateWorker",void 0);var r=function(){function t(t){console.error(t)}function e(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}var r=function(){function t(t,e){this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t}();function n(n){for(var a=n.rowCfg,o=n.colCfg,s=n.maxCubeNum,i=n.singleNumCount,f=n.initRowCount,u=n.initColCount,l=new Map,c=1;c<=s;++c)l.set(c,i);for(var h=[],g=0;g<a;++g){for(var v=[],p=0;p<o;++p)v.push(0);h.push(v)}for(var y=f;y>0&&l.size>0;){var d=Array.from(l.keys()),m=d[e(0,d.length)],k=l.get(m),x=m,M=k-2;l.set(m,M),M<=0&&l.delete(m);for(var R=!1,b=0,C=function(){b++;for(var t=e(0,a),r=h[t],n=[],o=0;o<r.length;o++)0===r[o]&&n.push(o);if(n.length<2)return 1;var s=n[e(0,n.length)];h[t][s]=x;var i,f=n.filter((function(t){return 1===Math.abs(t-s)}));if(f.length>0)i=f[e(0,f.length)];else{var u=n.filter((function(t){return t!==s}));i=u[e(0,u.length)]}h[t][i]=x,R=!0};!R&&b<100;)C();R&&y--}for(y=u;y>0&&l.size>0;){var w=Array.from(l.keys()),A=w[e(0,w.length)],T=l.get(A),L=A,S=T-2;l.set(A,S),S<=0&&l.delete(A);for(var E=!1,I=0,N=function(){I++;for(var t=e(0,o),r=[],n=0;n<a;n++)0===h[n][t]&&r.push(n);if(r.length<2)return 1;var s=r[e(0,r.length)];h[s][t]=L;var i,f=r.filter((function(t){return 1===Math.abs(t-s)}));if(f.length>0)i=f[e(0,f.length)];else{var u=r.filter((function(t){return t!==s}));i=u[e(0,u.length)]}h[i][t]=L,E=!0};!E&&I<100;)N();E&&y--}for(var O=[],U=0;U<a;U++)for(var z=0;z<o;z++)0===h[U][z]&&O.push(new r(U,z));for(var F=function(){var t=Array.from(l.keys()),r=t[e(0,t.length)],n=r,a=l.get(r)-2;l.set(r,a),a<=0&&l.delete(r);var o=e(0,O.length),s=O[o],i=O.filter((function(t,e){return e!==o}));if(0===i.length)return 1;var f=e(0,i.length),u=i[f];h[s.x][s.y]=n,h[u.x][u.y]=n,O=i.filter((function(t,e){return e!==f}))};l.size>0&&O.length>=2&&!F(););for(var _=[],j=0;j<a;j++)for(var q=0;q<o;q++)_.push(h[j][q]);for(var G=function(e){var r=_.filter((function(t){return t===_[e]}));r.length!=i&&(t("生成阵型数据校验失败： "+_.toString()),t("生成阵型数据校验失败 i = "+e.toString()+",nums = "+r.toString()))},W=0;W<_.length;++W)G(W);return _}self.onmessage=function(t){var e=t.data,r=e.type,a=e.taskId,o=e.data,s=e.args;try{switch(r){case"CALCULATE":for(var i=[],f=o.start;f<=o.end;f++)i.push(n(s));self.postMessage({type:"RESULT",taskId:a,success:!0,data:i});break;case"TERMINATE":self.close()}}catch(t){self.postMessage({type:"ERROR",taskId:a,success:!1,error:t})}}}.toString(),n=r.substring(r.indexOf("{")+1,r.lastIndexOf("}")),a=new Blob([n],{type:"application/javascript"});t("default",URL.createObjectURL(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/tableView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,s,l,r,o,a,h,f,d,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,o=e.Vec2,a=e.CCFloat,h=e.UITransform,f=e.Size,d=e.ScrollView,u=e.Vec3}],execute:function(){var c,p,_,C,g,v,b,m,x,w,I;l._RF.push({},"3ae844dti5CC6ijA4aLdTmp","tableView",void 0);var y=r.ccclass,O=r.property,T=.1,S=new o(0,1);e("TableView",(c=y("TableView"),p=O({tooltip:"start里自动调用reload"}),_=O(a),C=O(a),g=O(a),c((m=t((b=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,n(t,"reloadOnStart",m,s(t)),n(t,"paddingTop",x,s(t)),n(t,"paddingBottom",w,s(t)),n(t,"spacingY",I,s(t)),t.delegate=void 0,t.datasource=void 0,t.transform=void 0,t.viewTransform=void 0,t.contentTransform=void 0,t._offsetY=0,t._inited=!1,t._usedCells=[],t._freeCells=[],t}i(t,e);var l=t.prototype;return l.onLoad=function(){this.transform=this.getComponent(h),this.contentTransform=this._content.getComponent(h),this.viewTransform=this._content.parent.getComponent(h)},l.start=function(){e.prototype.start.call(this),this._init()},l.dequeueCell=function(){if(this._freeCells.length>0){var e=this._freeCells.pop();if(e)return e}return null},l.dequeueCellWithIdentifier=function(e){for(var t=0;t<this._freeCells.length;++t){var i=this._freeCells[t];if(i.identifier===e)return this._freeCells.splice(t,1),i}return null},l.indexFromOffset=function(e){for(var t=this.paddingTop,i=this.datasource.tableViewNumberOfCells(this),n=0;n<i;++n)if(t+=this.delegate.tableViewCellHeightForIndex(this,n),0!=n&&(t+=this.spacingY),t>e||Math.abs(t-e)<.01)return n;return i>0?i-1:-1},l.getOffsetFromIndex=function(e){this._init();var t=this._getPositionByIndex(e);return new o(0,-t.y)},l.cellAtIndex=function(e){for(var t=0;t<this._usedCells.length;++t){var i=this._usedCells[t];if(i.index===e)return i}return null},l.scrollToIndex=function(e,t,i){var n=this.getOffsetFromIndex(e);this.scrollToOffset(n,t,i)},l.scrollToOffset=function(t,i,n){this._init(),e.prototype.scrollToOffset.call(this,t,i,n),this._onScrolling()},l.reload=function(){this.stopAutoScroll(),this._reset();for(var e=this.paddingTop,t=this.datasource.tableViewNumberOfCells(this),i=0;i<t;++i)e+=this.delegate.tableViewCellHeightForIndex(this,i),0!=i&&(e+=this.spacingY);e+=this.paddingBottom;var n=this.contentTransform.contentSize;if(this.contentTransform.contentSize=new f(n.width,e),this.reloadOnStart)for(var s=this.viewTransform.height,l=0;l<t;++l){var r=this.datasource.tableViewCellForIndex(this,l);this._insertCellAtIndex(r,l);var o=r.node.position.y;if(-o>s||Math.abs(-o-s)<.01)break}this._inited=!0},l.onEnable=function(){this.node.on(d.EventType.SCROLLING,this._onScrolling,this),e.prototype.onEnable.call(this)},l.onDisable=function(){this.node.off(d.EventType.SCROLLING,this._onScrolling,this),e.prototype.onDisable.call(this)},l._onScrolling=function(){var e=this.getScrollOffset().y;if(e<T)e=T;else{var t=this.getMaxScrollOffset().y;e>t+T&&(e=t+T)}if(!(Math.abs(this._offsetY-e)<.01)){this._offsetY=e;var i=this.indexFromOffset(e),n=this.indexFromOffset(e+this.viewTransform.height);this._removeInvisibleCells(i,n),this._updateVisibleCells(i,n),this.delegate&&this.delegate.tableViewScrolling(this)}},l._reset=function(){this._offsetY=0;for(var e=this._usedCells.length-1;e>=0;--e){var t=this._usedCells[e];this._moveCellOutOfSight(t)}},l._init=function(){this._inited||this.reload()},l._getPositionByIndex=function(e){this.contentTransform.contentSize;for(var t=new u(0,-this.paddingTop,0),i=this.datasource.tableViewNumberOfCells(this),n=Math.min(i,e),s=0;s<n;++s)t.y-=this.delegate.tableViewCellHeightForIndex(this,s),t.y-=this.spacingY;return t},l._setCellForIndex=function(e,t){e.index=t,e.node.parent=this.contentTransform.node,e.transform.anchorPoint=S,e.node.position=this._getPositionByIndex(t),e.enabled=!0},l._moveCellOutOfSight=function(e){e.enabled=!1,e.index=-1,e.node.parent=null,this._freeCells.push(e),this._usedCells=this._usedCells.filter((function(t){return t!=e}))},l._insertCellAtIndex=function(e,t){this._setCellForIndex(e,t);for(var i=this._usedCells.length-1;i>=0;--i){var n=this._usedCells[i];if(e.index>n.index)return void this._usedCells.splice(i+1,0,e)}this._usedCells.splice(0,0,e)},l._removeInvisibleCells=function(e,t){if(-1!=e)for(var i=this._usedCells.length-1;i>=0;--i){var n=this._usedCells[i];n.index<e&&this._moveCellOutOfSight(n)}if(-1!=t)for(var s=this._usedCells.length-1;s>=0;--s){var l=this._usedCells[s];l.index>t&&this._moveCellOutOfSight(l)}},l._updateVisibleCells=function(e,t){if(0!==this._usedCells.length||-1==e||-1==t){if(-1!=e)for(var i=this._usedCells[0].index-1;i>=e;--i){var n=this.datasource.tableViewCellForIndex(this,i);n&&this._insertCellAtIndex(n,i)}if(-1!=t)for(var s=this._usedCells[this._usedCells.length-1].index+1;s<=t;++s){var l=this.datasource.tableViewCellForIndex(this,s);l&&this._insertCellAtIndex(l,s)}}else for(var r=e;r<=t;++r){var o=this.datasource.tableViewCellForIndex(this,r);o&&this._insertCellAtIndex(o,r)}},t}(d)).prototype,"reloadOnStart",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=t(b.prototype,"paddingTop",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=t(b.prototype,"paddingBottom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=t(b.prototype,"spacingY",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=b))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/tableViewCell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){var t,n,i,r,o,s;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy,r=e._decorator,o=e.UITransform},function(e){s=e.GUIBase}],execute:function(){var l;i._RF.push({},"c74ff9kbllMhYYK6PTkRaX6","tableViewCell",void 0);var a=r.ccclass;r.property,e("TableViewCell",a("TableViewCell")(l=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._index=-1,t._identifier="",t._transform=null,t}return t(i,e),i.prototype.onLoad=function(){this._transform=this.getComponent(o),e.prototype.onLoad.call(this)},n(i,[{key:"index",get:function(){return this._index},set:function(e){this._index=e}},{key:"identifier",get:function(){return this._identifier},set:function(e){this._identifier=e}},{key:"transform",get:function(){return this._transform}}]),i}(s))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/TAData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DGPlatform.js","./DGJsb.js","./DGAdDefine.js","./DGDcb.js","./DGDcbDefault.js","./DGDcbDefine.js","./DGDcb_Android.js","./DGDcb_iOS.js","./DGDcb_Web.js","./DGIapDefine.js","./DGTA.js","./DGTADefault.js","./DGTA_Android.js","./DGTA_Web.js","./DGPlatformDefault.js","./DGPlatform_Android.js","./DGPlatform_Wx.js","./Defines.ts","./DataManager.ts","./Log.ts","./Utils.ts","./PlatformManager.ts","./WechatManager.ts","./ABTestUtil.ts"],(function(e){var t,n,a,i,s,o,r,l,u,_,m,d,c,h,g;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy,i=e._decorator,s=e.director,o=e.Component},null,null,null,null,null,null,null,null,null,null,function(e){r=e.DGTA},null,null,null,null,null,null,function(e){l=e.GAME_VERSION,u=e.GameDefine},function(e){_=e.default},function(e){m=e.default},function(e){d=e.default},function(e){c=e.default},function(e){h=e.default},function(e){g=e.ABTestUtil}],execute:function(){var v,p,f;a._RF.push({},"9a30bUUnqlF/5HzLoR8pgqh","TAData",void 0);var T,V=i.ccclass,y=(i.property,function(){function e(){this.isDirty=!1,this.setOnce=new w,this.set=new I,this.add=new b}var t=e.prototype;return t.setDirty=function(e){this.isDirty=e},t.upload=function(){this.isDirty&&(this.isDirty=!1,this.setOnce.upload(),this.set.upload(),this.add.upload())},e}()),w=function(){function e(){this.ab_test=new E("ab_test","x"),this.package_name=new E("package_name","wechatgame.watersort"),this.first_game_start_time=new E("first_game_start_time",""),this.channel=new E("channel",""),this.device_id=new E("device_id","")}return e.prototype.upload=function(){var e={ab_test:this.ab_test.getValue(),package_name:this.package_name.getValue(),first_game_start_time:this.first_game_start_time.getValue(),channel:this.channel.getValue(),device_id:this.device_id.getValue()},t=JSON.stringify(e);m.log("TA_Log Upload SetOnce: ",t),r.getInstance().userSetOnce(t)},e}(),I=function(){function e(){this.enter_channel=new D("enter_channel",""),this.country_code=new E("country_code",""),this.current_stage=new E("current_stage",0),this.language=new E("language",""),this.total_login=new E("total_login",0),this.total_fs_ad_time=new E("total_fs_ad_time",0),this.total_rv_ad_time=new E("total_rv_ad_time",0),this.total_rv_ad_reward_time=new E("total_rv_ad_reward_time",0),this.last_login_time=new E("last_login_time",""),this.total_plays=new E("total_plays",0),this.total_treasure=new E("total_treasure",0),this.win_num=new E("win_num",0),this.total_num=new E("total_num",0),this.total_time=new E("total_time",0),this.background_collection_num=new E("background_collection_num",0),this.background_used_num=new E("background_used_num",0),this.material_collection_num=new E("material_collection_num",0),this.material_used_num=new E("material_used_num",0),this.used_tool=new E("used_tool",0)}return e.prototype.upload=function(){var e={enter_channel:this.enter_channel.getValue(),country_code:this.country_code.getValue(),current_stage:this.current_stage.getValue(),language:this.language.getValue(),total_login:this.total_login.getValue(),total_fs_ad_time:this.total_fs_ad_time.getValue(),total_rv_ad_time:this.total_rv_ad_time.getValue(),total_rv_ad_reward_time:this.total_rv_ad_reward_time.getValue(),last_login_time:this.last_login_time.getValue(),total_plays:this.total_plays.getValue(),total_treasure:this.total_treasure.getValue(),win_num:this.win_num.getValue(),total_num:this.total_num.getValue(),total_time:this.total_time.getValue(),background_collection_num:this.background_collection_num.getValue(),background_used_num:this.background_used_num.getValue(),material_collection_num:this.material_collection_num.getValue(),material_used_num:this.material_used_num.getValue(),used_tool:this.used_tool.getValue()},t=JSON.stringify(e);m.log("TA_Log Upload Set: ",t),r.getInstance().userSet(t)},e}(),b=function(){function e(){}return e.prototype.upload=function(){},e}(),k=function(){function e(){this.enter_channel=new D("enter_channel",""),this.ab_test=new D("ab_test",""),this.ab_version=new D("ab_version",""),this.install_version=new D("install_version",""),this.cur_version=new D("cur_version",""),this.env_version=new D("env_version",""),this.wx_sdk_version=new D("wx_sdk_version",""),this.package_name=new D("package_name","wechatgame.watersort"),this.stage_id=new D("stage_id",0),this.common_id=new D("common_id",0),this.round_id=new D("round_id",0),this.challenge_id=new D("challenge_id",0),this.play_days=new D("play_days",0),this.bg_music=new D("bg_music",!1),this.sound=new D("sound",!1),this.material_id=new D("material_id",0),this.background_id=new D("background_id",0),this.material_cur_number=new D("material_cur_number",0),this.background_cur_number=new D("background_cur_number",0),this.normal_stage=new D("normal_stage",0),this.win_rate=new D("win_rate",0),this.normal_win_rate=new D("normal_win_rate",0)}return e.prototype.setSuper=function(){var e={enter_channel:this.enter_channel.getValue(),ab_test:this.ab_test.getValue(),ab_version:this.ab_version.getValue(),install_version:this.install_version.getValue(),cur_version:this.cur_version.getValue(),env_version:this.env_version.getValue(),wx_sdk_version:this.wx_sdk_version.getValue(),package_name:this.package_name.getValue(),stage_id:this.stage_id.getValue(),common_id:this.common_id.getValue(),round_id:this.round_id.getValue(),challenge_id:this.challenge_id.getValue(),play_days:this.play_days.getValue(),bg_music:this.bg_music.getValue(),sound:this.sound.getValue(),material_id:this.material_id.getValue(),background_id:this.background_id.getValue(),material_cur_number:this.material_cur_number.getValue(),background_cur_number:this.background_cur_number.getValue(),normal_stage:this.normal_stage.getValue(),win_rate:this.win_rate.getValue(),normal_win_rate:this.normal_win_rate.getValue()};m.log("TA_Log setSuper: ",e),r.getInstance().setSuperProperties(JSON.stringify(e))},e}(),C=function(){function e(e,t){if(this.m_key=void 0,this.m_value=void 0,!e)throw new Error("Key cannot be empty.");this.m_key=e,this.m_value=t}var t=e.prototype;return t.registerValue=function(e){var t=this;this.setInitValue(e.val),e.addDataChangeEvent((function(e){t.setValue(e)}))},t.setInitValue=function(e){this.m_value=e},t.setValue=function(e){this.m_value=e},t.getValue=function(){return this.m_value},e}(),E=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.setValue=function(t){e.prototype.setValue.call(this,t),A.Mgr.user.setDirty(!0)},n}(C),D=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.setValue=function(t){e.prototype.setValue.call(this,t),A.Mgr.common.setSuper()},n}(C),A=(v=V("TAData"),T=v(((f=function(e){function a(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).updateTimer=0,t.secTimer=0,t.kTargetUpdateIndex=0,t.user=new y,t.common=new k,t.isReady=!1,t}t(a,e);var i=a.prototype;return i.onLoad=function(){a.instance=this,s.addPersistRootNode(this.node)},i.launch=function(){this.init(),this.login(),this.isReady=!0,a.isNewDay()&&(this.kTargetUpdateIndex=0);var e=Date.now();a.setLaunchTime(e);var t=this;this.user.setOnce.ab_test.setValue(g.GetLocalCurABTestVer()),this.user.setOnce.package_name.setValue(c.GetPlatformPackageName()),this.user.set.country_code.setInitValue("CN"),this.user.set.current_stage.registerValue(_.Player.LevelId),this.user.set.language.setInitValue("zh-CN"),this.user.set.total_login.setInitValue(_.TA.TotalLoginTimes.val),this.user.set.total_fs_ad_time.registerValue(_.TA.TotalFsAdTimes),this.user.set.total_rv_ad_time.registerValue(_.TA.TotalRvAdWatchTimes),this.user.set.total_rv_ad_reward_time.registerValue(_.TA.TotalRvAdRewardedTimes),this.user.setOnce.first_game_start_time.setInitValue(d.GetTimeFormat(e)),this.user.set.last_login_time.setInitValue(d.GetTimeFormat(a.getLaunchTime())),this.user.set.total_plays.registerValue(_.TA.TotalNormalPlayCount),this.user.setOnce.device_id.setInitValue(r.getInstance().getDeviceId()),this.user.setOnce.channel.setInitValue(c.GetChannel()),this.user.set.total_treasure.registerValue(_.TA.TotalTreasure),this.user.set.win_num.setInitValue(_.TA.WinNormalGameCount.val),this.user.set.total_num.setInitValue(_.TA.TotalNormalPlayCount.val),this.user.set.total_time.registerValue(_.TA.TotalGameTime),this.user.set.background_collection_num.setInitValue(_.Player.ThemeList.getUnlockCount()),this.user.set.background_used_num.setInitValue(_.Player.ThemeList.getUsedCount()),_.Player.ThemeList.addDataChangeEvent((function(){t.user.set.background_collection_num.setValue(_.Player.ThemeList.getUnlockCount()),t.user.set.background_used_num.setValue(_.Player.ThemeList.getUsedCount())})),this.user.set.material_collection_num.setInitValue(_.Player.SkinList.getUnlockSize()),this.user.set.material_used_num.setInitValue(_.Player.SkinList.getUsedCount()),_.Player.SkinList.addDataChangeEvent((function(){t.user.set.material_collection_num.setValue(_.Player.SkinList.getUnlockSize()),t.user.set.material_used_num.setValue(_.Player.SkinList.getUsedCount())})),this.user.set.used_tool.registerValue(_.TA.TotalUseTools),this.common.enter_channel.registerValue(_.TA.UserEnterScene),this.common.ab_test.setValue(g.GetLocalCurABTestVer()),this.common.ab_version.setValue(l+"."+g.GetLocalCurABTestVer()),this.common.install_version.registerValue(_.User.InstallVersion),this.common.cur_version.registerValue(_.User.CurrentVersion),this.common.env_version.setValue(c.GetPlatformEnvVersion()),this.common.wx_sdk_version.setValue(h.getSDKVersion()),this.common.package_name.setValue(c.GetPlatformPackageName()),this.common.stage_id.setInitValue(this.StageId),this.common.common_id.registerValue(_.TA.TotalNormalPlayCount),this.common.round_id.registerValue(_.Player.RoundId),this.common.challenge_id.registerValue(_.TA.TotalChallengePlayCount),this.common.play_days.registerValue(_.TA.TotalLoginDays),this.common.bg_music.registerValue(_.User._soundMusic),this.common.sound.registerValue(_.User._soundEffect),this.common.material_id.registerValue(_.Player.SkinId),this.common.background_id.registerValue(_.Player.ThemeId),this.common.material_cur_number.setInitValue(_.Player.SkinList.getUnlockSize()),_.Player.SkinList.addDataChangeEvent((function(){t.common.material_cur_number.setValue(_.Player.SkinList.getUnlockSize())})),this.common.background_cur_number.setInitValue(_.Player.ThemeList.getUnlockCount()),_.Player.ThemeList.addDataChangeEvent((function(){t.common.background_cur_number.setValue(_.Player.ThemeList.getUnlockCount())}));var n=_.TA.WinNormalGameCount.val/_.TA.TotalNormalPlayCount.val;isFinite(n)||(n=0),this.common.win_rate.setInitValue(n),this.common.normal_win_rate.setInitValue(n),this.common.normal_stage.registerValue(_.TA.WinNormalGameCount);var i=function(){t.user.set.win_num.setValue(_.TA.WinNormalGameCount.val),t.user.set.total_num.setValue(_.TA.TotalNormalPlayCount.val);var e=_.TA.WinNormalGameCount.val/_.TA.TotalNormalPlayCount.val;isFinite(e)||(e=0),t.common.win_rate.setInitValue(e),t.common.normal_stage.setInitValue(_.TA.WinNormalGameCount.val),t.common.normal_win_rate.setInitValue(e),t.common.setSuper()},s=function(){t.common.stage_id.setInitValue(t.StageId),t.common.setSuper()};_.TA.WinNormalGameCount.addDataChangeEvent((function(){i()})),_.TA.TotalNormalPlayCount.addDataChangeEvent((function(){i(),s()})),_.TA.TotalChallengePlayCount.addDataChangeEvent((function(){s()})),this.user.setDirty(!0),this.common.setSuper()},i.init=function(){var e,t,n="3d195203950543468fe7d3bf61e39a28",a="https://ta-report.huoyfish.com";null==(e=(t=r.getInstance()).start)||e.call(t,n,a)},i.login=function(){var e,t,n=localStorage.getItem("TA_Account_ID");if(!n){var a=r.getInstance().getDeviceId();if(!a)return void m.log("TA_Log DeviceID is null");n=a+"@"+Date.now().toString(),localStorage.setItem("TA_Account_ID",n)}m.log("TA_Log AccountID: ",n),null==(e=(t=r.getInstance()).login)||e.call(t,n)},a.isNewDay=function(){var e=Date.now(),t=this.getLaunchTime();return!this.isSameDay(e,t)},a.isSameDay=function(e,t){var n=new Date(e),a=new Date(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()&&n.getDate()===a.getDate()},a.setLaunchTime=function(e){localStorage.setItem("TA_Launch_Time",e.toString())},a.getLaunchTime=function(){return parseFloat(localStorage.getItem("TA_Launch_Time")||"0")},i.sendEventTest=function(e,t,n,a){var i={eventName:"event_test",properties:{test_str:e,test_bool:t,test_num:n,test_date:a}};this.sendEvent(i)},i.sendEventAppLaunch=function(e){var t={eventName:"app_launch",properties:{is_first_launch:e}};this.sendEvent(t)},i.sendEventShowAd=function(e,t,n,a,i){var s={eventName:"show_ad",properties:{ad_id:e,ad_unit_id:t,ad_position:n,ad_type:a,ad_platform:i}};this.sendEvent(s)},i.sendEventCloseAd=function(e,t,n,a,i,s){var o={eventName:"close_ad",properties:{ad_id:e,ad_unit_id:t,ad_position:n,ad_type:a,ad_platform:i,is_ended:s}};this.sendEvent(o)},i.sendEventButton=function(e){var t={eventName:"button",properties:{button_id:e}};this.sendEvent(t)},i.sendEventUnlockTreasure=function(e,t){var n={eventName:"unlock_treasure",properties:{bg:e,tool:t}};this.sendEvent(n)},i.sendEventThemeChange=function(e,t,n){var a={eventName:"theme_change",properties:{theme_type:e,change_type:t,theme_id:n}};this.sendEvent(a)},i.sendEventSignIn=function(e){var t={eventName:"sign_in",properties:{sign_day:e}};this.sendEvent(t)},i.sendEventGuideComplete=function(e){var t={eventName:"guide_complete",properties:{step_id:e}};this.sendEvent(t)},i.sendEventMoreClick=function(e){var t={eventName:"more",properties:{more_id:e}};this.sendEvent(t)},i.sendNormalGameStart=function(e,t){var n=t==u.LEVEL_GUIDE?"guide":"common";this.sendEventGameStart(this.StageId,n,e,this.CommonId,t,this.ChallengeId,-1)},i.sendChallengeGameStart=function(e,t){this.sendEventGameStart(this.StageId,"challenge",e,this.CommonId,-1,this.ChallengeId,t)},i.sendEventGameStart=function(e,t,n,a,i,s,o){var r={eventName:"game_start",properties:{stage_id:e,game_mode:t,start_type:n,common_id:a,level_id:i,challenge_id:s,formation_id:o}};this.sendEvent(r)},i.sendNormalRoundStart=function(e,t){var n=e==u.LEVEL_GUIDE?"guide":"common";this.sendEventRoundStart(this.StageId,n,e,this.CommonId,t)},i.sendEventRoundStart=function(e,t,n,a,i){var s={eventName:"round_start",properties:{stage_id:e,game_mode:t,level_id:n,common_id:a,game_round:i}};this.sendEvent(s)},i.sendNormalRoundFinish=function(e,t,n,a,i,s,o,r,l,_,m,d){var c=e==u.LEVEL_GUIDE?"guide":"common";this.sendEventRoundFinish(this.StageId,this.CommonId,e,c,t,n,a,i,s,o,r,l,_,m,d)},i.sendEventRoundFinish=function(e,t,n,a,i,s,o,r,l,u,_,m,d,c,h){var g={eventName:"round_finish",properties:{stage_id:e,common_id:t,level_id:n,game_mode:a,time_cost:i,game_step:s,tool:o,unlock_bottle_prop:r,vanish_color_prop:l,step_back_prop:u,reborn_times:_,reborn_show_times:m,bottle_use:d,bottle_video:c,game_round:h}};this.sendEvent(g)},i.sendNormalGameUseProp=function(e,t,n,a,i){this.sendEventGameUseProp(this.StageId,this.CommonId,e,this.ChallengeId,-1,"common",t,n,a,i)},i.sendChallengeGameUseProp=function(e,t,n,a){this.sendEventGameUseProp(this.StageId,this.CommonId,-1,this.ChallengeId,e,"challenge",t,n,a,-1)},i.sendEventGameUseProp=function(e,t,n,a,i,s,o,r,l,u){var _={eventName:"game_use_prop",properties:{stage_id:e,common_id:t,level_id:n,game_mode:s,game_step:o,prop_id:r,prop_times:l,game_round:u,challenge_id:a,formation_id:i}};this.sendEvent(_)},i.sendNormalGameGetProp=function(e,t,n,a,i){this.sendEventGameGetProp(this.StageId,this.CommonId,e,this.ChallengeId,-1,"common",t,n,a,i)},i.sendChallengeGameGetProp=function(e,t,n,a){this.sendEventGameGetProp(this.StageId,this.CommonId,-1,this.ChallengeId,e,"challenge",t,n,a,0)},i.sendEventGameGetProp=function(e,t,n,a,i,s,o,r,l,u){var _={eventName:"game_get_prop",properties:{stage_id:e,common_id:t,level_id:n,challenge_id:a,formation_id:i,game_mode:s,game_step:o,prop_id:r,prop_buy:l,game_round:u}};this.sendEvent(_)},i.sendNormalGameAd=function(e,t,n,a){this.sendEventGameAd(this.StageId,this.CommonId,e,this.ChallengeId,-1,"common",t,"rewardvideo",n,"wechat",a)},i.sendChallengeGameAd=function(e,t,n){this.sendEventGameAd(this.StageId,this.CommonId,-1,this.ChallengeId,e,"challenge",t,"rewardvideo",n,"wechat",0)},i.sendEventGameAd=function(e,t,n,a,i,s,o,r,l,u,_){var m={eventName:"game_ad",properties:{stage_id:e,common_id:t,level_id:n,challenge_id:a,formation_id:i,game_mode:s,game_step:o,ad_type:r,ad_position:l,ad_platform:u,game_round:_}};this.sendEvent(m)},i.sendNormalGameFinish=function(e,t,n,a,i,s,o,r,l,_,m,d,c){var h=e==u.LEVEL_GUIDE?"guide":"common";this.sendEventGameFinish(this.StageId,this.CommonId,e,this.ChallengeId,-1,h,t,n,a,i,s,o,r,l,_,m,d,c)},i.sendChallengeGameFinish=function(e,t,n,a,i,s,o,r,l,u,_,m){this.sendEventGameFinish(this.StageId,this.CommonId,-1,this.ChallengeId,e,"challenge",t,n,a,i,s,o,0,r,l,u,_,m)},i.sendEventGameFinish=function(e,t,n,a,i,s,o,r,l,u,_,m,d,c,h,g,v,p){var f={eventName:"game_finish",properties:{stage_id:e,common_id:t,level_id:n,challenge_id:a,formation_id:i,game_mode:s,is_clear:o,time_cost:r,game_step:l,tool:u,reborn_times:_,reborn_show_times:m,game_round:d,bottle_use:c,bottle_video:h,unlock_bottle_prop:g,vanish_color_prop:v,step_back_prop:p}};this.sendEvent(f)},i.sendEventChallengeReward=function(e,t){var n={eventName:"challenge_reward",properties:{reward_id:e,month_id:t}};this.sendEvent(n)},i.SendEventLoginShare=function(e){var t={eventName:"login_share",properties:{login_days:e}};this.sendEvent(t)},i.sendEvent=function(e){var t=JSON.stringify(e.properties);m.log("TA_Log SendEvent: ",t),this.isReady?r.getInstance().track(e.eventName,t):m.warn("TA_Log TDAnalytics Not Ready")},i.update=function(e){this.updateTimer+=e,this.updateTimer>=1&&(this.updateTimer=0,this.onUpdateTime())},i.onUpdateTime=function(){this.secTimer++,this.kTargetUpdateIndex<a.kTargetUpdateSize&&this.secTimer>=a.kTargetUpdateTime[this.kTargetUpdateIndex]&&(this.secTimer=0,this.user.upload(),this.kTargetUpdateIndex<a.kTargetUpdateSize-1&&this.kTargetUpdateIndex++)},n(a,[{key:"StageId",get:function(){return _.TA.TotalNormalPlayCount.val+_.TA.TotalChallengePlayCount.val}},{key:"CommonId",get:function(){return _.TA.TotalNormalPlayCount.val}},{key:"ChallengeId",get:function(){return _.TA.TotalChallengePlayCount.val}}],[{key:"Mgr",get:function(){return a.instance}}]),a}(o)).instance=void 0,f.kTargetUpdateSize=4,f.kTargetUpdateTime=[3,120,180,300],p=f))||p,e({TAData:T,default:T}),T);a._RF.pop()}}}));

System.register("chunks:///_virtual/TASaveData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlatformManager.ts","./SaveData.ts"],(function(a){var t,e,n,o,i,s,l;return{setters:[function(a){t=a.inheritsLoose},function(a){e=a.cclegacy},function(a){n=a.default},function(a){o=a.SaveDataInt,i=a.SaveDataFloat,s=a.SaveDataStr,l=a.SaveData}],execute:function(){e._RF.push({},"f2352KhfF5Gs73hLezMi5s4","TASaveData",void 0);a("TASaveData",function(a){function e(){var t;return(t=a.call(this)||this).TotalNormalPlayCount=t.createData(o,"totalPlayCount","0"),t.TotalChallengePlayCount=t.createData(o,"TotalChallengePlayCount","0"),t.LastLoginTime=t.createData(i,"lastLoginTime","0"),t.TotalLoginDays=t.createData(o,"totalLoginDays","0"),t.TotalLoginTimes=t.createData(o,"totalLoginTimes","0"),t.TotalFsAdTimes=t.createData(o,"totalFsAdTimes","0"),t.TotalRvAdWatchTimes=t.createData(o,"totalRvAdWatchTimes","0"),t.TotalRvAdRewardedTimes=t.createData(o,"totalRvAdRewardedTimes","0"),t.TotalTreasure=t.createData(o,"totalTreasure","0"),t.WinNormalGameCount=t.createData(o,"winGameCount","0"),t.ChallengeGameCount=t.createData(o,"ChallengeGameCount","0"),t.TotalGameTime=t.createData(o,"totalGameTime","0"),t.TotalUseTools=t.createData(o,"totalUseTools","0"),t.UserEnterScene=t.createData(s,"UserEnterScene",""),t.load(),t}t(e,a);var l=e.prototype;return l.initData=function(){this.isNewDay()&&(this.TotalLoginDays.val+=1),this.TotalLoginTimes.val+=1,this.LastLoginTime.val=Date.now(),""==this.UserEnterScene.val&&(this.UserEnterScene.val=n.GetUserEnterScene().toString()),this.save()},l.isNewDay=function(){var a=Date.now(),t=this.LastLoginTime.val;return!this.isSameDay(a,t)},l.isSameDay=function(a,t){var e=new Date(a),n=new Date(t);return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()},l.saveData=function(){this.save()},e}(l));e._RF.pop()}}}));

System.register("chunks:///_virtual/tdanalytics.mg.cocoscreator.min.js",["./cjs-loader.mjs"],(function(e,t){var i;return{setters:[function(e){i=e.default}],execute:function(){e("default",void 0);var n=e("__cjsMetaURL",t.meta.url);i.define(n,(function(t,i,n,a,s){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}var l="3.0.4.2",h="MG",p={},d=Array.prototype,f=Object.prototype,g=d.slice,m=f.toString,v=Object.prototype.hasOwnProperty,y=d.forEach,_=Array.isArray,k={},S=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];p.each=function(e,t,i){if(null==e)return!1;if(y&&e.forEach===y)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,a=e.length;n<a;n++)if(n in e&&t.call(i,e[n],n,e)===k)return!1}else for(var s in e)if(v.call(e,s)&&t.call(i,e[s],s,e)===k)return!1},p.extend=function(e){return p.each(g.call(arguments,1),(function(t){for(var i in t)void 0!==t[i]&&(e[i]=t[i])})),e},p.extend2Layers=function(e){return p.each(g.call(arguments,1),(function(t){for(var i in t)void 0!==t[i]&&(p.isObject(t[i])&&p.isObject(e[i])?p.extend(e[i],t[i]):e[i]=t[i])})),e},p.isArray=_||function(e){return"[object Array]"===m.call(e)},p.isFunction=function(e){try{return"function"==typeof e}catch(e){return!1}},p.isPromise=function(e){return"[object Promise]"===m.call(e)&&null!=e},p.isObject=function(e){return"[object Object]"===m.call(e)&&null!=e},p.isEmptyObject=function(e){if(p.isObject(e)){for(var t in e)if(v.call(e,t))return!1;return!0}return!1},p.isUndefined=function(e){return void 0===e},p.isString=function(e){return"[object String]"===m.call(e)},p.isDate=function(e){return"[object Date]"===m.call(e)},p.isBoolean=function(e){return"[object Boolean]"===m.call(e)},p.isNumber=function(e){return"[object Number]"===m.call(e)&&/[\d\.]+/.test(String(e))},p.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},p.decodeURIComponent=function(e){var t="";try{t=decodeURIComponent(e)}catch(i){t=e}return t},p.encodeURIComponent=function(e){var t="";try{t=encodeURIComponent(e)}catch(i){t=e}return t},p.utf8Encode=function(e){for(var t,i="",n=t=0,a=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,s=0;s<a;s++){var r=e.charCodeAt(s),o=null;r<128?t++:o=127<r&&r<2048?String.fromCharCode(r>>6|192,63&r|128):String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128),null!==o&&(n<t&&(i+=e.substring(n,t)),i+=o,n=t=s+1)}return n<t&&(i+=e.substring(n,e.length)),i},p.base64Encode=function(e){var t,i,n,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=0,o=0,c="",u=[];if(!e)return e;for(e=p.utf8Encode(e);t=(a=e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<8|e.charCodeAt(r++))>>18&63,i=a>>12&63,n=a>>6&63,a&=63,u[o++]=s.charAt(t)+s.charAt(i)+s.charAt(n)+s.charAt(a),r<e.length;);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c},p.encodeDates=function(e){return p.each(e,(function(t,i){if(p.isDate(t))e[i]=p.formatDate(t);else if(p.isObject(t))e[i]=p.encodeDates(t);else if(p.isArray(t))for(var n=0;n<t.length;n++)p.isDate(t[n])&&(e[i][n]=p.formatDate(t[n]))})),e},p.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+((i=e.getMilliseconds())<100&&9<i?"0"+i:i<10?"00"+i:i);var i},p.formatTimeZone=function(e,t){if("number"!=typeof t)return e;var i=e.getTime();e=6e4*e.getTimezoneOffset();return new Date(i+e+36e5*t)},p.getTimeZone=function(e,t){return"number"==typeof t?t:0-e.getTimezoneOffset()/60},p.searchObjDate=function(e,t){try{(p.isObject(e)||p.isArray(e))&&p.each(e,(function(i,n){p.isObject(i)||p.isArray(i)?p.searchObjDate(e[n],t):p.isDate(i)&&(e[n]=p.formatDate(p.formatTimeZone(i,t)))}))}catch(e){b.warn(e)}},p.UUID=function(){var e=(new Date).getTime();return String(Math.random()).replace(".","").slice(1,11)+"-"+e},p.UUIDv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},p.setMpPlatform=function(e){p.mpPlatform=e},p.getMpPlatform=function(){return p.mpPlatform},p.createExtraHeaders=function(){return{"TA-Integration-Type":h,"TA-Integration-Version":l,"TA-Integration-Count":"1","TA-Integration-Extra":p.getMpPlatform()}},p.checkAppId=function(e){return e.replace(/\s*/g,"")},p.checkUrl=function(e){return e=e.replace(/\s*/g,""),p.url("basic",e)},p.url=function(){function e(){return new RegExp(/(.*?)\.?([^.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function t(e,t){var i=e.charAt(0);t=t.split(i);return i===e?t:t[(e=parseInt(e.substring(1),10))<0?t.length+e:e-1]}function i(e,t){for(var i,n,a=e.charAt(0),s=t.split("&"),r=[],o={},c=e.substring(1),u=0,l=s.length;u<l;u++)if(""!==(r=(r=s[u].match(/(.*?)=(.*)/))||[s[u],s[u],""])[1].replace(/\s/g,"")){if(r[2]=(n=r[2]||"",p.decodeURIComponent(n.replace(/\+/g," "))),c===r[1])return r[2];(i=r[1].match(/(.*)\[([0-9]+)\]/))?(o[i[1]]=o[i[1]]||[],o[i[1]][i[2]]=r[2]):o[r[1]]=r[2]}return a===e?o:o[c]}return function(n,a){var s={};if("tld?"===n)return e();if(a=a||window.location.toString(),!n)return a;if(n=n.toString(),a.match(/^mailto:([^/].+)/))r=a.match(/^mailto:([^/].+)/),s.protocol="mailto",s.email=r[1];else{if(a.match(/(.*?)\/#!(.*)/)&&(a=(r=a.match(/(.*?)\/#!(.*)/))[1]+r[2]),a.match(/(.*?)#(.*)/)&&(r=a.match(/(.*?)#(.*)/),s.hash=r[2],a=r[1]),s.hash&&n.match(/^#/))return i(n,s.hash);if(a.match(/(.*?)\?(.*)/)&&(r=a.match(/(.*?)\?(.*)/),s.query=r[2],a=r[1]),s.query&&n.match(/^\?/))return i(n,s.query);if(a.match(/(.*?):?\/\/(.*)/)&&(r=a.match(/(.*?):?\/\/(.*)/),s.protocol=r[1].toLowerCase(),a=r[2]),a.match(/(.*?)(\/.*)/)&&(r=a.match(/(.*?)(\/.*)/),s.path=r[2],a=r[1]),s.path=(s.path||"").replace(/^([^/])/,"/$1").replace(/\/$/,""),n.match(/^[-0-9]+$/)&&(n=n.replace(/^([^/])/,"/$1")),n.match(/^\//))return t(n,s.path.substring(1));if((r=(r=t("/-1",s.path.substring(1)))&&r.match(/(.*?)\.(.*)/))&&(s.file=r[0],s.filename=r[1],s.fileext=r[2]),a.match(/(.*):([0-9]+)$/)&&(r=a.match(/(.*):([0-9]+)$/),s.port=r[2],a=r[1]),a.match(/(.*?)@(.*)/)&&(r=a.match(/(.*?)@(.*)/),s.auth=r[1],a=r[2]),s.auth&&(r=s.auth.match(/(.*):(.*)/),s.user=r?r[1]:s.auth,s.pass=r?r[2]:void 0),s.hostname=a.toLowerCase(),"."===n.charAt(0))return t(n,s.hostname);e()&&(r=s.hostname.match(e()))&&(s.tld=r[3],s.domain=r[2]?r[2]+"."+r[3]:void 0,s.sub=r[1]||void 0);var r=s.port?":"+s.port:"";s.protocol=s.protocol||window.location.protocol.replace(":",""),s.port=s.port||("https"===s.protocol?"443":"80"),s.protocol=s.protocol||("443"===s.port?"https":"http"),s.basic=s.protocol+"://"+s.hostname+r}return n in s?s[n]:"{}"===n?s:""}}(),p.createString=function(e){for(var t=e,i=Math.random().toString(36).substr(2);i.length<t;)i+=Math.random().toString(36).substr(2);return i.substr(0,e)},p.createAesKey=function(){return p.createString(16)},p.generateEncryptyData=function(e,t){if(void 0===t)return e;var i=t.publicKey,n=t.version;if(void 0===i||void 0===n)return e;if("undefined"==typeof CryptoJS||"undefined"==typeof JSEncrypt)return e;var a=p.createAesKey();try{var s=CryptoJS.enc.Utf8.parse(a),r=CryptoJS.enc.Utf8.parse(JSON.stringify(e)),o=p.isUndefined(CryptoJS.pad.Pkcs7)?CryptoJS.pad.PKCS7:CryptoJS.pad.Pkcs7;s=CryptoJS.AES.encrypt(r,s,{mode:CryptoJS.mode.ECB,padding:o}).toString();return(o=new JSEncrypt).setPublicKey(i),!1===(o=o.encrypt(a))?(b.warn("Encryption failed, return the original data"),e):{pkv:n,ekey:o,payload:s}}catch(e){b.warn("Encryption failed, return the original data: "+e)}return e},p.getUtm=function(){var e={};return p.each(S,(function(t){try{var i=p.getQueryParam(location.href,t);i.length&&(e[t]=i)}catch(t){b.warn("get utm fail: "+t)}})),JSON.stringify(e)},p.getQueryParam=function(e,t){return t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=p.decodeURIComponent(e),null===(e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e))||e&&"string"!=typeof e[1]&&e[1].length?"":p.decodeURIComponent(e[1])},p.getUtmFromQuery=function(e){var t={};return p.each(S,(function(i){e[i]&&(t[i]=e[i])})),JSON.stringify(t)},p.indexOf=function(e,t){var i=e.indexOf;if(i)return i.call(e,t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},p.checkCalibration=function(e,t,i){return e};var b="object"===r(b)?b:{};b.info=function(){if("object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&b.enabled)try{return arguments[0]="[ThinkingData] Info: "+arguments[0],console.log.apply(console,arguments)}catch(e){console.log("[ThinkingData] Info: "+arguments[0])}},b.warn=function(){if("object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&b.enabled)try{return arguments[0]="[ThinkingData] Warning: "+arguments[0],console.warn.apply(console,arguments)}catch(e){console.warn("[ThinkingData] Warning: "+arguments[0])}};var I=function(){function e(){o(this,e),this.config={persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_mg"}}return u(e,[{key:"initSdkConfig",value:function(e){this.initConfig=e}},{key:"getConfig",value:function(){return this.config}},{key:"getStorage",value:function(e,t,i){if(e=localStorage.getItem(e),!t)return p.isJSONString(e)?JSON.parse(e):{};p.isJSONString(e)?i(JSON.parse(e)):i({})}},{key:"setStorage",value:function(e,t){localStorage.setItem(e,t)}},{key:"removeStorage",value:function(e){localStorage.removeItem(e)}},{key:"_setSystemProxy",value:function(e){this._sysCallback=e}},{key:"getSystemInfo",value:function(e){var t={mp_platform:"web",system:this._getOs(),screenWidth:window.screen.width,screenHeight:window.screen.height,systemLanguage:navigator.language};this._sysCallback&&(t=p.extend(t,this._sysCallback(e))),e.success(t),e.complete()}},{key:"_getOs",value:function(){var e=navigator.userAgent;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"MacOS":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"ChromeOS":""}},{key:"getNetworkType",value:function(e){e.complete()}},{key:"onNetworkStatusChange",value:function(){}},{key:"request",value:function(e){var t={},i=new XMLHttpRequest;if(i.open(e.method,e.url),e.header)for(var n in e.header)i.setRequestHeader(n,e.header[n]);return i.onreadystatechange=function(){4===i.readyState&&200===i.status?(t.statusCode=200,p.isJSONString(i.responseText)&&(t.data=JSON.parse(i.responseText)),e.success(t)):200!==i.status&&(t.errMsg="network error",e.fail(t))},i.ontimeout=function(){t.errMsg="timeout",e.fail(t)},i.send(e.data),i}},{key:"initAutoTrackInstance",value:function(e,t){this.instance=e,this.autoTrack=t.autoTrack;var i=this;i.onPageShow(),i.autoTrack.appHide&&i.instance.timeEvent("ta_page_hide"),"onvisibilitychange"in document&&(document.onvisibilitychange=function(){document.hidden?i.onPageHide(!0):(i.onPageShow(),i.autoTrack.appHide&&i.instance.timeEvent("ta_page_hide"))})}},{key:"setGlobal",value:function(e,t){window[t]=e}},{key:"getAppOptions",value:function(){}},{key:"showToast",value:function(){}},{key:"onPageShow",value:function(){var e;this.autoTrack.appShow&&(e={},p.extend(e,this.autoTrack.properties),p.isFunction(this.autoTrack.callback)&&p.extend(e,this.autoTrack.callback("appShow")),this.instance._internalTrack("ta_page_show",e))}},{key:"onPageHide",value:function(e){var t;this.autoTrack.appHide&&(t={},p.extend(t,this.autoTrack.properties),p.isFunction(this.autoTrack.callback)&&p.extend(t,this.autoTrack.callback("appHide")),this.instance._internalTrack("ta_page_hide",t,new Date,null,e))}}],[{key:"createInstance",value:function(){return new e}}]),e}(),P=function(){function e(t,i){o(this,e),this.taInstance=t,this.config=i||{},this.referrer="Directly open",this.config.isPlugin?(t.App=function(){App.apply(this,arguments)},inension(t.Page)):(t=App,App=this._initAppExtention(t),t=Page,Page=this._initPageExtension(t))}return u(e,[{key:"_initPageExtension",value:function(e){var t=this;return function(i){var n=i.onShow,a=i.onShareAppMessage;return i.onShow=function(e){t.onPageShow(),"function"==typeof n&&n.call(this,e)},"function"==typeof a&&(i.onShareAppMessage=function(e){return e=a.call(this,e),t.onPageShare(e)}),e(i)}}},{key:"_initAppExtention",value:function(e){var t=this;return function(i){var n=i.onLaunch,a=i.onShow,s=i.onHide;return i.onLaunch=function(e){t.onAppLaunch(e,this),"function"==typeof n&&n.call(this,e)},i.onShow=function(e){t.onAppShow(e),"function"==typeof a&&a.call(this,e)},i.onHide=function(){t.onAppHide(),"function"==typeof s&&s.call(this)},e(i)}}},{key:"onAppLaunch",value:function(e,t){this._setAutoTrackProperties(e),p.isUndefined(t)||(t[this.taInstance.name]=this.taInstance),this.config.appLaunch&&(t={},e&&e.path&&(t["#url_path"]=this._getPath(e.path)),e&&e.query&&(t["#utm"]=p.getUtmFromQuery(e.query)),this.taInstance._internalTrack("ta_mp_launch",t))}},{key:"onAppShow",value:function(e){var t;this.config.appHide&&this.taInstance.timeEvent("ta_mp_hide"),this._setAutoTrackProperties(e),this.config.appShow&&(t={},e&&e.path&&(t["#url_path"]=this._getPath(e.path)),e&&e.query&&(t["#utm"]=p.getUtmFromQuery(e.query)),p.extend(t,this.config.properties),p.isFunction(this.config.callback)&&p.extend(t,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mp_show",t))}},{key:"onAppHide",value:function(){var e;this.config.appHide&&(e={"#url_path":this._getCurrentPath()},p.extend(e,this.config.properties),p.isFunction(this.config.callback)&&p.extend(e,this.config.callback("appHide")),this.taInstance._internalTrack("ta_mp_hide",e),this.taInstance.flush())}},{key:"_getCurrentPath",value:function(){var e="Not to get";try{var t=getCurrentPages();e=t[t.length-1].route}catch(e){b.info(e)}return e}},{key:"_setAutoTrackProperties",value:function(e){e={"#scene":e.scene},this.taInstance._setAutoTrackProperties(e)}},{key:"_getPath",value:function(e){return"string"==typeof e?e.replace(/^\//,""):"Abnormal values"}},{key:"onPageShare",value:function(e){return this.config.pageShare&&this.taInstance._internalTrack("ta_mp_share",{"#url_path":this._getCurrentPath()}),p.isObject(e)?e:{}}},{key:"onPageShow",value:function(){var e,t;this.config.pageShow&&(t={"#url_path":(e=this._getCurrentPath())||"The system did not get a value","#referrer":this.referrer},this.referrer=e,this.taInstance._internalTrack("ta_mp_view",t))}}]),e}(),A=function(){function e(t,i,n){var a=this;o(this,e),this.taInstance=t,this.config=i||{},i=n.getLaunchOptionsSync(),this._onLaunch(i),this._onShow(i),this.startTracked=!0,n.onShow((function(e){a._onShow(e)})),n.onHide((function(){var e;a.startTracked=!1,a.config.appHide&&(e={},p.extend(e,a.config.properties),p.isFunction(a.config.callback)&&p.extend(e,a.config.callback("appHide")),a.taInstance._internalTrack("ta_mg_hide",e),a.taInstance.flush())}))}return u(e,[{key:"_onLaunch",value:function(){var e;this.config.appLaunch&&(e={},p.extend(e,this.config.properties),p.isFunction(this.config.callback)&&p.extend(e,this.config.callback("appLaunch")),this.taInstance._internalTrack("ta_mg_launch",e))}},{key:"_onShow",value:function(e){this.startTracked||(this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),e&&e.scene&&this.taInstance._setAutoTrackProperties({"#scene":e.scene}),this.config.appShow&&(e={},p.extend(e,this.config.properties),p.isFunction(this.config.callback)&&p.extend(e,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mg_show",e)))}}]),e}(),C=function(){function e(t,i,n){o(this,e),this.api=t,this.config=i,this._config=n}return u(e,[{key:"initSdkConfig",value:function(){}},{key:"getConfig",value:function(){return this.config}},{key:"getStorage",value:function(e,t,i){if(t)this.api.getStorage({key:e,success:function(e){e=p.isJSONString(e.data)?JSON.parse(e.data):{},i(e)},fail:function(){b.warn("getStorage faild"),i({})}});else try{if("dd_mp"===this._config.platform||"ali_mp"===this._config.platform||"ali_mg"===this._config.platform){var n=this.api.getStorageSync({key:e});return p.isJSONString(n.data)?JSON.parse(n.data):{}}return n=this.api.getStorageSync(e),p.isJSONString(n)?JSON.parse(n):{}}catch(e){return{}}}},{key:"setStorage",value:function(e,t){try{"ali_mp"===this._config.platform||"tb_mp"===this._config.platform||"dd_mp"===this._config.platform||"ali_mg"===this._config.platform?this.api.setStorageSync({key:e,data:t}):this.api.setStorageSync(e,t)}catch(e){}}},{key:"removeStorage",value:function(e){try{p.isFunction(this.api.removeStorage)?this.api.removeStorage({key:e}):p.isFunction(this.api.deleteStorage)&&this.api.deleteStorage({key:e})}catch(e){}}},{key:"_getPlatform",value:function(){return""}},{key:"getSystemInfo",value:function(e){var t=this._config.mpPlatform,i=this;this.api.getSystemInfo({success:function(n){p.isFunction(t)?n.mp_platform=t(n):n.mp_platform=t,"ali_mp"!==i._config.platform&&"ali_mg"!==i._config.platform||(n.system=n.platform+" "+n.system),e.success(n),"wechat"===t&&e.complete()},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){p.isFunction(this.api.getNetworkType)?this.api.getNetworkType({success:function(t){e.success(t)},complete:function(){e.complete()}}):(e.success({}),e.complete())}},{key:"onNetworkStatusChange",value:function(e){p.isFunction(this.api.onNetworkStatusChange)?this.api.onNetworkStatusChange(e):e({})}},{key:"request",value:function(e){if("ali_mp"!==this._config.platform&&"dd_mp"!==this._config.platform&&"ali_mg"!==this._config.platform)return this.api.request(e);var t=p.extend({},e);return t.headers=e.header,t.header=void 0,t.success=function(t){t.statusCode=t.status,e.success(t)},t.fail=function(t){t.errMsg=t.errorMessage,e.fail(t)},"dd_mp"===this._config.platform?this.api.httpRequest(t):this.api.request(t)}},{key:"initAutoTrackInstance",value:function(e,t){return p.isObject(t.autoTrack)&&(t.autoTrack.isPlugin=t.is_plugin),new(this._config.mp?P:A)(e,t.autoTrack,this.api)}},{key:"setGlobal",value:function(e,t){this._config.mp?b.warn("ThinkingAnalytics: we do not set global name for TA instance when you do not enable auto track."):"ali_mg"!==this._config.platform&&(GameGlobal[t]=e)}},{key:"getAppOptions",value:function(e){var t={};try{t=this.api.getLaunchOptionsSync()}catch(e){b.warn("Cannot get launch options.")}if(p.isFunction(e))try{this._config.mp?this.api.onAppShow(e):this.api.onShow(e)}catch(e){b.warn("Cannot register onShow callback.")}return t}},{key:"showToast",value:function(e){var t;p.isFunction(this.api.showToast)&&(t={title:e},"dd_mp"!==this._config.platform&&"ali_mp"!==this._config.platform||(t.content=e),this.api.showToast(t))}}],[{key:"createInstance",value:function(){return this._createInstance("R_CURRENT_PLATFORM")}},{key:"_createInstance",value:function(t){switch(t){case"wechat_mp":return new e(wx,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_wechat",plat:"wx"},{mpPlatform:"wechat",mp:!0,platform:t});case"wechat_mg":return new e(wx,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_wechat_game",plat:"wx"},{mpPlatform:"wechat",platform:t});case"qq_mp":return new e(qq,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qq"},{mpPlatform:"qq",mp:!0,platform:t});case"qq_mg":return new e(qq,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qq_game"},{mpPlatform:"qq",platform:t});case"baidu_mp":return new e(swan,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_swan"},{mpPlatform:function(e){return e.host},mp:!0,platform:t});case"baidu_mg":return new e(swan,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_swan_game"},{mpPlatform:function(e){return e.host},platform:t});case"tt_mg":return new e(tt,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tt_game"},{mpPlatform:function(e){return e.appName},platform:t});case"tt_mp":return new e(tt,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tt"},{mpPlatform:function(e){return e.appName},mp:!0,platform:t});case"ali_mp":return new e(my,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_ali"},{mpPlatform:function(e){return e.app},mp:!0,platform:t});case"ali_mg":return new e(my,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_ali_game"},{mpPlatform:function(e){return e.app},platform:t});case"dd_mp":return new e(dd,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_dd"},{mpPlatform:"dingding",mp:!0,platform:t});case"bl_mg":return new e(bl,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_mg"},{mpPlatform:"bilibili",platform:t});case"kuaishou_mp":return new e(ks,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_kuaishou"},{mpPlatform:"kuaishou",mp:!0,platform:t});case"kuaishou_mg":return new e(ks,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_kuaishou"},{mpPlatform:"kuaishou",platform:t});case"qh360_mg":return new e(qh,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qh360"},{mpPlatform:"qh360",platform:t});case"tb_mp":return new e(my,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tb"},{mpPlatform:"tb",mp:!0,platform:t});case"jd_mp":return new e(jd,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_jd"},{mpPlatform:"jd",mp:!0,platform:t});case"qh360_mp":return new e(qh,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qh360"},{mpPlatform:"qh360",mp:!0,platform:t});case"WEB":return new I.createInstance}}}]),e}(),N=function e(t,i){var n=this;o(this,e),this.taInstance=t,this.config=i||{},this.config.appShow&&this.taInstance._internalTrack("ta_mg_show"),this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),qg.onShow((function(){var e;n.config.appHide&&n.taInstance.timeEvent("ta_mg_hide"),n.config.appShow&&(e={},p.extend(e,n.config.properties),p.isFunction(n.config.callback)&&p.extend(e,n.config.callback("appShow")),n.taInstance._internalTrack("ta_mg_show"))})),qg.onHide((function(){var e;n.config.appHide&&(e={},p.extend(e,n.config.properties),p.isFunction(n.config.callback)&&p.extend(e,n.config.callback("appHide")),n.taInstance._internalTrack("ta_mg_hide"))}))},w=function(){function e(){o(this,e),this.config={persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_vivo_game",asyncPersistence:!0}}return u(e,[{key:"initSdkConfig",value:function(e){this.initConfig=e}},{key:"getConfig",value:function(){return this.config||{}}},{key:"getStorage",value:function(e,t,i){if(!t)return t=qg.getStorageSync({key:e}),p.isJSONString(t)?JSON.parse(t):{};qg.getStorage({key:e,success:function(e){e=p.isJSONString(e)?JSON.parse(e):{},i(e)},fail:function(){i({})}})}},{key:"setStorage",value:function(e,t){qg.setStorage({key:e,value:t})}},{key:"removeStorage",value:function(e){qg.deleteStorage({key:e})}},{key:"getSystemInfo",value:function(e){qg.getSystemInfo({success:function(t){var i=t,n=[t.osType,t.osVersionName].join(" ");i.brand=t.manufacturer,i.system=n,i.mp_platform="vivo_qg",e.success(i)},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){qg.getNetworkType({success:function(t){var i=t;i.networkType=t.type,e.success(i)},complete:function(){e.complete()}})}},{key:"onNetworkStatusChange",value:function(e){qg.subscribeNetworkStatus({callback:function(t){var i=t;i.networkType=t.type,e(i)}})}},{key:"request",value:function(e){return qg.request({url:e.url,data:e.data,method:e.method,header:e.header,success:function(t){e.success(t)},fail:function(t){e.fail(t)}})}},{key:"initAutoTrackInstance",value:function(e,t){return new N(e,t.autoTrack)}},{key:"setGlobal",value:function(e,t){globalThis[t]=e}},{key:"getAppOptions",value:function(){return{}}},{key:"showToast",value:function(e){qg.showToast({message:e,duration:0})}}],[{key:"createInstance",value:function(){return new e}}]),e}(),T=function e(t,i,n){var a=this;o(this,e),this.taInstance=t,this.config=i||{},this.config.appShow&&(i={},p.extend(i,this.config.properties),p.isFunction(this.config.callback)&&p.extend(i,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mg_show",i)),this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),n.onShow((function(){var e;a.config.appHide&&a.taInstance.timeEvent("ta_mg_hide"),a.config.appShow&&(e={},p.extend(e,a.config.properties),p.isFunction(a.config.callback)&&p.extend(e,a.config.callback("appShow")),a.taInstance._internalTrack("ta_mg_show",e))})),n.onHide((function(){var e;a.config.appHide&&(e={},p.extend(e,a.config.properties),p.isFunction(a.config.callback)&&p.extend(e,a.config.callback("appHide")),a.taInstance._internalTrack("ta_mg_hide",e))}))},O=function(){function e(t,i,n){o(this,e),this.api=t,this.config=i,this._config=n}return u(e,[{key:"initSdkConfig",value:function(e){this.initConfig=e}},{key:"getConfig",value:function(){return this.config||{}}},{key:"getStorage",value:function(e,t,i){if(e=localStorage.getItem(e),!t)return p.isJSONString(e)?JSON.parse(e):{};p.isJSONString(e)?i(JSON.parse(e)):i({})}},{key:"setStorage",value:function(e,t){localStorage.setItem(e,t)}},{key:"removeStorage",value:function(e){localStorage.removeItem(e)}},{key:"getSystemInfo",value:function(e){var t=this._config.mpPlatform;this.api.getSystemInfo({success:function(i){i.mp_platform=t,e.success(i)},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){this.api.getNetworkType({success:function(t){e.success(t)},complete:function(){e.complete()}})}},{key:"onNetworkStatusChange",value:function(e){this.api.onNetworkStatusChange({callback:function(t){e(t)}})}},{key:"request",value:function(e){var t={},i=new XMLHttpRequest;if(i.open(e.method,e.url),e.header)for(var n in e.header)i.setRequestHeader(n,e.header[n]);return i.onreadystatechange=function(){4===i.readyState&&200===i.status?(t.statusCode=200,p.isJSONString(i.responseText)&&(t.data=JSON.parse(i.responseText)),e.success(t)):200!==i.status&&(t.errMsg="network error",e.fail(t))},i.ontimeout=function(){t.errMsg="timeout",e.fail(t)},i.send(e.data),i}},{key:"initAutoTrackInstance",value:function(e,t){return new T(e,t.autoTrack,this.api)}},{key:"setGlobal",value:function(e,t){globalThis[t]=e}},{key:"getAppOptions",value:function(){return this.api.getLaunchOptionsSync()}},{key:"showToast",value:function(e){this.api.showToast({title:e,icon:"none",duration:2e3})}}],[{key:"createInstance",value:function(){return this._createInstance("R_CURRENT_PLATFORM")}},{key:"_createInstance",value:function(t){switch(t){case"oppo":return new e(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_oppo_game"},{mpPlatform:"oppo_qg"});case"huawei":return new e(hbs,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_huawei_game"},{mpPlatform:"huawei_qg"});case"mz":return new e(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_mz_game"},{mpPlatform:"mz"});case"xiaomi":return new e(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg"},{mpPlatform:"xiaomi"})}}}]),e}(),D=function(){function e(){o(this,e)}return u(e,null,[{key:"createInstance",value:function(){var e=Object.freeze({WECHAT_GAME:104,QQ_PLAY:105,BAIDU_GAME:107,VIVO_GAME:108,OPPO_GAME:109,HUAWEI_GAME:110,XIAOMI_GAME:111,BYTEDANCE_GAME:117,QTT_GAME:116,LINKSURE:119,ALI_GAME:113,WECHAT_MINI_GAME:"WECHAT_GAME",BAIDU_MINI_GAME:"BAIDU_MINI_GAME",XIAOMI_QUICK_GAME:"XIAOMI_QUICK_GAME",OPPO_MINI_GAME:"OPPO_MINI_GAME",VIVO_MINI_GAME:"VIVO_MINI_GAME",HUAWEI_QUICK_GAME:"HUAWEI_QUICK_GAME",BYTEDANCE_MINI_GAME:"BYTEDANCE_MINI_GAME",QTT_MINI_GAME:"QTT_MINI_GAME",LINKSURE_MINI_GAME:"LINKSURE_MINI_GAME",ALIPAY_MINI_GAME:"ALIPAY_MINI_GAME"});if(cc.sys.platform===e.WECHAT_GAME||cc.sys.platform===e.WECHAT_MINI_GAME)return C._createInstance("wechat_mg");if(cc.sys.platform===e.BAIDU_GAME||cc.sys.platform===e.BAIDU_MIN_GAME)return C._createInstance("baidu_mg");if(cc.sys.platform===e.VIVO_GAME||cc.sys.platform===e.VIVO_MINI_GAME)return w.createInstance();if(cc.sys.platform===e.QQ_PLAY)return C._createInstance("qq_mg");if(cc.sys.platform===e.OPPO_GAME||cc.sys.platform===e.OPPO_MINI_GAME)return O._createInstance("oppo");if(cc.sys.platform===e.HUAWEI_GAME||cc.sys.platform===e.HUAWEI_QUICK_GAME)return O._createInstance("huawei");if(cc.sys.platform===e.XIAOMI_GAME||cc.sys.platform===e.XIAOMI_QUICK_GAME)return O._createInstance("xiaomi");if(cc.sys.platform===e.BYTEDANCE_GAME||cc.sys.platform===e.BYTEDANCE_MINI_GAME)return C._createInstance("tt_mg");if(cc.sys.platform===e.ALI_GAME||cc.sys.platform===e.ALIPAY_MINI_GAME)return C._createInstance("ali_mg");var t=I.createInstance();return t._sysCallback=function(){return{system:cc.sys.os.replace(" ","")+" "+cc.sys.osVersion}},t.getNetworkType=function(e){var t={};switch(cc.sys.getNetworkType()){case cc.sys.NetworkType.LAN:t.networkType="WIFI";break;case cc.sys.NetworkType.WWAN:t.networkType="WWAN";break;default:t.networkType="NONE"}e.success(t),e.complete()},t.getSystemInfo=function(e){var i={mp_platform:cc.sys.platform.toString(),system:t._getOs(),screenWidth:window.screen.width,screenHeight:window.screen.height};t._sysCallback&&(i=p.extend(i,t._sysCallback(e))),e.success(i),e.complete()},t}}]),e}(),x=function(){function e(){o(this,e)}return u(e,null,[{key:"_getCurrentPlatform",value:function(){return this.currentPlatform||(this.currentPlatform=D.createInstance())}},{key:"initConfig",value:function(e){this._getCurrentPlatform().initSdkConfig(e)}},{key:"getConfig",value:function(){return this._getCurrentPlatform().getConfig()}},{key:"isWxPlat",value:function(){return"wx"===this.getConfig().plat}},{key:"getStorage",value:function(e,t,i){return this._getCurrentPlatform().getStorage(e,t,i)}},{key:"setStorage",value:function(e,t){return this._getCurrentPlatform().setStorage(e,t)}},{key:"removeStorage",value:function(e){return this._getCurrentPlatform().removeStorage(e)}},{key:"getSystemInfo",value:function(e){return this._getCurrentPlatform().getSystemInfo(e)}},{key:"getNetworkType",value:function(e){return this._getCurrentPlatform().getNetworkType(e)}},{key:"onNetworkStatusChange",value:function(e){this._getCurrentPlatform().onNetworkStatusChange(e)}},{key:"request",value:function(e){return this._getCurrentPlatform().request(e)}},{key:"initAutoTrackInstance",value:function(e,t){return this._getCurrentPlatform().initAutoTrackInstance(e,t)}},{key:"setGlobal",value:function(e,t){e&&t&&this._getCurrentPlatform().setGlobal(e,t)}},{key:"getAppOptions",value:function(e){return this._getCurrentPlatform().getAppOptions(e)}},{key:"showDebugToast",value:function(e){this._getCurrentPlatform().showToast(e)}}]),e}(),j=/^[a-zA-Z][a-zA-Z0-9_]{0,49}$/,M=function(){function e(){o(this,e)}return u(e,null,[{key:"stripProperties",value:function(e){return p.isObject(e)&&p.each(e,(function(e,t){p.isString(e)||p.isNumber(e)||p.isDate(e)||p.isBoolean(e)||p.isArray(e)||p.isObject(e)||b.warn("Your data -",t,e,"- format does not meet requirements and may not be stored correctly. Attribute values only support String, Number, Date, Boolean, Array, Object")})),e}},{key:"_checkPropertiesKey",value:function(e){var t=!0;return p.each(e,(function(e,i){j.test(i)||(b.warn("Invalid KEY: "+i),t=!1)})),t}},{key:"event",value:function(e){return!(!p.isString(e)||!j.test(e))||(b.warn("Check the parameter format. The eventName must start with an English letter and contain no more than 50 characters including letters, digits, and underscores: "+e),!1)}},{key:"propertyName",value:function(e){return!(!p.isString(e)||!j.test(e))||(b.warn("Check the parameter format. PropertyName must start with a letter and contain letters, digits, and underscores (_). The value is a string of no more than 50 characters: "+e),!1)}},{key:"properties",value:function(e){return this.stripProperties(e),!(e&&(p.isObject(e)?!this._checkPropertiesKey(e)&&(b.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"),1):(b.warn("properties can be none, but it must be an object"),1)))}},{key:"propertiesMust",value:function(e){return this.stripProperties(e),void 0===e||!p.isObject(e)||p.isEmptyObject(e)?(b.warn("properties must be an object with a value"),!1):!!this._checkPropertiesKey(e)||(b.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"),!1)}},{key:"userId",value:function(e){return!(!p.isString(e)||!/^.{1,64}$/.test(e))||(b.warn("The user ID must be a string of less than 64 characters and cannot be null"),!1)}},{key:"userAddProperties",value:function(e){if(!this.propertiesMust(e))return!1;for(var t in e)if(!p.isNumber(e[t]))return b.warn("The attributes of userAdd need to be Number"),!1;return!0}},{key:"userAppendProperties",value:function(e){if(!this.propertiesMust(e))return!1;for(var t in e)if(!p.isArray(e[t]))return b.warn("The attribute of userAppend must be Array"),!1;return!0}}]),e}(),U=function(){function e(t,i,n,a,s){o(this,e),this.data=t,this.serverUrl=i,this.callback=s,this.tryCount=p.isNumber(n)?n:1,this.timeout=p.isNumber(a)?a:3e3,this.taClassName="HttpTask"}return u(e,[{key:"run",value:function(){var e=this,t=p.createExtraHeaders();t["content-type"]="application/json",this.runTime=new Date,x.request({url:this.serverUrl,method:"POST",data:this.data,header:t,success:function(t){e.onSuccess(t)},fail:function(t){e.onFailed(t)}})}},{key:"onSuccess",value:function(e){if(!this.sendTimeout())if(p.isObject(e)&&200===e.statusCode){var t;switch((p.isUndefined(e.data)||p.isUndefined(e.data.code))&&(e.data={code:0}),e.data.code){case 0:t="success";break;case-1:t="invalid data";break;case-2:t="invalid APP ID";break;default:t="Unknown return code"}this.callback({code:e.data.code,msg:t})}else this.callback({code:-3,msg:p.isObject(e)?e.statusCode:"Unknown error"})}},{key:"onFailed",value:function(e){this.sendTimeout()||(0<--this.tryCount?this.run():this.callback({code:-3,msg:p.isObject(e)?e.errMsg:"Unknown error"}))}},{key:"sendTimeout",value:function(){return(new Date).getTime()-this.runTime.getTime()>this.timeout}}]),e}(),E=function(){function e(t,i,n,a,s,r,c){o(this,e),this.data=t,this.serverDebugUrl=i,this.callback=c,this.tryCount=p.isNumber(n)?n:1,this.timeout=p.isNumber(a)?a:3e3,this.dryrun=s,this.deviceId=r,this.taClassName="HttpTaskDebug"}return u(e,[{key:"run",value:function(){var e=this,t="appid="+this.data["#app_id"]+"&source=client&dryRun="+this.dryrun+"&deviceId="+this.deviceId+"&data="+encodeURIComponent(JSON.stringify(this.data.data[0])),i=p.createExtraHeaders();i["content-type"]="application/x-www-form-urlencoded";var n=x.request({url:this.serverDebugUrl,method:"POST",data:t,header:i,success:function(t){e.onSuccess(t),clearTimeout(a)},fail:function(t){e.onFailed(t),clearTimeout(a)}}),a=setTimeout((function(){(p.isObject(n)||p.isPromise(n))&&p.isFunction(n.abort)&&n.abort()}),this.timeout)}},{key:"onSuccess",value:function(e){if(p.isObject(e)&&200===e.statusCode){var t;if((p.isUndefined(e.data)||p.isUndefined(e.data.errorLevel))&&(e.data={errorLevel:0}),0===e.data.errorLevel)t="Verify data success.";else if(1===e.data.errorLevel){for(var i=e.data.errorProperties,n="",a=0;a<i.length;a++){var s=i[a].errorReason;n=n+" propertyName:"+i[a].propertyName+" errorReasons:"+s+"\n"}t="Debug data error. errorLevel:"+e.data.errorLevel+" reason:"+n}else 2!==e.data.errorLevel&&-1!==e.data.errorLevel||(t="Debug data error. errorLevel:"+e.data.errorLevel+" reason:"+e.data.errorReasons);b.info(t),this.callback({code:e.data.errorLevel,msg:t})}else this.callback({code:-3,msg:p.isObject(e)?e.statusCode:"Unknown error"})}},{key:"onFailed",value:function(e){0<--this.tryCount?this.run():this.callback({code:-3,msg:p.isObject(e)?e.errMsg:"Unknown error"})}}]),e}(),F=new(function(){function e(){o(this,e),this.items=[],this.isRunning=!1,this.showDebug=!1}return u(e,[{key:"enqueue",value:function(e,t,i,n){var a=this,s=(n=!(3<arguments.length&&void 0!==n)||n,this);t="debug"===i.debugMode?new E(e,t,i.maxRetries,i.sendTimeout,0,i.deviceId,(function(e){s.isRunning=!1,delete a.runTime,p.isFunction(i.callback)&&i.callback(e),s._runNext(),!1===s.showDebug&&(0!==e.code&&1!==e.code&&2!==e.code||(s.showDebug=!0,p.isFunction(x.showDebugToast)&&x.showDebugToast("The current mode is Debug")))})):"debugOnly"===i.debugMode?new E(e,t,i.maxRetries,i.sendTimeout,1,i.deviceId,(function(e){s.isRunning=!1,delete a.runTime,p.isFunction(i.callback)&&i.callback(e),s._runNext(),!1===s.showDebug&&(0!==e.code&&1!==e.code&&2!==e.code||(s.showDebug=!0,p.isFunction(x.showDebugToast)&&x.showDebugToast("The current mode is debugOnly")))})):new U(JSON.stringify(e),t,i.maxRetries,i.sendTimeout,(function(e){s.isRunning=!1,delete a.runTime,p.isFunction(i.callback)&&i.callback(e),s._runNext()}));!0===n?(this.items.push(t),this._runNext()):t.run()}},{key:"_dequeue",value:function(){return this.items.shift()}},{key:"_runNext",value:function(){if(0<this.items.length&&!this.isRunning)if(this.isRunning=!0,this.runTime=new Date,"HttpTask"!==this.items[0].taClassName)this._dequeue().run();else{var e=this.items.splice(0,this.items.length),t=e[0],i=JSON.parse(t.data),n=i["#app_id"],a=[];a.push(t.callback);for(var s=1;s<e.length;s++){var r=e[s],o=JSON.parse(r.data);o["#app_id"]===n&&t.serverUrl===r.serverUrl?(i.data=i.data.concat(o.data),a.push(r.callback)):this.items.push(r)}var c=(new Date).getTime();i["#flush_time"]=c,new U(JSON.stringify(i),t.serverUrl,t.tryCount,t.timeout,(function(e){for(var t in a)Object.hasOwnProperty.call(a,t)&&(0,a[t])(e)})).run()}}},{key:"runTimeout",value:function(e){return!!(p.isDate(this.runTime)&&(new Date).getTime()-this.runTime.getTime()>e)}},{key:"resetTimeout",value:function(){this.isRunning=!1,delete this.runTime}}]),e}()),L={name:"thinkingdata",is_plugin:!1,maxRetries:3,sendTimeout:3e3,enablePersistence:!0,asyncPersistence:!1,enableLog:!0,strict:!1,debugMode:"none",enableCalibrationTime:!1,enableBatch:!1,cloudEnv:"online",reportingToTencentSdk:3},q={properties:{"#lib":h,"#lib_version":l},initDeviceId:function(e){p.isString(e)&&(this.properties["#device_id"]=e)},getSystemInfo:function(e){var t=this;x.onNetworkStatusChange((function(e){t.properties["#network_type"]=e.networkType})),x.getNetworkType({success:function(e){t.properties["#network_type"]=e.networkType},complete:function(){x.getSystemInfo({success:function(e){var i=e.system?e.system.replace(/\s+/g," ").split(" "):[];i={"#manufacturer":e.brand,"#device_model":e.model,"#screen_width":Number(e.screenWidth),"#screen_height":Number(e.screenHeight),"#os":i[0],"#os_version":i[1],"#mp_platform":e.mp_platform,"#system_language":e.systemLanguage};p.extend(t.properties,i),p.setMpPlatform(e.mp_platform)},complete:function(){e()}})}})}},J=function(){function e(t,i){var n=this;o(this,e),this.enabled=t.enablePersistence,this.enabled?(t.isChildInstance?(this.name=t.persistenceName+"_"+t.name,this.nameOld=t.persistenceNameOld+"_"+t.name):(this.name=t.persistenceName,this.nameOld=t.persistenceNameOld),t.asyncPersistence?(this._state={},x.getStorage(this.name,!0,(function(e){p.isEmptyObject(e)?x.getStorage(n.nameOld,!0,(function(e){n._state=p.extend2Layers({},e,n._state),n._init(t,i),n._save()})):(n._state=p.extend2Layers({},e,n._state),n._init(t,i),n._save())}))):(this._state=x.getStorage(this.name)||{},p.isEmptyObject(this._state)&&(this._state=x.getStorage(this.nameOld)||{}),this._init(t,i))):(this._state={},this._init(t,i))}return u(e,[{key:"_init",value:function(e,t){this.getDistinctId()||this.setDistinctId(p.UUID()),e.isChildInstance||(this.getDeviceId()||this._setDeviceId(p.UUID()),q.initDeviceId(this.getDeviceId())),this.initComplete=!0,"function"==typeof t&&t(),this._save()}},{key:"_save",value:function(){this.enabled&&this.initComplete&&x.setStorage(this.name,JSON.stringify(this._state))}},{key:"_set",value:function(e,t){var i,n=this;"string"==typeof e?(i={})[e]=t:"object"===r(e)&&(i=e),p.each(i,(function(e,t){n._state[t]=e})),this._save()}},{key:"_get",value:function(e){return this._state[e]}},{key:"setEventTimer",value:function(e,t){var i=this._state.event_timers||{};i[e]=t,this._set("event_timers",i)}},{key:"removeEventTimer",value:function(e){var t=(this._state.event_timers||{})[e];return p.isUndefined(t)||(delete this._state.event_timers[e],this._save()),t}},{key:"getDeviceId",value:function(){return this._state.device_id}},{key:"_setDeviceId",value:function(e){this.getDeviceId()?b.warn("cannot modify the device id."):this._set("device_id",e)}},{key:"getDistinctId",value:function(){return this._state.distinct_id}},{key:"setDistinctId",value:function(e){this._set("distinct_id",e)}},{key:"getAccountId",value:function(){return this._state.account_id}},{key:"setAccountId",value:function(e){this._set("account_id",e)}},{key:"getSuperProperties",value:function(){return this._state.props||{}}},{key:"setSuperProperties",value:function(e,t){e=t?e:p.extend(this.getSuperProperties(),e),this._set("props",e)}}]),e}(),R=function(){function e(t,i){o(this,e),this.config=t,this.ta=i,this.timer=null,this.batchConfig=p.extend({size:6,interval:6e3,maxLimit:500},this.config.batchConfig),this.batchConfig.size<1&&(this.batchConfig.size=1),30<this.batchConfig.size&&(this.batchConfig.size=30),this.storageKey="ta_mpsdk_"+this.config.appId,this.maxLimit=this.batchConfig.maxLimit,this.batchList=[],i=x.getStorage(this.storageKey),p.isArray(i)&&(this.batchList=i);i="tab_tampsdk_"+this.config.appId;var n=x.getStorage(i);if(p.isArray(n)){for(var a=0;a<n.length;a++){var s=x.getStorage(n[a]);this.batchList.push(s),x.removeStorage(n[a])}x.removeStorage(i)}this.dataHasChange=!1,this.dataSendTimeStamp=0}return u(e,[{key:"batchInterval",value:function(){this.loopWrite(),this.loopSend()}},{key:"loopWrite",value:function(){var e=this;setTimeout((function(){e.batchWrite(),e.loopWrite()}),500)}},{key:"batchWrite",value:function(){this.dataHasChange&&(this.dataHasChange=!1,x.setStorage(this.storageKey,JSON.stringify(this.batchList)))}},{key:"loopSend",value:function(){var e=this;e.timer=setTimeout((function(){e.batchSend(),clearTimeout(e.timer),e.loopSend()}),this.batchConfig.interval)}},{key:"add",value:function(e){this.batchList.length>this.maxLimit&&this.batchList.shift(),this.batchList.push(e),this.dataHasChange=!0,this.batchList.length>this.batchConfig.size&&this.batchSend()}},{key:"flush",value:function(){clearTimeout(this.timer),this.batchSend(),this.loopSend()}},{key:"batchSend",value:function(){var e,t,i,n=new Date;0!==this.dataSendTimeStamp&&n.getTime()-this.dataSendTimeStamp<this.config.sendTimeout+500||(this.dataSendTimeStamp=n.getTime(),0<(e=(n=30<this.batchList.length?this.batchList.slice(0,30):this.batchList).length)&&((t={}).data=n,t["#app_id"]=this.config.appId,t["#flush_time"]=(new Date).getTime(),i=this,F.enqueue(t,this.ta.serverUrl,{maxRetries:1,sendTimeout:this.config.sendTimeout,callback:function(n){0===n.code&&(b.info("Flush success: "+JSON.stringify(t,null,4)),i.batchRemove(e))},debugMode:this.config.debugMode,deviceId:this.ta.getDeviceId()},!1)))}},{key:"batchRemove",value:function(e){this.dataSendTimeStamp=0,this.batchList.splice(0,e),this.dataHasChange=!0,this.batchWrite()}}]),e}(),W=function(){function e(t){var i;o(this,e),t&&(!x.isWxPlat()||1!==t.reportingToTencentSdk&&2!==t.reportingToTencentSdk||(i=t.tgaInitParams.tgaSDK,t.tgaInitParams&&i&&("debug"!==t.debugMode&&"debugOnly"!==t.debugMode||i.setDebug(!0),this.wxSdk=new i({user_action_set_id:t.tgaInitParams.user_action_set_id,secret_key:t.tgaInitParams.secret_key,appid:t.tgaInitParams.appid}),t.tgaInitParams.openId?this.wxSdk.setOpenId(t.tgaInitParams.openId):t.tgaInitParams.unionId&&this.wxSdk.setUnionId(t.tgaInitParams.unionId))),this.isTADisable=1===t.reportingToTencentSdk,t.appId=t.appId?p.checkAppId(t.appId):p.checkAppId(t.appid),t.serverUrl=t.serverUrl?p.checkUrl(t.serverUrl):p.checkUrl(t.server_url),i=p.extend({},L,x.getConfig()),p.isObject(t)?this.config=p.extend(i,t):this.config=i,this._init(this.config))}return u(e,[{key:"_init",value:function(e){var t=this;this.name=e.name,this.appId=e.appId||e.appid;var i=e.serverUrl||e.server_url;this.serverUrl=i+"/sync_xcx",this.serverDebugUrl=i+"/data_debug",this.configUrl=i+"/config",this.autoTrackProperties={},x.initConfig(e),this._queue=[],this.updateConfig(this.configUrl,this.appId),e.isChildInstance?this._state={}:(b.enabled=e.enableLog,this.instances=[],this._state={getSystemInfo:!1,initComplete:!1},x.setGlobal(this,this.name)),this.store=new J(e,(function(){t.config.asyncPersistence&&p.isFunction(t.config.persistenceComplete)&&t.config.persistenceComplete(t),t._updateState()})),this.enabled=!p.isBoolean(this.store._get("ta_enabled"))||this.store._get("ta_enabled"),this.isOptOut=!!p.isBoolean(this.store._get("ta_isOptOut"))&&this.store._get("ta_isOptOut"),!e.isChildInstance&&e.autoTrack&&(this.autoTrack=x.initAutoTrackInstance(this,e)),void 0!==this.config.enableBatch&&!1!==this.config.enableBatch&&(this.batchConsumer=new R(this.config,this),this.batchConsumer.batchInterval())}},{key:"initSystemInfo",value:function(){var e=this;this.config.isChildInstance||q.getSystemInfo((function(){e._updateState({getSystemInfo:!0})}))}},{key:"updateConfig",value:function(e,t){var i=this,n=p.createExtraHeaders();n["content-type"]="application/json";var a=x.request({url:e+"?appid="+t,method:"GET",header:n,success:function(e){p.isUndefined(e)||p.isUndefined(e.data)||(b.info("Get remote config success("+t+") :"+JSON.stringify(e.data)),p.isUndefined(e.data.data)||(i.config.syncBatchSize=e.data.data.sync_batch_size,i.config.syncInterval=e.data.data.sync_interval,i.config.disableEventList=e.data.data.disable_event_list,p.isUndefined(e.data.data.secret_key)||(e=e.data.data.secret_key,i.config.secretKey={publicKey:e.key,version:e.version})))},fail:function(e){b.info("Get remote config fail("+t+") :"+e.errMsg)}});setTimeout((function(){(p.isObject(a)||p.isPromise(a))&&p.isFunction(a.abort)&&a.abort()}),3e3)}},{key:"initInstance",value:function(t,i){if(!x.isWxPlat()||!this.isTADisable)if(this.config.isChildInstance)b.warn("initInstance() cannot be called on child instance");else{if(p.isString(t)&&t!==this.name&&p.isUndefined(this[t]))return i=new e(p.extend({},this.config,{enablePersistence:!1,isChildInstance:!0,name:t},i)),this[t]=i,this.instances.push(t),this[t]._state=this._state,i;b.warn("initInstance() failed due to the name is invalid: "+t)}}},{key:"lightInstance",value:function(e){if(!x.isWxPlat()||!this.isTADisable)return this[e]}},{key:"_setAutoTrackProperties",value:function(e){p.extend(this.autoTrackProperties,e)}},{key:"init",value:function(){if(!x.isWxPlat()||!this.isTADisable){if(this.initSystemInfo(),this._state.initComplete)return!1;this._updateState({initComplete:!0}),b.info("TDAnalytics SDK initialize success, AppId = "+this.config.appId+", ServerUrl = "+this.config.serverUrl+", Mode = "+this.config.model+", DeviceId = "+this.getDeviceId()+", Lib = "+h+", LibVersion = "+l)}}},{key:"_isReady",value:function(){return this._state.getSystemInfo&&this._state.initComplete&&this.store.initComplete&&this.getDeviceId()}},{key:"_updateState",value:function(e){var t=this;p.isObject(e)&&p.extend(this._state,e),this._onStateChange(),p.each(this.instances,(function(e){t[e]._onStateChange()}))}},{key:"_onStateChange",value:function(){var e=this;this._isReady()&&this._queue&&0<this._queue.length&&(p.each(this._queue,(function(t){e[t[0]].apply(e,g.call(t[1]))})),this._queue=[])}},{key:"_hasDisabled",value:function(){var e=!this.enabled||this.isOptOut;return e&&b.info("SDK is Pause or Stop!"),e}},{key:"_sendRequest",value:function(e,t,i){if(!this._hasDisabled())if(p.isUndefined(this.config.disableEventList)||!this.config.disableEventList.includes(e.eventName)){t=p.isDate(t)?t:new Date;var n={data:[{"#type":e.type,"#time":p.formatDate(p.formatTimeZone(t,this.config.zoneOffset)),"#distinct_id":this.store.getDistinctId()}]};this.store.getAccountId()&&(n.data[0]["#account_id"]=this.store.getAccountId()),"track"===e.type||"track_update"===e.type||"track_overwrite"===e.type?(n.data[0]["#event_name"]=e.eventName,"track_update"===e.type||"track_overwrite"===e.type?n.data[0]["#event_id"]=e.extraId:e.firstCheckId&&(n.data[0]["#first_check_id"]=e.firstCheckId),n.data[0].properties=p.extend({"#zone_offset":p.getTimeZone(t,this.config.zoneOffset)},q.properties,this.autoTrackProperties,this.store.getSuperProperties(),this.dynamicProperties?this.dynamicProperties():{}),t=this.store.removeEventTimer(e.eventName),p.isUndefined(t)||(a=(new Date).getTime()-t,86400<(a=parseFloat((a/1e3).toFixed(3)))?a=86400:a<0&&(a=0),n.data[0].properties["#duration"]=a)):n.data[0].properties={},p.isObject(e.properties)&&!p.isEmptyObject(e.properties)&&p.extend(n.data[0].properties,e.properties),p.searchObjDate(n.data[0],this.config.zoneOffset),1<this.config.maxRetries&&(n.data[0]["#uuid"]=p.UUIDv4()),n["#app_id"]=this.appId,b.info("Tracking data, "+JSON.stringify(n,null,4));var a="debug"===this.config.debugMode||"debugOnly"===this.config.debugMode?this.serverDebugUrl:this.serverUrl;if(p.isBoolean(this.config.enableEncrypt)&&!0===this.config.enableEncrypt&&(n.data[0]=p.generateEncryptyData(n.data[0],this.config.secretKey)),this.batchConsumer&&"none"===this.config.debugMode&&!i)return this.batchConsumer.add(n.data[0]),void(p.isFunction(e.onComplete)&&e.onComplete({code:0,msg:"success"}));i?(i=new FormData,"debug"===this.config.debugMode||"debugOnly"===this.config.debugMode?(i.append("source","client"),i.append("appid",this.appId),i.append("dryRun","debugOnly"===this.config.debugMode?1:0),i.append("deviceId",this.getDeviceId()),i.append("data",JSON.stringify(n.data[0])),navigator.sendBeacon(a,i)):(i=(new Date).getTime(),n["#flush_time"]=i,navigator.sendBeacon(a,JSON.stringify(n))),p.isFunction(e.onComplete)&&e.onComplete({statusCode:200})):(F.runTimeout(this.config.sendTimeout)&&F.resetTimeout(),F.enqueue(n,a,{maxRetries:this.config.maxRetries,sendTimeout:this.config.sendTimeout,callback:e.onComplete,debugMode:this.config.debugMode,deviceId:this.getDeviceId()}))}else b.info("Disabled Event : "+e.eventName)}},{key:"_isObjectParams",value:function(e){return p.isObject(e)&&p.isFunction(e.onComplete)}},{key:"track",value:function(e,t,i,n){var a;x.isWxPlat()&&(this.wxSdk&&(t=t||{},this.wxSdk.track(e,t)),this.isTADisable)||this._hasDisabled()||(this._isObjectParams(e)&&(e=(a=e).eventName,t=a.properties,i=a.time,n=a.onComplete),M.event(e)&&M.properties(t)||!this.config.strict?this._internalTrack(e,t,i,n,!1,!0):p.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}},{key:"trackUpdate",value:function(e){var t,i;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(e&&e.eventId&&(M.event(e.eventName)&&M.properties(e.properties)||!this.config.strict)?this._isReady()?(t=p.checkCalibration(e.properties,e.time,this.config.enableCalibrationTime),i=p.isDate(e.time)?e.time:new Date,this._sendRequest({type:"track_update",eventName:e.eventName,properties:t,onComplete:e.onComplete,extraId:e.eventId},i)):this._queue.push(["trackUpdate",[e]]):(b.warn("Invalide parameter for trackUpdate: you should pass an object contains eventId to trackUpdate()"),p.isFunction(e.onComplete)&&e.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"trackOverwrite",value:function(e){var t,i;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(e&&e.eventId&&(M.event(e.eventName)&&M.properties(e.properties)||!this.config.strict)?this._isReady()?(t=p.checkCalibration(e.properties,e.time,this.config.enableCalibrationTime),i=p.isDate(e.time)?e.time:new Date,this._sendRequest({type:"track_overwrite",eventName:e.eventName,properties:t,onComplete:e.onComplete,extraId:e.eventId},i)):this._queue.push(["trackOverwrite",[e]]):(b.warn("Invalide parameter for trackOverwrite: you should pass an object contains eventId to trackOverwrite()"),p.isFunction(e.onComplete)&&e.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"trackFirstEvent",value:function(e){var t,i;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(e&&e.eventName&&(M.event(e.eventName)&&M.properties(e.properties)||!this.config.strict)?this._isReady()?(t=p.checkCalibration(e.properties,e.time,this.config.enableCalibrationTime),i=p.isDate(e.time)?e.time:new Date,this._sendRequest({type:"track",eventName:e.eventName,properties:t,onComplete:e.onComplete,firstCheckId:e.firstCheckId||this.getDeviceId()},i)):this._queue.push(["trackFirstEvent",[e]]):(b.warn("Invalide parameter for trackFirstEvent: you should pass an object contains eventName to trackFirstEvent()"),p.isFunction(e.onComplete)&&e.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"_internalTrack",value:function(e,t,i,n,a,s){!s&&(this.wxSdk&&((t=t||{}).trackBy="ThinkingData",this.wxSdk.track(e,t)),this.isTADisable)||this._hasDisabled()||(s=p.checkCalibration(t,i,this.config.enableCalibrationTime),i=p.isDate(i)?i:new Date,this._isReady()?this._sendRequest({type:"track",eventName:e,properties:s,onComplete:n},i,a):this._queue.push(["_internalTrack",[e,t,i,n,a,!0]]))}},{key:"userSet",value:function(e,t,i){var n;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.propertiesMust(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_set",properties:e,onComplete:i},t):this._queue.push(["userSet",[e,t,i]])):(b.warn("calling userSet failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userSetOnce",value:function(e,t,i){var n;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.propertiesMust(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_setOnce",properties:e,onComplete:i},t):this._queue.push(["userSetOnce",[e,t,i]])):(b.warn("calling userSetOnce failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userUnset",value:function(e,t,i){var n;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(this._isObjectParams(n)&&(e=n.property,t=n.time,i=n.onComplete),M.propertyName(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?((n={})[e]=0,this._sendRequest({type:"user_unset",properties:n,onComplete:i},t)):this._queue.push(["userUnset",[e,i,t]])):(b.warn("calling userUnset failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userDel",value:function(e,t){var i;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(this._isObjectParams(e)&&(e=(i=e).time,t=i.onComplete),e=p.isDate(e)?e:new Date,this._isReady()?this._sendRequest({type:"user_del",onComplete:t},e):this._queue.push(["userDel",[e,t]]))}},{key:"userAdd",value:function(e,t,i){var n;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.userAddProperties(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_add",properties:e,onComplete:i},t):this._queue.push(["userAdd",[e,t,i]])):(b.warn("calling userAdd failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userAppend",value:function(e,t,i){var n;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.userAppendProperties(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_append",properties:e,onComplete:i},t):this._queue.push(["userAppend",[e,t,i]])):(b.warn("calling userAppend failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userUniqAppend",value:function(e,t,i){var n;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.userAppendProperties(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_uniq_append",properties:e,onComplete:i},t):this._queue.push(["userUniqAppend",[e,t,i]])):(b.warn("calling userAppend failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"flush",value:function(){x.isWxPlat()&&this.isTADisable||this.batchConsumer&&"none"===this.config.debugMode&&this.batchConsumer.flush()}},{key:"authorizeOpenID",value:function(e){this.identify(e)}},{key:"identify",value:function(e){if(!(x.isWxPlat()&&this.isTADisable||this._hasDisabled())){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return!1;this.store.setDistinctId(e),b.info("Setting distinct ID, DistinctId = "+e)}}},{key:"getDistinctId",value:function(){return x.isWxPlat()&&this.isTADisable?"":this.store.getDistinctId()}},{key:"login",value:function(e){if(!(x.isWxPlat()&&this.isTADisable||this._hasDisabled())){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return!1;this.store.setAccountId(e),b.info("Login SDK, AccountId = "+e)}}},{key:"getAccountId",value:function(){return x.isWxPlat()&&this.isTADisable?"":this.store.getAccountId()}},{key:"logout",value:function(){x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(this.store.setAccountId(null),b.info("Logout SDK"))}},{key:"setSuperProperties",value:function(e){x.isWxPlat()&&this.isTADisable||this._hasDisabled()||(M.propertiesMust(e)||!this.config.strict?this.store.setSuperProperties(e):b.warn("setSuperProperties parameter must be a valid property value"))}},{key:"clearSuperProperties",value:function(){x.isWxPlat()&&this.isTADisable||this._hasDisabled()||this.store.setSuperProperties({},!0)}},{key:"unsetSuperProperty",value:function(e){var t;x.isWxPlat()&&this.isTADisable||this._hasDisabled()||p.isString(e)&&(delete(t=this.getSuperProperties())[e],this.store.setSuperProperties(t,!0))}},{key:"getSuperProperties",value:function(){return x.isWxPlat()&&this.isTADisable?{}:this.store.getSuperProperties()}},{key:"getPresetProperties",value:function(){if(x.isWxPlat()&&this.isTADisable)return{};var e=q.properties,t={},i=e["#os"];t.os=p.isUndefined(i)?"":i,i=e["#screen_width"],t.screenWidth=p.isUndefined(i)?0:i,i=e["#screen_height"],t.screenHeight=p.isUndefined(i)?0:i,i=e["#network_type"],t.networkType=p.isUndefined(i)?"":i,i=e["#device_model"],t.deviceModel=p.isUndefined(i)?"":i,i=e["#os_version"],t.osVersion=p.isUndefined(i)?"":i,t.deviceId=this.getDeviceId();var n=p.getTimeZone(new Date,this.config.zoneOffset);return t.zoneOffset=n,e=e["#manufacturer"],t.manufacturer=p.isUndefined(e)?"":e,t.toEventPresetProperties=function(){return{"#device_model":t.deviceModel,"#device_id":t.deviceId,"#screen_width":t.screenWidth,"#screen_height":t.screenHeight,"#os":t.os,"#os_version":t.osVersion,"#network_type":t.networkType,"#zone_offset":n,"#manufacturer":t.manufacturer}},t}},{key:"setDynamicSuperProperties",value:function(e){if(x.isWxPlat()&&this.isTADisable)return{};this._hasDisabled()||("function"==typeof e?M.properties(e())||!this.config.strict?this.dynamicProperties=e:b.warn("A dynamic public property must return a valid property value"):b.warn("setDynamicSuperProperties parameter must be a function type"))}},{key:"timeEvent",value:function(e,t){if(x.isWxPlat()&&this.isTADisable)return{};this._hasDisabled()||(t=p.isDate(t)?t:new Date,this._isReady()?M.event(e)||!this.config.strict?this.store.setEventTimer(e,t.getTime()):b.warn("calling timeEvent failed due to invalid eventName: "+e):this._queue.push(["timeEvent",[e,t]]))}},{key:"getDeviceId",value:function(){return x.isWxPlat()&&this.isTADisable?"":q.properties["#device_id"]}},{key:"enableTracking",value:function(e){x.isWxPlat()&&this.isTADisable||(this.enabled=e,this.store._set("ta_enabled",e))}},{key:"optOutTracking",value:function(){x.isWxPlat()&&this.isTADisable||(this.store.setSuperProperties({},!0),this.store.setDistinctId(p.UUID()),this.store.setAccountId(null),this._queue.splice(0,this._queue.length),this.isOptOut=!0,this.store._set("ta_isOptOut",!0))}},{key:"optOutTrackingAndDeleteUser",value:function(){var e;x.isWxPlat()&&this.isTADisable||(e=new Date,this._sendRequest({type:"user_del"},e),this.optOutTracking())}},{key:"optInTracking",value:function(){x.isWxPlat()&&this.isTADisable||(this.isOptOut=!1,this.store._set("ta_isOptOut",!1))}},{key:"setTrackStatus",value:function(e){if(!x.isWxPlat()||!this.isTADisable){switch(e){case"PAUSE":this.eventSaveOnly=!1,this.optInTracking(),this.enableTracking(!1);break;case"STOP":this.eventSaveOnly=!1,this.optOutTracking(!0);break;case"SAVE_ONLY":break;case"NORMAL":default:this.eventSaveOnly=!1,this.optInTracking(),this.enableTracking(!0)}b.info("Change Status to "+e)}}}]),e}(),H={name:"thinkingdata",enableLog:!0,enableNative:!1},G=function(){function e(t){o(this,e),t.appId=t.appId?p.checkAppId(t.appId):p.checkAppId(t.appid),t.serverUrl=t.serverUrl?p.checkUrl(t.serverUrl):p.checkUrl(t.server_url);var i=p.extend({},H,x.getConfig());p.isObject(t)?this.config=p.extend(i,t):this.config=i,this._init(this.config)}return u(e,[{key:"_isNativePlatform",value:function(){return!(!this._isIOS()&&!this._isAndroid()||!this.config.enableNative)}},{key:"_isIOS",value:function(){return!(!cc.sys.isNative||"iOS"!==cc.sys.os)}},{key:"_isAndroid",value:function(){return!(!cc.sys.isNative||"Android"!==cc.sys.os)}},{key:"_init",value:function(e){this.name=e.name,this.appId=e.appId||e.appid,this._isNativePlatform()?(this.initInstanceForNative(e),this._readStorage(e)):this.taJs=new ThinkingAnalyticsAPIForJS(e)}},{key:"_readStorage",value:function(e){var t=this,i=e.persistenceName,n=e.persistenceNameOld;e.isChildInstance&&(i=e.persistenceName+"_"+e.name,n=e.persistenceNameOld+"_"+e.name),this._state=x.getStorage(i)||{},p.isEmptyObject(this._state)&&(this._state=x.getStorage(n)||{}),p.isEmptyObject(this._state)?x.getStorage(i,!0,(function(e){p.isEmptyObject(e)?x.getStorage(n,!0,(function(e){t._state=p.extend2Layers({},e,t._state)})):t._state=p.extend2Layers({},e,t._state),t._state.distinct_id&&t.identifyForNative(t._state.distinct_id),t._state.account_id&&t.loginForNative(t._state.account_id)})):(this._state.distinct_id&&this.identifyForNative(this._state.distinct_id),this._state.account_id&&this.loginForNative(this._state.account_id))}},{key:"initInstance",value:function(e,t){return this._isNativePlatform()?p.isUndefined(t)?this[e]=new ThinkingAnalyticsAPI(this.config):this[e]=new ThinkingAnalyticsAPI(t):this[e]=this.taJs.initInstance(e,t),this[e]}},{key:"lightInstance",value:function(){return this._isNativePlatform()?this.lightInstanceForNative(this.appId):this}},{key:"init",value:function(){if(this._isNativePlatform()){var e=window,t=this;return e.__autoTrackCallback=function(e){return p.isFunction(t.config.autoTrack.callback)?(e=t.config.autoTrack.callback(e),JSON.stringify(e)):"{}"},void this.startThinkingAnalyticsForNative(this.appId)}this.taJs.init()}},{key:"track",value:function(e,t,i,n){this._isNativePlatform()?this.trackForNative(e,t,i,this.appId):this.taJs.track(e,t,i,n)}},{key:"trackUpdate",value:function(e){this._isNativePlatform()?this.trackUpdateForNative(e,this.appId):this.taJs.trackUpdate(e)}},{key:"trackOverwrite",value:function(e){this._isNativePlatform()?this.trackOverwriteForNative(e,this.appId):this.taJs.trackOverwrite(e)}},{key:"trackFirstEvent",value:function(e){this._isNativePlatform()?this.trackFirstEventForNative(e,this.appId):this.taJs.trackFirstEvent(e)}},{key:"userSet",value:function(e,t,i){this._isNativePlatform()?this.userSetForNative(e,this.appId):this.taJs.userSet(e,t,i)}},{key:"userSetOnce",value:function(e,t,i){this._isNativePlatform()?this.userSetOnceForNative(e,this.appId):this.taJs.userSetOnce(e,t,i)}},{key:"userUnset",value:function(e,t,i){this._isNativePlatform()?this.userUnsetForNative(e,this.appId):this.taJs.userUnset(e,t,i)}},{key:"userDel",value:function(e,t){this._isNativePlatform()?this.userDelForNative(this.appId):this.taJs.userDel(e,t)}},{key:"userAdd",value:function(e,t,i){this._isNativePlatform()?this.userAddForNative(e,this.appId):this.taJs.userAdd(e,t,i)}},{key:"userAppend",value:function(e,t,i){this._isNativePlatform()?this.userAppendForNative(e,this.appId):this.taJs.userAppend(e,t,i)}},{key:"userUniqAppend",value:function(e,t,i){this._isNativePlatform()?this.userUniqAppendForNative(e,this.appId):this.taJs.userUniqAppend(e,t,i)}},{key:"flush",value:function(){this._isNativePlatform()?this.flushForNative(this.appId):this.taJs.flush()}},{key:"authorizeOpenID",value:function(e){this.identify(e)}},{key:"identify",value:function(e){this._isNativePlatform()?this.identifyForNative(e,this.appId):this.taJs.identify(e)}},{key:"getDistinctId",value:function(){return this._isNativePlatform()?this.getDistinctIdForNative(this.appId):this.taJs.getDistinctId()}},{key:"login",value:function(e){this._isNativePlatform()?this.loginForNative(e,this.appId):this.taJs.login(e)}},{key:"getAccountId",value:function(){return this._isNativePlatform()?this.getAccountIdForNative(this.appId):this.taJs.getAccountId()}},{key:"logout",value:function(){this._isNativePlatform()?this.logoutForNative(this.appId):this.taJs.logout()}},{key:"setSuperProperties",value:function(e){this._isNativePlatform()?this.setSuperPropertiesForNative(e,this.appId):this.taJs.setSuperProperties(e)}},{key:"clearSuperProperties",value:function(){this._isNativePlatform()?this.clearSuperPropertiesForNative(this.appId):this.taJs.clearSuperProperties()}},{key:"unsetSuperProperty",value:function(e){this._isNativePlatform()?this.unsetSuperPropertyForNative(e,this.appId):this.taJs.unsetSuperProperty(e)}},{key:"getSuperProperties",value:function(){return this._isNativePlatform()?this.getSuperPropertiesForNative(this.appId):this.taJs.getSuperProperties()}},{key:"getPresetProperties",value:function(){if(this._isNativePlatform()){var e=this.getPresetPropertiesForNative(this.appId),t={},i=e["#os"];t.os=p.isUndefined(i)?"":i,i=e["#screen_width"],t.screenWidth=p.isUndefined(i)?0:i,i=e["#screen_height"],t.screenHeight=p.isUndefined(i)?0:i,i=e["#network_type"],t.networkType=p.isUndefined(i)?"":i,i=e["#device_model"],t.deviceModel=p.isUndefined(i)?"":i,i=e["#os_version"],t.osVersion=p.isUndefined(i)?"":i,t.deviceId=this.getDeviceId();var n=0-(new Date).getTimezoneOffset()/60;return t.zoneOffset=n,e=e["#manufacturer"],t.manufacturer=p.isUndefined(e)?"":e,t.toEventPresetProperties=function(){return{"#device_model":t.deviceModel,"#device_id":t.deviceId,"#screen_width":t.screenWidth,"#screen_height":t.screenHeight,"#os":t.os,"#os_version":t.osVersion,"#network_type":t.networkType,"#zone_offset":n,"#manufacturer":t.manufacturer}},t}return this.taJs.getPresetProperties()}},{key:"setDynamicSuperProperties",value:function(e){this._isNativePlatform()?"function"==typeof e?(this.dynamicProperties=e,window.__dynamicPropertiesForNative=function(t){return console.log("__dynamicPropertiesForNative: native msg: ",t),t=e(),t=p.encodeDates(t),JSON.stringify(t)},this.setDynamicSuperPropertiesForNative("__dynamicPropertiesForNative")):logger.warn("setDynamicSuperProperties parameter must be a function type"):this.taJs.setDynamicSuperProperties(e)}},{key:"timeEvent",value:function(e,t){return this._isNativePlatform()?this.timeEventForNative(e,this.appId):this.taJs.timeEvent(e,t)}},{key:"getDeviceId",value:function(){return this._isNativePlatform()?this.getDeviceIdForNative(this.appId):this.taJs.getDeviceId()}},{key:"enableTracking",value:function(e){this._isNativePlatform()?this.enableTrackingForNative(e,this.appId):this.taJs.enableTracking(e)}},{key:"optOutTracking",value:function(){this._isNativePlatform()?this.optOutTrackingForNative(this.appId):this.taJs.optOutTracking()}},{key:"optOutTrackingAndDeleteUser",value:function(){this._isNativePlatform()?this.optOutTrackingAndDeleteUserForNative(this.appId):this.taJs.optOutTrackingAndDeleteUser()}},{key:"optInTracking",value:function(){this._isNativePlatform()?this.optInTrackingForNative(this.appId):this.taJs.optInTracking()}},{key:"setTrackStatus",value:function(e){this._isNativePlatform()?this.setTrackStatusForNative(e,this.appId):this.taJs.setTrackStatus(e)}},{key:"trackForNative",value:function(e,t,i,n){i=p.isDate(i)?p.formatDate(i):"",p.isUndefined(t)&&(t={}),t=p.extend(t,this.dynamicProperties?this.dynamicProperties():{}),t=p.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","track","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,JSON.stringify(t),i,n):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","track:properties:time:appId:",e,JSON.stringify(t),i,n)}},{key:"trackUpdateForNative",value:function(e,t){e.properties=p.extend(p.isUndefined(e.properties)?{}:e.properties,this.dynamicProperties?this.dynamicProperties():{}),e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackUpdate","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackUpdate:appId:",JSON.stringify(e),t)}},{key:"trackFirstEventForNative",value:function(e,t){e.properties=p.extend(p.isUndefined(e.properties)?{}:e.properties,this.dynamicProperties?this.dynamicProperties():{}),e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackFirstEvent","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackFirstEvent:appId:",JSON.stringify(e),t)}},{key:"trackOverwriteForNative",value:function(e,t){e.properties=p.extend(p.isUndefined(e.properties)?{}:e.properties,this.dynamicProperties?this.dynamicProperties():{}),e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackOverwrite","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackOverwrite:appId:",JSON.stringify(e),t)}},{key:"timeEventForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","timeEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","timeEvent:appId:",e,t)}},{key:"loginForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","login","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","login:appId:",e,t)}},{key:"logoutForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","logout","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","logout:",e)}},{key:"setSuperPropertiesForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setSuperProperties","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setSuperProperties:appId:",JSON.stringify(e),t)}},{key:"getSuperPropertiesForNative",value:function(e){var t="{}";return this._isAndroid()?t=jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getSuperProperties","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()&&(t=jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getSuperProperties:",e)),JSON.parse(t)}},{key:"unsetSuperPropertyForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","unsetSuperProperty","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","unsetSuperProperty:appId:",e,t)}},{key:"clearSuperPropertiesForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","clearSuperProperties","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","clearSuperProperties:",e)}},{key:"userSetForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userSet","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userSet:appId:",JSON.stringify(e),t)}},{key:"userSetOnceForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userSetOnce","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userSetOnce:appId:",JSON.stringify(e),t)}},{key:"userAppendForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userAppend","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userAppend:appId:",JSON.stringify(e),t)}},{key:"userUniqAppendForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userUniqAppend","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userUniqAppend:appId:",JSON.stringify(e),t)}},{key:"userAddForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userAdd","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userAdd:appId:",JSON.stringify(e),t)}},{key:"userUnsetForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userUnset","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userUnset:appId:",e,t)}},{key:"userDelForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userDel","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userDel:",e)}},{key:"flushForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","flush","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","flush:",e)}},{key:"authorizeOpenIDForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","authorizeOpenID","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","authorizeOpenID:appId:",e,t)}},{key:"identifyForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","identify","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","identify:appId:",e,t)}},{key:"initInstanceForNative",value:function(e){this._isAndroid()?(jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setCustomerLibInfo","(Ljava/lang/String;Ljava/lang/String;)V",h,l),jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","initWithConfig","(Ljava/lang/String;)V",JSON.stringify(e))):this._isIOS()&&(jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setCustomerLibInfoWithLibName:libVersion:",h,l),jsb.reflection.callStaticMethod("CocosCreatorProxyApi","initWithConfig:",JSON.stringify(e)))}},{key:"lightInstanceForNative",value:function(e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","lightInstance","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","lightInstance:",e):void 0}},{key:"startThinkingAnalyticsForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","startThinkingAnalytics","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","startThinkingAnalytics:",e)}},{key:"setDynamicSuperPropertiesForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setDynamicSuperProperties","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setDynamicSuperProperties:appId:",e,t)}},{key:"getDeviceIdForNative",value:function(e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getDeviceId","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getDeviceId:",e):void 0}},{key:"getDistinctIdForNative",value:function(e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getDistinctId","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getDistinctId:",e):void 0}},{key:"getAccountIdForNative",value:function(e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getAccountId","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getAccountId:",e):void 0}},{key:"getPresetPropertiesForNative",value:function(e){var t="{}";return this._isAndroid()?t=jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getPresetProperties","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()&&(t=jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getPresetProperties:",e)),JSON.parse(t)}},{key:"enableTrackingForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","enableTracking","(Ljava/lang/String;Ljava/lang/String;)V",e.toString(),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","enableTracking:appId:",e.toString(),t)}},{key:"optOutTrackingForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optOutTracking","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optOutTracking:",e)}},{key:"optOutTrackingAndDeleteUserForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optOutTrackingAndDeleteUser","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optOutTrackingAndDeleteUser:",e)}},{key:"optInTrackingForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optInTracking","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optInTracking:",e)}},{key:"setTrackStatusForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setTrackStatus","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setTrackStatus:appId:",e,t)}}]),e}();window.ThinkingAnalyticsAPI=G,window.ThinkingAnalyticsAPIForJS=W;var V=function(){function e(){o(this,e)}return u(e,null,[{key:"_shareInstance",value:function(e){return void 0!==this._instanceMaps[e]?this._instanceMaps[e]:void 0!==this._defaultInstance?this._defaultInstance:void 0}},{key:"init",value:function(e){var t=new G(e);t.init(),void 0!==t&&(void 0===this._defaultInstance&&(this._defaultInstance=t,this._instanceMaps={}),this._instanceMaps[e.appId]=t)}},{key:"lightInstance",value:function(e){return this._shareInstance(e).lightInstance()}},{key:"track",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).track(e.eventName,e.properties,e.time,e.onComplete)}},{key:"trackFirst",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).trackFirstEvent(e)}},{key:"trackUpdate",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).trackUpdate(e)}},{key:"trackOverwrite",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).trackOverwrite(e)}},{key:"timeEvent",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).timeEvent(e.eventName,e.time)}},{key:"userSet",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userSet(e.properties,e.time,e.onComplete)}},{key:"userSetOnce",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userSetOnce(e.properties,e.time,e.onComplete)}},{key:"userUnset",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userUnset(e.property,e.time,e.onComplete)}},{key:"userAdd",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userAdd(e.properties,e.time,e.onComplete)}},{key:"userAppend",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userAppend(e.properties,e.time,e.onComplete)}},{key:"userUniqAppend",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userUniqAppend(e.properties,e.time,e.onComplete)}},{key:"userDelete",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userDel(e.time,e.onComplete)}},{key:"setSuperProperties",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).setSuperProperties(e)}},{key:"unsetSuperProperty",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).unsetSuperProperty(e)}},{key:"clearSuperProperties",value:function(e){this._shareInstance(e).clearSuperProperties()}},{key:"getSuperProperties",value:function(e){return this._shareInstance(e).getSuperProperties()}},{key:"setDynamicSuperProperties",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).setDynamicSuperProperties(e)}},{key:"getPresetProperties",value:function(e){return this._shareInstance(e).getPresetProperties()}},{key:"login",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).login(e)}},{key:"logout",value:function(e){this._shareInstance(e).logout()}},{key:"setDistinctId",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).identify(e)}},{key:"getDistinctId",value:function(e){return this._shareInstance(e).getDistinctId()}},{key:"getAccountId",value:function(e){return this._shareInstance(e).getAccountId()}},{key:"getSDKVersion",value:function(){return"1.0.0"}},{key:"getDeviceId",value:function(e){return this._shareInstance(e).getDeviceId()}},{key:"flush",value:function(e){this._shareInstance(e).flush()}},{key:"setTrackStatus",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).setTrackStatus(e)}},{key:"ThinkingDataAPI",value:function(){return G}}]),e}();window.TDAnalytics=V,n.exports=V,e("default",n.exports)}),{})}}}));

System.register("chunks:///_virtual/tdanalytics.mg.cocoscreator.min.mjs_cjs=&original=.js",["./tdanalytics.mg.cocoscreator.min.js","./cjs-loader.mjs"],(function(t,a){var c,e;return{setters:[function(a){c=a.__cjsMetaURL;var e={};e.__cjsMetaURL=a.__cjsMetaURL,e.default=a.default,t(e)},function(t){e=t.default}],execute:function(){c||e.throwInvalidWrapper("./tdanalytics.mg.cocoscreator.min.js",a.meta.url),e.require(c)}}}));

System.register("chunks:///_virtual/TestScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BottleData.ts","./Defines.ts","./AudioManager.ts","./BundleManager.ts","./CfgManager.ts","./DataManager.ts","./ExceptionHandler.ts","./Log.ts","./UIFit.ts","./UIHelp.ts","./GameUtils.ts","./UIChallengeGameFinish.ts","./UIFlyThemeLayer.ts","./UIGameResult.ts","./UIGetGiftBox.ts","./UIGuideLayer.ts","./UILoadingLayer.ts","./UINewTypeGuideDialog.ts","./UIPermission.ts","./UIPropUseLayer.ts","./UIRankUpgrade.ts","./UIRebornDialog.ts","./BottleItem.ts","./LongBottleItem.ts","./PlatformManager.ts","./BottleItemPool.ts","./LongBottleItemPool.ts","./TAData.ts","./UIUtil.ts"],(function(t){var e,o,i,n,a,l,r,s,u,d,c,f,p,g,h,B,I,b,m,U,P,y,v,C,k,L,T,w,N,_,S,D,G,A,E,M,O,R,x,F,z,q,H,W,K,V,Y,j,Z,J;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,r=t.EditBox,s=t.Button,u=t.Label,d=t.Prefab,c=t.Node,f=t.Size,p=t.director,g=t.UITransform,h=t.Widget,B=t.Vec3,I=t.Component},function(t){b=t.CompleteType,m=t.BottleType},function(t){U=t.Sfx,P=t.GameDefine,y=t.PROP_ID,v=t.GuideType},function(t){C=t.default},function(t){k=t.BundleManager},function(t){L=t.default},function(t){T=t.default},function(t){w=t.ExceptionHandler},function(t){N=t.default},function(t){_=t.default},function(t){S=t.default},function(t){D=t.default},function(t){G=t.default},function(t){A=t.default},function(t){E=t.default},function(t){M=t.default},function(t){O=t.default},function(t){R=t.default},function(t){x=t.default},function(t){F=t.default},function(t){z=t.default},function(t){q=t.default},function(t){H=t.default},function(t){W=t.default},function(t){K=t.default},function(t){V=t.default},function(t){Y=t.default},function(t){j=t.default},function(t){Z=t.TAData},function(t){J=t.UIUtil}],execute:function(){var Q,X,$,tt,et,ot,it,nt,at,lt,rt,st,ut,dt,ct;a._RF.push({},"96d84+/OZdKWY/HfaoSoT1I","TestScene",void 0);var ft=l.ccclass,pt=l.property;t("TestScene",(Q=ft("TestScene"),X=pt(r),$=pt(s),tt=pt(u),et=pt(r),ot=pt(d),it=pt(c),Q((lt=e((at=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).testBottle=void 0,i(e,"et",lt,n(e)),i(e,"btn",rt,n(e)),i(e,"progress",st,n(e)),i(e,"dialogParamsEB",ut,n(e)),i(e,"bottlePrefab",dt,n(e)),e._authBtn=void 0,i(e,"testNode",ct,n(e)),e._dataMgr=T,e}o(e,t);var a=e.prototype;return a.onLoad=function(){_.initFit(new f(750,1334)),L.loadAll((function(){N.log("Config Loaded")})),V.initPlatformInfo(),this._dataMgr.createUser(),this._dataMgr.createPlayer(this._dataMgr.User.CurrPlayerId),T.createTA(),Z.Mgr.launch(),w.init(),k.loadPrefab(W.getUrl(),(function(t,e){e&&Y.setBottlePrefab(e)})),k.loadPrefab(K.getUrl(),(function(t,e){e&&j.setBottlePrefab(e)}))},a.start=function(){D.ListLiquidColors()},a.AddBottle=function(t){var e={subLevelIndex:0,liquids:t,isVideoBottle:!1,isUnknown:!1,keyIndex:2,unknowns:new Array(t.length).fill(0),isUnlockBottle:!1,isHiddenBottle:!1,unlockColor:0,unlockNeedBottle:0,skinId:0,isEditorBottle:!1,collectType:0,completeType:b.END,bottleType:m.COMMON},o=Y.getBottleItem(e);return o.node.setPosition(0,0),this.node.addChild(o.node),o.Init(t.length),o.UpdateDefaultUI(),o.UpdateDepth(0),o},a.AddLongBottle=function(t){var e={liquids:t,isEditorBottle:!1},o=j.getBottleItem(e);return o.node.setPosition(0,0),this.node.addChild(o.node),o.Init(t.length),o.UpdateDefaultUI(),o},a.update=function(t){},a.OnSliderChange=function(t){if(this.testBottle instanceof W){var e=120*t.progress;this.testBottle._ui.spr_bottle_bg.angle=-e,this.testBottle.pourRotation=-e}else{var o=.24;this.progress.string=o.toFixed(2),this.testBottle.liquidProgress=o}},a.OnSliderChange2=function(t){var e=1.2*t.progress;this.progress.string=e.toFixed(2),this.testBottle.liquidProgress=e},a.OnClickGeneratorBtn=function(){p.loadScene("WaterSortGenerator")},a.PlaySpine=function(){C.playEffect(U.SOUND_BUTTON),this.testBottle.PlayCompleteAnim()},a.PlaySpine2=function(){var t=Math.ceil(5*this.testBottle.liquidProgress);this.testBottle.PlayPourInAnim(D.GetLiquidColor(5),t),this.testBottle.PlayWaterUpAnim(D.GetLiquidColor(5),t)},a.ChangeColor=function(){var t=Number.parseInt(this.et.string);this.testBottle.Init(t);for(var e=[],o=0;o<t;o++)e.push(1+o);this.testBottle.SetColors(e),this.testBottle.UpdateDefaultUI(),this.testBottle.SetSwapEnable(!1)},a.UpdateColor=function(){this.testBottle._ui.mask_light.active=!1,this.testBottle._ui.mask_light.getComponent(g).anchorY=.5,this.testBottle._ui.mask_light.active=!0,this.testBottle._ui.mask_light.getComponent(h).updateAlignment()},a.CloneBottle=function(t){var e=S.CreateWidget(W,this.bottlePrefab,t.GetInitParams());return this.testBottle.node.parent.addChild(e.node),e._ui.layout_unknowns.active=!1,e._ui.spr_shadow.active=!1,e.getComponent(s).enabled=!1,e.getComponent(s).interactable=!1,e},a.AddProp=function(){this.testBottle instanceof W&&this.CloneBottle(this.testBottle).node.setPosition(this.testBottle.node.position.clone().add(new B(10,100,0)))},a.OnClickAddBottle=function(){this.testBottle&&(this.testBottle instanceof K?j.recycleBottleItem(this.testBottle):Y.recycleBottleItem(this.testBottle));var t=Number.parseInt(this.dialogParamsEB.string);isNaN(t)&&(t=3);for(var e=Array(t),o=0;o<e.length;o++)e[o]=o%10+1;this.testBottle=t>=P.LONG_BOTTLE_MIN_LENGTH?this.AddLongBottle(e):this.AddBottle(e)},a.TestRankDataReload=function(){},a.OpenUI=function(t,e){switch(e){case"UIGameResult":var o=Number.parseInt(this.dialogParamsEB.string);isNaN(o)&&(o=1);var i=D.GetLevelReward(o);null!=i&&(i.bg&&this._dataMgr.Player.ThemeList.unLockTheme(i.bg.id),i.prop&&this._dataMgr.Player.AddProp(i.prop.id,i.prop.count));var n=function(){V.getUserInfo((function(t){S.ShowUI(E,void 0,{isSuccess:!0,level:o,rewards:i,userInfo:t})}))};V.CheckNeedAuthUserInfo().then((function(t){t?n():S.ShowUI(F,void 0,{callback:n})}));break;case"UIChallengeGameFinish":var a=1==Number.parseInt(this.dialogParamsEB.string);S.ShowUI(G,void 0,{isSuccess:a,challengeDate:new Date(2025,2,3)});break;case"UINewTypeGuideDialog":var l=Number.parseInt(this.dialogParamsEB.string);isNaN(l)&&(l=v.COLOR_BOTTLE),S.ShowUI(x,void 0,{guideType:l});break;case"UIGuideLayer":var r=t.target;S.ShowUI(O,void 0,{clickRect:J.GetNodeWorldRect(r),callback:function(){N.log("callback")}});break;case"UIGetGiftBox":null!=(i={prop:{id:y.UNLOCK_BOTTLE,count:1}})&&(i.bg&&T.Player.ThemeList.unLockTheme(i.bg.id),i.prop&&T.Player.AddProp(i.prop.id,i.prop.count)),S.ShowUI(M,void 0,{showClaimBtn:!0,rewards:i});break;case"UIRankUpgrade":var s=Number.parseInt(this.dialogParamsEB.string);isNaN(s)&&(s=1),S.ShowUI(q,void 0,{rank:s});break;case"UILoadingLayer":S.ShowUI(R);break;case"UIRebornDialog":S.ShowUI(H,void 0,{totalNum:5,completeNum:2,hasVideoBottle:!0,claimCallback:function(){N.log("claimCallback")},closeCallback:function(){N.log("closeCallback")}});break;case"UIPropUseLayer":var u=Number.parseInt(this.dialogParamsEB.string);isNaN(u)&&(u=y.STEP_BACK),S.ShowUI(z,void 0,{propID:u});break;case"UIFlyThemeLayer":S.ShowUI(A,void 0,{startPosition:this.btn.node.worldPosition,bgID:1})}},e}(I)).prototype,"et",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=e(at.prototype,"btn",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=e(at.prototype,"progress",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=e(at.prototype,"dialogParamsEB",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=e(at.prototype,"bottlePrefab",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=e(at.prototype,"testNode",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=at))||nt));a._RF.pop()}}}));

System.register("chunks:///_virtual/Theme.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./DataManager.ts","./EventManager.ts","./Log.ts","./Utils.ts","./TAData.ts","./SaveData.ts"],(function(e){var t,n,a,s,i,r,h,o,u,d,c,f,l;return{setters:[function(e){t=e.createClass,n=e.inheritsLoose,a=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,i=e._decorator},function(e){r=e.GameEvent,h=e.EGameTipsType},function(e){o=e.default},function(e){u=e.default},function(e){d=e.default},function(e){c=e.default},function(e){f=e.TAData},function(e){l=e.SaveDataStr}],execute:function(){var _;s._RF.push({},"bbc1a+YGMdMyYCqeyPrmcJO","Theme",void 0);var v=i.ccclass,m=(i.property,e("Theme",function(){function e(){this._id=-1,this._bUsed=!1}return e.LoadTheme=function(t){var n=null,a=c.SplitInt(t,"|");return a.length>=2&&(n=e.CreateTheme(a[0],a[1])),n},e.CreateTheme=function(t,n){void 0===n&&(n=0);var a=new e;return a.Id=t,a.Used=0!=n,a},e.prototype.str=function(){return this._id+"|"+(this._bUsed?1:0)},t(e,[{key:"Id",get:function(){return this._id},set:function(e){this._id=e}},{key:"Used",get:function(){return this._bUsed},set:function(e){this._bUsed=e}}]),e}()));e("ThemeList",v("ThemeList")(_=function(e){function s(t){var n;return(n=e.call(this,t)||this)._data=new Map,n._has_newTheme=!1,n}n(s,e);var i=s.prototype;return i.load=function(e){var t=this;if(this._data.clear(),c.SplitStr(e,";").forEach((function(e){var n=m.LoadTheme(e);null!=n&&(n.Used||(t._has_newTheme=!0),t._data.set(n.Id,n))})),this._data.size<=0){var n=m.CreateTheme(0,1);null!=n&&n&&this._data.set(n.Id,n)}},i.str=function(){for(var e,t="",n=a(this._data.values());!(e=n()).done;){t+=""+e.value.str(),t+=";"}return t},i.getUnlockCount=function(){return this._data.size},i.isUsedById=function(e){return!!this._data.has(e)&&this._data.get(e).Used},i.setUsed=function(e){var t=this._data.get(e);if(t&&!t.Used){t.Used=!0;var n=this.isShowShopSign();this.HasNewTheme=n>0,this.dirty=!0,f.Mgr.sendEventThemeChange("bg","first_use",t.Id.toString())}},i.getUsedCount=function(){var e=0,t=this._data.values();if(t)for(var n,s=a(t);!(n=s()).done;){n.value.Used&&e++}return e},i.unLockTheme=function(e){if(!this._data.has(e)){var t=m.CreateTheme(e,0);null!=t&&(this._data.set(t.Id,t),this.HasNewTheme=!0,f.Mgr.sendEventThemeChange("bg","unlock",t.Id.toString())),this.dirty=!0,o.Player.saveData()}},i.useTheme=function(e){o.Player.ThemeId.val=e,this.setUsed(e),o.Player.saveData(),u.emit(r.EventChangeThemeChoose,e)},i.isUnLock=function(e){return this._data.has(e)},i.isShowShopSign=function(){for(var e=0,t=1;t<this._data.size;t++)this.isUsedById(t)||e++;return d.log("count ========="+e),e},t(s,[{key:"HasNewTheme",get:function(){return this._has_newTheme},set:function(e){e!=this._has_newTheme&&(this._has_newTheme=e,u.emit(r.EventGameTips,h.ETheme,e))}}]),s}(l))||_);s._RF.pop()}}}));

System.register("chunks:///_virtual/ThemeItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./GameAdMgr.ts","./DataManager.ts","./UIHelp.ts","./AudioManager.ts","./Defines.ts","./ABTestUtil.ts"],(function(e){var t,i,n,r,s,o,a,c,l,p,u,h,f,m,d,_,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,a=e.Node,c=e.Sprite,l=e.Color},function(e){p=e.GUIBase},function(e){u=e.GameAdMgr,h=e.EAdPlayType},function(e){f=e.default},function(e){m=e.default},function(e){d=e.default},function(e){_=e.Sfx},function(e){b=e.ABTestUtil}],execute:function(){var y,I,g,v,T,w,x,S,U,A,L,k,z,B,P,D,C,F;s._RF.push({},"293b3aMqO5HwbApUsFSbuTO","ThemeItem",void 0);var M=o.ccclass,G=o.property;e("default",(y=M("ThemeItem"),I=G({type:a}),g=G({type:a}),v=G({type:a}),T=G({type:a}),w=G({type:a}),x=G({type:a}),S=G({type:a}),y(((F=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"spr_bg",L,r(t)),n(t,"icon_sp",k,r(t)),n(t,"uselabel",z,r(t)),n(t,"video_sp",B,r(t)),n(t,"lock_sp",P,r(t)),n(t,"select_sp",D,r(t)),n(t,"used_sp",C,r(t)),t.cellIndex=0,t.chooseIndex=0,t}i(t,e);var s=t.prototype;return s.onInit=function(e){},s.onUIEnable=function(){},s.SetData=function(e,t,i){this.cellIndex=e,this.chooseIndex=0;for(var n=0;n<3;n++){var r=3*e+n,s=r<t,o=r<t?r:0,a=f.Player.ThemeList.isUnLock(r),p=!0;b.IsABTestC_V4()&&(p=f.Player.ThemeList.isUsedById(r)),0==r&&(a=!0),this.spr_bg[n].active=s,s&&(a?(m.SetSpriteFrame(this.spr_bg[n],"themeskin/Game_frame_lv"),this.icon_sp[n].getComponent(c).color=new l(255,255,255,255)):(m.SetSpriteFrame(this.spr_bg[n],"themeskin/Game_frame_hui"),this.icon_sp[n].getComponent(c).color=new l(255,255,255,128)),b.IsABTestC_V4()&&0==o&&(o="_challenge"),m.SetSpriteFrame(this.icon_sp[n],"shopbg/xiao"+o),this.video_sp[n].active=!a,this.lock_sp[n].active=!a,this.uselabel[n].active=i==r,this.select_sp[n].active=i==r,this.used_sp[n].active=!p&&a)}},s.toChooseItem=function(e,t){d.playEffect(_.SOUND_BUTTON);var i=parseInt(t);this.chooseIndex=3*this.cellIndex+i,this.used_sp[i].active&&(this.used_sp[i].active=!1);var n=this;f.Player.ThemeList.isUnLock(this.chooseIndex)?f.Player.ThemeList.useTheme(this.chooseIndex):u.getInstance().ShowRewardVideoAd(h.ad_video_theme,(function(e){e&&(f.Player.ThemeList.unLockTheme(n.chooseIndex),f.Player.ThemeList.useTheme(n.chooseIndex))}))},t}(p))._prefabUrl="widget/ThemeItem",F._className="ThemeItem",L=t((A=F).prototype,"spr_bg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(A.prototype,"icon_sp",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(A.prototype,"uselabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(A.prototype,"video_sp",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(A.prototype,"lock_sp",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(A.prototype,"select_sp",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(A.prototype,"used_sp",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=A))||U));s._RF.pop()}}}));

System.register("chunks:///_virtual/UI_GameMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MahjongItem.ts","./CommonUtils.ts","./GameModel.ts","./GameMacros.ts","./Log.ts"],(function(t){var e,a,i,n,o,r,s,l,p,m,u,h,f,M,g,c,d,C,v,y,S,D,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Prefab,l=t.Node,p=t.Size,m=t.Vec2,u=t.Vec3,h=t.UITransform,f=t.instantiate,M=t.Widget,g=t.Component,c=t.tween},function(t){d=t.MahjongItem},function(t){C=t.CommonUtils},function(t){v=t.default},function(t){y=t.CardPlayType,S=t.GameMacros,D=t.GameDiffMode},function(t){b=t.default}],execute:function(){var P,w,G,_,A,R,I;o._RF.push({},"7ef69Vw2N9CoqOTZYiR+jEW","UI_GameMap",void 0);var E=r.ccclass,B=r.property;t("UI_GameMap",(P=E("UI_GameMap"),w=B({type:s}),G=B({type:l}),P((R=e((A=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"mPrefabMahjongItem",R,n(e)),i(e,"mGameMapBg",I,n(e)),e.mMapRowCfg=0,e.mMapColCfg=0,e.mMapData=[],e.mFirstSelectCube=null,e.mSecondSelectCube=null,e.mMapSize=p.ZERO,e.SelectCardType=y.Normal,e.SelectCardNum=0,e}a(e,t);var o=e.prototype;return o.onLoad=function(){v.initGameModel(),this.initMapData(),this.initMapSize(),this.node.setScale(.6,.6,.6),this.node.on(l.EventType.MOUSE_DOWN,this.OnMouseDown,this)},o.start=function(){},o.update=function(t){},o.OnMouseDown=function(t){var e=t.getButton();b.log("button: "+e.toString());var a=new m;t.getUILocation(a);var i=new u(a.x,a.y);i=this.mGameMapBg.getComponent(h).convertToNodeSpaceAR(i),b.log("Button Pos = "+a.toString()),b.log("Button localPos = "+i.toString());var n=this.GetRowColByPos(i);if(v.isValidRowCol(n.x,n.y))if(0===e){if(this.SelectCardNum<=0)return;this.mMapData[n.x][n.y]&&(this.mMapData[n.x][n.y].node.destroy(),this.mMapData[n.x][n.y]=null),this.addCube(n.x,n.y,this.SelectCardNum)}else 2===e&&this.mMapData[n.x][n.y]&&(this.mMapData[n.x][n.y].node.destroy(),this.mMapData[n.x][n.y]=null)},o.initMap=function(){this.clearAllCubes();for(var t=v.getRowCfg(),e=v.getColCfg(),a=v.getMapInitTable(),i=0;i<t;++i)for(var n=0;n<e;++n){var o=i*e+n;if(o>=a.length){i=t;break}this.addCube(i,n,a[o])}},o.addCube=function(t,e,a,i){var n,o;if(void 0===i&&(i=y.Normal),!v.isValidRowCol(t,e))return null;var r=f(this.mPrefabMahjongItem);r.parent=this.mGameMapBg,r.position=this.getGridPos(t,e),null==(n=r.getComponent(d))||n.setNumber(a),null==(o=r.getComponent(d))||o.setCardType(i),r.setSiblingIndex(t*this.mMapColCfg+e);var s=r.getComponent(d);return this.mMapData[t][e]=s,s},o.initMapData=function(){this.mMapRowCfg=v.getRowCfg(),this.mMapColCfg=v.getColCfg(),this.initMapArray()},o.initMapArray=function(){this.mMapData=[];for(var t=0;t<this.mMapRowCfg;++t){this.mMapData[t]=[];for(var e=0;e<this.mMapColCfg;++e)this.mMapData[t][e]=null}},o.getAllCubes=function(){for(var t=[],e=0;e<this.mMapData.length;++e)for(var a=0;a<this.mMapData[e].length;++a)this.mMapData[e][a]&&t.push(this.mMapData[e][a]);return t},o.clearAllCubes=function(){for(var t=this,e=0;e<this.mMapData.length;++e)if(null!=this.mMapData[e]&&null!=this.mMapData[e])for(var a=function(){var a=t.mMapData[e][i];if(C.isNull(a))return 1;a.node.active=!1,c(a.node).delay(10).call((function(){a.node.destroy()})).start(),t.mMapData[e][i]=null},i=0;i<this.mMapData[e].length;++i)a();this.mFirstSelectCube=null,this.mSecondSelectCube=null},o.initMapSize=function(){var t=v.getGameMapSize();this.node.getComponent(h).contentSize=t},o.getGridPos=function(t,e){var a=v.getGameMapSize(),i=new u(0,0);return i.x=-a.width/2+(e+.5)*S.MAP_CUBE_SIZE.width+e*S.MAP_POS_SPACE_X+S.MAP_POS_PRE_X,i.y=a.height/2-(t+.5)*S.MAP_CUBE_SIZE.height-t*S.MAP_POS_SPACE_Y-S.MAP_POS_PRE_Y,i},o.getGridWorlPos=function(t,e){var a=this.getGridPos(t,e);return a=this.mGameMapBg.getComponent(h).convertToWorldSpaceAR(a)},o.GetRowColByPos=function(t){for(var e=new m(-1,-1),a=S.MAP_CUBE_SIZE,i=0;i<this.mMapRowCfg;++i)for(var n=0;n<this.mMapColCfg;++n){var o=this.getGridPos(i,n);if(Math.abs(t.x-o.x)<a.width/2&&Math.abs(t.y-o.y)<a.height/2){e=new m(i,n),i=this.mMapRowCfg;break}}return e},o.Editor_InitMap=function(t,e,a,i){var n,o;if(a.length==i.length){if(this.clearAllCubes(),8===t&&6===e)v.setGameDiffMode(D.Easy),this.node.setScale(.6,.6,.6);else if(10===t&&8===e)v.setGameDiffMode(D.Hard),this.node.setScale(.5,.5,.5);else{if(12!==t||10!==e)return;v.setGameDiffMode(D.Expert),this.node.setScale(.4,.4,.4)}var r=v.getRowCfg(),s=v.getColCfg();this.mMapRowCfg=r,this.mMapColCfg=s,this.initMapArray(),this.initMapSize(),this.node.updateWorldTransform(),this.mGameMapBg.updateWorldTransform(),null==(n=this.node.getComponent(M))||n.updateAlignment(),null==(o=this.mGameMapBg.getComponent(M))||o.updateAlignment();for(var l=0;l<r;++l)for(var p=0;p<s;++p){var m=l*s+p;if(m>=a.length){l=r;break}this.addCube(l,p,a[m],i[m])}}},e}(g)).prototype,"mPrefabMahjongItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(A.prototype,"mGameMapBg",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=A))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIABTestLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIHelp.ts","./ABTestUtil.ts","./auto_UIABTestLayer.ts","./ABItem.ts"],(function(t){var e,n,i,o,a,r,s,c,l,u,f,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Prefab},function(t){c=t.UIBase},function(t){l=t.default},function(t){u=t.ABTestUtil},function(t){f=t.default},function(t){I=t.default}],execute:function(){var d,h,p,U,y,b;a._RF.push({},"e3cedGBkUtBkI6QfFqHZOzV","UIABTestLayer",void 0);var _=r.ccclass,B=r.property;t("default",(d=_("UIABTestLayer"),h=B(s),d(((b=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this)._ui=void 0,i(e,"ItemPrefab",y,o(e)),e._callback=void 0,e}n(e,t);var a=e.prototype;return a.onInit=function(t){this._callback=t[0].callback},a.onUILoad=function(){var t=this;this._ui=this.node.addComponent(f),this.addInterlayer(),u.ABTests.forEach((function(e){var n=l.CreateWidget(I,t.ItemPrefab,{key:e});t._ui.content_scroll.addChild(n.node)}))},a.onUIStart=function(){},a.onUIEnable=function(){this.registerClick(this._ui.btn_ok,this.onClickOK,this)},a.onUIDisable=function(){},a.onUIDestroy=function(){this.onClose()},a.onClose=function(){l.CloseUI(e)},a.onClickOK=function(){l.CloseUI(e),this._callback&&this._callback()},e}(c))._prefabUrl="ui/UIABTestLayer",b._className="UIABTestLayer",y=e((U=b).prototype,"ItemPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=U))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./EventManager.ts","./Log.ts","./UIFit.ts","./UIHelp.ts"],(function(t){var n,e,i,o,a,s,l,r,c,u,f,h,p,_,y,d,g,I,v,m,E;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){i=t.cclegacy,o=t.sys,a=t.Label,s=t.Node,l=t.Button,r=t.EventHandler,c=t.Layers,u=t.Sprite,f=t.Color,h=t.UITransform,p=t.Vec3,_=t.tween,y=t.UIOpacity,d=t.Component},function(t){g=t.GameDefine},function(t){I=t.default},function(t){v=t.default},function(t){m=t.default},function(t){E=t.default}],execute:function(){i._RF.push({},"8fc44oAlEJLaKobFz7vsr/K","UIBase",void 0);var C=g.FRAME_TIME,U=t("ViewZorder",(function(){}));U.Scene=1,U.MenuPanel=2,U.UI=3,U.Dialog=4,U.Tips=5,U.Guide=6,U.Notice=7,U.Loading=8;var L=t("GUIBase",function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._notifyEventList=void 0,n._onClickList=void 0,n}n(e,t),e.getUrl=function(){return"prefab/"+this._prefabUrl},e.getName=function(){return this._className};var i=e.prototype;return i.init=function(t){this.onInit(t)},i.onLoad=function(){(this._notifyEventList=new Map,this._onClickList=new Map,o.os==o.OS.ANDROID&&o.platform==o.Platform.BYTEDANCE_MINI_GAME)&&this.node.getComponentsInChildren(a).forEach((function(t){t.isBold=!1}));this.onUILoad()},i.start=function(){this.onUIStart()},i.onEnable=function(){this.onUIEnable()},i.onDisable=function(){this.onUIDisable(),this._notifyEventList.forEach((function(t,n){I.off(n,t)})),this._notifyEventList.clear()},i.onDestroy=function(){this.onUIDestroy()},i.onInit=function(t){},i.onUILoad=function(){},i.onUIStart=function(){},i.onUIEnable=function(){},i.onUIDisable=function(){},i.onUIDestroy=function(){},i.registerEvent=function(t,n){var e=I.on(t,n.bind(this));this._notifyEventList.has(t)||this._notifyEventList.set(t,e)},i.registerClick=function(t,n,e){if(t&&t.isValid){if(this._onClickList.has(t.name)){var i=this._onClickList.get(t.name);i._node.off(s.EventType.TOUCH_END,i._callback,i._target)}t.on(s.EventType.TOUCH_END,n,e||this),this._onClickList.set(t.name,{_node:t,_callback:n,_target:e||this})}},i.unRegisterClick=function(t){if(t&&t.isValid&&this._onClickList.has(t.name)){var n=this._onClickList.get(t.name);n._node.off(s.EventType.TOUCH_END,n._callback,n._target),this._onClickList.delete(t.name)}},i.unRegisterAllClick=function(){this._onClickList.forEach((function(t,n){t._node.off(s.EventType.TOUCH_END,t._callback,t._target)})),this._onClickList.clear()},i.registerButton=function(t,n,e,i){var o=t.getComponent(l);if(o){var a=new r;a.target=this.node,a.component=n,a.handler=e.name,"number"==typeof i&&(i=i.toString()),a.customEventData=i,o.clickEvents.push(a)}else v.error("registerButton is not button Component!")},e}(d));L._prefabUrl=void 0,L._className=void 0;t("UIBase",function(t){function i(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._interlayer=null,n.mUITag=void 0,n}n(i,t);var o=i.prototype;return o.onUILoad=function(){},o.onDestroy=function(){t.prototype.onDestroy.call(this)},o.onClose=function(){},o.addInterlayer=function(t){if(void 0===t&&(t=180),!this._interlayer){this._interlayer=new s("interlayer"),this._interlayer.layer=c.Enum.UI_2D;var n=this._interlayer.addComponent(u);n&&(n.trim=!1,n.sizeMode=0,n.color=new f(0,0,0,t));var e=this._interlayer.getComponent(h);e&&e.setContentSize(m._DEFAULT_W,m._DEFAULT_H),this._interlayer.on(s.EventType.TOUCH_END,this.onInterClick,this),this._interlayer.parent=this.node,this._interlayer.setSiblingIndex(0),this._interlayer.setScale(p.ONE.clone().multiplyScalar(3)),E.SetSpriteFrame(this._interlayer,"default_sprite_splash",(function(){}))}},o.onInterClick=function(){},o.runOpenAni=function(t,n){if(t&&t.isValid){E.SetOpacity(t,0);var e=t.scale.clone();_(t).to(0,{scale:p.ONE.clone().multiplyScalar(.4)},{easing:"sineInOut"}).call((function(){_(t.getComponent(y)).to(7*C,{opacity:255}).start()})).to(7*C,{scale:e.clone().multiplyScalar(1.03)},{easing:"sineInOut"}).to(5*C,{scale:e.clone().multiplyScalar(.98)},{easing:"sineInOut"}).to(4*C,{scale:e},{easing:"sineInOut"}).call((function(){n&&n()})).start()}},o.runCloseAni=function(t,n,e){if(void 0===e&&(e=!0),t&&t.isValid){e&&this.unRegisterAllClick();var i=t.scale.clone();t.setScale(p.ONE),E.SetOpacity(t,255),_(t).call((function(){_(t.getComponent(y)).delay(5*C).to(4*C,{opacity:0},{easing:"sineInOut"}).start()})).to(4*C,{scale:i.clone().multiplyScalar(1.07)},{easing:"sineInOut"}).to(6*C,{scale:i.clone().multiplyScalar(.7)},{easing:"sineInOut"}).call((function(){n&&n()})).start()}},o.runFadeInAni=function(t,n){t&&t.isValid&&(E.SetOpacity(t,0),_(t.getComponent(y)).to(7*C,{opacity:255},{easing:"sineInOut"}).call((function(){n&&n()})).start())},o.runFadeOutAni=function(t,n,e){void 0===e&&(e=15*C),t&&t.isValid&&(E.SetOpacity(t,255),_(t.getComponent(y)).to(e,{opacity:0},{easing:"sineInOut"}).call((function(){n&&n()})).start())},e(i,[{key:"uiTag",get:function(){return this.mUITag},set:function(t){this.mUITag=t}}]),i}(L));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIChallengeGameFinish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./EventManager.ts","./Log.ts","./UIBase.ts","./UIHelp.ts","./auto_UIChallengeGameFinish.ts","./UIChallengeGameLayer.ts","./UIHallLayer.ts"],(function(e){var t,i,n,s,o,a,c,l,u,h,_,r,p,f,g,d,m,S,C,y;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,s=e.Label,o=e.tween,a=e.UIOpacity,c=e.Vec3,l=e.sp,u=e.Color},function(e){h=e.GameDefine,_=e.Sfx,r=e.GameEvent},function(e){p=e.default},function(e){f=e.default},function(e){g=e.default},function(e){d=e.UIBase},function(e){m=e.default},function(e){S=e.default},function(e){C=e.default},function(e){y=e.default}],execute:function(){var v,I;i._RF.push({},"ce6a5S89vJHOLOdXW9gj37F","UIChallengeGameFinish",void 0);var U=["怎会如此？","成功与我擦肩而过","再接再厉！"],b=1.5*h.FRAME_TIME,O=n.ccclass;n.property,e("default",O("UIChallengeGameFinish")(((I=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._ui=void 0,t._isSuccess=!1,t._challengeDate=void 0,t._interactive=!1,t}t(i,e);var n=i.prototype;return n.onInit=function(e){var t=e[0];this._isSuccess=t.isSuccess,this._challengeDate=t.challengeDate,g.log(this._challengeDate)},n.onUILoad=function(){var e,t=this;if(this._ui=this.node.addComponent(S),this.addInterlayer(),this._ui.node_fail_btns.active=!this._isSuccess,this._ui.node_success_btns.active=this._isSuccess,this._ui.node_result_spine.active=this._isSuccess,this._ui.spr_result_icon.active=!this._isSuccess,!this._isSuccess){var i=Math.floor(3*Math.random()),n=U[i];this._ui.label_result_icon_desc.getComponent(s).string=n,m.SetSpriteFrame(this._ui.spr_result_icon,"finish/shibai"+(i+1))}this._ui.label_result_desc.getComponent(s).string=this._isSuccess?"恭喜挑战成功，完成当日挑战！":"差一点点，再努力试试吧！";var c=this;this._interactive=!1,m.SetOpacity(this._interlayer,0),o(null==(e=this._interlayer)?void 0:e.getComponent(a)).to(7*b,{opacity:255}).start(),this.scheduleOnce((function(){c.playGameResultAni()}),7*b),this._isSuccess?this.showComponentScale(this._ui.node_result_icon,0):this.showComponent(this._ui.node_result_icon,0),this.showComponent(this._ui.node_result_desc,3*b),this.showComponent(this._ui.node_btns,7*b);var l=12*b;this.scheduleOnce((function(){t._interactive=!0}),l),this._isSuccess?p.playEffect(_.SOUND_GAME_WIN):p.playEffect(_.SOUND_GAME_FAIL)},n.showComponent=function(e,t){var i=c.ONE;m.SetOpacity(e,0),o(e.getComponent(a)).delay(12*b+t).to(7*b,{opacity:255}).start(),o(e).to(0,{scale:i.clone().multiplyScalar(.4)}).delay(12*b+t).to(7*b,{scale:i.clone().multiplyScalar(1.03)},{easing:"sineInOut"}).to(5*b,{scale:i.clone().multiplyScalar(.98)},{easing:"sineInOut"}).to(4*b,{scale:i},{easing:"sineInOut"}).start()},n.showComponentScale=function(e,t){var i=c.ONE;m.SetOpacity(e,255),e.scale=c.ZERO,o(e).to(0,{scale:c.ZERO}).delay(12*b+t).to(7*b,{scale:i.clone().multiplyScalar(1.03)},{easing:"sineInOut"}).to(5*b,{scale:i.clone().multiplyScalar(.98)},{easing:"sineInOut"}).to(4*b,{scale:i},{easing:"sineInOut"}).start()},n.playGameResultAni=function(){if(this._ui.spine_banner.active=!0,this._isSuccess){this._ui.spine_banner.getComponent(l.Skeleton).setAnimation(0,"chenggong1",!1),this._ui.spine_banner.getComponent(l.Skeleton).addAnimation(0,"chenggong2",!0);var e=this;this._ui.spine_caidai.active=!0,this._ui.spine_caidai.getComponent(l.Skeleton).color=new u(255,255,255,0),o(this._ui.spine_caidai.getComponent(l.Skeleton)).delay(1.5).call((function(){e._ui.spine_caidai.getComponent(l.Skeleton).setAnimation(0,"idle",!0)})).to(1,{color:u.WHITE}).start(),this._ui.spine_result.getComponent(l.Skeleton).setAnimation(0,"2",!0),this._ui.spine_bg_light.getComponent(l.Skeleton).setAnimation(0,"1",!1),this._ui.spine_bg_light.getComponent(l.Skeleton).addAnimation(0,"2",!0)}else this._ui.spine_banner.getComponent(l.Skeleton).setAnimation(0,"zhanbai_1",!1),this._ui.spine_banner.getComponent(l.Skeleton).addAnimation(0,"zhanbai_2",!0)},n.onUIStart=function(){},n.onUIEnable=function(){this.registerClick(this._ui.btn_retry,this.onClickRetry),this.registerClick(this._ui.btn_back,this.onClickBack),this.registerClick(this._ui.btn_continue,this.onClickBack)},n.onUIDisable=function(){},n.onUIDestroy=function(){this.onClose()},n.onClose=function(){m.CloseUI(i)},n.onClickRetry=function(){var e=this;this._interactive&&(p.playEffect(_.SOUND_BUTTON),this.runCloseAni(this.node,(function(){e.onClose(),f.emit(r.EventGameSettle,!1)})))},n.onClickBack=function(){var e=this;this._interactive&&(p.playEffect(_.SOUND_BUTTON),m.ShowUI(y,(function(){m.CloseUI(C)}),{challengeDate:this._challengeDate,isSuccess:this._isSuccess}),this.runCloseAni(this.node,(function(){e.onClose()})))},i}(d))._prefabUrl="ui/UIChallengeGameFinish",I._className="UIChallengeGameFinish",v=I))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIChallengeGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelMapLoader.ts","./BottleData.ts","./StepRecord.ts","./Defines.ts","./AudioManager.ts","./CfgManager.ts","./DataManager.ts","./Log.ts","./UIHelp.ts","./Utils.ts","./GameAdMgr.ts","./GameUtils.ts","./ABTestUtil.ts","./BottleItemPool.ts","./TAData.ts","./UIUtil.ts","./VibrateUtil.ts","./auto_UIChallengeGameLayer.ts","./BottleItem.ts","./ChallengeBottleRackItem.ts","./LongBottleItem.ts","./BaseUIGameLayer.ts","./UIChallengeGameFinish.ts","./UIHallSetting.ts","./UINewTypeGuideDialog.ts","./UIPropUseLayer.ts","./UIRebornDialog.ts"],(function(t){var e,o,i,n,l,s,a,r,h,c,u,_,p,d,f,C,g,v,m,T,B,b,y,S,k,E,G,P,w,L,U,M,O,I,A,V,D,N,R,x,F,H,K,W,z,X,Y,j;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,n=t.UIOpacity,l=t.UITransform,s=t.view,a=t.Label,r=t.randomRangeInt,h=t.tween,c=t.Vec3,u=t.Tween,_=t.ProgressBar,p=t.Sprite,d=t.Color},function(t){f=t.LevelMapLoader},function(t){C=t.CompleteType,g=t.BottleType},function(t){v=t.StepRecord},function(t){m=t.GameDefine,T=t.GameEvent,B=t.Debug,b=t.PROP_ID,y=t.Sfx,S=t.GameType},function(t){k=t.default},function(t){E=t.default},function(t){G=t.default},function(t){P=t.default},function(t){w=t.default},function(t){L=t.default},function(t){U=t.GameAdMgr,M=t.EAdPlayType},function(t){O=t.default},function(t){I=t.ABTestUtil},function(t){A=t.default},function(t){V=t.TAData},function(t){D=t.UIUtil},function(t){N=t.VibrateUtil},function(t){R=t.default},function(t){x=t.default},function(t){F=t.default},function(t){H=t.default},function(t){K=t.BaseUIGameLayer},function(t){W=t.default},function(t){z=t.default},function(t){X=t.default},function(t){Y=t.default},function(t){j=t.default}],execute:function(){var q,Q;o._RF.push({},"36137mXz8xNi7KKcaXYImR3","UIChallengeGameLayer",void 0);var Z=m.MOVE_BOTTLE_TIME_SCALE,J=m.FRAME_TIME,$=m.LIQUID_SIZE,tt=t("ADD_TIME_PROP_TIME",120),et=i.ccclass;i.property,t("default",et("UIChallengeGameLayer")(((Q=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this)._ui=void 0,e._rackList=[],e._levelMap=[],e._stepRecords=new Map,e._levelCfg=null,e._levelMapCfg=null,e._pickLongBottle=!1,e._isStucked=!1,e._selectedBottle=null,e._hasTimer=!0,e._remainTime=0,e._isGameStart=!1,e._isPaused=!1,e._isShowingAd=!1,e._isGameOver=!1,e._curDayId=1,e._isSuccess=!1,e._stepCount=0,e._propTimes=0,e._isVanishingBottle=!1,e._vanishColorPropVideoCounts=0,e._vanishColorPropUseCounts=0,e._unlockBottleFreeCounts=0,e._unlockBottleVideoCounts=0,e._unlockBottlePropCounts=0,e._stepBackPropCounts=0,e._addTimeCount=0,e._rebornTimes=0,e._rebornShowTimes=0,e._watchVideoCount=0,e._initCollectCount=0,e._mapScale=1,e._maxShowHeight=-1,e._challengeDate=void 0,e._isTestLevel=!1,e._showPropHintFingerTimer=10,e._levelTime=0,e._minutes=0,e._seconds=0,e._checkComplete=new Map,e._progressTimerTween=void 0,e._progressLabelTween=void 0,e._toastTween=void 0,e}e(o,t);var i=o.prototype;return i.onInit=function(t){var e,o;this.addInterlayer(),w.SetOpacity(this._interlayer,0),this._isTestLevel=null==(e=t[0])?void 0:e.isTestLevel,this._challengeDate=null==(o=t[0])?void 0:o.challengeDate},i.onUILoad=function(){this._ui=this.node.addComponent(R),this.UpdateBottleContentSize(),this._ui.node_root.getComponent(n).opacity=0},i.UpdateBottleContentSize=function(){this.node.getComponent(l).setContentSize(s.getVisibleSize())},i.onUIEnable=function(){this.registerEvent(T.EventGameSettle,this.OnGameSettleEvent),this.registerEvent(T.EventPropCountChange,this.UpdateProps),this.registerEvent(T.EventGameGiveUp,this.OnGameGiveUp),this.registerEvent(T.EventWindowResize,this.OnWindowResize),this.registerClick(this._ui.btn_setting,this.OnClickSetting),this.registerClick(this._ui.btn_clear_color,this.OnClickVanishColor),this.registerClick(this._ui.btn_step_back,this.OnClickStepBack),this.registerClick(this._ui.btn_unlock_bottle,this.OnClickUnlockBottle),B.TestButton&&(this.registerClick(this._ui.spr_title_bg,this.ShowStartAnim),this.registerEvent(T.EventGameSkipToLevel,this.onTestSkipToLevel),this.registerEvent(T.EventGameSkip,this.OnTestSkip),this.registerEvent(T.EventSubLevelSkip,this.OnTestSkipSubLevel),this.registerEvent(T.EventGameReduceTime,this.OnTestReduceTime))},i.onUIDestroy=function(){},i.start=function(){var t=this._isTestLevel?-1:O.GetChallengeDayIdByDate(this._challengeDate);this.StartGame(t,!1),V.Mgr.sendChallengeGameStart("NewDeal",t),this.UpdateProps()},i.update=function(t){if(this._isGameStart&&!this._isGameOver&&!this._isPaused&&!this._isShowingAd){if(this._showPropHintFingerTimer-=t,this._remainTime-=t,this._levelTime+=t,this._hasTimer&&this._remainTime<=0)return this._isPaused=!0,void this.DoReborn();var e=this._remainTime;if(this._hasTimer){var o=Math.floor(e/60),i=Math.floor(e%60);this._minutes==o&&this._seconds==i||(this._minutes=o,this._seconds=i,this._ui.label_timer.getComponent(a).string=o.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0"))}this.CheckShowUsePropFinger()}},i.CheckShowUsePropFinger=function(){if(this._isStucked&&this._showPropHintFingerTimer<=0){var t=[],e=this.CanUnlockVideoBottle(),o=this.CanVanishColor(),i=this.CanStepBack();if(e?t.push(b.UNLOCK_BOTTLE):o?t.push(b.VANISH_COLOR):i&&t.push(b.STEP_BACK),t.length>0){var n=t[r(0,t.length)];this.ShowUsePropFinger(n)}}},i.ShowInterLayer=function(){var t;null==(t=this._interlayer)||t.setSiblingIndex(10)},i.HideInterLayer=function(){var t;null==(t=this._interlayer)||t.setSiblingIndex(0)},i.StartGame=function(t,e){var o=this;if(P.log("StartGame dayId:"+t),this._curDayId=t,this.InitLevel(t),this._isStucked=!1,this._levelTime=0,this._stepCount=0,this._propTimes=0,this._watchVideoCount=0,this._rebornTimes=0,this._rebornShowTimes=0,this._vanishColorPropVideoCounts=0,this._vanishColorPropUseCounts=0,this._unlockBottleFreeCounts=0,this._unlockBottleVideoCounts=0,this._unlockBottlePropCounts=0,this._stepBackPropCounts=0,this._addTimeCount=0,this._remainTime=this._levelCfg.time,this._stepRecords.clear(),this._initCollectCount=this.GetLongBottleCollectCount(),this._isSuccess=!1,this._isGameOver=!1,this._isPaused=!1,this._isShowingAd=!1,this._isGameStart=!1,this._showPropHintFingerTimer=10,this._hasTimer=-1!=this._levelCfg.time,this._selectedBottle=null,this._hasTimer){this._ui.spr_title_bg.active=!0;var i=Math.floor(this._remainTime/60),l=Math.floor(this._remainTime%60);this._ui.label_timer.getComponent(a).string=i.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")}else this._ui.spr_title_bg.active=!1;var s=this;this.scheduleOnce((function(){o._ui.node_root.getComponent(n).opacity=255})),this.ShowStartAnim(e),this.CheckProgress(0,!1),this.UpdateHiddenBottles();var r=24*J;this.ShowInterLayer(),this.scheduleOnce((function(){s.CheckShowGuideDialog()}),r),this.CheckVanishColorEnable(),this.CheckUnlockVideoBottleEnable(),this.CheckStepBackEnable()},i.ShowStartAnim=function(t){w.SetOpacity(this._ui.node_root_bottle,255),this._isGameStart=!1,this.ShowSingleLevelStartAnim()},i.ShowSingleLevelStartAnim=function(){var t=this;this._rackList.forEach((function(t){t._ui.spr_rack_bg.getComponent(n).opacity=0,t._bottleList.forEach((function(t){t.node.getComponent(n).opacity=0}))})),this._ui.btn_setting.getComponent(n).opacity=0,w.SetOpacity(this._ui.label_timer,0),this.scheduleOnce((function(){t._rackList.forEach((function(t,e){var o=t._ui.spr_rack_bg.position.clone();h(t._ui.spr_rack_bg).to(0,{position:new c(o.x,o.y-30)}).delay(2*e*J).call((function(){var e=t._ui.spr_rack_bg.getComponent(n);h(e).to(0,{opacity:0}).to(6*J,{opacity:255}).start()})).to(10*J,{position:o}).start(),t._bottleList.forEach((function(t,o){var i=t.node.getComponent(n);h(i).delay((e+o)*J).to(0,{opacity:0}).delay(4*J).to(6*J,{opacity:255}).start();var l=t.node.position.clone();h(t.node).delay((e+o)*J).to(0,{position:new c(l.x+20,l.y)}).delay(4*J).to(5*J,{position:new c(l.x-3,l.y)}).to(8*J,{position:l}).start(),t instanceof x&&h(t._ui.spr_lock.getComponent(n)).to(0,{opacity:0}).delay((e+o)*J).delay(5*J).call((function(){t.UpdateLockSpine()})).to(6*J,{opacity:255}).start()}))}));var e=t._ui.btn_setting.position.clone();h(t._ui.btn_setting).to(0,{position:new c(e.x+10,e.y)}).to(12*J,{position:e}).start(),h(t._ui.btn_setting).to(0,{scale:c.ONE.clone().multiplyScalar(.5)}).to(10*J,{scale:c.ONE.clone().multiplyScalar(1.05)}).to(6*J,{scale:c.ONE.clone()}).start();var o=t._ui.btn_setting.getComponent(n);h(o).to(0,{opacity:0}).to(10*J,{opacity:255}).start()})),this._ui.layout_props.children.forEach((function(t,e){h(t).to(0,{scale:c.ONE.clone().multiplyScalar(.62)}).delay(2*e*J).delay(2*J).to(8*J,{scale:c.ONE.clone().multiplyScalar(1.05)}).to(6*J,{scale:c.ONE.clone()}).start(),h(t.getComponent(n)).to(0,{opacity:0}).delay(2*e*J).to(2*J,{opacity:255}).start()})),h(this._ui.label_timer.getComponent(n)).delay(6*J).to(4*J,{opacity:255}).start(),h(this._ui.node_title).to(0,{scale:c.ONE.clone().multiplyScalar(.5)}).to(8*J,{scale:c.ONE.clone().multiplyScalar(1.05)}).to(4*J,{scale:c.ONE.clone()}).start(),h(this._ui.node_title.getComponent(n)).to(0,{opacity:0}).to(8*J,{opacity:255}).start(),h(this._ui.progress_timer).to(0,{scale:c.ONE.clone().multiplyScalar(.5)}).delay(3*J).to(8*J,{scale:c.ONE.clone().multiplyScalar(1.05)}).to(3*J,{scale:c.ONE.clone().multiplyScalar(1)}).start(),h(this._ui.progress_timer.getComponent(n)).to(0,{opacity:0}).delay(3*J).to(8*J,{opacity:255}).start()},i.DelayCheckShowGuideDialog=function(){var t=this;this.scheduleOnce((function(){t.CheckShowGuideDialog()}),.1)},i.CheckShowGuideDialog=function(){var t=this.GetNextGuideType();t?(G.User.setIsShowNewTypeDialogGuide(t),w.ShowUI(X,void 0,{guideType:t,closeCallback:this.DelayCheckShowGuideDialog.bind(this)})):this.HideInterLayer()},i.GetNextGuideType=function(){return O.GetMapGuideType(this._levelMap,this._pickLongBottle)},i.ShouldShowGuideDialog=function(){return null!=this.GetNextGuideType()},i.InitLevel=function(t){var e;if(this._ui.label_title.getComponent(a).string=this._challengeDate.getMonth()+1+"月"+this._challengeDate.getDate()+"日",this._levelCfg=f.getChallengeLevelConfig(t),null!=this._levelCfg){var o=f.getChallengeColorTypeCount(t);O.RandomShuffleLiquidColors(o,this._levelCfg.levels.length);var i=this._levelCfg.levels[0];i&&(this._levelMapCfg=f.getChallengeLevelMapConfig(i),this._levelMap=f.getChallengeFullLevelMap(i),this.InitSubLevel()),this._pickLongBottle=1==(null==(e=this._levelMapCfg)?void 0:e.pickLongBottle),this._ui.node_anim_bottle.scale=c.ONE.clone().multiplyScalar(this._mapScale)}},i.InitSubLevel=function(){var t=this;if(this._levelCfg&&this._levelMapCfg){var e=this._ui.node_root_bottle;if(e){var o=this._levelMapCfg;if(null!=this._levelCfg&&null!=o){var i=this._levelMap;if(this.UpdateRackSize(),null!=i&&i.length>0){var n,l=i.length;null==(n=this._rackList)||n.forEach((function(t){t.RecycleBottles(),t.node.removeFromParent(),t.node.destroy()})),this._rackList=[];for(var s=0;s<l;s++){var a={index:s,bottleData:i[s],maxShowHeight:this._maxShowHeight,onClickListener:function(e,o,i){t.OnBottleClick(i)}},r=w.CreateWidget(F,this.bottleRackPrefab,a);r.node.setPosition(0,0),e.addChild(r.node),this._rackList.push(r)}}}}}},i.OnWindowResize=function(){this.UpdateBottleContentSize(),this.UpdateRackSize()},i.UpdateRackSize=function(){var t=O.CalcChallengeMapAdjust(this._levelMap);this._mapScale=t.mapScale,this._maxShowHeight=t.maxShowHeight;var e=this._ui.node_root_bottle,o=c.ONE.clone().multiplyScalar(this._mapScale);e.setScale(o),e.setPosition(0,.5*-t.maxShowHeight*this._mapScale+30),this._ui.node_anim_bottle.scale=o},i.OnClickVanishColor=function(){if(k.playEffect(y.SOUND_BUTTON),!this._isGameOver&&!this._isVanishingBottle)if(this.CanVanishColor()){var t=this.GetVanishColors();if(null!=t&&0!=t.length)if(this.HideBubbles(),this._isGameStart=!0,V.Mgr.sendEventButton("button_vanish_color"),G.Player.GetPropCount(b.VANISH_COLOR)<=0){this._isShowingAd=!0;var e=this;U.getInstance().ShowRewardVideoAd(M.ad_video_vanish_color,(function(t){e._isShowingAd=!1,t&&(e.AddWatchVideoCount(),e._vanishColorPropVideoCounts++,V.Mgr.sendChallengeGameGetProp(e._curDayId,e._stepCount,b.VANISH_COLOR,"video"),e.VanishColor())}),(function(){V.Mgr.sendChallengeGameAd(e._curDayId,e._stepCount,M.ad_video_vanish_color.toString())}))}else G.Player.UseProp(b.VANISH_COLOR,1),this.VanishColor();else this.ToastTips("该状态下不可使用此道具")}else this.ToastPropsNotEnough()},i.VanishColor=function(){this.DoVanishColor()},i.GetVanishColors=function(){var t,e=this,o=this.GetCollectedCollors(),i=this.GetCollectedKeysCount(),n=[];this._pickLongBottle||this._levelMap.forEach((function(t){t.forEach((function(t){t.unlockColor>0&&!o.includes(t.unlockColor)&&n.push(t.unlockColor),t.segment>=m.LONG_BOTTLE_MIN_LENGTH&&n.push(t.showingBottle.bottle[0])}))}));var l=[],s=new Map;if(this._levelMap.forEach((function(t,o){t.forEach((function(t,l){0==t.unlockId||t.unlockId>=i?t.bottles.forEach((function(t,i){var a=e.GetBottleTopTypeAndCount(t.bottle),r=a[0],h=a[1];r>0&&(h<t.bottle.length||t.complete_type==C.NEVER||t.complete_type==C.EMPTY_NEXT)&&t.bottle.forEach((function(t,e){t>0&&-1==n.indexOf(t)&&(s.has(t)||s.set(t,[]),s.get(t).push([o,l,i,e]))}))})):P.log("瓶子锁定",t)}))})),this._levelMap.forEach((function(t,e){t.forEach((function(t,e){t.bottles.forEach((function(e,o){var i;e.collect_type>0&&t.bottles[o+1]&&(((null==(i=s.get(e.collect_type))?void 0:i.length)||0)>0&&(l[e.collect_type]?l[e.collect_type]++:l[e.collect_type]=1))}))}))})),s.size<=0)return[];var a=s,r=Array.from(a.keys()),h=null==(t=this._levelMapCfg)?void 0:t.segment;if(!h)return[];for(var c=0;c<r.length;c++){var u,_=r[c];((null==(u=s.get(_))?void 0:u.length)||0)<h&&a.delete(_)}r=Array.from(a.keys()),P.log("colorTypes:",r),P.log("colorBottles:",l),l.forEach((function(t,e){e&&t&&r.splice(r.indexOf(e),1)})),P.log("colorTypes:",r);var p=r[Math.floor(Math.random()*r.length)];return P.log("randomColor:",p),a.get(p)},i.DoVanishColor=function(){var t,e=this,o=(null==(t=this._levelMapCfg)?void 0:t.segment)||0,i=this.GetVanishColors();if(!(null==i||i.length<o)){this._selectedBottle=null,this.UpdateSelectedBottle(void 0,!0),this._stepRecords.clear(),this.CheckStepBackEnable(),this._isStucked=!1,this._propTimes++,this._vanishColorPropUseCounts++,this.CheckVanishColorEnable(),G.TA.TotalUseTools.val++,G.TA.saveData(),V.Mgr.sendChallengeGameUseProp(this._curDayId,this._stepCount,b.VANISH_COLOR,this._propTimes),L.shuffleArray(i);var n=new Array;i.forEach((function(t){-1==n.findIndex((function(e){return e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]}))&&n.push([t[0],t[1],t[2]])}));for(var l=n.length>=o,s=new Array,a=0,r=[],h=function(){var t=i.pop(),o=t[0],n=t[1],h=t[2],c=t[3];if(!l||-1==s.findIndex((function(t){return t[0]==o&&t[1]==n&&t[2]==h}))){P.log("vanishColor: deleteColor",o,n,h,c,e._levelMap[o][n].bottles[h].bottle[c]),e._levelMap[o][n].bottles[h].bottle[c]=0,s.push([o,n,h]),a++;var u=e._levelMap[o][n].clone();r.push({index:[o,n,h],data:u,remainDepth:e._levelMap[o][n].remainDepth})}};a<o;)h();s.forEach((function(t){for(var o=e._levelMap[t[0]][t[1]].bottles[t[2]].bottle,i=0;i<o.length;i++)if(0==o[i])for(var n=i+1;n<o.length;n++)if(0!=o[n]){o[i]=o[n],o[n]=0;break}})),this.CheckGameOver(),this._isVanishingBottle=!0;var c=this;w.ShowUI(Y,void 0,{propID:b.VANISH_COLOR,callback:function(){r.forEach((function(t,e){for(var o=t.data.showingBottle.bottle,i=t.data.showingBottle.unknowns,n=0;n<o.length;n++)if(0==o[n])for(var l=n+1;l<o.length;l++)if(0!=o[l]){o[n]=o[l],o[l]=0,i[n]=i[l],i[l]=0;break}c.PlayBottleVanishAnim(t.index,t.data,.4*e)})),c.scheduleOnce((function(){c._isVanishingBottle=!1,c.CheckProgress()}),.45*o),P.log("vanishColor:",s),P.log("afterVanishColor:",c._levelMap)}})}},i.OnClickStepBack=function(){var t=this;if(k.playEffect(y.SOUND_BUTTON),!this._isGameOver)if(this.CanStepBack())if(this.HideBubbles(),this._isGameStart=!0,V.Mgr.sendEventButton("button_step_back"),G.Player.GetPropCount(b.STEP_BACK)<=0){this._isShowingAd=!0;var e=this;U.getInstance().ShowRewardVideoAd(M.ad_video_step_back,(function(o){e._isShowingAd=!1,o&&(e.AddWatchVideoCount(),t._stepBackPropCounts++,V.Mgr.sendChallengeGameGetProp(e._curDayId,e._stepCount,b.STEP_BACK,"video"),G.Player.AddProp(b.STEP_BACK,3))}),(function(){V.Mgr.sendChallengeGameAd(e._curDayId,e._stepCount,M.ad_video_step_back.toString())}))}else G.Player.UseProp(b.STEP_BACK,1),this.StepBack();else this.ToastNoBackSteps()},i.AddTime=function(){G.TA.TotalUseTools.val++,G.TA.saveData(),this._propTimes++,this._addTimeCount++,V.Mgr.sendChallengeGameUseProp(this._curDayId,this._stepCount,b.ADD_TIME,this._propTimes),this._remainTime+=tt},i.StepBack=function(){var t=this;w.ShowUI(Y,void 0,{propID:b.STEP_BACK,callback:function(){t.DoStepBack()}})},i.DoStepBack=function(){G.TA.TotalUseTools.val++,G.TA.saveData(),this._propTimes++,V.Mgr.sendChallengeGameUseProp(this._curDayId,this._stepCount,b.STEP_BACK,this._propTimes);var t=this._stepRecords.get(this._stepCount-1);t&&(this._isStucked=!1,this._levelMap=t.levelMap,this._stepCount=t.stepId,this._selectedBottle=null,this.UpdateSelectedBottle(void 0,!0),this.RefreshAllBottles(!0,!0),this.CheckStepBackEnable(),this.CheckProgress(),this.CheckHiddenBottle(!1),this.CheckUnlockBottleKeys())},i.OnClickUnlockBottle=function(){var t=this;if(k.playEffect(y.SOUND_BUTTON),!this._isGameOver)if(this.CanUnlockVideoBottle()){if(this.HideBubbles(),this._isGameStart=!0,V.Mgr.sendEventButton("button_refresh_color"),0!=this._levelMap.length)if(this.IsUnlockBottleFree())G.Player.UseProp(b.UNLOCK_BOTTLE,1),this._unlockBottleFreeCounts++,V.Mgr.sendChallengeGameUseProp(this._curDayId,this._stepCount,b.UNLOCK_BOTTLE,this._propTimes),this.UnlockVideoBottle();else{this._isShowingAd=!0;var e=this;U.getInstance().ShowRewardVideoAd(M.ad_video_unlock_bottle_prop,(function(o){e._isShowingAd=!1,P.log("TestV   onUnlockVideoBottle",o),o&&(e.AddWatchVideoCount(),e._unlockBottleVideoCounts++,e._unlockBottlePropCounts++,V.Mgr.sendChallengeGameGetProp(t._curDayId,t._stepCount,b.UNLOCK_BOTTLE,"video"),e.UnlockVideoBottle(),V.Mgr.sendChallengeGameUseProp(t._curDayId,t._stepCount,b.UNLOCK_BOTTLE,t._propTimes))}),(function(){V.Mgr.sendChallengeGameAd(e._curDayId,e._stepCount,M.ad_video_unlock_bottle_prop.toString())}))}}else this.ToastNoVideoBottle()},i.FindLockedVideoBottle=function(){for(var t=this._rackList,e=0;e<t.length;e++)for(var o=t[e],i=0;i<o._bottleList.length;i++){var n=o._bottleList[i];if(n.isVideoBottle)return n}},i.HasLockedVideoBottle=function(){return null!=this.FindLockedVideoBottle()},i.UnlockVideoBottle=function(t,e){void 0===t&&(t=!1);for(var o=this._rackList,i=0;i<o.length;i++)for(var n=o[i],l=0;l<n._bottleList.length;l++){var s=n._bottleList[l];if(s.isVideoBottle)return t||this._propTimes++,s.UnlockVideoBottle(!t,e),this.MapDataUnlockVideoBottle(i,l),this.CheckUnlockVideoBottleEnable(),void(this._isStucked=!1)}},i.MapDataUnlockVideoBottle=function(t,e){this._levelMap[t][e].showingBottle.video_bottle=!1,this._stepRecords.forEach((function(o){o.levelMap[t][e].showingBottle.video_bottle=!1}))},i.OnClickSetting=function(){var t=this;this._isGameOver||(this.HideBubbles(),this._isPaused=!0,k.playEffect(y.SOUND_BUTTON),w.ShowUI(z,void 0,{isInGame:!0,closeCallback:function(){t._isPaused=!1}}),V.Mgr.sendEventButton("setting_game"))},i.OnBottleClick=function(t){var e=this;if(P.log("OnBottleClick",t),this.HideBubbles(),!this._isGameOver&&!this._isVanishingBottle&&!(t instanceof x&&t.isLockBottle||t instanceof x&&t.isHiddenBottle||t.isPouring&&null==this._selectedBottle)){var o=this.FindIndexOfBottle(t);if(-1!=o[0]&&-1!=o[1])if(!t.isComplete||t.isVideoBottle||t instanceof x&&t.isLockBottle)if(t instanceof x&&t.isStoneBottle&&null==this._selectedBottle)t.PlayClickStoneAnim();else if(this._isGameStart=!0,t.isVideoBottle){if(this.IsUnlockBottleFree())G.Player.UseProp(b.UNLOCK_BOTTLE,1),this._unlockBottleFreeCounts++,V.Mgr.sendChallengeGameUseProp(this._curDayId,this._stepCount,b.UNLOCK_BOTTLE,this._propTimes),t.UnlockVideoBottle(!0),this.MapDataUnlockVideoBottle(o[0],o[1]),this.CheckUnlockVideoBottleEnable(),this._isStucked=!1;else{var i=this;this._isShowingAd=!0,U.getInstance().ShowRewardVideoAd(M.ad_video_unlock_bottle,(function(n){i._isShowingAd=!1,n&&(i.AddWatchVideoCount(),i._unlockBottleVideoCounts++,t.UnlockVideoBottle(),i.MapDataUnlockVideoBottle(o[0],o[1]),i.CheckUnlockVideoBottleEnable(),i._isStucked=!1,V.Mgr.sendChallengeGameGetProp(e._curDayId,e._stepCount,b.UNLOCK_BOTTLE,"video"),V.Mgr.sendChallengeGameUseProp(e._curDayId,e._stepCount,b.UNLOCK_BOTTLE,e._propTimes))}),(function(){V.Mgr.sendChallengeGameAd(i._curDayId,i._stepCount,M.ad_video_unlock_bottle.toString())}))}}else{var n=[];if(null==this._selectedBottle){if(t instanceof x||t instanceof H&&this._pickLongBottle){var l=this.GetBottleTopTypeAndCount(t.GetColors()),s=l[0];l[1];s>0&&(this._selectedBottle=t)}}else if(this._selectedBottle==t)this._selectedBottle=null;else if(null!=this._selectedBottle&&this._selectedBottle!=t){var a=this.SwapBottle(this._selectedBottle,t);!a&&I.IsABTestB_V3()?t instanceof x&&(this._selectedBottle=t):(this._selectedBottle instanceof H&&t instanceof H&&a&&(n=[this._selectedBottle,t]),this._selectedBottle=null)}this.UpdateSelectedBottle(n)}else this.ToastBottleFullTips()}},i.FindIndexOfBottle=function(t){for(var e=this._rackList,o=0;o<e.length;o++){var i=e[o]._bottleList.findIndex((function(e){return e==t}));if(i>=0)return[o,i]}return[-1,-1]},i.FindBottleByIndex=function(t){var e,o;return null!=(e=null==(o=this._rackList[t[0]])?void 0:o._bottleList[t[1]])?e:null},i.SwapBottle=function(t,e){if(e instanceof x&&e.bottleType==g.TRANSFER)return this.ToastTransferBottleNoPourIn(),!1;var o=this.FindIndexOfBottle(t),i=o[0],n=o[1],l=this.FindIndexOfBottle(e),s=l[0],a=l[1];if(-1==i||-1==s||-1==n||-1==a)return P.warn("SwapBottle error, index invalid",i,s,n,a),!1;var r=this._levelMap[i][n].curDepth,h=this._levelMap[s][a].curDepth,c=this.GetBottleTopTypeAndCount(this._levelMap[i][n].showingBottle.bottle),u=c[0],_=c[1];if(u>0){var p=this.GetBottleTopTypeAndEmptyCount(this._levelMap[s][a].showingBottle.bottle),d=p[0],f=p[1];if(f<=0)return this.ToastBottleFullTips(),!1;if(u==d&&f<_)return this.ToastBottleSpaceNotEnough(),!1;var C=this._levelMap[s][a].bottles[h].collect_type;if(u!=d&&0!=d)return this.ToastBottleTypeNotMatchTips(),!1;if(0!=C&&u!=C)return this.ToastCollectTypeNotMatchTips(),!1;var v=this.SwapIndex(this._levelMap,[i,n],[s,a],_),m=this.GetBottleTopTypeAndEmptyCount(this._levelMap[s][a].showingBottle.bottle),T=(m[0],m[1]);_>T&&(_=T);var B=v[i][n].bottles[r];return null!=B.key_index&&B.key_index>=0&&0==B.bottle[B.key_index]&&(B.key_collected=!0),this.AddStepRecord(this._stepCount,this._levelMap,[i,n,r],[s,a,h]),this._levelMap=v,t instanceof H?this.MoveDripsFromTo([i,n,r],[s,a,h],_):this.PourLiquidsFromTo([i,n,r],[s,a,h],_),this._stepCount++,this.CheckGameOver(),this._isStucked=this.CheckIsStuck(),this._isGameOver||this.CheckStepBackEnable(),!0}return!1},i.AddStepRecord=function(t,e,o,i){var n=new v;n.stepId=t,n.levelMap=e,n.fromIndex=o,n.toIndex=i,this._stepRecords.set(t,n)},i.MoveDripsFromTo=function(t,e,o){var i=this,n=this.FindBottleByIndex([t[0],t[1]]),s=this.FindBottleByIndex([e[0],e[1]]);if(n instanceof H&&s instanceof H){var a=n.node.worldPosition.clone();a.y+=n.node.getComponent(l).height+57;var r=this.GetBottleTopTypeAndCount(this._levelMap[e[0]][e[1]].bottles[e[2]].bottle),h=r[0];r[1];n.ResetSelected(),P.log("TestV  startMove",t.join(","),e.join(",")),n.SetColors(this._levelMap[t[0]][t[1]].bottles[t[2]].bottle),s.MoveDripTo(h,a,this._mapScale,(function(){s.SetColors(i._levelMap[e[0]][e[1]].bottles[e[2]].bottle),P.log("TestV  moveCallback",t.join(","),e.join(",")),s.DripDown(h,o,(function(){P.log("TestV  dripdowncallback",t.join(","),e.join(",")),s.CheckIfShowComplete(),i.scheduleOnce((function(){i.CheckProgress(),i.CheckHiddenBottle(!0),i.CheckUnlockBottleKeys()}),1)}))}))}else P.warn("MoveDripsFromTo not support")},i.PourLiquidsFromTo=function(t,e,o){var i,n,a=this,r=this.FindBottleByIndex([t[0],t[1]]);if(r instanceof x){var _=this.FindBottleByIndex([e[0],e[1]]),p=r.AddAnimBottle(this._ui.node_anim_bottle),d=_;p.node.worldPosition=r.node.worldPosition.clone();var f=this._levelMap[t[0]][t[1]].bottles[t[2]],g=O.GetBottleTopTypeAndEmptyCount(f.bottle)[0]==m.BOTTLE_TYPE_EMPTY&&f.complete_type==C.EMPTY_NEXT,v=this._levelMap[t[0]][t[1]].curDepth!=t[2];if(g){var T=this._levelMap[t[0]][t[1]].bottles[t[2]].bottle;r.SetColors(T)}else this.RefreshBottle([t[0],t[1]],!0);r.Hide(),d.setPouring();var B=O.GetBottleLiquidCount(this._levelMap[e[0]][e[1]].bottles[e[2]].bottle),b=B-o,y=this._levelMap[e[0]][e[1]].bottles[e[2]].bottle.length,S=-p.GetPourRotation(0),k=-p.GetPourRotation(o),E=.5/Z/m.POUR_TIME_SCALES[o-1];E=-E*S/90;var P=.8/Z/m.POUR_TIME_SCALES[o-1],w=.2/Z/m.POUR_TIME_SCALES[o-1],L=.3/Z,U=.3/Z,M=.3/Z,V=1/Z,D=.08*(y>5?5:y-b)/Z;p._ui.spr_bottle_bg.angle=0;var R=b/y,F=B/y,K=p.node.position.clone(),W=d.node.worldPosition.clone(),z=p._ui.node_mask.getComponent(l).width*(m.BOTTLE_TOP_ANCHORS[G.Player.SkinId.val]-.5);p._ui.node_parent.setPosition(new c(-z,0));var X,Y=7*this._mapScale,j=(77+$.height*(5-p.GetColors().length))*this._mapScale;d instanceof H&&(j+=(d.GetColors().length-5)*$.height*this._mapScale),X=!(W.x<=243*this._mapScale)&&(W.x>=s.getVisibleSize().width-243*this._mapScale||p.node.worldPosition.x<d.node.worldPosition.x),p.SetMirrored(!X),d.SetWaterFlowMirrored(!X),X?(K.x+=z,W.add(new c(-Y,j))):(K.x-=z,W.add(new c(Y-2,j))),p.node.setPosition(K.clone().add(new c(0,21.743))),h(p).delay(U).to(E,{pourRotation:S}).to(P,{pourRotation:k},{easing:"sineOut"}).call((function(){p.SetColors(a._levelMap[t[0]][t[1]].bottles[t[2]].bottle)})).to(L,{pourRotation:0}).start();var q=this.GetBottleTopTypeAndCount(this._levelMap[e[0]][e[1]].bottles[e[2]].bottle),Q=q[0];q[1];h(d).delay(U+w).call((function(){d.PlayPourInAnim(O.GetDripColor(Q),o)})).delay(D).call((function(){d instanceof x&&d.UpdateCompleteType(a._levelMap[e[0]][e[1]].bottles[e[2]].complete_type),d.SetColors(a._levelMap[e[0]][e[1]].bottles[e[2]].bottle),d.liquidProgress=R,d.PlayWaterUpAnim(O.GetLiquidColor(Q),o)})).to(P,{liquidProgress:F}).call((function(){d.UpdateToMaxProgress(),d.stopPouring()})).start();var J=this._levelMap[e[0]][e[1]].bottles[e[2]],tt=O.IsBottlePure(J.bottle)&&(J.complete_type==C.COMPLETE_NEXT||J.complete_type==C.END);h(p.node).to(U,{worldPosition:W}).delay(E+P).call((function(){tt&&N.vibrate()})).delay(L).to(M,{position:K}).call((function(){g&&(v?r.PlayTransferNextBottleAnim((function(){ot.RefreshBottle([t[0],t[1]],!0,!1)})):r.PlayTransferBottleCompleteAnim()),r.Show(),I.IsABTestB_V3()&&r.PlayWaterShakeAnim(),u.stopAllByTarget(p),u.stopAllByTarget(p.node),p.node.removeFromParent()})).delay(V).call((function(){A.recycleBottleItem(p)})).start();var et=11*e[0]+e[1];null!=(null==(i=this._checkComplete)?void 0:i.get(et))&&this._checkComplete.get(et).stop();var ot=this,it=h(_).delay(E+P+L+M+V).call((function(){_.CheckIfShowComplete((function(){var t=ot._levelMap[e[0]][e[1]];_ instanceof x&&t.bottles[e[2]].complete_type!=C.EMPTY_NEXT&&(t.isAllComplete&&t.showingBottle.complete_type==C.COMPLETE_NEXT?_.PlayCompleteTaskAnim():(O.IsTaksBottleComplete(t)&&_.HideTaskSpine(),_.PlayNextTaskAnim((function(){ot.RefreshBottle([e[0],e[1]],!0,!1)}))))})),ot.CheckProgress(),ot.CheckHiddenBottle(!0),ot.CheckUnlockBottleKeys()})).start();null==(n=this._checkComplete)||n.set(et,it)}},i.GetSubCompleteNum=function(){var t=0;return this._levelMap.forEach((function(e){e.forEach((function(e){e.bottles.forEach((function(e){O.IsBottlePure(e.bottle)&&(e.complete_type!=C.END&&e.complete_type!=C.COMPLETE_NEXT||t++)}))}))})),t},i.GetCompleteNum=function(){return this.GetSubCompleteNum()},i.GetSubTotalNum=function(){var t,e=0;this._levelMap.forEach((function(t){t.forEach((function(t){t.bottles.forEach((function(t){t.bottle.forEach((function(t){t>0&&e++}))}))}))}));var o=(null==(t=this._levelMapCfg)?void 0:t.segment)||0;return e/o+this._vanishColorPropUseCounts},i.GetTotalNum=function(){return this.GetSubTotalNum()},i.GetLongBottleCollectCount=function(){var t,e=0,o=null==(t=f.getChallengeLevelConfig(this._curDayId))?void 0:t.levels[0];return o?(f.getChallengeFullLevelMap(o).forEach((function(t){return t.forEach((function(t){return t.bottles.forEach((function(t){t.bottle.length>=m.LONG_BOTTLE_MIN_LENGTH&&t.bottle.forEach((function(t){t>0&&e++}))}))}))})),e):0},i.CalcProgress=function(){if(this._pickLongBottle){var t=this.GetCompleteNum(),e=this.GetTotalNum();return(t+this._vanishColorPropUseCounts)/e}var o=0,i=0;return this._levelMap.forEach((function(t){return t.forEach((function(t){return t.bottles.forEach((function(t){t.bottle.length>=m.LONG_BOTTLE_MIN_LENGTH&&(t.bottle.forEach((function(t){t>0&&o++})),i+=t.bottle.length)}))}))})),i-=this._initCollectCount,o-=this._initCollectCount,i>0?o/i:0},i.CheckProgress=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0);var o=this.CalcProgress();if(e){var i,n;null==(i=this._progressLabelTween)||i.stop(),null==(n=this._progressTimerTween)||n.stop(),this._progressLabelTween=h(this._ui.label_percent.getComponent(a)).delay(t).to(.4,{string:Math.floor(100*o)}).start(),this._progressTimerTween=h(this._ui.progress_timer.getComponent(_)).delay(t).to(.4,{progress:o}).start()}else this._ui.label_percent.getComponent(a).string=Math.floor(100*o).toString(),this._ui.progress_timer.getComponent(_).progress=o},i.CheckIsStuck=function(){for(var t=this._levelMap,e=this.GetCollectedCollors(),o=this.GetCollectedKeysCount(),i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)if(!t[i][n].showingBottle.video_bottle){var l=this.GetBottleTopTypeAndCount(t[i][n].showingBottle.bottle),s=l[0],a=l[1];if((!(t[i][n].unlockColor>0)||e.includes(t[i][n].unlockColor))&&!(t[i][n].unlockId>0&&t[i][n].unlockId>o)&&(a!==t[i][n].segment||t[i][n].showingBottle.complete_type!=C.COMPLETE_NEXT&&t[i][n].showingBottle.complete_type!=C.END)&&!(t[i][n].showingBottle.collect_type>0)&&1!=t[i][n].stoneBottle&&a>0)for(var r=0;r<t.length;r++)for(var h=0;h<t[r].length;h++)if((r!==i||n!=h)&&!t[r][h].showingBottle.video_bottle&&t[r][h].showingBottle.complete_type!=C.EMPTY_NEXT&&(!(t[r][h].unlockColor>0)||e.includes(t[r][h].unlockColor))&&!(t[r][h].unlockId>0&&t[r][h].unlockId>o||t[r][h].showingBottle.collect_type>0&&t[r][h].showingBottle.collect_type!=s)){var c=this.GetBottleTopTypeAndEmptyCount(t[r][h].showingBottle.bottle),u=c[0];if(c[1]>=a&&(0===u||u===s))return!1}}return!0},i.RefreshAllBottles=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var o=0;o<this._levelMap.length;o++)for(var i=0;i<this._levelMap[o].length;i++)this.RefreshBottle([o,i],t,e)},i.RefreshVideoBottleTypes=function(){var t=this.IsUnlockBottleFree();this._rackList.forEach((function(e){return e._bottleList.forEach((function(e){e.isVideoBottle&&e.UpdateVideoBottleType(t)}))}))},i.IsUnlockBottleFree=function(){return G.Player.GetPropCount(b.UNLOCK_BOTTLE)>0},i.UpdateSelectedBottle=function(t,e){var o=this;void 0===e&&(e=!1),this._rackList.forEach((function(i,n){i._bottleList.forEach((function(i,l){if(i==o._selectedBottle)i.SetSelected(!0);else if(i instanceof H)if(e)i.ResetSelected(),i.UpdateToMaxProgress();else if(null!=t&&t.includes(i));else{var s=o._levelMap[n][l].showingBottle.bottle;i.SetSelected(!1,s)}else i.SetSelected(!1)}))}))},i.RefreshBottle=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o=!1);var i=this.FindBottleByIndex(t);if(i){var n=this._levelMap[t[0]][t[1]];if(i.SetColors(n.showingBottle.bottle),i.isVideoBottle&&i.UpdateVideoBottleType(this.IsUnlockBottleFree()),i instanceof x){if(e&&(i.UpdateDepth(n.remainDepth),i.UpdateCollectType(n.showingBottle.collect_type)),o){if(i.UpdateComplete(),n.bottleType==g.TRANSFER){var l=O.IsTransferBottleComplete(n);i.UpdateTransferComplete(l)}if(n.bottleType==g.TASK){var s=O.IsTaksBottleComplete(n);i.UpdateTaskComplete(s)}}}else i instanceof H&&(o&&i.UpdateComplete(),i.UpdateToMaxProgress())}},i.PlayBottleVanishAnim=function(t,e,o){void 0===o&&(o=0);var i=this.FindBottleByIndex([t[0],t[1]]);i&&(P.log(e.showingBottle),i.PlayVanishColorAnim(e.showingBottle.bottle,e.showingBottle.unknowns,o,e.remainDepth,(function(){i instanceof x&&(O.IsTransferBottleComplete(e)&&i.PlayTransferBottleCompleteAnim())})))},i.GetCollectedKeysCount=function(){var t=0;return this._levelMap.forEach((function(e){e.forEach((function(e){e.bottles.forEach((function(e){e.key_collected&&t++}))}))})),t},i.GetCollectedCollors=function(){var t=[];return this._levelMap.forEach((function(e){e.forEach((function(e){e.bottles.forEach((function(e){O.IsBottlePure(e.bottle)&&e.complete_type!=C.NEVER&&(t.includes(e.bottle[0])||t.push(e.bottle[0]))}))}))})),t},i.UpdateHiddenBottles=function(){for(var t=this.GetCollectedCollors(),e=this._rackList,o=0;o<this._levelMap.length;o++)for(var i=0;i<this._levelMap[o].length;i++){var n=e[o]._bottleList[i];if(n instanceof x){var l=this._levelMap[o][i];if(l.unlockColor>0){var s=t.includes(l.unlockColor);n.UpdateHiddenBottle(!s)}}}},i.CheckHiddenBottle=function(t){for(var e=this.GetCollectedCollors(),o=this._rackList,i=0;i<this._levelMap.length;i++)for(var n=0;n<this._levelMap[i].length;n++){var l=o[i]._bottleList[n];if(l instanceof x){var s=this._levelMap[i][n];if(s.unlockColor>0){var a=e.includes(s.unlockColor);l.SetHiddenBottleUnlock(a,t)}}}},i.CheckUnlockBottleKeys=function(){var t=this,e=this.GetCollectedKeysCount();this._levelMap.forEach((function(o,i){o.forEach((function(o,n){var l=t._rackList[i]._bottleList[n];if(l instanceof x){if(o.unlockId>0){var s=o.unlockId>e;l.UpdateLockBottle(s)}o.bottles.forEach((function(t){var e=1==t.key_collected;l.UpdateKeyCollected(e)}))}}))}))},i.GetBottleTopTypeAndCount=function(t){return O.GetBottleTopTypeAndCount(t)},i.GetBottleTopTypeAndEmptyCount=function(t){for(var e=0,o=-1,i=t.length-1;i>=0;i--){if(0!==t[i]){o=t[i];break}e++}return-1===o&&(o=0),[o,e]},i.SwapIndex=function(t,e,o,i){for(var n=t.map((function(t){return t.map((function(t){return t.clone()}))})),l=0,s=n[o[0]][o[1]].showingBottle.bottle.length-1;s>=0&&0===n[o[0]][o[1]].showingBottle.bottle[s];s--)l++;l<i&&(i=l);for(var a=-1,r=n[e[0]][e[1]].showingBottle.bottle.length-1;r>=0;r--)if(0!=n[e[0]][e[1]].showingBottle.bottle[r]){a=n[e[0]][e[1]].showingBottle.bottle[r];for(var h=0;h<i;h++){if(r-h<0)throw"数组越界:i:"+r+",j:"+h;n[e[0]][e[1]].showingBottle.bottle[r-h]=0}break}if(-1==a)return n;for(var c=0;c<n[o[0]][o[1]].showingBottle.bottle.length;c++)if(0==n[o[0]][o[1]].showingBottle.bottle[c]){for(var u=0;u<i;u++){if(c+u>=n[o[0]][o[1]].showingBottle.bottle.length)throw"数组越界:i:"+c+",j:"+u;n[o[0]][o[1]].showingBottle.bottle[c+u]=a}break}return n},i.CanUnlockVideoBottle=function(){return this._levelMap.some((function(t){return t.some((function(t){return t.bottles.some((function(t){return t.video_bottle}))}))}))},i.GetTotalUnlockBottleFreeCount=function(){return this._unlockBottleFreeCounts},i.GetTotalUnlockBottleVideoCount=function(){return this._unlockBottleVideoCounts},i.GetTotalUnlockBottlePropCount=function(){return this._unlockBottlePropCounts},i.GetTotalVanishColorCount=function(){return this._vanishColorPropVideoCounts},i.GetTotalStepBackCount=function(){return this._stepBackPropCounts},i.GetTotalPropUseCount=function(){return this._propTimes},i.GetTotalRebornCount=function(){return this._rebornTimes},i.GetTotalRebornShowCount=function(){return this._rebornShowTimes},i.AddWatchVideoCount=function(){this._watchVideoCount++},i.GetTotalWatchVideoCount=function(){return this._watchVideoCount},i.GetTotalLevelTime=function(){return this._levelTime},i.GetTotalStepCount=function(){return this._stepCount},i.GetTotalVanishCount=function(){return this._vanishColorPropUseCounts},i.CanVanishColor=function(){return this._vanishColorPropUseCounts<1},i.CanStepBack=function(){return null!=this._stepRecords.get(this._stepCount-1)},i.CheckUnlockVideoBottleEnable=function(){var t=this.CanUnlockVideoBottle();this._ui.btn_unlock_bottle.getComponent(p).grayscale=!t,this._ui.spr_btn_unlock_bottle.getComponent(p).grayscale=!t,this._ui.spr_video_1.getComponent(p).grayscale=!t,this._ui.spr_prop_count_1.getComponent(p).grayscale=!t,t?(this._ui.lab_btn_unlock_bottle.getComponent(a).outlineColor=new d(189,71,24),this._ui.label_prop_count_1_prefix.getComponent(a).outlineColor=new d(186,35,35),this._ui.label_prop_count_1_num.getComponent(a).outlineColor=new d(186,35,35),this._ui.label_prop_count_1_suffix.getComponent(a).outlineColor=new d(186,35,35)):(this._ui.lab_btn_unlock_bottle.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_1_prefix.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_1_num.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_1_suffix.getComponent(a).outlineColor=new d(100,100,100))},i.CheckVanishColorEnable=function(){var t=this.CanVanishColor();this._ui.btn_clear_color.getComponent(p).grayscale=!t,this._ui.spr_btn_clear_color.getComponent(p).grayscale=!t,this._ui.spr_video_2.getComponent(p).grayscale=!t,this._ui.spr_prop_count_2.getComponent(p).grayscale=!t,t?(this._ui.lab_btn_clear_color.getComponent(a).outlineColor=new d(189,71,24),this._ui.label_prop_count_2.getComponent(a).outlineColor=new d(186,35,35)):(this._ui.lab_btn_clear_color.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_2.getComponent(a).outlineColor=new d(100,100,100))},i.CheckStepBackEnable=function(){var t=this.CanStepBack();this._ui.btn_step_back.getComponent(p).grayscale=!t,this._ui.spr_btn_step_back.getComponent(p).grayscale=!t,this._ui.spr_video_3.getComponent(p).grayscale=!t,this._ui.spr_prop_count_3.getComponent(p).grayscale=!t,t?(this._ui.lab_btn_step_back.getComponent(a).outlineColor=new d(189,71,24),this._ui.label_prop_count_3.getComponent(a).outlineColor=new d(186,35,35)):(this._ui.lab_btn_step_back.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_3.getComponent(a).outlineColor=new d(100,100,100))},i.CheckGameOver=function(){var t=this,e=!1;this._pickLongBottle?(e=!0,this._levelMap.some((function(e){return e.some((function(e){return e.bottles.some((function(e){var o=t.GetBottleTopTypeAndCount(e.bottle),i=o[0],n=o[1];return(e.complete_type==C.NEVER||e.complete_type==C.EMPTY_NEXT)&&i>0||(i>0&&n<e.bottle.length||void 0)}))}))}))&&(e=!1)):this._levelMap.every((function(t){return t.every((function(t){return t.bottles.every((function(t){return!(t.bottle.length>=m.LONG_BOTTLE_MIN_LENGTH)||t.bottle.every((function(t){return t>0}))}))}))}))&&(e=!0),e&&(this._stepRecords.clear(),this.ShowInterLayer(),this._isSuccess=!0,this._isGameOver=!0,this.DoGameOver(),P.log("Game Over"))},i.OnGameGiveUp=function(){this._isGameOver=!0,this._isSuccess=!1,this.DoGameOver()},i.DoReborn=function(){var t=this;this.HideBubbles();var e=this.HasLockedVideoBottle();this._rebornShowTimes++;var o=this;w.ShowUI(j,(function(){w.CloseUI(X)}),{gameType:S.CHALLENGE,progress:this.CalcProgress(),hasVideoBottle:e,closeCallback:function(i){i?(o.AddWatchVideoCount(),V.Mgr.sendChallengeGameGetProp(t._curDayId,t._stepCount,b.UNLOCK_BOTTLE,"video"),o.AddTime(),e?(o.UnlockVideoBottle(!1,(function(){o._isPaused=!1})),V.Mgr.sendChallengeGameUseProp(t._curDayId,t._stepCount,b.UNLOCK_BOTTLE,t._propTimes)):w.ShowUI(Y,void 0,{propID:b.ADD_TIME,callback:function(){o._isPaused=!1}}),o._rebornTimes++):(o._isPaused=!1,o._remainTime=0,o._isSuccess=!1,o._isGameOver=!0,o.DoGameOver())},showAdCallback:function(){V.Mgr.sendChallengeGameAd(o._curDayId,o._stepCount,M.ad_video_reborn.toString())}})},i.DoGameOver=function(t){var e=this;if(void 0===t&&(t=!1),!this._isTestLevel){V.Mgr.sendChallengeGameFinish(this._curDayId,this._isSuccess,this.GetTotalLevelTime(),this.GetTotalStepCount(),this.GetTotalPropUseCount(),this.GetTotalRebornCount(),this.GetTotalRebornShowCount(),this.GetTotalUnlockBottleFreeCount(),this.GetTotalUnlockBottleVideoCount(),this.GetTotalUnlockBottlePropCount(),this.GetTotalVanishColorCount(),this.GetTotalStepBackCount()),this._isSuccess&&(G.TA.ChallengeGameCount.val+=1,G.Player.SetChallengeComplete(this._challengeDate.getFullYear(),this._challengeDate.getMonth(),this._challengeDate.getDate()),this.addChallengeReward()),G.TA.TotalChallengePlayCount.val++,G.TA.TotalGameTime.val+=this.GetTotalLevelTime(),G.TA.saveData();var o=this._isSuccess?2.7:0;t&&(o=0);var i=this._isSuccess;h(this.node).delay(o).call((function(){w.ShowUI(W,void 0,{isSuccess:i,challengeDate:e._challengeDate})})).start()}},i.addChallengeReward=function(){for(var t=L.GetMonthAllDay(this._challengeDate.getFullYear(),this._challengeDate.getMonth()),e=0,o=1;o<t+1;++o){0!=G.Player.GetChallengeComplete(this._challengeDate.getFullYear(),this._challengeDate.getMonth(),o)&&e++}for(var i=E.getCfg("changle"),n=0;n<i.length;++n){var l=i[n].rewards,s=i[n].rewardday;if(s==e){for(var a=0;a<l.length;++a){var r=void 0,h=l[a][1];1==l[a][0]?r=b.UNLOCK_BOTTLE:2==l[a][0]?r=b.VANISH_COLOR:3==l[a][0]&&(r=b.STEP_BACK),G.Player.AddProp(r,h)}V.Mgr.sendEventChallengeReward(s,this._challengeDate.getMonth()+1)}}},i.OnGameSettleEvent=function(t){var e=this._curDayId,o=!t;this.StartGame(e,o),V.Mgr.sendChallengeGameStart(t?"NewDeal":"Restart",this._curDayId),this.UpdateProps(),I.IsABTestC_V1()&&U.getInstance().ShowInterstitialAd(M.ad_inter_restart)},i.UpdateProps=function(){this._isGameOver||(this._ui.spr_video_1.active=G.Player.GetPropCount(b.UNLOCK_BOTTLE)<=0,this._ui.spr_video_2.active=G.Player.GetPropCount(b.VANISH_COLOR)<=0,this._ui.spr_video_3.active=G.Player.GetPropCount(b.STEP_BACK)<=0,this._ui.spr_prop_count_1.active=G.Player.GetPropCount(b.UNLOCK_BOTTLE)>0,this._ui.spr_prop_count_2.active=G.Player.GetPropCount(b.VANISH_COLOR)>0,this._ui.spr_prop_count_3.active=G.Player.GetPropCount(b.STEP_BACK)>0,this._ui.label_prop_count_1_num.getComponent(a).string=G.Player.GetPropCount(b.UNLOCK_BOTTLE).toString(),this._ui.label_prop_count_2.getComponent(a).string=""+G.Player.GetPropCount(b.VANISH_COLOR),this._ui.label_prop_count_3.getComponent(a).string=""+G.Player.GetPropCount(b.STEP_BACK),this.scheduleOnce(this.RefreshVideoBottleTypes.bind(this)))},i.ToastTips=function(t){this._toastTween&&this._toastTween.stop(),this._ui.label_tips.getComponent(a).string=t;var e=this._ui.spr_tips_bg.getComponent(n);e.opacity=0,this._toastTween=h(e).to(.4,{opacity:255}).delay(.6).to(.4,{opacity:0}).start()},i.ToastBottleFullTips=function(){this.ToastTips("目标杯子已经满啦")},i.ToastBottleTypeNotMatchTips=function(){this.ToastTips("最上面一层颜色相同才能倒入")},i.ToastNoBackSteps=function(){this.ToastTips("没有上一步可以返回")},i.ToastPropsNotEnough=function(){this.ToastTips("道具次数已用完")},i.ToastCollectTypeNotMatchTips=function(){this.ToastTips("目标杯子颜色不匹配")},i.ToastNoVideoBottle=function(){this.ToastTips("没有空瓶可以解锁")},i.ToastTransferBottleNoPourIn=function(){this.ToastTips("该瓶子无法往进倒水哦")},i.ToastBottleSpaceNotEnough=function(){this.ToastTips("目标瓶子空间不足")},i.ShowUsePropFinger=function(t){var e;if(!this._ui.spr_bubble_prop_finger.active){var o;switch(t){case b.UNLOCK_BOTTLE:o=null==(e=this.FindLockedVideoBottle())?void 0:e.node;break;case b.VANISH_COLOR:o=this._ui.btn_clear_color;break;case b.STEP_BACK:o=this._ui.btn_step_back}var i=0,l=0;if(o){var s=D.GetNodeWorldRect(o),a=[s.center.x,s.center.y];i=a[0],l=a[1]}i+=97,l-=63.2,this._ui.spr_bubble_prop_finger.setWorldPosition(i,l,this._ui.spr_bubble_prop_finger.worldPosition.z),this._ui.spr_bubble_prop_finger.active=!0,w.SetOpacity(this._ui.spr_bubble_prop_finger,0),h(this._ui.spr_bubble_prop_finger.getComponent(n)).to(.4,{opacity:255}).start()}},i.HideBubbles=function(){this.HideUsePropFinger()},i.HideUsePropFinger=function(){this._showPropHintFingerTimer=10,u.stopAllByTarget(this._ui.spr_bubble_prop_finger.getComponent(n)),w.SetOpacity(this._ui.spr_bubble_prop_finger,0),this._ui.spr_bubble_prop_finger.active=!1},i.OnTestSkip=function(){this._isGameOver=!0,this._isSuccess=!0,this.DoGameOver(!0)},i.OnTestSkipSubLevel=function(){this._stepRecords.clear(),this._isSuccess=!0,this._isGameOver=!0,this.DoGameOver(!0)},i.onTestSkipToLevel=function(t){this.StartGame(t,!1),this.UpdateProps(),I.IsABTestC_V1()&&U.getInstance().ShowInterstitialAd(M.ad_inter_restart)},i.OnTestReduceTime=function(){this._remainTime=3},o}(K))._prefabUrl="ui/UIChallengeGameLayer",Q._className="UIChallengeGameLayer",q=Q))||q);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIChallengeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./auto_UIChallengeLayer.ts","./UIBase.ts","./UIHelp.ts","./AudioManager.ts","./Defines.ts","./EventManager.ts","./Utils.ts","./DataManager.ts","./CfgManager.ts","./UIGetGiftBox.ts","./UIHallLayer.ts"],(function(t){var e,i,n,a,s,o,r,l,h,d,c,u,_,p,g,y,m,f,w,C,b,v,D,S,L,T,I,k,A,U;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.Node,l=t.Button,h=t.Label,d=t.tween,c=t.UIOpacity,u=t.Vec3,_=t.sp,p=t.UITransform,g=t.instantiate,y=t.Tween},function(t){m=t.default},function(t){f=t.UIBase},function(t){w=t.default},function(t){C=t.default},function(t){b=t.GameDefine,v=t.PROP_ID,D=t.Sfx,S=t.GameEvent},function(t){L=t.default},function(t){T=t.default},function(t){I=t.default},function(t){k=t.default},function(t){A=t.default},function(t){U=t.default}],execute:function(){var M,N,B,P,O,E,z,G,R,F,Y,x,j,H,K,V,W,q,J,Q;s._RF.push({},"ee4e8NTbrdMBbk0sapMa/8y","UIChallengeLayer",void 0);var X=o.ccclass,Z=o.property;t("default",(M=X("UIChallengeLayer"),N=Z({type:r}),B=Z({type:l}),P=Z({type:r}),O=Z({type:r}),E=Z({type:h}),z=Z({type:r}),G=Z({type:h}),R=Z({type:r}),M(((Q=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this)._ui=void 0,n(e,"week_label",x,a(e)),n(e,"reward_button",j,a(e)),n(e,"reward_spine",H,a(e)),n(e,"reward_list",K,a(e)),n(e,"target_label",V,a(e)),n(e,"reward_icon",W,a(e)),n(e,"reward_num",q,a(e)),n(e,"add_label",J,a(e)),e.todayYear=0,e.todayMonth=0,e.todayDay=0,e.todayPass=!1,e.allMonthDay=0,e.cellNodeList=[],e.rewardDayList=[],e.rewardToolList=[],e.aniTime=b.FRAME_TIME,e.finishCount=0,e.challengeDate=void 0,e.tomorrowDate=void 0,e.isSuccess=!1,e.dateTime=0,e}i(e,t);var s=e.prototype;return s.onInit=function(t){if(this.isSuccess=t[0].isSuccess,this.isSuccess)this.challengeDate=t[0].challengeDate;else{var e=new Date;this.challengeDate=new Date(e.getFullYear(),e.getMonth(),e.getDate())}},s.onUILoad=function(){var t=this;this._ui=this.node.addComponent(m),this.addInterlayer(),this.initData(),this.runOpenAni(this.node),this.scheduleOnce((function(){t.openFinish()}))},s.onUIStart=function(){this.initUI()},s.onUIEnable=function(){this.registerClick(this._ui.close_btn,this.onCloseClick),this.registerClick(this._ui.start_btn,this.onGameClick),this.registerClick(this._ui.close_reward_btn,this.onCloseReward);for(var t=0;t<this.reward_button.length;++t)this.registerClick(this.reward_button[t].node,this.onShowReward)},s.onUIDisable=function(){},s.onUIDestroy=function(){this.onClose()},s.onClose=function(){w.CloseUI(e)},s.update=function(t){this.dateTime+=t,this.dateTime>=1&&(this.dateTime-=1,this.refreshTime())},s.initData=function(){this.todayYear=this.challengeDate.getFullYear(),this.todayMonth=this.challengeDate.getMonth(),this.todayDay=this.challengeDate.getDate(),this.tomorrowDate=new Date(this.todayYear,this.todayMonth,this.todayDay+1),this.allMonthDay=T.GetMonthAllDay(this.todayYear,this.todayMonth),this.todayPass=0!=I.Player.GetChallengeComplete(this.todayYear,this.todayMonth,this.todayDay)},s.openFinish=function(){for(var t=this,e=0;e<this.reward_spine.length;++e){d(this.reward_spine[e].getComponent(c)).delay((12+3*e)*this.aniTime).to(7*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var i=this.reward_spine[e].scale.clone();d(this.reward_spine[e]).to(0,{scale:u.ONE.clone().multiplyScalar(.75)},{easing:"sineInOut"}).delay((12+3*e)*this.aniTime).to(7*this.aniTime,{scale:i.clone().multiplyScalar(1.02)},{easing:"sineInOut"}).to(5*this.aniTime,{scale:i.clone().multiplyScalar(1)},{easing:"sineInOut"}).start()}d(this.node).delay(15*this.aniTime).call((function(){t.finishUIAni()})).start()},s.finishUIAni=function(){if(this.isSuccess){var t=this;this._ui.badge_spine.active=!0,this._ui.badge_spine.getComponent(_.Skeleton).setAnimation(0,"1",!1),this._ui.badge_spine.getComponent(_.Skeleton).addAnimation(0,"2",!0),this._ui.badge_spine.getComponent(_.Skeleton).setEndListener((function(){t.flySpine()}))}else this._ui.Interlayer.active=!1},s.flySpine=function(){var t=this,e=this._ui.badge_spine.parent.getComponent(p).convertToNodeSpaceAR(this._ui.badge_sp.getWorldPosition()),i=this._ui.badge_spine.position.clone();d(this._ui.badge_spine.position).to(20*this.aniTime,{x:e.x}).start(),d(this._ui.badge_spine.position).to(10*this.aniTime,{y:i.y+355},{easing:"cubicOut"}).to(10*this.aniTime,{y:e.y+12},{easing:"cubicIn"}).start();var n=this._ui.badge_spine.scale.clone();d(this._ui.badge_spine).to(0,{scale:u.ONE.clone().multiplyScalar(1)}).to(20*this.aniTime,{scale:n.clone().multiplyScalar(.45)}).call((function(){t._ui.badge_spine.active=!1,t._ui.badge_sp.getComponent(_.Skeleton).setAnimation(0,"shouji",!1),t._ui.badge_sp.getComponent(_.Skeleton).setEndListener((function(){t.setProgessBar(t.finishCount+1,!0)}))})).start()},s.upProgressEnd=function(){for(var t=this,e=0,i=0;i<this.reward_spine.length;++i)this.finishCount+1==this.rewardDayList[i]&&(e=i+1);var n=this.cellNodeList[this.todayDay-1].getChildByName("todayLabel"),a=this.cellNodeList[this.todayDay-1].getChildByName("dayBadge");n.active=!1,w.SetSpriteFrame(this.cellNodeList[this.todayDay-1],"challenge/wancheng"),a.getComponent(_.Skeleton).setAnimation(0,"2",!1),a.getComponent(_.Skeleton).addAnimation(0,"3",!0),e>0?(this._ui.box_spine.active=!0,this.reward_spine[e-1].active=!1,this._ui.box_spine.getComponent(_.Skeleton).setAnimation(0,"dakai"+e,!1),this._ui.box_spine.getComponent(_.Skeleton).setEventListener((function(i,n){if(n instanceof _.spine.Event&&"lizi"==n.data.name){t._ui.Interlayer.active=!1;var a=t.getReward(e-1);w.ShowUI(A,void 0,{showClaimBtn:!0,rewards:a,isChallenge:!0,closeCallback:function(){t.reward_spine[e-1].active=!0,t.reward_spine[e-1].getComponent(_.Skeleton).setAnimation(0,"dk_jingzhi"+e,!0)}})}}))):a.getComponent(_.Skeleton).setEndListener((function(){t._ui.Interlayer.active=!1}))},s.getReward=function(t){for(var e={},i=this.rewardToolList[t],n=0;n<i.length;++n){var a=void 0,s=i[n][1];1==i[n][0]?a=v.UNLOCK_BOTTLE:2==i[n][0]?a=v.VANISH_COLOR:3==i[n][0]&&(a=v.STEP_BACK),0==n?e.prop={id:a,count:s}:e.prop1={id:a,count:s}}return e},s.initUI=function(){this._ui.date_label.getComponent(h).string=this.todayYear+"年"+(this.todayMonth+1)+"月",this._ui.label_btn_data.getComponent(h).string=this.todayMonth+1+"月"+this.todayDay+"日",this._ui.time_data_label.getComponent(h).string=this.tomorrowDate.getMonth()+1+"月"+this.tomorrowDate.getDate()+"日";var t=0;this.finishCount=0,this.cellNodeList=[];for(var e=1;e<this.allMonthDay+1;++e){var i=0!=I.Player.GetChallengeComplete(this.todayYear,this.todayMonth,e),n=T.GetWeekDay(this.todayYear,this.todayMonth+1,e);7==n&&1!=e&&t++;var a=g(this._ui.list_cell);this.cellNodeList.push(a),a.active=!0,this._ui.list_node.addChild(a),a.position=new u(this.week_label[n-1].position.x,183-73*t,0);var s=a.getChildByName("dayLabel"),o=a.getChildByName("todayLabel"),r=a.getChildByName("dayBadge");s.getComponent(h).string=""+e,o.getComponent(h).string=""+e,i?this.isSuccess&&this.todayDay==e||(this.finishCount++,r.getComponent(_.Skeleton).setAnimation(0,"3",!0),w.SetSpriteFrame(a,"challenge/wancheng"),s.active=!1,o.active=!1):(r.getComponent(_.Skeleton).setAnimation(0,"1",!0),this.todayDay==e?(w.SetSpriteFrame(a,"challenge/xuanzhong"),o.active=!0):(w.SetSpriteFrame(a,"challenge/weiwancheng"),s.active=!0))}var l=k.getCfg("changle");this.rewardDayList=[],this.rewardToolList=[];for(var d=0;d<l.length;++d){this.target_label[d].getComponent(h).string=""+l[d].rewardday;var c=l[d].rewards,p=l[d].rewardday;this.rewardToolList.push(c),this.rewardDayList.push(p),this.finishCount>=p?this.reward_spine[d].getComponent(_.Skeleton).setAnimation(0,"dk_jingzhi"+(d+1),!0):this.reward_spine[d].getComponent(_.Skeleton).setAnimation(0,"jingzhi"+(d+1),!0),1==c.length?(this.reward_icon[2*d+1].active=!1,this.reward_num[2*d+1].node.active=!1,this.add_label[d].active=!1,this.reward_icon[2*d].position=new u(0,20,0),this.reward_num[2*d].node.position=new u(0,-10,0)):2==c.length&&(this.reward_icon[2*d+1].active=!0,this.reward_num[2*d+1].node.active=!0,this.add_label[d].active=!0,this.reward_icon[2*d].position=new u(-35,20,0),this.reward_icon[2*d+1].position=new u(35,20,0),this.reward_num[2*d].node.position=new u(-35,-10,0),this.reward_num[2*d+1].node.position=new u(35,-10,0));for(var y=0;y<c.length;++y)1==c[y][0]?w.SetSpriteFrame(this.reward_icon[2*d+y],"common/Game_icon_pingzi"):2==c[y][0]?w.SetSpriteFrame(this.reward_icon[2*d+y],"common/Game_icon_xiaochu"):3==c[y][0]&&w.SetSpriteFrame(this.reward_icon[2*d+y],"common/Game_icon_chehui"),this.reward_num[2*d+y].getComponent(h).string=""+c[y][1]}this.setProgessBar(this.finishCount,!1),this._ui.start_btn.active=!this.todayPass,this._ui.time_btn.active=this.todayPass,this.refreshTime()},s.refreshTime=function(){var t=new Date,e=new Date(this.todayYear,this.todayMonth,this.todayDay+1,0,0,0,0),i=Math.floor((e.getTime()-t.getTime())/1e3);i>=0&&(this._ui.time_label.getComponent(h).string=T.GetTimeString(i))},s.setProgessBar=function(t,e){var i=this;this._ui.total_count_label.getComponent(h).string=""+t;var n=this._ui.progress_bg.getComponent(p).contentSize.width,a=this.getProgressPercent(t,n);w.SetProgress(this._ui.progress_bg,a/n,e,(function(){e&&i.upProgressEnd()}),.15)},s.onCloseClick=function(){var t=this;C.playEffect(D.SOUND_BUTTON),this.runCloseAni(this.node,(function(){L.emit(S.EventShowGameClube),t.onClose()}))},s.hideAllRewardTips=function(){this._ui.reward_list_1.getComponent(c).opacity>0&&this.runCloseAni(this._ui.reward_list_1,void 0,!1),this._ui.reward_list_2.getComponent(c).opacity>0&&this.runCloseAni(this._ui.reward_list_2,void 0,!1),this._ui.reward_list_3.getComponent(c).opacity>0&&this.runCloseAni(this._ui.reward_list_3,void 0,!1),this._ui.reward_list_4.getComponent(c).opacity>0&&this.runCloseAni(this._ui.reward_list_4,void 0,!1)},s.getProgressPercent=function(t,e){for(var i=0,n=120;t>0;){if(t>this.rewardDayList[3]){i=e;break}if(t>this.rewardDayList[2])i+=n/(this.rewardDayList[3]-this.rewardDayList[2]);else if(t>this.rewardDayList[1]){i+=n/(this.rewardDayList[2]-this.rewardDayList[1])}else if(t>this.rewardDayList[0]){i+=n/(this.rewardDayList[1]-this.rewardDayList[0])}else{i+=n/(this.rewardDayList[0]-0)}if(0==t)break;t--}return i},s.onGameClick=function(){var t=this;C.playEffect(D.SOUND_BUTTON);var e=new Date(this.todayYear,this.todayMonth,this.todayDay),i=w.GetUI(U);i&&i.enterGame(1,e),this.runCloseAni(this.node,(function(){t.onClose()}))},s.onShowReward=function(t){var e=t.target.name.slice(-1)-1;this.finishCount>=this.rewardDayList[e]||(this.hideAllRewardTips(),this.reward_list[e].scale=u.ONE,y.stopAllByTarget(this.reward_list[e]),this.runOpenAni(this.reward_list[e]))},s.onCloseReward=function(){this.hideAllRewardTips()},e}(f))._prefabUrl="ui/UIChallengeLayer",Q._className="UIChallengeLayer",x=e((Y=Q).prototype,"week_label",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=e(Y.prototype,"reward_button",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=e(Y.prototype,"reward_spine",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=e(Y.prototype,"reward_list",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=e(Y.prototype,"target_label",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=e(Y.prototype,"reward_icon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=e(Y.prototype,"reward_num",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=e(Y.prototype,"add_label",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=Y))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/UICollectGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./WechatManager.ts","./auto_UICollectGameLayer.ts","./UIGetGiftBox.ts","./UIHallLayer.ts"],(function(t){var e,n,i,o,l,a,s,c,r,u,f,C,h,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Vec3},function(t){l=t.PROP_ID,a=t.GameEvent},function(t){s=t.default},function(t){c=t.default},function(t){r=t.UIBase},function(t){u=t.default},function(t){f=t.default},function(t){C=t.default},function(t){h=t.default},function(t){d=t.default}],execute:function(){var _,I;n._RF.push({},"29be9LI3HdIEp6Fmfbq4H8F","UICollectGameLayer",void 0);var U=i.ccclass;i.property,t("default",U("UICollectGameLayer")(((I=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._ui=void 0,e}e(n,t);var i=n.prototype;return i.onInit=function(t){},i.onUILoad=function(){this._ui=this.node.addComponent(C),this.addInterlayer(),this.UpdateUI(),this.runOpenAni(this.node)},i.UpdateUI=function(){f.CheckIsEnterFromCollection()?(this._ui.spr_btn_reward_lock.active=!1,this._ui.label_btn_rewad.setPosition(new o(0,4,0))):(this._ui.spr_btn_reward_lock.active=!0,this._ui.label_btn_rewad.setPosition(new o(30,4,0)))},i.onUIStart=function(){},i.onUIEnable=function(){this.registerClick(this._ui.close_btn,this.OnClickClose),this.registerClick(this._ui.btn_collect_game,this.OnClickGo),this.registerClick(this._ui.btn_reward,this.OnClickClaim)},i.onUIDisable=function(){},i.onUIDestroy=function(){this.onClose()},i.onClose=function(){u.CloseUI(n)},i.CloseUI=function(){var t=this;this.runCloseAni(this.node,(function(){t.onClose()}))},i.OnClickClose=function(){this.CloseUI()},i.OnClickGo=function(){this.CloseUI()},i.OnClickClaim=function(){if(f.CheckIsEnterFromCollection()){this.CloseUI(),s.Player.CollectionAwardClaim.val=!0,s.Player.AddProp(l.UNLOCK_BOTTLE,1,!1);var t=u.GetUI(d);t&&t.checkCollection(),u.ShowUI(h,void 0,{showClaimBtn:!0,rewards:{prop:{id:l.UNLOCK_BOTTLE,count:1}},closeCallback:function(){c.emit(a.EventPropCountChange)}})}},n}(r))._prefabUrl="ui/UICollectGameLayer",I._className="UICollectGameLayer",_=I))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/UICommonAdDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIHelp.ts","./GameAdMgr.ts","./auto_UICommonAdDialog.ts"],(function(i){var t,o,a,n,e,s,l,c,d;return{setters:[function(i){t=i.inheritsLoose},function(i){o=i.cclegacy,a=i._decorator,n=i.Label},function(i){e=i.UIBase},function(i){s=i.default},function(i){l=i.EAdPlayType,c=i.GameAdMgr},function(i){d=i.default}],execute:function(){var _,r;o._RF.push({},"8661fzWvERNJa8hl36egdZC","UICommonAdDialog",void 0);var h=a.ccclass,u=(a.property,i("default",h("UICommonAdDialog")(((r=function(i){function o(){for(var t,o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(t=i.call.apply(i,[this].concat(a))||this)._ui=void 0,t._isWaitingAd=!1,t._type=void 0,t._title="",t._desc="",t._adId=l.ad_none,t._showAdCallback=void 0,t._adCallback=void 0,t._closeCallback=void 0,t}t(o,i);var a=o.prototype;return a.onInit=function(i){this._type=i[0].type,this._adCallback=i[0].adCallback,this._closeCallback=i[0].closeCallback,this._showAdCallback=i[0].showAdCallback},a.onUILoad=function(){switch(this._ui=this.node.addComponent(d),this.addInterlayer(),this._type){case u.ADD_TIME:this._adId=l.ad_video_add_time_dialog,this._title="增加时间",this._desc="时间不多了, 增加120s。",s.SetSpriteFrame(this._ui.spr_ad_icon,"common/Game_icon_shijian");break;case u.UNLOCK_BOTTLE:this._adId=l.ad_video_unlock_bottle_prop,this._title="解锁空瓶",this._desc="解锁一个空瓶子",s.SetSpriteFrame(this._ui.spr_ad_icon,"adpop/pingzi")}this._ui.label_ad_title.getComponent(n).string=this._title,this._ui.label_ad_desc.getComponent(n).string=this._desc,this.registerClick(this._ui.btn_close,this.onClose),this.registerClick(this._ui.btn_claim,this.onClaim),this.runOpenAni(this.node)},a.onUIStart=function(){},a.onUIEnable=function(){},a.onUIDisable=function(){},a.onUIDestroy=function(){s.CloseUI(o)},a.onClose=function(){this._isWaitingAd||(this.runCloseAni(this.node,(function(){s.CloseUI(o)})),this._closeCallback&&this._closeCallback())},a.onClaim=function(){this._isWaitingAd=!0;var i=this;c.getInstance().ShowRewardVideoAd(this._adId,(function(t){i._isWaitingAd=!1,t&&(i._adCallback&&i._adCallback(t),i.onClose())}),this._showAdCallback)},o}(e))._prefabUrl="ui/UICommonAdDialog",r._className="UICommonAdDialog",_=r))||_),i("ECommonAdType",function(i){return i[i.UNLOCK_BOTTLE=1]="UNLOCK_BOTTLE",i[i.ADD_TIME=2]="ADD_TIME",i}({})));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIFit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Log.ts"],(function(i){var t,e,n,s,_,h,o,S,a,E;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy,n=i._decorator,s=i.view,_=i.ResolutionPolicy,h=i.sys,o=i.UITransform,S=i.Vec3,a=i.Size},function(i){E=i.default}],execute:function(){var l,c;e._RF.push({},"b055eTnCLNEI4u4g8uwMi4U","UIFit",void 0);var A=n.ccclass,g=(n.property,i("EAlignment",function(i){return i[i.EAlignment_LB=0]="EAlignment_LB",i[i.EAlignment_CB=1]="EAlignment_CB",i[i.EAlignment_RB=2]="EAlignment_RB",i[i.EAlignment_LC=3]="EAlignment_LC",i[i.EAlignment_CC=4]="EAlignment_CC",i[i.EAlignment_RC=5]="EAlignment_RC",i[i.EAlignment_LT=6]="EAlignment_LT",i[i.EAlignment_CT=7]="EAlignment_CT",i[i.EAlignment_RT=8]="EAlignment_RT",i}({}))),F=i("EUIScale",function(i){return i[i.EUIScale_N=0]="EUIScale_N",i[i.EUIScale_X=1]="EUIScale_X",i[i.EUIScale_Y=2]="EUIScale_Y",i[i.EUIScale_XY=3]="EUIScale_XY",i}({})),r=A("Fit")(((c=function(){function i(){this.FitSize=new a(750,1334),this._DEFAULT_W=0,this._DEFAULT_H=0,this._SCALE_X=0,this._SCALE_Y=0,this._SAFE_SCALE_Y=-1,this._SAFE_TOP=-1,this._SAFE_BOTTOM=-1,this._FIT_TYPE=_.SHOW_ALL}i.getInstance=function(){return null==this._instance&&(this._instance=new i),this._instance};var e=i.prototype;return e.getScaleX=function(){return this._SCALE_X},e.getScaleY=function(){return this._SCALE_Y},e.initFit=function(i){this.FitSize=i;var t=s.getVisibleSize();E.log("FrameSize w = "+t.width+", FrameSize h = "+t.height),t.width/t.height>this.FitSize.width/this.FitSize.height?(this._DEFAULT_W=t.width/t.height*this.FitSize.height,this._DEFAULT_H=this.FitSize.height,this._FIT_TYPE=_.FIXED_HEIGHT):(this._DEFAULT_W=this.FitSize.width,this._DEFAULT_H=t.height/t.width*this.FitSize.width,this._FIT_TYPE=_.FIXED_WIDTH),this._SCALE_X=this._DEFAULT_W/this.FitSize.width,this._SCALE_Y=this._DEFAULT_H/this.FitSize.height,s.setDesignResolutionSize(this.FitSize.width,this.FitSize.height,this._FIT_TYPE)},e.initSafeInfo=function(){this._SAFE_TOP=this._DEFAULT_H-h.getSafeAreaRect().yMax,this._SAFE_BOTTOM=h.getSafeAreaRect().yMin,this._SAFE_BOTTOM>.05*this._DEFAULT_H&&(this._SAFE_BOTTOM=.05*this._DEFAULT_H),E.log("SafeArea yMax = "+h.getSafeAreaRect().yMax+", yMin = "+h.getSafeAreaRect().yMin+", FrameSize height = "+this._DEFAULT_H),s.setDesignResolutionSize(this.FitSize.width,this.FitSize.height,this._FIT_TYPE),this._FIT_TYPE==_.FIXED_WIDTH?this._SAFE_SCALE_Y=(this._DEFAULT_H-.5*this._SAFE_TOP)/this.FitSize.height:this._SAFE_SCALE_Y=1},e.getXPosAR=function(i,t){var e=i.getComponent(o);return e?t%3==0?-e.width*e.anchorX:t%3==2?e.width-e.width*e.anchorX:(-.5+e.anchorX)*e.width:0},e.getYPosAR=function(i,t){var e=i.getComponent(o);return e?0==Math.floor(t/3)?-e.height*e.anchorY:2==Math.floor(t/3)?e.height-e.height*e.anchorY:(-.5+e.anchorY)*e.height:0},e.setRelativePosX=function(i,t,e){if(void 0===t&&(t=g.EAlignment_LB),void 0===e&&(e=F.EUIScale_N),i&&i.isValid){if(F.EUIScale_X===e||F.EUIScale_XY===e){var n=i.getComponent(o);n&&(n.width*=this._SCALE_X)}var s=this.getXPosAR(i,t),_=(i.getPosition().x+s)*this._SCALE_X;_-=s,i.setPosition(new S(_,i.getPosition().y))}},e.setRelativePosY=function(i,t,e,n){if(void 0===t&&(t=g.EAlignment_LB),void 0===e&&(e=F.EUIScale_N),i&&i.isValid){var s=this.SafeScale;if(F.EUIScale_Y===e||F.EUIScale_XY===e){var _=i.getComponent(o);_&&(_.height*=this._SCALE_Y),s=this._SCALE_Y}var h=this.getYPosAR(i,t),a=(i.getPosition().y+h)*(0==Math.floor(t/3)?1:s);a-=h,i.setPosition(new S(i.getPosition().x,a))}},e.setRelativePos=function(i,t,e){void 0===t&&(t=g.EAlignment_CC),void 0===e&&(e=F.EUIScale_N),i&&i.isValid&&(this.setRelativePosX(i,t,e),this.setRelativePosY(i,t,e))},e.setSafeRelativePos=function(i,t,e){void 0===t&&(t=g.EAlignment_CC),void 0===e&&(e=F.EUIScale_N),i&&i.isValid&&(this.setRelativePosX(i,t,e),this.setRelativePosY(i,t,e),i.position.add(new S(0,.5*-this.SafeTop+i.position.y*(this._SCALE_Y-this._SAFE_SCALE_Y),0)))},e.setSlicedPos=function(i,t){this.setSlicedPosX(i,t),this.setSlicedPosY(i,t)},e.setSafeSlicedPos=function(i,t){i&&i.isValid&&(this.setSlicedPos(i,t),i.position.add(new S(0,.5*-this._SAFE_TOP,0)))},e.setSlicedPosX=function(i,t){if(i&&i.isValid){var e=0;t%3==0?e=.5*(this.FitSize.width-this._DEFAULT_W)+i.position.x:t%3==2&&(e=.5*(this.FitSize.width-this._DEFAULT_W)-i.position.x),i.position=new S(e,i.position.y,i.position.z)}},e.setSlicedPosY=function(i,t){if(i&&i.isValid){var e=0;0==Math.floor(t/3)?e=.5*(this.FitSize.height-this._DEFAULT_H)+i.position.y:2==Math.floor(t%3)&&(e=.5*(this.FitSize.height-this._DEFAULT_H)-i.position.y),i.position=new S(i.position.x,e,i.position.z)}},t(i,[{key:"SafeScale",get:function(){return this._SAFE_SCALE_Y<0&&this.initSafeInfo(),this._SAFE_SCALE_Y}},{key:"SafeTop",get:function(){return this._SAFE_TOP<0&&this.initSafeInfo(),this._SAFE_TOP}},{key:"SafeBottom",get:function(){return this._SAFE_BOTTOM<0&&this.initSafeInfo(),this._SAFE_BOTTOM}}]),i}())._instance=void 0,l=c))||l;i("default",r.getInstance());e._RF.pop()}}}));

System.register("chunks:///_virtual/UIFlyThemeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionHelp.ts","./UIBase.ts","./UIHelp.ts","./auto_UIFlyThemeLayer.ts"],(function(t){var e,i,o,n,s,r,a,u,l,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,n=t.Vec3,s=t.view,r=t.tween},function(t){a=t.default},function(t){u=t.UIBase},function(t){l=t.default},function(t){c=t.default}],execute:function(){var h,_;i._RF.push({},"57adbiDkitEOqezcyBoNHzz","UIFlyThemeLayer",void 0);var f=o.ccclass;o.property,t("default",f("UIFlyThemeLayer")(((_=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._ui=void 0,e._startPosition=void 0,e._bgID=void 0,e}e(i,t);var o=i.prototype;return o.onInit=function(t){this._startPosition=t[0].startPosition,this._bgID=t[0].bgID},o.onUILoad=function(){var t=this;this._ui=this.node.addComponent(c),this.addInterlayer(),l.SetOpacity(this._interlayer,0),this._ui.spr_reward1.setWorldPosition(this._startPosition),l.SetSpriteFrame(this._ui.spr_reward1,"shopbg/xiao"+this._bgID);var e=this._ui.theme_btn.position,i=new n(s.getVisibleSize().width/2-75,e.y),o=new n(s.getVisibleSize().width/2+75,e.y);r(this._ui.theme_btn).to(.6,{position:i}).call((function(){a.FlyToTarget(t._ui.spr_reward1,t._startPosition,t._ui.theme_btn.worldPosition,(function(){r(t._ui.theme_btn).to(.6,{position:o}).call((function(){t.onClose()})).start()}))})).start()},o.onUIStart=function(){},o.onUIEnable=function(){},o.onUIDisable=function(){},o.onUIDestroy=function(){this.onClose()},o.onClose=function(){l.CloseUI(i)},i}(u))._prefabUrl="ui/UIFlyThemeLayer",_._className="UIFlyThemeLayer",h=_))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelMapLoader.ts","./BottleData.ts","./GameLevelSaveData.ts","./StepRecord.ts","./Defines.ts","./AudioManager.ts","./DataManager.ts","./Log.ts","./UIHelp.ts","./Utils.ts","./GameAdMgr.ts","./GameUtils.ts","./PlatformManager.ts","./ABTestUtil.ts","./BottleItemPool.ts","./SolveGameUtil.ts","./TAData.ts","./UIUtil.ts","./VibrateUtil.ts","./auto_UIGameLayer.ts","./BottleRackItem.ts","./BaseUIGameLayer.ts","./UIGameResult.ts","./UIGuideLayer.ts","./UIHallSetting.ts","./UILoginShareLayer.ts","./UINewTypeGuideDialog.ts","./UIPropUseLayer.ts","./UIRebornDialog.ts"],(function(e){var t,o,i,s,l,n,a,r,u,_,h,c,p,d,v,f,C,g,m,b,S,T,L,y,k,B,G,I,w,P,O,U,E,M,A,N,V,x,D,R,F,H,K,W,z,X,q,Y,j,J;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,i=e._decorator,s=e.UIOpacity,l=e.UITransform,n=e.view,a=e.Label,r=e.randomRangeInt,u=e.tween,_=e.Vec3,h=e.Sprite,c=e.Tween,p=e.ProgressBar,d=e.Color},function(e){v=e.LevelMapLoader},function(e){f=e.CompleteType,C=e.BottleType},function(e){g=e.GameLevelSaveData},function(e){m=e.StepRecord},function(e){b=e.GameDefine,S=e.GameEvent,T=e.Debug,L=e.PROP_ID,y=e.Sfx,k=e.GameType},function(e){B=e.default},function(e){G=e.default},function(e){I=e.default},function(e){w=e.default},function(e){P=e.default},function(e){O=e.GameAdMgr,U=e.EAdPlayType},function(e){E=e.default},function(e){M=e.default},function(e){A=e.ABTestUtil},function(e){N=e.default},function(e){V=e.SolveGameUtil},function(e){x=e.TAData},function(e){D=e.UIUtil},function(e){R=e.VibrateUtil},function(e){F=e.default},function(e){H=e.default},function(e){K=e.BaseUIGameLayer},function(e){W=e.default},function(e){z=e.default},function(e){X=e.default},function(e){q=e.default},function(e){Y=e.default},function(e){j=e.default},function(e){J=e.default}],execute:function(){var Q,Z;o._RF.push({},"e583aEbCpFHhr/wTaGD4Us3","UIGameLayer",void 0);var $=i.ccclass,ee=(i.property,b.MOVE_BOTTLE_TIME_SCALE),te=b.FRAME_TIME,oe=b.LIQUID_SIZE,ie=e("ADD_TIME_PROP_TIME",120);e("UIGameLayer",$("UIGameLayer")(((Z=function(e){function o(){for(var t,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this)._ui=void 0,t._rackList=[],t._levelMap=[],t._stepRecords=new Map,t._levelCfg=null,t._levelMapCfg=[],t._isMultiLevel=!1,t._isGuideLevel=!1,t._isStuckGuideLevel=!1,t._guideStep=0,t._isStucked=!1,t._selectedBottle=null,t._hasTimer=!0,t._remainTime=0,t._isGameStart=!1,t._isPaused=!1,t._isShowingAd=!1,t._isGameOver=!1,t._curLevel=1,t._subLevelIndex=0,t._isSuccess=!1,t._stepCount=[],t._propTimes=[],t._isVanishingBottle=!1,t._vanishColorPropVideoCounts=[],t._vanishColorPropUseCounts=[],t._unlockBottleFreeCounts=[],t._unlockBottleVideoCounts=[],t._unlockBottlePropCounts=[],t._stepBackPropCounts=[],t._addTimeCount=[],t._rebornTimes=[],t._rebornShowTimes=[],t._watchVideoCount=[],t._mapScale=[1,1,1],t._spacingX=[1,1,1],t._isTestLevel=!1,t._showPropHintFingerTimer=10,t._isShownPropHintBubble=!1,t._showTaskBottleTipsInRound=!1,t._levelTime=[],t._minutes=0,t._seconds=0,t._checkComplete=new Map,t._progressTimerTween=void 0,t._progressLabelTween=void 0,t._toastTween=void 0,t._showTaskBottleTipsTween=null,t._isShowingStuckGuide=!1,t._gameLevelSaveData=void 0,t}t(o,e);var i=o.prototype;return i.onInit=function(e){var t;this.addInterlayer(),w.SetOpacity(this._interlayer,0),this._isTestLevel=null==(t=e[0])?void 0:t.isTestLevel},i.onUILoad=function(){this._ui=this.node.addComponent(F),this.UpdateBottleContentSize(0),this.UpdateThemeBg(),this._ui.node_root.getComponent(s).opacity=0},i.UpdateBottleContentSize=function(e){this.node.getComponent(l).setContentSize(n.getVisibleSize()),this._ui.bottle_scroll_view_content.setPosition(0,-this.GetSubLevelScrollOffset(e)),this.UpdateSubLevelDistance()},i.onUIEnable=function(){this.registerEvent(S.EventGameSettle,this.OnGameSettleEvent),this.registerEvent(S.EventPropCountChange,this.UpdateProps),this.registerEvent(S.EventChangeThemeChoose,this.UpdateThemeBg),this.registerEvent(S.EventGameGiveUp,this.OnGameGiveUp),this.registerEvent(S.EventSkipGuide,this.OnSkipGuide),this.registerEvent(S.EventWindowResize,this.OnWindowResize),this.registerClick(this._ui.btn_setting,this.OnClickSetting),this.registerClick(this._ui.btn_clear_color,this.OnClickVanishColor),this.registerClick(this._ui.btn_step_back,this.OnClickStepBack),this.registerClick(this._ui.btn_unlock_bottle,this.OnClickUnlockBottle),T.TestButton&&(this.registerClick(this._ui.spr_title_bg,this.ShowStartAnim),this.registerEvent(S.EventGameSkip,this.OnTestSkip),this.registerEvent(S.EventSubLevelSkip,this.OnTestSkipSubLevel),this.registerEvent(S.EventGameReduceTime,this.OnTestReduceTime),this.registerEvent(S.EventGameOneKeyClear,this.OnTestOnKeyClear))},i.onUIDestroy=function(){},i.start=function(){var e=G.Player.LevelId.val;this._isTestLevel&&(e=-1),this.StartGame(e,!1),x.Mgr.sendNormalGameStart("NewDeal",this._curLevel),this.UpdateProps()},i.update=function(e){if(this._isGameStart&&!this._isGameOver&&!this._isPaused&&!this._isShowingAd){if(this._showPropHintFingerTimer-=e,this._remainTime-=e,this._levelTime[this._subLevelIndex]+=e,this._hasTimer&&this._remainTime<=0)return this._isPaused=!0,void this.DoReborn();var t=this._remainTime;if(this._hasTimer){var o=Math.floor(t/60),i=Math.floor(t%60);this._minutes==o&&this._seconds==i||(this.ScheduleUpdateGameLevelSaveData(),this._minutes=o,this._seconds=i,this._ui.label_timer.getComponent(a).string=o.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0"))}this.CheckShowUsePropFinger()}},i.CheckShowUsePropFinger=function(){if(!this._isGuideLevel&&!this._isStuckGuideLevel&&this._isStucked&&!this._isShowingStuckGuide&&this._showPropHintFingerTimer<=0){var e=[],t=this.CanUnlockVideoBottle(),o=this.CanVanishColor(),i=this.CanStepBack();if(t?e.push(L.UNLOCK_BOTTLE):o?e.push(L.VANISH_COLOR):i&&e.push(L.STEP_BACK),e.length>0){var s=e[r(0,e.length)];this.ShowUsePropFinger(s)}}},i.SetPropHintBubbleShown=function(){},i.ShowInterLayer=function(){var e;null==(e=this._interlayer)||e.setSiblingIndex(10)},i.HideInterLayer=function(){var e;null==(e=this._interlayer)||e.setSiblingIndex(0)},i.StartGame=function(e,t){var o=this;if(I.log("StartGame level:"+e),this._isTestLevel||!this.RestoreGameLevelData(e)){this._isGuideLevel=e==b.LEVEL_GUIDE,this._curLevel=e,this._subLevelIndex=0,this.InitLevel(e);var i=this._levelCfg.levels.length;this._showTaskBottleTipsInRound=!1,this._isStucked=!1,this._levelTime=Array(i).fill(0),this._stepCount=Array(i).fill(0),this._propTimes=Array(i).fill(0),this._watchVideoCount=Array(i).fill(0),this._rebornTimes=Array(i).fill(0),this._rebornShowTimes=Array(i).fill(0),this._vanishColorPropVideoCounts=Array(i).fill(0),this._vanishColorPropUseCounts=Array(i).fill(0),this._unlockBottleFreeCounts=Array(i).fill(0),this._unlockBottleVideoCounts=Array(i).fill(0),this._unlockBottlePropCounts=Array(i).fill(0),this._stepBackPropCounts=Array(i).fill(0),this._addTimeCount=Array(i).fill(0),this._remainTime=this._levelCfg.time,this._guideStep=0,this._stepRecords.clear(),this.ScheduleUpdateGameLevelSaveData()}if(G.Player.RoundId.val=this._subLevelIndex+1,G.Player.saveData(),this._isStuckGuideLevel=this._levelCfg.levels[this._subLevelIndex]==b.MAP_ID_UNLOCK_BOTTLE_GUIDE,this._isSuccess=!1,this._isGameOver=!1,this._isPaused=!1,this._isShowingAd=!1,this._isGameStart=!1,this._showPropHintFingerTimer=10,this._isShownPropHintBubble=G.Player.IsShownPropHintBubble.val,this._hasTimer=-1!=this._levelCfg.time,this._selectedBottle=null,this._hasTimer){this._ui.spr_title_bg.active=!0;var l=Math.floor(this._remainTime/60),n=Math.floor(this._remainTime%60);this._ui.label_timer.getComponent(a).string=l.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")}else this._ui.spr_title_bg.active=!1;this._ui.layout_props.active=!this._isGuideLevel,this._ui.spr_mask_sub_level_top.active=this._isMultiLevel,this._ui.spr_mask_sub_level_bottom.active=this._isMultiLevel;var r=this;this.UpdateRemainBottlePos(this._subLevelIndex),this.scheduleOnce((function(){o._ui.node_root.getComponent(s).opacity=255})),this.ShowStartAnim(t),this.CheckProgress(0,!1),this.UpdateHiddenBottles(),this.UpdateLockBottleAndKeys(),this._isMultiLevel&&this.scheduleOnce((function(){o.UpdateBottleMaskHeight(o._subLevelIndex)}));var _=24*te;this._isMultiLevel&&(_=18*te*(this._levelCfg.levels.length-this._subLevelIndex)+40*te),this._isStuckGuideLevel&&(_+=20*te),this.ShowInterLayer(),this.scheduleOnce((function(){r.CheckShowGuideDialog()}),_),this.CheckVanishColorEnable(),this.CheckUnlockVideoBottleEnable(),this.CheckStepBackEnable(),this._isGuideLevel?u(this.node).delay(_).call((function(){o.StartGuideStep(),o.CheckShowShareReward()})).start():this._isStuckGuideLevel?u(this.node).delay(_).call((function(){o.StartStuckGuideStep(),o.CheckShowShareReward()})).start():this.CheckShowShareReward()},i.UpdateRemainBottlePos=function(e){var t=this;this.scheduleOnce((function(){var o=t.GetSubLevelNodeRoot(e);if(o){var i=o.position,s=o.getComponent(l).height,n=t._ui.label_remain_bottle.getComponent(l).height,a=t._ui.label_remain_bottle.position,r=i.y-.5*s*t._mapScale[e]-.5*n+64*t._mapScale[e];t._ui.label_remain_bottle.setPosition(new _(a.x,r))}}))},i.CheckShowShareReward=function(){G.Player.LoginShareClick.val=!1,G.Player.saveData(),G.Player.bShouldShowDailyShare()&&w.ShowUI(q)},i.ShowStartAnim=function(e){w.SetOpacity(this.GetSubLevelNodeRoot(0),255),w.SetOpacity(this.GetSubLevelNodeRoot(1),255),w.SetOpacity(this.GetSubLevelNodeRoot(2),255),this._isGameStart=!1,this._isMultiLevel?this.ShowMultiLevelStartAnim(e):this.ShowSingleLevelStartAnim()},i.ShowMultiLevelStartAnim=function(e){var t=this;this._rackList[this._levelCfg.levels.length-1].forEach((function(e){e._ui.spr_rack_bg.getComponent(s).opacity=0,e._bottleList.forEach((function(e){e.node.getComponent(s).opacity=0,w.SetOpacity(e._ui.spine_transfer_bottle_bg,0),w.SetOpacity(e._ui.spine_transfer_bottle_fg,0),w.SetOpacity(e._ui.label_depth_num,0)}))})),w.SetOpacity(this._ui.bottle_scroll_view_content,0),w.SetOpacity(this._ui.btn_setting,0),w.SetOpacity(this._ui.label_remain_bottle,0),this._ui.layout_props.children.forEach((function(e){w.SetOpacity(e,0)})),this.scheduleOnce((function(){t._ui.node_title.scale=_.ONE.clone().multiplyScalar(.5),u(t._ui.node_title).to(7*te,{scale:_.ONE.clone().multiplyScalar(1.02)}).to(5*te,{scale:_.ONE.clone()}).start(),u(t._ui.btn_setting.getComponent(s)).delay(10*te).to(10*te,{opacity:255}).start(),[t._rackList[t._levelCfg.levels.length-1]].forEach((function(e,t){e.forEach((function(e,o){u(e._ui.spr_rack_bg.getComponent(s)).delay(3*te+2*o*te).to(7*te,{opacity:255}).start();var i=e._ui.spr_rack_bg.position.clone();e._ui.spr_rack_bg.setPosition(i.x,i.y-25),u(e._ui.spr_rack_bg).delay(3*te+2*o*te).to(7*te,{position:new _(i.x,i.y)}).start(),e._bottleList.forEach((function(e,i){var l=2*o*te+2*i*te+24*t*te;if(e.isHiddenBottle)u(e.node.getComponent(s)).to(0,{opacity:0}).delay(5*te).to(0,{opacity:255}).start(),w.SetOpacity(e._ui.node_hidden_bottle,0),w.SetOpacity(e._ui.node_mask,0),w.SetOpacity(e._ui.spr_bottle_fg,0),w.SetOpacity(e._ui.spr_bottle_bg,0),w.SetOpacity(e._ui.spr_shadow,0),u(e._ui.node_hidden_bottle.getComponent(s)).delay(5*te+l+te).to(0,{opacity:128}).to(6*te,{opacity:255}).call((function(){w.SetOpacity(e._ui.spine_transfer_bottle_bg,255),w.SetOpacity(e._ui.spine_transfer_bottle_fg,255),w.SetOpacity(e._ui.label_depth_num,255),w.SetOpacity(e._ui.node_mask,255),w.SetOpacity(e._ui.spr_bottle_fg,255),w.SetOpacity(e._ui.spr_bottle_bg,255),w.SetOpacity(e._ui.spr_shadow,255)})).start();else{var n=u().delay(5*te+l+te).to(6*te,{opacity:255});n.clone().target(e._ui.spine_transfer_bottle_bg.getComponent(s)).start(),n.clone().target(e._ui.spine_transfer_bottle_fg.getComponent(s)).start(),n.clone().target(e._ui.label_depth_num.getComponent(s)).start(),u(e.node.getComponent(s)).to(0,{opacity:0}).delay(5*te+l).to(6*te,{opacity:255}).start()}var a=e.node.position.clone();e.node.setPosition(a.x,a.y+35);var r=a.y+35,h=a.y,c=a.y,p=a.y;u(e.node).delay(3*te+l).to(5*te,{position:new _(a.x,r)}).to(5*te,{position:new _(a.x,h),scale:new _(.95,1.05,1)},{easing:"sineInOut"}).call((function(){e.PlayWaterSplashAnim(),A.IsABTestB_V3()&&e.PlayWaterShakeAnim(10*te)})).to(3*te,{position:new _(a.x,c),scale:new _(1.05,.95,1)},{easing:"sineInOut"}).to(5*te,{position:new _(a.x,p),scale:_.ONE.clone()},{easing:"sineInOut"}).start()}))}))})),t._ui.layout_props.children.forEach((function(e,t){u(e.getComponent(s)).to(0,{opacity:0}).delay(17*te+2*t*te).to(5*te,{opacity:255}).start(),u(e).to(0,{scale:_.ONE.clone().multiplyScalar(.5)}).delay(17*te+2*t*te).to(7*te,{scale:_.ONE.clone().multiplyScalar(1.02)}).to(5*te,{scale:_.ONE.clone()}).start()})),w.SetOpacity(t._ui.bottle_scroll_view_content,255);var e=-t.GetSubLevelScrollOffset(t._levelCfg.levels.length-1),o=-t.GetSubLevelScrollOffset(t._subLevelIndex);t._ui.bottle_scroll_view_content.setPosition(0,e);var i=18*te*(t._levelCfg.levels.length-t._subLevelIndex);t._subLevelIndex!=t._levelCfg.levels.length-1?u(t._ui.bottle_scroll_view_content).call((function(){w.SetOpacity(t._ui.spr_mask_sub_level_top,255),w.SetOpacity(t._ui.spr_mask_sub_level_bottom,255)})).delay(35*te).to(i/4,{position:new _(0,e+19)},{easing:"cubicIn"}).to(i/2,{position:new _(0,o-10)},{easing:"sineInOut"}).to(i/4,{position:new _(0,o)},{easing:"cubicOut"}).call((function(){t.runFadeOutAni(t._ui.spr_mask_sub_level_top),t.runFadeOutAni(t._ui.spr_mask_sub_level_bottom)})).start():u(t._ui.bottle_scroll_view_content).delay(35*te).call((function(){t.runFadeOutAni(t._ui.spr_mask_sub_level_top),t.runFadeOutAni(t._ui.spr_mask_sub_level_bottom)})).start();for(var l=10*te+i,n=0;n<t._levelCfg.levels.length;n++){var a=t.GetSubLevelNodeRoot(n);a&&t._subLevelIndex!=n&&(w.SetOpacity(a,255),u(a.getComponent(s)).delay(l).to(10*te,{opacity:0}).start())}}))},i.ShowSingleLevelStartAnim=function(){var e=this;this._ui.bottle_scroll_view_content.setPosition(0,-this.GetSubLevelScrollOffset(0)),this._rackList.forEach((function(e){e.forEach((function(e){e._ui.spr_rack_bg.getComponent(s).opacity=0,e._bottleList.forEach((function(e){e.node.getComponent(s).opacity=0}))}))})),this._ui.btn_setting.getComponent(s).opacity=0,w.SetOpacity(this._ui.label_remain_bottle,0),w.SetOpacity(this._ui.label_timer,0),this.scheduleOnce((function(){e._rackList.forEach((function(t){t.forEach((function(e,t){var o=e._ui.spr_rack_bg.position.clone();u(e._ui.spr_rack_bg).to(0,{position:new _(o.x,o.y-30)}).delay(2*t*te).call((function(){var t=e._ui.spr_rack_bg.getComponent(s);u(t).to(0,{opacity:0}).to(6*te,{opacity:255}).start()})).to(10*te,{position:o}).start(),e._bottleList.forEach((function(e,o){if(e.isHiddenBottle){var i=(t+o)*te;u(e.node.getComponent(s)).delay(5*te).to(0,{opacity:255}).start(),w.SetOpacity(e.node,0),w.SetOpacity(e._ui.node_hidden_bottle,0),w.SetOpacity(e._ui.node_mask,0),w.SetOpacity(e._ui.spr_bottle_fg,0),w.SetOpacity(e._ui.spr_bottle_bg,0),w.SetOpacity(e._ui.spr_shadow,0),u(e._ui.node_hidden_bottle.getComponent(s)).delay(5*te+i+te).to(0,{opacity:128}).to(6*te,{opacity:255}).call((function(){w.SetOpacity(e._ui.spine_transfer_bottle_bg,255),w.SetOpacity(e._ui.spine_transfer_bottle_fg,255),w.SetOpacity(e._ui.label_depth_num,255),w.SetOpacity(e._ui.node_mask,255),w.SetOpacity(e._ui.spr_bottle_fg,255),w.SetOpacity(e._ui.spr_bottle_bg,255),w.SetOpacity(e._ui.spr_shadow,255)})).start()}else{var l=e.node.getComponent(s);u(l).delay((t+o)*te).to(0,{opacity:0}).delay(4*te).to(6*te,{opacity:255}).start()}var n=e.node.position.clone();u(e.node).delay((t+o)*te).to(0,{position:new _(n.x+20,n.y)}).delay(4*te).to(5*te,{position:new _(n.x-3,n.y)}).to(8*te,{position:n}).start(),u(e._ui.spr_lock.getComponent(s)).to(0,{opacity:0}).delay((t+o)*te).delay(5*te).call((function(){e.UpdateLockSpine()})).to(6*te,{opacity:255}).start()}))}));var o=e._ui.btn_setting.position.clone();u(e._ui.btn_setting).to(0,{position:new _(o.x+10,o.y)}).to(12*te,{position:o}).start(),u(e._ui.btn_setting).to(0,{scale:_.ONE.clone().multiplyScalar(.5)}).to(10*te,{scale:_.ONE.clone().multiplyScalar(1.05)}).to(6*te,{scale:_.ONE.clone()}).start();var i=e._ui.btn_setting.getComponent(s);u(i).to(0,{opacity:0}).to(10*te,{opacity:255}).start()}))})),this._ui.layout_props.children.forEach((function(e,t){u(e).to(0,{scale:_.ONE.clone().multiplyScalar(.62)}).delay(2*t*te).delay(2*te).to(8*te,{scale:_.ONE.clone().multiplyScalar(1.05)}).to(6*te,{scale:_.ONE.clone()}).start(),u(e.getComponent(s)).to(0,{opacity:0}).delay(2*t*te).to(2*te,{opacity:255}).start()})),u(this._ui.label_remain_bottle.getComponent(s)).delay(6*te).to(4*te,{opacity:255}).start(),u(this._ui.label_timer.getComponent(s)).delay(6*te).to(4*te,{opacity:255}).start(),u(this._ui.node_title).to(0,{scale:_.ONE.clone().multiplyScalar(.5)}).to(8*te,{scale:_.ONE.clone().multiplyScalar(1.05)}).to(4*te,{scale:_.ONE.clone()}).start(),u(this._ui.node_title.getComponent(s)).to(0,{opacity:0}).to(8*te,{opacity:255}).start(),u(this._ui.progress_timer).to(0,{scale:_.ONE.clone().multiplyScalar(.5)}).delay(3*te).to(8*te,{scale:_.ONE.clone().multiplyScalar(1.05)}).to(3*te,{scale:_.ONE.clone().multiplyScalar(1)}).start(),u(this._ui.progress_timer.getComponent(s)).to(0,{opacity:0}).delay(3*te).to(8*te,{opacity:255}).start()},i.DelayCheckShowGuideDialog=function(){var e=this;this.scheduleOnce((function(){e.CheckShowGuideDialog()}),.1)},i.CheckShowGuideDialog=function(){var e=this.GetNextGuideType();e?(G.User.setIsShowNewTypeDialogGuide(e),w.ShowUI(Y,void 0,{guideType:e,closeCallback:this.DelayCheckShowGuideDialog.bind(this)})):this.HideInterLayer()},i.GetNextGuideType=function(){return E.GetMapGuideType(this._levelMap[this._subLevelIndex])},i.ShouldShowGuideDialog=function(){return null!=this.GetNextGuideType()},i.InitLevel=function(e){if(this._ui.label_title.getComponent(a).string="第"+e+"关",this._levelCfg=v.getLevelConfig(e),null!=this._levelCfg){var t=v.getNormalColorTypeCount(e);E.RandomShuffleLiquidColors(t,this._levelCfg.levels.length),this._isMultiLevel=this._levelCfg.levels.length>1;for(var o=Math.max(this._levelCfg.levels.length,this._rackList.length),i=0;i<o;i++){var s=this._levelCfg.levels[i];s?(this._levelMapCfg[i]=v.getLevelMapConfig(s),this._levelMap[i]=v.getFullLevelMap(s,!this._isGuideLevel),this.InitSubLevel(i)):this.DeInitSubLevel(i)}var l=this.GetSubTotalNum(this._subLevelIndex);this._ui.label_remain_bottle.getComponent(a).string="剩余:"+l,this._ui.node_anim_bottle.scale=_.ONE.clone().multiplyScalar(this._mapScale[0]),this.UpdateSubLevelDistance(),x.Mgr.sendNormalRoundStart(this._curLevel,this._subLevelIndex+1)}},i.InitSubLevel=function(e){var t=this;if(this._levelCfg&&this._levelMapCfg){var o=this.GetSubLevelNodeRoot(e);if(o){var i=this._levelMapCfg[e];if(null!=this._levelCfg&&null!=i){var s=this._levelMap[e];if(this.UpdateRackSize(e,this._isMultiLevel),null!=s&&s.length>0){var l,n=s.length;null==(l=this._rackList[e])||l.forEach((function(e){e.RecycleBottles(),e.node.removeFromParent(),e.node.destroy()})),this._rackList[e]=[];for(var a=0;a<n;a++){var r={subLevelIndex:e,index:a,bottleData:s[a],spacingX:this._spacingX[e],onClickListener:function(e,o,i){t.OnBottleClick(i)}},u=w.CreateWidget(H,this.bottleRackPrefab,r);o.addChild(u.node),this._rackList[e].push(u)}}}}}},i.DeInitSubLevel=function(e){var t;this.GetSubLevelNodeRoot(e)&&(null==(t=this._rackList[e])||t.forEach((function(e){e.RecycleBottles(),e.node.removeFromParent(),e.node.destroy()})),this._rackList[e]=[])},i.GoToSubLevel=function(e){var t=this;if(this._levelCfg){if(this._isStuckGuideLevel=this._levelCfg.levels[this._subLevelIndex]==b.MAP_ID_UNLOCK_BOTTLE_GUIDE,x.Mgr.sendNormalRoundStart(this._curLevel,this._subLevelIndex+1),this.CheckUnlockVideoBottleEnable(),this.CheckVanishColorEnable(),this.CheckStepBackEnable(),this.UpdateBottleMaskHeight(e),this._ui.node_anim_bottle.setScale(this._ui.node_anim_bottle.scale=_.ONE.clone().multiplyScalar(this._mapScale[e])),0==e)this._ui.bottle_scroll_view_content.setPosition(0,-this.GetSubLevelScrollOffset(0));else{var o=-this.GetSubLevelScrollOffset(e),i=-this.GetSubLevelScrollOffset(e-1);u(this._ui.bottle_scroll_view_content).call((function(){w.SetOpacity(t._ui.spr_mask_sub_level_top,255),w.SetOpacity(t._ui.spr_mask_sub_level_bottom,255)})).to(12*te,{position:new _(0,i-19)},{easing:"cubicIn"}).to(24*te,{position:new _(0,o+7)},{easing:"sineInOut"}).to(12*te,{position:new _(0,o)},{easing:"cubicOut"}).start();var l=this.GetSubLevelNodeRoot(e);l&&u(l.getComponent(s)).to(7*te,{opacity:255}).start();var n=this.GetSubLevelNodeRoot(e-1),a=5*te;u(n).delay(30*te).to(a,{position:new _(0,300)}).call((function(){t.runFadeOutAni(t._ui.spr_mask_sub_level_top),t.runFadeOutAni(t._ui.spr_mask_sub_level_bottom),t.CheckShowGuideDialog()})).start(),w.SetOpacity(n,255),u(n.getComponent(s)).delay(30*te).to(a,{opacity:0}).start()}this.UpdateRemainBottlePos(e),u(this._ui.label_remain_bottle.getComponent(s)).to(0,{opacity:0}).delay(27*te).to(8*te,{opacity:255}).start()}},i.GetSubLevelNodeRoot=function(e){return 0==e?this._ui.node_root_bottle_1:1==e?this._ui.node_root_bottle_2:2==e?this._ui.node_root_bottle_3:void 0},i.OnWindowResize=function(){var e=this;if(this._levelCfg)for(var t=0;t<(null==(o=this._levelCfg)?void 0:o.levels.length);t++){var o;this.UpdateRackSize(t,this._isMultiLevel)}for(var i=function(t){e._rackList[t].forEach((function(o){o.SetSpacingX(e._spacingX[t])}))},s=0;s<this._rackList.length;s++)i(s);this.UpdateBottleContentSize(this._subLevelIndex),this.UpdateBottleMaskHeight(this._subLevelIndex)},i.UpdateBottleMaskHeight=function(e){var t,o,i,s,a=n.getVisibleSize().height/2-44.5-this.GetSubLevelNodeRoot(e).getComponent(l).height/2*this._mapScale[e],r=n.getVisibleSize().height/2+44.5-this.GetSubLevelNodeRoot(e).getComponent(l).height/2*this._mapScale[e]-30,u=(this.GetSubLevelNodeRoot(e).getComponent(l).height,this._mapScale[e],n.getVisibleSize().height),_=(n.getVisibleSize().height-500)/2;a>_&&(a=_),r>_&&(r=_);var c=(a-20)/u,p=a/u;null==(t=this._ui.spr_mask_sub_level_top.getComponent(h).material)||t.setProperty("startPos",c),null==(o=this._ui.spr_mask_sub_level_top.getComponent(h).material)||o.setProperty("endPos",p);var d=(u-r+20)/u,v=(u-r)/u;null==(i=this._ui.spr_mask_sub_level_bottom.getComponent(h).material)||i.setProperty("startPos",d),null==(s=this._ui.spr_mask_sub_level_bottom.getComponent(h).material)||s.setProperty("endPos",v)},i.UpdateRackSize=function(e,t){var o=0,i=this._levelMap[e];i.forEach((function(e){o<e.length&&(o=e.length)}));var s=E.CalcMapScale(o,i.length,t);this._mapScale[e]=s[0],this._spacingX[e]=s[1];var l=this.GetSubLevelNodeRoot(e),n=_.ONE.clone().multiplyScalar(this._mapScale[e]);l.setScale(n),t?l.setPosition(0,44.5):l.setPosition(0,0)},i.UpdateSubLevelDistance=function(){var e=this;this.scheduleOnce((function(){e._ui.node_root_bottle_content_1.setPosition(0,e.GetSubLevelScrollOffset(0)),e._ui.node_root_bottle_content_2.setPosition(0,e.GetSubLevelScrollOffset(1)),e._ui.node_root_bottle_content_3.setPosition(0,e.GetSubLevelScrollOffset(2))}))},i.GetSubLevelScrollOffset=function(e){if(0==e)return.5*-n.getVisibleSize().height;if(1==e){var t=this._ui.node_root_bottle_1.getComponent(l).height*this._mapScale[0],o=this._ui.node_root_bottle_2.getComponent(l).height*this._mapScale[1];return.5*-n.getVisibleSize().height-.5*t-.5*o}if(2==e){var i=this._ui.node_root_bottle_1.getComponent(l).height*this._mapScale[0],s=this._ui.node_root_bottle_2.getComponent(l).height*this._mapScale[1],a=this._ui.node_root_bottle_3.getComponent(l).height*this._mapScale[2];return.5*-n.getVisibleSize().height-i/2-s-a/2}return 0},i.OnClickVanishColor=function(){if(B.playEffect(y.SOUND_BUTTON),!this._isGameOver&&!this._isVanishingBottle)if(this.CanVanishColor()){var e=this._subLevelIndex,t=this.GetVanishColors(e);if(null!=t&&0!=t.length)if(this.HideBubbles(),this._isGameStart=!0,x.Mgr.sendEventButton("button_vanish_color"),G.Player.GetPropCount(L.VANISH_COLOR)<=0){this._isShowingAd=!0;var o=this;O.getInstance().ShowRewardVideoAd(U.ad_video_vanish_color,(function(t){o._isShowingAd=!1,t&&(o.AddWatchVideoCount(e),o._vanishColorPropVideoCounts[e]++,x.Mgr.sendNormalGameGetProp(o._curLevel,o._stepCount[e],L.VANISH_COLOR,"video",e+1),o.VanishColor(),o.SetPropHintBubbleShown())}),(function(){x.Mgr.sendNormalGameAd(o._curLevel,o._stepCount[e],U.ad_video_vanish_color.toString(),e+1)}))}else G.Player.UseProp(L.VANISH_COLOR,1),this.VanishColor();else this.ToastTips("该状态下不可使用此道具")}else this.ToastPropsNotEnough()},i.VanishColor=function(){this.DoVanishColor()},i.GetVanishColors=function(e){var t,o=this,i=this.GetCollectedCollors(e),s=this.GetCollectedKeysCount(e),l=[];this._levelMap[e].forEach((function(e){e.forEach((function(e){e.unlockColor>0&&!i.includes(e.unlockColor)&&l.push(e.unlockColor)}))}));var n=[],a=new Map,r=new Map,u=v.getLevelRareColor(this._levelCfg.levels[e]);u.push.apply(u,l),this._levelMap[e].forEach((function(e,t){e.forEach((function(e,i){e.unlockId<=0||e.unlockId>=s?e.bottles.forEach((function(s,l){var n=o.GetBottleTopTypeAndCount(s.bottle),_=n[0],h=n[1];_>0&&(h<s.bottle.length||s.complete_type==f.NEVER||s.complete_type==f.EMPTY_NEXT)?s.bottle.forEach((function(e,o){-1!=u.indexOf(e)?(r.has(e)||r.set(e,[]),r.get(e).push([t,i,l,o])):e>0&&(a.has(e)||a.set(e,[]),a.get(e).push([t,i,l,o]))})):I.log("瓶子已满",t,i,e.bottleData,e)})):I.log("瓶子锁定",t,i,e.bottleData,e)}))})),this._levelMap[e].forEach((function(e,t){e.forEach((function(e,t){e.bottles.forEach((function(t,o){var i;t.collect_type>0&&e.bottles[o+1]&&(((null==(i=a.get(t.collect_type))?void 0:i.length)||0)>0&&(n[t.collect_type]?n[t.collect_type]++:n[t.collect_type]=1))}))}))}));var _=a.size>0?a:r,h=Array.from(_.keys());I.log("colorTypes:",h),I.log("colorBottles:",n);var c=(null==(t=this._levelMapCfg[e])?void 0:t.segment)||0;if(!c||0==c)return[];for(var p=0;p<h.length;p++){var d,C=h[p];((null==(d=a.get(C))?void 0:d.length)||0)<c&&_.delete(C)}h=Array.from(_.keys()),n.forEach((function(e,t){t&&e&&h.splice(h.indexOf(t),1)})),I.log("colorTypes:",h);var g=h[Math.floor(Math.random()*h.length)];return I.log("randomColor:",g),_.get(g)},i.DoVanishColor=function(){var e=this,t=this._subLevelIndex,o=this._levelMapCfg[t].segment,i=this.GetVanishColors(t);if(!(null==i||i.length<o)){this._selectedBottle=null,this.UpdateSelectedBottle(),this._stepRecords.clear(),this.CheckStepBackEnable(),this._isStucked=!1,this._propTimes[t]++,this._vanishColorPropUseCounts[this._subLevelIndex]++,this.CheckVanishColorEnable(),G.TA.TotalUseTools.val++,G.TA.saveData(),x.Mgr.sendNormalGameUseProp(this._curLevel,this._stepCount[t],L.VANISH_COLOR,this._propTimes[t],t+1),P.shuffleArray(i);var s=new Array;i.forEach((function(e){-1==s.findIndex((function(t){return t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]}))&&s.push([e[0],e[1],e[2]])}));for(var l=s.length>=o,n=new Array,a=0,r=[],u=function(){var o=i.pop(),s=o[0],u=o[1],_=o[2],h=o[3];if(!l||-1==n.findIndex((function(e){return e[0]==s&&e[1]==u&&e[2]==_}))){I.log("vanishColor: deleteColor",t,s,u,_,h,e._levelMap[t][s][u].bottles[_].bottle[h]),e._levelMap[t][s][u].bottles[_].bottle[h]=0,n.push([s,u,_]),a++;var c=e._levelMap[t][s][u].clone();r.push({index:[s,u,_],data:c,remainDepth:e._levelMap[t][s][u].remainDepth})}};a<o;)u();n.forEach((function(o){for(var i=e._levelMap[t][o[0]][o[1]].bottles[o[2]],s=i.bottle,l=0;l<s.length;l++)if(0==s[l])for(var n=l+1;n<s.length;n++)if(0!=s[n]){s[l]=s[n],s[n]=0;break}null!=i.key_index&&i.key_index>=0&&0==i.bottle[i.key_index]&&(i.key_collected=!0)})),this.CheckGameOver(),this._isGameOver||this.ScheduleUpdateGameLevelSaveData(),this._isVanishingBottle=!0;var _=this;w.ShowUI(j,void 0,{propID:L.VANISH_COLOR,callback:function(){r.forEach((function(e,o){for(var i=e.data.showingBottle.bottle,s=e.data.showingBottle.unknowns,l=0;l<i.length;l++)if(0==i[l])for(var n=l+1;n<i.length;n++)if(0!=i[n]){i[l]=i[n],i[n]=0,s[l]=s[n],s[n]=0;break}_.PlayBottleVanishAnim(e.index,e.data,.4*o,t)})),_.scheduleOnce((function(){_._isVanishingBottle=!1,_.CheckProgress(),_.UpdateLockBottleAndKeys()}),2.4),I.log("vanishColor:",n),I.log("afterVanishColor:",_._levelMap)}})}},i.OnClickStepBack=function(){var e=this;if(B.playEffect(y.SOUND_BUTTON),!this._isGameOver)if(this.CanStepBack())if(this.HideBubbles(),this._isGameStart=!0,x.Mgr.sendEventButton("button_step_back"),G.Player.GetPropCount(L.STEP_BACK)<=0){var t=this._subLevelIndex;this._isShowingAd=!0;var o=this;O.getInstance().ShowRewardVideoAd(U.ad_video_step_back,(function(i){o._isShowingAd=!1,i&&(o.AddWatchVideoCount(t),e._stepBackPropCounts[t]++,x.Mgr.sendNormalGameGetProp(o._curLevel,o._stepCount[t],L.STEP_BACK,"video",t+1),G.Player.AddProp(L.STEP_BACK,3),o.ScheduleUpdateGameLevelSaveData(),o.SetPropHintBubbleShown())}),(function(){x.Mgr.sendNormalGameAd(o._curLevel,o._stepCount[t],U.ad_video_step_back.toString(),t+1)}))}else G.Player.UseProp(L.STEP_BACK,1),this.StepBack();else this.ToastNoBackSteps()},i.AddTime=function(){G.TA.TotalUseTools.val++,G.TA.saveData();var e=this._subLevelIndex;this._propTimes[e]++,this._addTimeCount[e]++,x.Mgr.sendNormalGameUseProp(this._curLevel,this._stepCount[e],L.ADD_TIME,this._propTimes[e],e+1),this._remainTime+=ie,this.ScheduleUpdateGameLevelSaveData()},i.StepBack=function(){var e=this;w.ShowUI(j,void 0,{propID:L.STEP_BACK,callback:function(){e.DoStepBack()}})},i.DoStepBack=function(){G.TA.TotalUseTools.val++,G.TA.saveData();var e=this._subLevelIndex;this._propTimes[e]++,x.Mgr.sendNormalGameUseProp(this._curLevel,this._stepCount[e],L.STEP_BACK,this._propTimes[e],e+1);var t=this._stepRecords.get(this._stepCount[e]-1);t&&(this._isStucked=!1,this._levelMap[this._subLevelIndex]=t.levelMap,this._stepCount[e]=t.stepId,this._selectedBottle=null,this.UpdateSelectedBottle(),this.RefreshAllBottles(!0,!0),this.CheckStepBackEnable(),this.CheckProgress(),this.CheckHiddenBottle(!1,e),this.UpdateLockBottleAndKeys(),this.ScheduleUpdateGameLevelSaveData())},i.OnClickUnlockBottle=function(){var e=this;if(B.playEffect(y.SOUND_BUTTON),!this._isGameOver)if(this.CanUnlockVideoBottle()){if(this.HideBubbles(),this._isGameStart=!0,x.Mgr.sendEventButton("button_unlock_bottle"),0!=this._levelMap.length){var t=this.IsUnlockBottleFree(),o=this._subLevelIndex;if(t)this._curLevel>v.getUnlockBottleFreeLevel()&&G.Player.UseProp(L.UNLOCK_BOTTLE,1),this._unlockBottleFreeCounts[o]++,x.Mgr.sendNormalGameUseProp(this._curLevel,this._stepCount[o],L.UNLOCK_BOTTLE,this._propTimes[o],o+1),this.UnlockVideoBottle(),this.ScheduleUpdateGameLevelSaveData();else{this._isShowingAd=!0;var i=this;O.getInstance().ShowRewardVideoAd(U.ad_video_unlock_bottle_prop,(function(t){i._isShowingAd=!1,I.log("TestV   onUnlockVideoBottle",t),t&&(i.AddWatchVideoCount(o),i._unlockBottleVideoCounts[o]++,i._unlockBottlePropCounts[o]++,x.Mgr.sendNormalGameGetProp(i._curLevel,i._stepCount[o],L.UNLOCK_BOTTLE,"video",o+1),i.UnlockVideoBottle(),x.Mgr.sendNormalGameUseProp(e._curLevel,e._stepCount[o],L.UNLOCK_BOTTLE,e._propTimes[o],o+1),i.ScheduleUpdateGameLevelSaveData(),i.SetPropHintBubbleShown())}),(function(){x.Mgr.sendNormalGameAd(i._curLevel,i._stepCount[o],U.ad_video_unlock_bottle_prop.toString(),o+1)}))}}}else this.ToastNoVideoBottle()},i.FindLockedVideoBottle=function(){for(var e=this._rackList[this._subLevelIndex],t=0;t<e.length;t++)for(var o=e[t],i=0;i<o._bottleList.length;i++){var s=o._bottleList[i];if(s.isVideoBottle)return s}},i.HasLockedVideoBottle=function(){return null!=this.FindLockedVideoBottle()},i.UnlockVideoBottle=function(e,t,o){void 0===e&&(e=!1),void 0===o&&(o=this._subLevelIndex);for(var i=this._rackList[o],s=0;s<i.length;s++)for(var l=i[s],n=0;n<l._bottleList.length;n++){var a=l._bottleList[n];if(a.isVideoBottle)return e||this._propTimes[o]++,a.UnlockVideoBottle(!e,t),this.MapDataUnlockVideoBottle(s,n,o),this.CheckUnlockVideoBottleEnable(),void(this._isStucked=!1)}},i.MapDataUnlockVideoBottle=function(e,t,o){void 0===o&&(o=this._subLevelIndex),this._levelMap[o][e][t].showingBottle.video_bottle=!1,o==this._subLevelIndex&&this._stepRecords.forEach((function(o){o.levelMap[e][t].showingBottle.video_bottle=!1}))},i.OnClickSetting=function(){var e=this;this._isGameOver||(this.HideBubbles(),this._isPaused=!0,B.playEffect(y.SOUND_BUTTON),w.ShowUI(X,void 0,{isInGame:!0,closeCallback:function(){e._isPaused=!1}}),x.Mgr.sendEventButton("setting_game"))},i.OnBottleClick=function(e){var t=this;if(I.log("OnBottleClick",e),this.HideBubbles(),!this._isGameOver&&!this._isVanishingBottle)if(e.isLockBottle)e.PlayClickLockAnim();else if(!(e.isHiddenBottle||e.isPouring&&null==this._selectedBottle)){var o=this.FindIndexOfBottle(e);if(-1!=o[0]&&-1!=o[1])if(!e.isComplete||e.isVideoBottle||e.isLockBottle)if(e.isStoneBottle&&null==this._selectedBottle)e.PlayClickStoneAnim();else{var i=this._subLevelIndex;if(this._isGameStart=!0,e.isVideoBottle){if(this.IsUnlockBottleFree())this._curLevel>v.getUnlockBottleFreeLevel()&&G.Player.UseProp(L.UNLOCK_BOTTLE,1),this._unlockBottleFreeCounts[i]++,x.Mgr.sendNormalGameUseProp(this._curLevel,this._stepCount[i],L.UNLOCK_BOTTLE,this._propTimes[i],i+1),e.UnlockVideoBottle(!0,(function(){t._isStuckGuideLevel&&(t._guideStep++,t.StartStuckGuideStep())})),this.MapDataUnlockVideoBottle(o[0],o[1]),this.CheckUnlockVideoBottleEnable(),this._isStucked=!1,this.ScheduleUpdateGameLevelSaveData();else{var s=this;this._isShowingAd=!0,O.getInstance().ShowRewardVideoAd(U.ad_video_unlock_bottle,(function(l){s._isShowingAd=!1,l&&(s.AddWatchVideoCount(i),s._unlockBottleVideoCounts[i]++,e.UnlockVideoBottle(),s.MapDataUnlockVideoBottle(o[0],o[1]),s.CheckUnlockVideoBottleEnable(),s._isStucked=!1,s.ScheduleUpdateGameLevelSaveData(),s.SetPropHintBubbleShown(),x.Mgr.sendNormalGameGetProp(s._curLevel,s._stepCount[i],L.UNLOCK_BOTTLE,"video",i+1),x.Mgr.sendNormalGameUseProp(t._curLevel,t._stepCount[i],L.UNLOCK_BOTTLE,t._propTimes[i],i+1))}),(function(){x.Mgr.sendNormalGameAd(s._curLevel,s._stepCount[i],U.ad_video_unlock_bottle.toString(),i+1)}))}}else{if(null==this._selectedBottle){var l=this.GetBottleTopTypeAndCount(e.GetColors()),n=l[0];l[1];n>0&&(this._selectedBottle=e),null!=this._selectedBottle&&(this._guideStep++,this._isGuideLevel?this.StartGuideStep():this._isStuckGuideLevel&&this.StartStuckGuideStep())}else if(this._selectedBottle==e)this._selectedBottle=null;else if(this._selectedBottle!=e){var a;if(!this.SwapBottle(this._selectedBottle,e,i)&&A.IsABTestB_V3()?this._selectedBottle=e:this._selectedBottle=null,this._isGuideLevel)null==(a=w.GetUI(z))||a.HideFinger()}this.UpdateSelectedBottle(i)}}else this.ToastBottleFullTips()}},i.FindIndexOfBottle=function(e,t){void 0===t&&(t=this._subLevelIndex);for(var o=this._rackList[t],i=0;i<o.length;i++){var s=o[i]._bottleList.findIndex((function(t){return t==e}));if(s>=0)return[i,s]}return[-1,-1]},i.FindBottleByIndex=function(e,t){var o,i;return void 0===t&&(t=this._subLevelIndex),null!=(o=null==(i=this._rackList[t][e[0]])?void 0:i._bottleList[e[1]])?o:null},i.SwapBottle=function(e,t,o){if(void 0===o&&(o=this._subLevelIndex),t.bottleType==C.TRANSFER)return this.ToastTransferBottleNoPourIn(),!1;var i=this.FindIndexOfBottle(e),s=i[0],l=i[1],n=this.FindIndexOfBottle(t),a=n[0],r=n[1];if(-1==s||-1==a||-1==l||-1==r)return I.warn("SwapBottle error index invalid",s,a,l,r),!1;var u=this._levelMap[o][s][l].curDepth,_=this._levelMap[o][a][r].curDepth,h=this.GetBottleTopTypeAndCount(this._levelMap[o][s][l].showingBottle.bottle),c=h[0],p=h[1],d=this.GetBottleTopTypeAndEmptyCount(this._levelMap[o][a][r].showingBottle.bottle),v=d[0],f=d[1];if(t.isStoneBottle&&0==v){var g=0,m=0;if(this._levelMap[o].forEach((function(e){return e.forEach((function(e){1==e.stoneBottle&&e.showingBottle.bottle[0]==c&&(m+=e.segment),e.bottles.forEach((function(e){return e.bottle.forEach((function(e){e==c&&g++}))}))}))})),g<=m)return this.ToastOperationDead(),!1}if(c>0){if(f<=0)return A.IsABTestB_V3()||this.ToastBottleFullTips(),!1;var b=this._levelMap[o][a][r].bottles[_].collect_type;if(c!=v&&0!=v)return!A.IsABTestB_V3()&&(this.ToastBottleTypeNotMatchTips(),!0);if(0!=b&&c!=b)return(!A.IsABTestB_V3()||0==this._levelMap[o][a][r].bottles[_].bottle[0])&&(this.ToastCollectTypeNotMatchTips(),!0);var S=this.SwapIndex(this._levelMap[o],[s,l],[a,r],p),T=this.GetBottleTopTypeAndEmptyCount(this._levelMap[o][a][r].showingBottle.bottle),L=(T[0],T[1]);p>L&&(p=L);var y=S[s][l].bottles[u];return null!=y.key_index&&y.key_index>=0&&0==y.bottle[y.key_index]&&(y.key_collected=!0),this.AddStepRecord(this._stepCount[o],this._levelMap[o],[s,l,u],[a,r,_]),this._levelMap[o]=S,this.PourLiquidsFromTo([s,l,u],[a,r,_],p),this._stepCount[o]++,this.CheckGameOver(),this._subLevelIndex==o&&(this._isStucked=this.CheckIsStuck(o)),this._isGameOver||(this.CheckStepBackEnable(),this.ScheduleUpdateGameLevelSaveData()),!0}return!1},i.AddStepRecord=function(e,t,o,i){var s=new m;s.stepId=e,s.levelMap=t,s.fromIndex=o,s.toIndex=i,this._stepRecords.set(e,s)},i.PourLiquidsFromTo=function(e,t,o){var i,s,a=this,r=this._subLevelIndex,h=this.FindBottleByIndex([e[0],e[1]]),p=this.FindBottleByIndex([t[0],t[1]]),d=h.AddAnimBottle(this._ui.node_anim_bottle),v=p;d.node.worldPosition=h.node.worldPosition.clone();var C=this._levelMap[r][e[0]][e[1]].bottles[e[2]],g=E.GetBottleTopTypeAndEmptyCount(C.bottle)[0]==b.BOTTLE_TYPE_EMPTY&&C.complete_type==f.EMPTY_NEXT,m=this._levelMap[r][e[0]][e[1]].curDepth!=e[2],S=1==C.key_collected;if(g){var T=this._levelMap[r][e[0]][e[1]].bottles[e[2]].bottle;h.SetColors(T)}else this.RefreshBottle([e[0],e[1]],!0);h.Hide(),v.setPouring();var L=E.GetBottleLiquidCount(this._levelMap[r][t[0]][t[1]].bottles[t[2]].bottle),y=L-o,k=-d.GetPourRotation(0),B=-d.GetPourRotation(o),I=.5/ee/b.POUR_TIME_SCALES[o-1];I=-I*k/90;var w=.8/ee/b.POUR_TIME_SCALES[o-1],P=.2/ee/b.POUR_TIME_SCALES[o-1],O=.3/ee,U=.3/ee,M=.3/ee,V=1/ee,x=.08*(this._levelMap[r][t[0]][t[1]].bottles[t[2]].bottle.length-y)/ee;d._ui.spr_bottle_bg.angle=0;var D=this._levelMap[r][t[0]][t[1]].bottles[t[2]].bottle.length,F=y/D,H=L/D,K=d.node.position.clone(),W=v.node.worldPosition.clone(),z=d._ui.node_mask.getComponent(l).width*(b.BOTTLE_TOP_ANCHORS[G.Player.SkinId.val]-.5);d._ui.node_parent.setPosition(new _(-z,0));var X,q=7*this._mapScale[r],Y=(77+oe.height*(5-d.GetColors().length))*this._mapScale[r];X=!(W.x<=243*this._mapScale[r])&&(W.x>=n.getVisibleSize().width-243*this._mapScale[r]||d.node.worldPosition.x<v.node.worldPosition.x),d.SetMirrored(!X),v.SetWaterFlowMirrored(!X),X?(K.x+=z,W.add(new _(-q,Y))):(K.x-=z,W.add(new _(q-2,Y))),d.node.setPosition(K.clone().add(new _(0,21.743))),u(d).delay(U).to(I,{pourRotation:k}).to(w,{pourRotation:B},{easing:"sineOut"}).call((function(){d.SetColors(a._levelMap[r][e[0]][e[1]].bottles[e[2]].bottle)})).to(O,{pourRotation:0}).start();var j=this.GetBottleTopTypeAndCount(this._levelMap[r][t[0]][t[1]].bottles[t[2]].bottle),J=j[0];j[1];u(v).delay(U+P).call((function(){v.PlayPourInAnim(E.GetDripColor(J,r),o)})).delay(x).call((function(){v.UpdateCompleteType(a._levelMap[r][t[0]][t[1]].bottles[t[2]].complete_type),v.SetColors(a._levelMap[r][t[0]][t[1]].bottles[t[2]].bottle),v.liquidProgress=F,v.PlayWaterUpAnim(E.GetLiquidColor(J,r),o)})).to(w,{liquidProgress:H}).call((function(){v.UpdateToMaxProgress(),v.stopPouring(),A.IsABTestB_V3()&&v.PlayWaterShakeAnim()})).start();var Q=this._levelMap[r][t[0]][t[1]].bottles[t[2]],Z=E.IsBottlePure(Q.bottle)&&(Q.complete_type==f.COMPLETE_NEXT||Q.complete_type==f.END);u(d.node).to(U,{worldPosition:W}).delay(I+w).call((function(){Z&&R.vibrate()})).delay(O).to(M,{position:K}).call((function(){g&&(m?h.PlayTransferNextBottleAnim((function(){te.RefreshBottle([e[0],e[1]],!0,!1,r)})):h.PlayTransferBottleCompleteAnim()),h.Show(),h.UpdateKeyCollected(S,!0),A.IsABTestB_V3()&&h.PlayWaterShakeAnim(),c.stopAllByTarget(d),c.stopAllByTarget(d.node),d.node.removeFromParent()})).delay(V).call((function(){N.recycleBottleItem(d)})).start();var $=11*t[0]+t[1];null!=(null==(i=this._checkComplete)?void 0:i.get($))&&this._checkComplete.get($).stop();var te=this,ie=u(p).delay(I+w+O+M+V).call((function(){p.CheckIfShowComplete((function(){var e=te._levelMap[r][t[0]][t[1]];e.bottles[t[2]].complete_type!=f.EMPTY_NEXT&&(e.isAllComplete&&e.showingBottle.complete_type==f.COMPLETE_NEXT?p.PlayCompleteTaskAnim():(E.IsTaksBottleComplete(e)&&p.HideTaskSpine(),p.PlayNextTaskAnim((function(){te.RefreshBottle([t[0],t[1]],!0,!1,r)}))))})),te.CheckProgress(),te.CheckHiddenBottle(!0,r),te.CheckLockBottles(),te._isGuideLevel?(te._guideStep++,te.StartGuideStep()):te._isStuckGuideLevel&&(te._guideStep++,te.StartStuckGuideStep())})).start();null==(s=this._checkComplete)||s.set($,ie)},i.GetSubCompleteNum=function(e){var t=0;return this._levelMap[e].forEach((function(e){e.forEach((function(e){e.bottles.forEach((function(e){E.IsBottlePure(e.bottle)&&(e.complete_type!=f.END&&e.complete_type!=f.COMPLETE_NEXT||t++)}))}))})),t},i.GetCompleteNum=function(){for(var e=0,t=0;t<this._levelCfg.levels.length;t++)e+=this.GetSubCompleteNum(t);return e},i.GetSubTotalNum=function(e){var t=0;this._levelMap[e].forEach((function(e){e.forEach((function(e){e.bottles.forEach((function(e){e.bottle.forEach((function(e){e>0&&t++}))}))}))}));var o=this._levelMapCfg[e].segment;return t/o+this._vanishColorPropUseCounts[e]},i.GetTotalNum=function(){for(var e=0,t=0;t<this._levelCfg.levels.length;t++)e+=this.GetSubTotalNum(t);return e},i.CheckProgress=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!0);var o=this.GetSubCompleteNum(this._subLevelIndex),i=this.GetSubTotalNum(this._subLevelIndex)-o-this._vanishColorPropUseCounts[this._subLevelIndex];this._ui.label_remain_bottle.getComponent(a).string="剩余:"+Math.ceil(i);var s=(this.GetCompleteNum()+this.GetTotalVanishCount())/this.GetTotalNum();if(t){var l,n;null==(l=this._progressLabelTween)||l.stop(),null==(n=this._progressTimerTween)||n.stop(),this._progressLabelTween=u(this._ui.label_percent.getComponent(a)).delay(e).to(.4,{string:Math.floor(100*s)}).start(),this._progressTimerTween=u(this._ui.progress_timer.getComponent(p)).delay(e).to(.4,{progress:s}).start()}else this._ui.label_percent.getComponent(a).string=Math.floor(100*s).toString(),this._ui.progress_timer.getComponent(p).progress=s},i.CheckIsStuck=function(e){void 0===e&&(e=this._subLevelIndex);for(var t=this._levelMap[e],o=this.GetCollectedCollors(),i=this.GetCollectedKeysCount(e),s=0;s<t.length;s++)for(var l=0;l<t[s].length;l++)if(!t[s][l].showingBottle.video_bottle){var n=this.GetBottleTopTypeAndCount(t[s][l].showingBottle.bottle),a=n[0],r=n[1];if((!(t[s][l].unlockColor>0)||o.includes(t[s][l].unlockColor))&&!(t[s][l].unlockId>0&&t[s][l].unlockId>i)&&(r!==t[s][l].segment||t[s][l].showingBottle.complete_type!=f.COMPLETE_NEXT&&t[s][l].showingBottle.complete_type!=f.END)&&!(t[s][l].showingBottle.collect_type>0)&&1!=t[s][l].stoneBottle&&r>0)for(var u=0;u<t.length;u++)for(var _=0;_<t[u].length;_++)if((u!==s||l!=_)&&!t[u][_].showingBottle.video_bottle&&t[u][_].showingBottle.complete_type!=f.EMPTY_NEXT&&(!(t[u][_].unlockColor>0)||o.includes(t[u][_].unlockColor))&&!(t[u][_].unlockId>0&&t[u][_].unlockId>i||t[u][_].showingBottle.collect_type>0&&t[u][_].showingBottle.collect_type!=a)){var h=this.GetBottleTopTypeAndEmptyCount(t[u][_].showingBottle.bottle),c=h[0];if(h[1]>=r&&(0===c||c===a))return!1}}return!0},i.RefreshAllBottles=function(e,t,o){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===o&&(o=this._subLevelIndex);for(var i=0;i<this._levelMap[o].length;i++)for(var s=0;s<this._levelMap[o][i].length;s++)this.RefreshBottle([i,s],e,t,o)},i.RefreshVideoBottleTypes=function(){var e=this.IsUnlockBottleFree();this._rackList.forEach((function(t){return t.forEach((function(t){return t._bottleList.forEach((function(t){t.isVideoBottle&&t.UpdateVideoBottleType(e)}))}))}))},i.IsUnlockBottleFree=function(){return G.Player.GetPropCount(L.UNLOCK_BOTTLE)>0||this._curLevel<=v.getUnlockBottleFreeLevel()},i.UpdateSelectedBottle=function(e){var t=this;void 0===e&&(e=this._subLevelIndex),this._rackList[e].forEach((function(e){e._bottleList.forEach((function(e){e==t._selectedBottle?e.SetSelected(!0):e.SetSelected(!1)}))}))},i.RefreshBottle=function(e,t,o,i){void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===i&&(i=this._subLevelIndex);var s=this.FindBottleByIndex(e,i);if(s){var l=this._levelMap[i][e[0]][e[1]];if(s.SetColors(l.showingBottle.bottle),s.isVideoBottle&&s.UpdateVideoBottleType(this.IsUnlockBottleFree()),t&&(s.UpdateDepth(l.remainDepth),s.UpdateCollectType(l.showingBottle.collect_type),l.showingBottle.bottle[0]>0&&0==l.showingBottle.collect_type&&l.bottleType==C.TASK&&!E.IsTaksBottleComplete(l)&&this.ShowTaskBottleCollectTips(e)),o){if(s.UpdateComplete(),l.bottleType==C.TRANSFER){var n=E.IsTransferBottleComplete(l);s.UpdateTransferComplete(n)}if(l.bottleType==C.TASK){var a=E.IsTaksBottleComplete(l);s.UpdateTaskComplete(a)}}}},i.PlayBottleVanishAnim=function(e,t,o,i){void 0===o&&(o=0);var s=this.FindBottleByIndex([e[0],e[1]],i);s&&s.PlayVanishColorAnim(t.showingBottle.bottle,t.showingBottle.unknowns,o,t.remainDepth,(function(){E.IsTransferBottleComplete(t)&&s.PlayTransferBottleCompleteAnim()}))},i.GetCollectedKeysCount=function(e){void 0===e&&(e=this._subLevelIndex);var t=0;return this._levelMap[e].forEach((function(e){e.forEach((function(e){e.bottles.forEach((function(e){e.key_collected&&t++}))}))})),t},i.GetCollectedCollors=function(e){void 0===e&&(e=this._subLevelIndex);var t=[];return this._levelMap[e].forEach((function(e){e.forEach((function(e){e.bottles.forEach((function(e){E.IsBottlePure(e.bottle)&&e.complete_type!=f.NEVER&&(t.includes(e.bottle[0])||t.push(e.bottle[0]))}))}))})),t},i.UpdateHiddenBottles=function(){for(var e=0;e<this._levelCfg.levels.length;e++)for(var t=e,o=this.GetCollectedCollors(t),i=this._rackList[t],s=0;s<this._levelMap[t].length;s++)for(var l=0;l<this._levelMap[t][s].length;l++){var n=this._levelMap[t][s][l];if(n.unlockColor>0){var a=o.includes(n.unlockColor);i[s]._bottleList[l].UpdateHiddenBottle(!a)}}},i.CheckHiddenBottle=function(e,t){void 0===t&&(t=this._subLevelIndex);for(var o=this.GetCollectedCollors(t),i=this._rackList[t],s=0;s<this._levelMap[t].length;s++)for(var l=0;l<this._levelMap[t][s].length;l++){var n=this._levelMap[t][s][l];if(n.unlockColor>0){var a=o.includes(n.unlockColor);i[s]._bottleList[l].SetHiddenBottleUnlock(a,e)}}},i.UpdateLockBottleAndKeys=function(){var e=this,t=this.GetCollectedKeysCount();this._levelMap[this._subLevelIndex].forEach((function(o,i){o.forEach((function(o,s){if(o.unlockId>0){var l=o.unlockId>t;e._rackList[e._subLevelIndex][i]._bottleList[s].UpdateLockBottle(l,!1)}o.bottles.forEach((function(t){var o=1==t.key_collected;e._rackList[e._subLevelIndex][i]._bottleList[s].UpdateKeyCollected(o,!1)}))}))}))},i.CheckLockBottles=function(){var e=this,t=this.GetCollectedKeysCount();this._levelMap[this._subLevelIndex].forEach((function(o,i){o.forEach((function(o,s){if(o.unlockId>0){var l=o.unlockId>t;e._rackList[e._subLevelIndex][i]._bottleList[s].UpdateLockBottle(l,!0)}}))}))},i.GetBottleTopTypeAndCount=function(e){return E.GetBottleTopTypeAndCount(e)},i.GetBottleTopTypeAndEmptyCount=function(e){for(var t=0,o=-1,i=e.length-1;i>=0;i--){if(0!==e[i]){o=e[i];break}t++}return-1===o&&(o=0),[o,t]},i.SwapIndex=function(e,t,o,i){for(var s=e.map((function(e){return e.map((function(e){return e.clone()}))})),l=0,n=s[o[0]][o[1]].showingBottle.bottle.length-1;n>=0&&0===s[o[0]][o[1]].showingBottle.bottle[n];n--)l++;l<i&&(i=l);for(var a=-1,r=s[t[0]][t[1]].showingBottle.bottle.length-1;r>=0;r--)if(0!=s[t[0]][t[1]].showingBottle.bottle[r]){a=s[t[0]][t[1]].showingBottle.bottle[r];for(var u=0;u<i;u++){if(r-u<0)throw"数组越界:i:"+r+",j:"+u;s[t[0]][t[1]].showingBottle.bottle[r-u]=0}break}if(-1==a)return s;for(var _=0;_<s[o[0]][o[1]].showingBottle.bottle.length;_++)if(0==s[o[0]][o[1]].showingBottle.bottle[_]){for(var h=0;h<i;h++){if(_+h>=s[o[0]][o[1]].showingBottle.bottle.length)throw"数组越界:i:"+_+",j:"+h;s[o[0]][o[1]].showingBottle.bottle[_+h]=a}break}return s},i.CanUnlockVideoBottle=function(){return this._levelMap[this._subLevelIndex].some((function(e){return e.some((function(e){return e.bottles.some((function(e){return e.video_bottle}))}))}))},i.GetTotalUnlockBottleFreeCount=function(){return this._unlockBottleFreeCounts.reduce((function(e,t){return e+t}))},i.GetTotalUnlockBottleVideoCount=function(){return this._unlockBottleVideoCounts.reduce((function(e,t){return e+t}))},i.GetTotalUnlockBottlePropCount=function(){return this._unlockBottlePropCounts.reduce((function(e,t){return e+t}))},i.GetTotalVanishColorCount=function(){return this._vanishColorPropVideoCounts.reduce((function(e,t){return e+t}))},i.GetTotalStepBackCount=function(){return this._stepBackPropCounts.reduce((function(e,t){return e+t}))},i.GetTotalPropUseCount=function(){return this._propTimes.reduce((function(e,t){return e+t}))},i.GetTotalRebornCount=function(){return this._rebornTimes.reduce((function(e,t){return e+t}))},i.GetTotalRebornShowCount=function(){return this._rebornShowTimes.reduce((function(e,t){return e+t}))},i.AddWatchVideoCount=function(e){if(this._watchVideoCount[e]++,1==this.GetTotalWatchVideoCount())for(var t=this._levelCfg.levels.length-1,o=this._subLevelIndex+1;o<=t;o++)this.UnlockVideoBottle(!0,void 0,o)},i.GetTotalWatchVideoCount=function(){return this._watchVideoCount.reduce((function(e,t){return e+t}))},i.GetTotalLevelTime=function(){return this._levelTime.reduce((function(e,t){return e+t}))},i.GetTotalStepCount=function(){return this._stepCount.reduce((function(e,t){return e+t}))},i.GetTotalVanishCount=function(){return this._vanishColorPropUseCounts.reduce((function(e,t){return e+t}))},i.CanVanishColor=function(){return this._vanishColorPropUseCounts[this._subLevelIndex]<1},i.CanStepBack=function(){return null!=this._stepRecords.get(this._stepCount[this._subLevelIndex]-1)},i.CheckUnlockVideoBottleEnable=function(){var e=this.CanUnlockVideoBottle();this._ui.btn_unlock_bottle.getComponent(h).grayscale=!e,this._ui.spr_btn_unlock_bottle.getComponent(h).grayscale=!e,this._ui.spr_video_1.getComponent(h).grayscale=!e,this._ui.spr_prop_count_1.getComponent(h).grayscale=!e,e?(this._ui.lab_btn_unlock_bottle.getComponent(a).outlineColor=new d(189,71,24),this._ui.label_prop_count_1_prefix.getComponent(a).outlineColor=new d(186,35,35),this._ui.label_prop_count_1_free.getComponent(a).outlineColor=new d(186,35,35),this._ui.label_prop_count_1_num.getComponent(a).outlineColor=new d(186,35,35),this._ui.label_prop_count_1_suffix.getComponent(a).outlineColor=new d(186,35,35)):(this._ui.lab_btn_unlock_bottle.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_1_prefix.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_1_free.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_1_num.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_1_suffix.getComponent(a).outlineColor=new d(100,100,100))},i.CheckVanishColorEnable=function(){var e=this.CanVanishColor();this._ui.btn_clear_color.getComponent(h).grayscale=!e,this._ui.spr_btn_clear_color.getComponent(h).grayscale=!e,this._ui.spr_video_2.getComponent(h).grayscale=!e,this._ui.spr_prop_count_2.getComponent(h).grayscale=!e,e?(this._ui.lab_btn_clear_color.getComponent(a).outlineColor=new d(189,71,24),this._ui.label_prop_count_2.getComponent(a).outlineColor=new d(186,35,35)):(this._ui.lab_btn_clear_color.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_2.getComponent(a).outlineColor=new d(100,100,100))},i.CheckStepBackEnable=function(){var e=this.CanStepBack();this._ui.btn_step_back.getComponent(h).grayscale=!e,this._ui.spr_btn_step_back.getComponent(h).grayscale=!e,this._ui.spr_video_3.getComponent(h).grayscale=!e,this._ui.spr_prop_count_3.getComponent(h).grayscale=!e,e?(this._ui.lab_btn_step_back.getComponent(a).outlineColor=new d(189,71,24),this._ui.label_prop_count_3.getComponent(a).outlineColor=new d(186,35,35)):(this._ui.lab_btn_step_back.getComponent(a).outlineColor=new d(100,100,100),this._ui.label_prop_count_3.getComponent(a).outlineColor=new d(100,100,100))},i.CheckGameOver=function(){var e=this,t=!0;if(this._levelMap[this._subLevelIndex].some((function(t){return t.some((function(t){return t.bottles.some((function(t){var o=e.GetBottleTopTypeAndCount(t.bottle),i=o[0],s=o[1];return(t.complete_type==f.NEVER||t.complete_type==f.EMPTY_NEXT)&&i>0||(i>0&&s<t.bottle.length||void 0)}))}))}))&&(t=!1),t){this._stepRecords.clear();var o=this._subLevelIndex;if(x.Mgr.sendNormalRoundFinish(this._curLevel,this._levelTime[o],this._stepCount[o],this._propTimes[o],this._unlockBottlePropCounts[o],this._vanishColorPropUseCounts[o],this._stepBackPropCounts[o],this._rebornTimes[o],this._rebornShowTimes[o],this._unlockBottleFreeCounts[o],this._unlockBottleVideoCounts[o],o+1),this.ShowInterLayer(),this._subLevelIndex<this._levelCfg.levels.length-1){this._subLevelIndex++,this._isStucked=!1,G.Player.RoundId.val=this._subLevelIndex+1,G.Player.saveData();var i=this;this.scheduleOnce((function(){i.GoToSubLevel(i._subLevelIndex),i.CheckProgress()}),2.7)}else this._isSuccess=!0,this._isGameOver=!0,this.DoGameOver(),I.log("Game Over")}},i.OnGameGiveUp=function(){this.ClearGameLevelSaveData(),this._isGameOver=!0,this._isSuccess=!1,this.DoGameOver()},i.DoReborn=function(){var e=this;if(this.HideBubbles(),this._curLevel<=v.getRebornDisableLevel())return w.CloseUI(z),void this.OnGameGiveUp();var t=this.GetCompleteNum(),o=this.GetTotalNum(),i=this.HasLockedVideoBottle(),s=this._subLevelIndex;this._rebornShowTimes[s]++,this.ClearGameLevelSaveData();var l=this;w.ShowUI(J,(function(){w.CloseUI(Y)}),{totalNum:o,completeNum:t+l.GetTotalVanishCount(),hasVideoBottle:i,closeCallback:function(t){t?(l.AddWatchVideoCount(s),x.Mgr.sendNormalGameGetProp(l._curLevel,l._stepCount[s],L.ADD_TIME,"video",s+1),l.AddTime(),i?(l.UnlockVideoBottle(!1,(function(){l._isPaused=!1})),x.Mgr.sendNormalGameUseProp(e._curLevel,e._stepCount[s],L.UNLOCK_BOTTLE,e._propTimes[s],s+1)):w.ShowUI(j,void 0,{propID:L.ADD_TIME,callback:function(){l._isPaused=!1}}),l._rebornTimes[s]++,l.ScheduleUpdateGameLevelSaveData(),l.SetPropHintBubbleShown()):(l.ClearGameLevelSaveData(),l._isPaused=!1,l._remainTime=0,l._isSuccess=!1,l._isGameOver=!0,l.DoGameOver())},showAdCallback:function(){x.Mgr.sendNormalGameAd(l._curLevel,l._stepCount[s],U.ad_video_reborn.toString(),s+1)}})},i.DoGameOver=function(e){var t=this;if(void 0===e&&(e=!1),!this._isTestLevel){var o=null;this._isSuccess&&(M.setUserLevel(this._curLevel),G.Player.LevelId.val=this._curLevel+1,null!=(o=E.GetLevelReward(this._curLevel))&&(o.bg&&G.Player.ThemeList.unLockTheme(o.bg.id),o.prop&&G.Player.AddProp(o.prop.id,o.prop.count))),G.Player.saveData(),x.Mgr.sendNormalGameFinish(this._curLevel,this._isSuccess,this.GetTotalLevelTime(),this.GetTotalStepCount(),this.GetTotalPropUseCount(),this.GetTotalRebornCount(),this.GetTotalRebornShowCount(),this._subLevelIndex+1,this.GetTotalUnlockBottleFreeCount(),this.GetTotalUnlockBottleVideoCount(),this.GetTotalUnlockBottlePropCount(),this.GetTotalVanishColorCount(),this.GetTotalStepBackCount()),this._isSuccess&&(G.TA.WinNormalGameCount.val+=1,null!=o&&(G.TA.TotalTreasure.val++,x.Mgr.sendEventUnlockTreasure(o.bg?o.bg.id.toString():"-1",o.prop.id.toString()))),G.TA.TotalNormalPlayCount.val++,G.TA.TotalGameTime.val+=this.GetTotalLevelTime(),G.TA.saveData();var i=this._isSuccess?2.7:0;e&&(i=0);var s=this._isSuccess;u(this.node).delay(i).call((function(){var e=t._curLevel;w.ShowUI(W,void 0,{isSuccess:s,level:e,rewards:o})})).start()}},i.OnGameSettleEvent=function(e){this.ClearGameLevelSaveData();var t=G.Player.LevelId.val,o=!e;this.StartGame(t,o),x.Mgr.sendNormalGameStart(e?"NewDeal":"Restart",this._curLevel),this.UpdateProps(),A.IsABTestC_V1()&&O.getInstance().ShowInterstitialAd(U.ad_inter_restart)},i.UpdateProps=function(){if(!this._isGameOver){var e=G.Player.LevelId.val<=v.getUnlockBottleFreeLevel();this._ui.spr_video_1.active=G.Player.GetPropCount(L.UNLOCK_BOTTLE)<=0&&!e,this._ui.spr_video_2.active=G.Player.GetPropCount(L.VANISH_COLOR)<=0,this._ui.spr_video_3.active=G.Player.GetPropCount(L.STEP_BACK)<=0,this._ui.spr_prop_count_1.active=G.Player.GetPropCount(L.UNLOCK_BOTTLE)>0||e,this._ui.spr_prop_count_2.active=G.Player.GetPropCount(L.VANISH_COLOR)>0,this._ui.spr_prop_count_3.active=G.Player.GetPropCount(L.STEP_BACK)>0,this._ui.label_prop_count_1_free.active=e,this._ui.label_prop_count_1_num.active=!e,e||(this._ui.label_prop_count_1_num.getComponent(a).string=G.Player.GetPropCount(L.UNLOCK_BOTTLE).toString()),this._ui.label_prop_count_2.getComponent(a).string=""+G.Player.GetPropCount(L.VANISH_COLOR),this._ui.label_prop_count_3.getComponent(a).string=""+G.Player.GetPropCount(L.STEP_BACK),this.scheduleOnce(this.RefreshVideoBottleTypes.bind(this))}},i.UpdateThemeBg=function(){D.SetThemeBg(this._ui.node_bg),D.SetThemeBgMask(this._ui.spr_mask_sub_level_top,this._ui.spr_mask_sub_level_bottom),this._rackList.forEach((function(e){e.forEach((function(e){return e.UpdateRackBg()}))}))},i.ToastTips=function(e){this._toastTween&&this._toastTween.stop(),this._ui.label_tips.getComponent(a).string=e;var t=this._ui.spr_tips_bg.getComponent(s);t.opacity=0,this._toastTween=u(t).to(.4,{opacity:255}).delay(.6).to(.4,{opacity:0}).start()},i.ToastOperationDead=function(){this.ToastTips("该操作会导致无法通关")},i.ToastBottleFullTips=function(){this.ToastTips("目标杯子已经满啦")},i.ToastBottleTypeNotMatchTips=function(){this.ToastTips("最上面一层颜色相同才能倒入")},i.ToastNoBackSteps=function(){this.ToastTips("没有上一步可以返回")},i.ToastPropsNotEnough=function(){this.ToastTips("道具次数已用完")},i.ToastCollectTypeNotMatchTips=function(){this.ToastTips("目标杯子颜色不匹配")},i.ToastNoVideoBottle=function(){this.ToastTips("没有空瓶可以解锁")},i.ToastTransferBottleNoPourIn=function(){this.ToastTips("该瓶子无法往进倒水哦")},i.ShowUsePropFinger=function(e){if(!this._ui.spr_bubble_prop_finger.active){var t=0,o=0;switch(e){case L.UNLOCK_BOTTLE:var i=this.FindLockedVideoBottle();i&&(t=i.node.worldPosition.x,o=i.node.worldPosition.y+30);break;case L.VANISH_COLOR:t=this._ui.btn_clear_color.worldPosition.x,o=this._ui.btn_clear_color.worldPosition.y;break;case L.STEP_BACK:t=this._ui.btn_step_back.worldPosition.x,o=this._ui.btn_step_back.worldPosition.y}t+=97,o-=63.2,this._ui.spr_bubble_prop_finger.setWorldPosition(t,o,this._ui.spr_bubble_prop_finger.worldPosition.z),this._ui.spr_bubble_prop_finger.active=!0,w.SetOpacity(this._ui.spr_bubble_prop_finger,0),u(this._ui.spr_bubble_prop_finger.getComponent(s)).to(.4,{opacity:255}).start()}},i.HideBubbles=function(){this.HideUsePropFinger(),this.HideTaskBottleCollectTips()},i.HideUsePropFinger=function(){this._showPropHintFingerTimer=10,c.stopAllByTarget(this._ui.spr_bubble_prop_finger.getComponent(s)),w.SetOpacity(this._ui.spr_bubble_prop_finger,0),this._ui.spr_bubble_prop_finger.active=!1},i.ShowTaskBottleCollectTips=function(e){if(!this._showTaskBottleTipsInRound){this._showTaskBottleTipsInRound=!0;var t=this.FindBottleByIndex(e);if(t){var o=t.node.worldPosition,i=(t.node.getComponent(l).height*t._ui.spr_bottle_fg.getComponent(l).anchorY+60)*this._mapScale[this._subLevelIndex];this._ui.node_bubble_task_bottle_hint.setWorldPosition(o.x,o.y+i,o.z),this._ui.node_bubble_task_bottle_hint.active=!0,w.SetOpacity(this._ui.node_bubble_task_bottle_hint,0),this._showTaskBottleTipsTween=u(this._ui.node_bubble_task_bottle_hint.getComponent(s)).to(.4,{opacity:255}).start()}}},i.HideTaskBottleCollectTips=function(){this._showTaskBottleTipsTween&&this._showTaskBottleTipsTween.stop(),w.SetOpacity(this._ui.node_bubble_task_bottle_hint,0),this._ui.node_bubble_task_bottle_hint.active=!1},i.OnSkipGuide=function(){this._guideStep=b.GuideSteps.length,w.CloseUI(z)},i.FindBottleByGuideId=function(e){for(var t=null,o=this._rackList[this._subLevelIndex],i=0,s=0;s<o.length;s++)for(var l=o[s],n=0;n<l._bottleList.length;n++){i==e&&(t=l._bottleList[n]),i++}return t},i.StartGuideStep=function(){var e=this._guideStep;if(e>=b.GuideSteps.length)w.CloseUI(z);else{var t=b.GuideSteps[e].id,o=this.FindBottleByGuideId(t),i=this;if(null!=o){var s={canSkip:!0,step:e,desc:b.GuideSteps[e].desc,clickRect:D.GetNodeWorldRect(o.node),callback:function(){i.OnBottleClick(o),x.Mgr.sendEventGuideComplete(e)}};if(b.GuideSteps[e].wrongIndexes){var l=[],n=[],a=D.GetNodeWorldRect(o.node);l.push(a.center.toVec3().add(new _(0,a.height/2)));for(var r=0;r<b.GuideSteps[e].wrongIndexes.length;r++){var u=this.FindBottleByGuideId(b.GuideSteps[e].wrongIndexes[r]);if(u){var h=D.GetNodeWorldRect(u.node);n.push(h.center.toVec3().add(new _(0,h.height/2)))}}s.rightPositions=l,s.wrongPositions=n}var c=w.GetUI(z);null!=c?(c.init([s]),c.UpdateUI()):w.ShowUI(z,void 0,s)}}},i.StartStuckGuideStep=function(){var e=this._guideStep;if(e>=b.StuckGuideSteps.length)w.CloseUI(z);else{var t=b.StuckGuideSteps[e].id,o=this.FindBottleByGuideId(t),i=this;if(null!=o){var s={canSkip:!1,step:e,desc:b.StuckGuideSteps[e].desc,clickRect:D.GetNodeWorldRect(o.node),callback:function(){i.OnBottleClick(o)}},l=w.GetUI(z);null!=l?(l.init([s]),l.UpdateUI()):w.ShowUI(z,void 0,s)}}},i.ScheduleUpdateGameLevelSaveData=function(){this.unschedule(this.UpdateGameLevelSaveData),this.scheduleOnce(this.UpdateGameLevelSaveData,.1)},i.UpdateGameLevelSaveData=function(){if(!(this._isGameOver||this._remainTime<=0||this._isGuideLevel||this._isStuckGuideLevel)){this._gameLevelSaveData||(this._gameLevelSaveData=new g);var e=this._gameLevelSaveData;e.levelMap=this._levelMap,e.stepRecords=this._stepRecords,e.levelCfg=this._levelCfg,e.levelMapCfg=this._levelMapCfg,e.remainTime=this._remainTime,e.curLevel=this._curLevel,e.subLevelIndex=this._subLevelIndex,e.stepCount=this._stepCount,e.propTimes=this._propTimes,e.vanishColorCounts=this._vanishColorPropVideoCounts,e.vanishColorUseCounts=this._vanishColorPropUseCounts,e.unlockBottleFreeCounts=this._unlockBottleFreeCounts,e.unlockBottleVideoCounts=this._unlockBottleVideoCounts,e.unlockBottlePropCounts=this._unlockBottlePropCounts,e.stepBackCounts=this._stepBackPropCounts,e.addTimeCount=this._addTimeCount,e.rebornTimes=this._rebornTimes,e.rebornShowTimes=this._rebornShowTimes,e.watchVideoCount=this._watchVideoCount,e.levelTime=this._levelTime,g.saveData(e)}},i.ClearGameLevelSaveData=function(){this.unschedule(this.UpdateGameLevelSaveData),g.clearSaveData()},i.RestoreGameLevelData=function(e){var t=this;if(this._gameLevelSaveData=g.getResotreData(),!this._gameLevelSaveData||this._gameLevelSaveData.curLevel!=e||e==b.LEVEL_GUIDE||e==b.MAP_ID_UNLOCK_BOTTLE_GUIDE)return!1;var o=this._gameLevelSaveData;return this._isGuideLevel=!1,this._curLevel=e,this._subLevelIndex=o.subLevelIndex,this.RestoreLevel(o),this._showTaskBottleTipsInRound=!1,this._isStucked=!1,this._levelTime=o.levelTime,this._stepCount=o.stepCount,this._stepRecords=o.stepRecords,this._propTimes=o.propTimes,this._watchVideoCount=o.watchVideoCount,this._rebornTimes=o.rebornTimes,this._rebornShowTimes=o.rebornShowTimes,this._vanishColorPropVideoCounts=o.vanishColorCounts,this._vanishColorPropUseCounts=o.vanishColorUseCounts||Array(o.levelCfg.levels.length).fill(0),this._unlockBottleFreeCounts=o.unlockBottleFreeCounts,this._unlockBottleVideoCounts=o.unlockBottleVideoCounts,this._unlockBottlePropCounts=o.unlockBottlePropCounts,this._stepBackPropCounts=o.stepBackCounts,this._addTimeCount=o.addTimeCount,this._remainTime=o.remainTime,this._rackList.forEach((function(e,o){e.forEach((function(e,i){e._bottleList.forEach((function(e,s){var l=t._levelMap[o][i][s];if(e.UpdateComplete(!0),l.bottleType==C.TRANSFER){var n=E.IsTransferBottleComplete(l);e.UpdateTransferComplete(n,!0)}if(l.bottleType==C.TASK){var a=E.IsTaksBottleComplete(l);e.UpdateTaskComplete(a,!0)}}))}))})),!0},i.RestoreLevel=function(e){var t=e.curLevel;if(this._ui.label_title.getComponent(a).string="第"+t+"关",this._levelCfg=e.levelCfg,null!=this._levelCfg){var o=v.getNormalColorTypeCount(t);E.RandomShuffleLiquidColors(o,this._levelCfg.levels.length),this._isMultiLevel=this._levelCfg.levels.length>1;for(var i=Math.max(this._levelCfg.levels.length,this._rackList.length),s=0;s<i;s++){this._levelCfg.levels[s]?(this._levelMapCfg[s]=e.levelMapCfg[s],this._levelMap[s]=e.levelMap[s],this.InitSubLevel(s)):this.DeInitSubLevel(s)}var l=this.GetSubTotalNum(this._subLevelIndex);this._ui.label_remain_bottle.getComponent(a).string="剩余:"+l,this._ui.node_anim_bottle.scale=_.ONE.clone().multiplyScalar(this._mapScale[this._subLevelIndex]),this.UpdateSubLevelDistance(),x.Mgr.sendNormalRoundStart(this._curLevel,this._subLevelIndex+1)}},i.OnTestSkip=function(){this._isGameOver=!0,this._isSuccess=!0,this.DoGameOver(!0)},i.OnTestSkipSubLevel=function(){var e=this._subLevelIndex;this._stepRecords.clear(),x.Mgr.sendNormalRoundFinish(this._curLevel,this._levelTime[e],this._stepCount[e],this._propTimes[e],this._unlockBottlePropCounts[e],this._vanishColorPropUseCounts[e],this._stepBackPropCounts[e],this._rebornTimes[e],this._rebornShowTimes[e],this._unlockBottleFreeCounts[e],this._unlockBottleVideoCounts[e],e+1),this.ShowInterLayer(),this._subLevelIndex<this._levelCfg.levels.length-1?(this._subLevelIndex++,this._isStucked=!1,G.Player.RoundId.val=this._subLevelIndex+1,G.Player.saveData(),this.ScheduleUpdateGameLevelSaveData(),this.GoToSubLevel(this._subLevelIndex),this.CheckProgress()):(this.ClearGameLevelSaveData(),this._isSuccess=!0,this._isGameOver=!0,this.DoGameOver(!0))},i.OnTestReduceTime=function(){this._remainTime=3},i.OnTestOnKeyClear=function(){var e=V.getInstance().SolveGame(this._levelMap[this._subLevelIndex],k.NORMAL);console.log(JSON.stringify(e))},o}(K))._prefabUrl="ui/UIGameLayer",Z._className="UIGameLayer",Q=Z))||Q);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIGameResult.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./GameAdMgr.ts","./GameUtils.ts","./PlatformManager.ts","./ABTestUtil.ts","./auto_UIGameResult.ts","./UIGameLayer.ts","./UIGameResultRank.ts","./UIGetGiftBox.ts","./UIHallLayer.ts","./UIPermission.ts"],(function(e){var t,i,n,s,o,a,l,r,c,u,_,h,f,p,d,g,C,v,m,S,y,I,U,b,G,T,O,B,k;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,s=e.Color,o=e.Label,a=e.ProgressBar,l=e.tween,r=e.UIOpacity,c=e.Vec3,u=e.sp},function(e){_=e.GameDefine,h=e.GuideType,f=e.Sfx,p=e.GameEvent},function(e){d=e.default},function(e){g=e.default},function(e){C=e.UIBase},function(e){v=e.default},function(e){m=e.GameAdMgr,S=e.EAdPlayType},function(e){y=e.default},function(e){I=e.default},function(e){U=e.ABTestUtil},function(e){b=e.default},function(e){G=e.UIGameLayer},function(e){T=e.default},function(e){O=e.default},function(e){B=e.default},function(e){k=e.default}],execute:function(){var w,x;i._RF.push({},"52dd8sW3CJKuYroaXO5qJ81","UIGameResult",void 0);var E=1.5*_.FRAME_TIME,A=n.ccclass,L=(n.property,["又是躺赢的一天","帅者的肯定！","再接再励！"]),N=["怎会如此？","成功与我擦肩而过","再接再厉！"];e("default",A("UIGameResult")(((x=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._ui=void 0,t._isSuccess=!1,t._level=-1,t._rewards=void 0,t._levelCountPerGiftBox=_.LEVEL_COUNT_PER_GIFT_BOX,t._interactive=!1,t}t(i,e);var n=i.prototype;return n.onInit=function(e){var t=e[0];this._isSuccess=t.isSuccess,this._level=t.level,this._rewards=t.rewards,this._levelCountPerGiftBox=y.GetLevelCountPerGiftBox()},n.onUILoad=function(){var e,t=this;this._ui=this.node.addComponent(b),this.addInterlayer(),this._ui.node_fail_btns.active=!this._isSuccess,this._ui.node_success_btns.active=this._isSuccess;var i=this._isSuccess?new s(229,113,0):new s(40,116,229);this._ui.label_result_desc.getComponent(o).color=i;var n=Math.floor(3*Math.random()),c=this._isSuccess?L[n]:N[n];this._ui.label_result_desc.getComponent(o).string=c,v.SetSpriteFrame(this._ui.spr_result_icon,"finish/"+(this._isSuccess?"chenggong":"shibai")+(n+1));var u=y.GetNextTypeOpenLevel(this._level),_=u[0],p=u[1],g="";switch(_){case h.UNKNOWN_BOTTLE:g="wenhaoshui";break;case h.TRANSITION_BOTTLE:g="guoduping";break;case h.COLOR_BOTTLE:g="yanseping";break;case h.TRANSFER_BOTTLE:g="chuansongdai";break;case h.TASK_BOTTLE:g="zhuanhuanpingicon";break;case h.HIDDEN_BOTTLE:g="zhedangping";break;case h.STONE_BOTTLE:g="shitouping";break;case h.LOCK_BOTTLE:g="suolianping"}g&&v.SetSpriteFrame(this._ui.spr_next_type,"finish/"+g),this._ui.node_next_type.active=p>=0,this._isSuccess||p++,0==p?(this._ui.label_next_type_1.getComponent(o).string="下关开启",this._ui.label_next_type_2.getComponent(o).string="玩法"):p>0&&(this._ui.label_next_type_2.getComponent(o).string="玩法还剩"+p+"局");var C=(this._level-1)%this._levelCountPerGiftBox/this._levelCountPerGiftBox;this._ui.pro_next_reward.getComponent(a).progress=C,this._ui.label_progress_desc.getComponent(o).string="关卡进度："+Math.floor(100*C)+"%";var I=this._isSuccess?this._level:this._level-1,G=this._levelCountPerGiftBox-I%this._levelCountPerGiftBox;G==this._levelCountPerGiftBox&&this._isSuccess&&(G=0),this._ui.label_next_reward_desc.getComponent(o).string="再完成"+G+"关，可获得奖励",this._isSuccess?d.playEffect(f.SOUND_GAME_WIN):d.playEffect(f.SOUND_GAME_FAIL);var T=this;this._interactive=!1,v.SetOpacity(this._interlayer,0),l(null==(e=this._interlayer)?void 0:e.getComponent(r)).to(7*E,{opacity:255}).start(),this.scheduleOnce((function(){T.playGameResultAni()}),7*E),this.showComponent(this._ui.node_result_icon,0),this.showComponent(this._ui.layout_next_type,3*E),this.showComponent(this._ui.pro_next_reward,5*E),this.showComponent(this._ui.node_btns,7*E),this.scheduleOnce((function(){T.CheckGiftBox()}),12*E);var O=12*E;this._isSuccess&&(O+=2),null!=this._rewards&&(O+=.5),this.scheduleOnce((function(){U.IsABTestC_V1()&&m.getInstance().ShowInterstitialAd(S.ad_inter_finish),t._interactive=!0}),O)},n.showComponent=function(e,t){var i=c.ONE;v.SetOpacity(e,0),l(e.getComponent(r)).delay(12*E+t).to(7*E,{opacity:255}).start(),l(e).to(0,{scale:i.clone().multiplyScalar(.4)}).delay(12*E+t).to(7*E,{scale:i.clone().multiplyScalar(1.03)},{easing:"sineInOut"}).to(5*E,{scale:i.clone().multiplyScalar(.98)},{easing:"sineInOut"}).to(4*E,{scale:i},{easing:"sineInOut"}).start()},n.playGameResultAni=function(){if(this._ui.spine_banner.active=!0,this._isSuccess){this._ui.spine_banner.getComponent(u.Skeleton).setAnimation(0,"shengli_1",!1),this._ui.spine_banner.getComponent(u.Skeleton).addAnimation(0,"shengli_2",!0);var e=this;this._ui.spine_caidai.active=!0,this._ui.spine_caidai.getComponent(u.Skeleton).color=new s(255,255,255,0),l(this._ui.spine_caidai.getComponent(u.Skeleton)).delay(1.5).call((function(){e._ui.spine_caidai.getComponent(u.Skeleton).setAnimation(0,"idle",!0)})).to(1,{color:s.WHITE}).start()}else this._ui.spine_banner.getComponent(u.Skeleton).setAnimation(0,"shibai_1",!1),this._ui.spine_banner.getComponent(u.Skeleton).addAnimation(0,"shibai_2",!0)},n.onUIStart=function(){},n.update=function(e){},n.onUIEnable=function(){this.registerClick(this._ui.btn_back,this.onBackClick),this.registerClick(this._ui.btn_next_level,this.onReplayClick),this.registerClick(this._ui.btn_continue,this.onContinueClick)},n.onUIDisable=function(){},n.onUIDestroy=function(){this.onClose()},n.onClose=function(){v.CloseUI(i)},n.onBackClick=function(e){var t=this;this._interactive&&(d.playEffect(f.SOUND_BUTTON),this.runCloseAni(this.node,(function(){t.onClose()})),v.ShowUI(B,(function(){v.CloseUI(G)})))},n.onReplayClick=function(){var e=this;this._interactive&&(d.playEffect(f.SOUND_BUTTON),this.runCloseAni(this.node,(function(){e.onClose(),g.emit(p.EventGameSettle,!1)})))},n.onContinueClick=function(){var e=this;if(this._interactive){d.playEffect(f.SOUND_BUTTON),this.runCloseAni(this.node,(function(){e.onClose()}));var t=this._level,i=function(){I.getUserInfo((function(){v.ShowUI(T,void 0,{level:t})}))};I.CheckNeedAuthUserInfo().then((function(e){e?v.ShowUI(k,void 0,{callback:i}):i()}))}},n.CheckGiftBox=function(){var e=this;if(this._isSuccess){var t=this._level%this._levelCountPerGiftBox/this._levelCountPerGiftBox;if(0==t&&(t=1),null==this._rewards){var i=this._ui.pro_next_reward.getComponent(a);l(i).delay(1).to(1,{progress:t},{progress:function(t,i,n,s){return n=(i-t)*s+t,e._ui.label_progress_desc.getComponent(o).string="关卡进度："+Math.floor(100*n)+"%",n}}).start()}else{var n=this._ui.pro_next_reward.getComponent(a);l(n).to(1,{progress:t},{progress:function(t,i,n,s){return n=(i-t)*s+t,e._ui.label_progress_desc.getComponent(o).string="关卡进度："+Math.floor(100*n)+"%",n}}).call((function(){var t=e;v.ShowUI(O,void 0,{rewards:e._rewards,closeCallback:function(){n.progress=0,t._ui.label_progress_desc.getComponent(o).string="关卡进度：0%",t._ui.label_next_reward_desc.getComponent(o).string="再完成"+e._levelCountPerGiftBox+"关，可获得奖励"}})})).start()}}},i}(C))._prefabUrl="ui/UIGameResult",x._className="UIGameResult",w=x))||w);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIGameResultRank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RankDataMgr.ts","./Defines.ts","./AudioManager.ts","./EventManager.ts","./Log.ts","./UIBase.ts","./UIHelp.ts","./BadgeUtil.ts","./auto_UIGameResultRank.ts","./tableView.ts","./FinishRankItem.ts","./UIGameLayer.ts","./UIHallLayer.ts","./UIRankUpgrade.ts"],(function(e){var t,n,a,i,o,l,r,s,c,u,_,f,h,d,k,v,I,p,m,C,g,U,R,E,y,b,L,D,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.Prefab,s=e.Label,c=e.tween,u=e.Vec3,_=e.UITransform,f=e.Tween,h=e.sp},function(e){d=e.RankDataMgr},function(e){k=e.GameDefine,v=e.Sfx,I=e.GameEvent},function(e){p=e.default},function(e){m=e.default},function(e){C=e.default},function(e){g=e.UIBase},function(e){U=e.default},function(e){R=e.BadgeUtil},function(e){E=e.default},function(e){y=e.TableView},function(e){b=e.default},function(e){L=e.UIGameLayer},function(e){D=e.default},function(e){x=e.default}],execute:function(){var N,P,S,T,O,w;o._RF.push({},"aba01e9sqdDVLuaGN0YgmE3","UIGameResultRank",void 0);var V=1.5*k.FRAME_TIME,A=l.ccclass,G=l.property,B=(e("default",(N=A("UIGameResultRank"),P=G(r),N(((w=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this)._ui=void 0,a(t,"rankItemPrefab",O,i(t)),t._rankData=[],t._level=-1,t._selfIndex=-1,t._interactive=!1,t}n(t,e);var o=t.prototype;return o.onInit=function(e){this._level=e[0].level;var t=this._level;this._rankData=d.GetCurRankData(t),this._selfIndex=d.GetCurRank(t)},o.onUILoad=function(){var e=this;this._ui=this.node.addComponent(E),this.addInterlayer();var t=this._ui.scroll_rank.getComponent(y);t.datasource=new B(this._rankData,this.rankItemPrefab),t.delegate=new F;var n=this._level,a=k.LEVEL_COUNT_PER_RANK_LEVEL-n%k.LEVEL_COUNT_PER_RANK_LEVEL,i=R.GetBadgeName(R.GetBageIndexByLevel(n)+1);this._ui.lab_rank_up_desc.getComponent(s).string=""!=i?"再过"+a+"关，可升级为"+i+"。":"",this._level%k.LEVEL_COUNT_PER_RANK_LEVEL!=0?(this._ui.node_rank_mask.active=!0,c(this._ui.node_rank_mask).delay(48.3*V).destroySelf().start()):this._ui.node_rank_mask.active=!1,this._interactive=!1;var o=12*V+16*V;this.scheduleOnce((function(){e._interactive=!0}),o),this.runOpenAni(this.node)},o.onUIStart=function(){this.CheckRankUp()},o.onUIEnable=function(){this.registerClick(this._ui.btn_back,this.onBackClick),this.registerClick(this._ui.btn_next_level,this.onNextLevelClick)},o.onUIDisable=function(){},o.onUIDestroy=function(){this.onClose()},o.onClose=function(){U.CloseUI(t)},o.CheckRankUp=function(){this._level%k.LEVEL_COUNT_PER_RANK_LEVEL==0&&this._level>1?(this.SetRankIndexToCurrent(),U.ShowUI(x,void 0,{rank:R.GetBageIndexByLevel(this._level)})):this.FlipRankToCurrent()},o.SetRankIndexToCurrent=function(){var e=this._ui.scroll_rank.getComponent(y),t=this._selfIndex-2;t<0&&(t=0),e.scrollToIndex(t)},o.FlipRankToCurrent=function(){for(var e=this,t=this._selfIndex,n=-1,a=this._rankData.length-1;a>=0;a--)if(-1==n&&this._rankData[a].level==this._level-1){n=a;break}var i=this._ui.scroll_rank.getComponent(y);if(this._level%k.LEVEL_COUNT_PER_RANK_LEVEL==0){var o=this._selfIndex-2;o<0&&(o=0),i.scrollToIndex(o)}else{var l=n-3;l<0&&(l=0);var r=t-1;r<0&&(r=0),i.scrollToIndex(l);var s=U.CreateWidget(b,this.rankItemPrefab,this._rankData[t]);this._ui.scroll_rank.addChild(s.node),s.node.setWorldPosition(i.cellAtIndex(n).node.getWorldPosition()),this._rankData[n].visible=!1,this._rankData[t].visible=!1,i.cellAtIndex(n).setContent(this._rankData[n]);var h=19*V,d=10*V,I=s.node.worldPosition.clone(),m=i.getOffsetFromIndex(l).y-i.getOffsetFromIndex(l-2).y,g=i.getMaxScrollOffset().y,R=i.getOffsetFromIndex(l).y-g;R>0&&(m+=R),C.log(g,i.getOffsetFromIndex(l).y);var E=new u(I.x,I.y+m,0),L=this;p.playEffect(v.SOUND_RANK_UP),c(s.node).delay(d).to(5*V,{scale:u.ONE.clone().multiplyScalar(.95)}).call((function(){i.scrollToIndex(r,h)})).to(.7*h,{scale:u.ONE.clone().multiplyScalar(1.1),worldPosition:E}).to(6*V,{scale:u.ONE.clone().multiplyScalar(.98)}).call((function(){var e=s.node.worldPosition.clone();e.y-=.5*s.node.getComponent(_).height,L.ShowRankUpSpine(e)})).to(4*V,{scale:u.ONE.clone().multiplyScalar(1)}).call((function(){e._rankData[n].visible=!0,e._rankData[t].visible=!0,i.cellAtIndex(t).setContent(e._rankData[t]),f.stopAllByTarget(s.node),s.node.removeFromParent(),s.node.destroy()})).start()}},o.ShowRankUpSpine=function(e){this._ui.spine_rank_up.active=!0,this._ui.spine_rank_up.worldPosition=e,this._ui.spine_rank_up.getComponent(h.Skeleton).setAnimation(0,"animation",!1)},o.onBackClick=function(e){var t=this;this._interactive&&(p.playEffect(v.SOUND_BUTTON),this.runCloseAni(this.node,(function(){t.onClose()})),U.ShowUI(D,(function(){U.CloseUI(L)})))},o.onNextLevelClick=function(){var e=this;this._interactive&&(p.playEffect(v.SOUND_BUTTON),this.runCloseAni(this.node,(function(){e.onClose(),m.emit(I.EventGameSettle,!0)})))},t}(g))._prefabUrl="ui/UIGameResultRank",w._className="UIGameResultRank",O=t((T=w).prototype,"rankItemPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=T))||S)),function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=null),this._rankData=void 0,this._rankItemPrefab=void 0,this._rankData=e,this._rankItemPrefab=t}var t=e.prototype;return t.tableViewNumberOfCells=function(e){return this._rankData.length},t.tableViewCellForIndex=function(e,t){var n=e.dequeueCell();return null==n?n=U.CreateWidget(b,this._rankItemPrefab,this._rankData[t]):n.setContent(this._rankData[t]),n},e}()),F=function(){function e(){}var t=e.prototype;return t.tableViewScrolling=function(e){},t.tableViewCellHeightForIndex=function(e,t){return 100},e}();o._RF.pop()}}}));

System.register("chunks:///_virtual/UIGetGiftBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./ABTestUtil.ts","./auto_UIGetGiftBox.ts"],(function(t){var i,e,s,a,n,o,r,_,c,l,u,h,p,d,m,f,w,g,C;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,a=t.Label,n=t.sp,o=t.tween,r=t.UIOpacity,_=t.Vec3},function(t){c=t.PROP_ID,l=t.Sfx,u=t.GameDefine,h=t.GameEvent},function(t){p=t.default},function(t){d=t.default},function(t){m=t.default},function(t){f=t.UIBase},function(t){w=t.default},function(t){g=t.ABTestUtil},function(t){C=t.default}],execute:function(){var b,S;e._RF.push({},"e510dzrZgNBcIdYQnEbI8Sd","UIGetGiftBox",void 0);var v=s.ccclass;s.property,t("default",v("UIGetGiftBox")(((S=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return(i=t.call.apply(t,[this].concat(s))||this)._ui=void 0,i._rewards=void 0,i._showClaimBtn=!1,i._closeCallback=void 0,i._isChallenge=!1,i}i(e,t);var s=e.prototype;return s.onInit=function(t){this._rewards=t[0].rewards,this._showClaimBtn=t[0].showClaimBtn,this._closeCallback=t[0].closeCallback,this._isChallenge=t[0].isChallenge},s.onUILoad=function(){var t;if(this._ui=this.node.addComponent(C),this.addInterlayer(),this.registerClick(this._ui.btn_close,this.onClose,this),this.registerClick(this._ui.btn_claim,this.onClose,this),this.registerClick(this._ui.btn_use_bg,this.onClickUseBg,this),this._ui.btn_claim.active=1==this._showClaimBtn,this._ui.btn_close.active=1!=this._showClaimBtn,this._rewards.bg?(this._ui.node_reward1.active=!0,this._ui.spr_add.active=!0,w.SetSpriteFrame(this._ui.spr_reward1,"shopbg/xiao"+this._rewards.bg.id),this._ui.btn_use_bg.active=!g.IsABTestC_V4()):this._rewards.prop1?(this._rewards.prop1&&(this._rewards.prop1.id==c.STEP_BACK?w.SetSpriteFrame(this._ui.spr_reward1,"common/Game_icon_chehui"):this._rewards.prop1.id==c.UNLOCK_BOTTLE?w.SetSpriteFrame(this._ui.spr_reward1,"common/Game_icon_pingzi"):this._rewards.prop1.id==c.VANISH_COLOR&&w.SetSpriteFrame(this._ui.spr_reward1,"common/Game_icon_xiaochu"),this._ui.label_count_reward1.getComponent(a).string="道具+"+this._rewards.prop1.count),this._ui.btn_use_bg.active=!1):(this._ui.node_reward1.active=!1,this._ui.spr_add.active=!1,this._ui.btn_use_bg.active=!1),this._rewards.prop&&(this._rewards.prop.id==c.STEP_BACK?w.SetSpriteFrame(this._ui.spr_reward2,"common/Game_icon_chehui"):this._rewards.prop.id==c.UNLOCK_BOTTLE?w.SetSpriteFrame(this._ui.spr_reward2,"common/Game_icon_pingzi"):this._rewards.prop.id==c.VANISH_COLOR&&w.SetSpriteFrame(this._ui.spr_reward2,"common/Game_icon_xiaochu"),this._ui.label_count_reward2.getComponent(a).string="道具+"+this._rewards.prop.count),this._isChallenge)this.showRewards();else{var i=this;this._ui.spine_title.getComponent(n.Skeleton).setAnimation(0,"animation",!1),this._ui.spine_title.getComponent(n.Skeleton).setEventListener((function(t,e){e instanceof n.spine.Event&&"box"==e.data.name&&i.showBoxSpine()}))}w.SetOpacity(this._interlayer,0),o(null==(t=this._interlayer)?void 0:t.getComponent(r)).to(.7,{opacity:255}).start()},s.showBoxSpine=function(){p.playEffect(l.SOUND_GFIT_BOX);var t=this;this._ui.spine_gift_box.active=!0,this._ui.spine_gift_box.getComponent(n.Skeleton).setAnimation(0,"animation",!1),this._ui.spine_gift_box.getComponent(n.Skeleton).setEventListener((function(i,e){e instanceof n.spine.Event&&"tanchu"==e.data.name&&t.showRewards()}))},s.showRewards=function(){var t=0;this._ui.node_reward1.active&&(t=5*u.FRAME_TIME,this._ui.node_reward1.scale=_.ONE.clone().multiplyScalar(.4),o(this._ui.node_reward1).to(.5,{scale:_.ONE},{easing:"backOut"}).start()),this._ui.node_reward2.scale=_.ONE.clone().multiplyScalar(.4),o(this._ui.node_reward2).delay(t).to(.5,{scale:_.ONE},{easing:"backOut"}).start(),this._ui.spr_add.active&&(this._ui.spr_add.scale=_.ONE.clone().multiplyScalar(.4),o(this._ui.spr_add).delay(t/2).to(.5,{scale:_.ONE},{easing:"backOut"}).start()),this._ui.layout_rewards.getComponent(r).opacity=0,o(this._ui.layout_rewards.getComponent(r)).to(.5,{opacity:255},{easing:"backOut"}).start(),this._ui.layout_btns.active=!0,this._ui.layout_btns.scale=_.ONE.clone().multiplyScalar(.4),o(this._ui.layout_btns).to(.5,{scale:_.ONE},{easing:"backOut"}).start(),this._ui.layout_btns.getComponent(r).opacity=0,o(this._ui.layout_btns.getComponent(r)).to(.5,{opacity:255}).start()},s.onUIStart=function(){},s.onUIEnable=function(){},s.onUIDisable=function(){},s.onUIDestroy=function(){w.CloseUI(e)},s.closeUI=function(){this.runCloseAni(this.node,(function(){w.CloseUI(e),m.emit(h.EventShowGameClube)})),this._closeCallback&&this._closeCallback()},s.onClose=function(){p.playEffect(l.SOUND_BUTTON),this.closeUI()},s.onClickUseBg=function(){p.playEffect(l.SOUND_BUTTON),d.Player.ThemeList.useTheme(this._rewards.bg.id),this.closeUI()},e}(f))._prefabUrl="ui/UIGetGiftBox",S._className="UIGetGiftBox",b=S))||b);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIGiftLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./GameAdMgr.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./Utils.ts","./auto_UIGiftLayer.ts"],(function(t){var i,e,n,o,a,s,c,u,l,r,f,h,d,m,v;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Label},function(t){a=t.Sfx,s=t.GameEvent},function(t){c=t.GameAdMgr,u=t.EAdPlayType},function(t){l=t.default},function(t){r=t.default},function(t){f=t.default},function(t){h=t.UIBase},function(t){d=t.default},function(t){m=t.default},function(t){v=t.default}],execute:function(){var _,p;e._RF.push({},"d5f99tVvaFI6pZFc47cWE9u","UIGiftLayer",void 0);var C=n.ccclass;n.property,t("default",C("UIGiftLayer")(((p=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this)._ui=void 0,i.dateTime=0,i.canClaim=!1,i.clickButton=!1,i}i(e,t);var n=e.prototype;return n.onInit=function(t){},n.onUILoad=function(){this._ui=this.node.addComponent(v),this.addInterlayer(),this.refreshGiftTime(),this.runOpenAni(this.node)},n.onUIStart=function(){},n.onUIEnable=function(){this.registerClick(this._ui.video_btn,this.onVideoCilck),this.registerClick(this._ui.close_btn,this.onCloseCilck)},n.onUIDisable=function(){},n.onUIDestroy=function(){this.onClose()},n.onClose=function(){d.CloseUI(e)},n.update=function(t){this.dateTime+=t,this.dateTime>=1&&(this.dateTime-=1,this.refreshGiftTime())},n.refreshGiftTime=function(){var t=(r.Player.GiftLastTime.val-Date.now())/1e3;this._ui.time_label.getComponent(o).string=m.GetTimeString(t)},n.onVideoCilck=function(){var t=this;if(!this.clickButton)if(this.clickButton=!0,l.playEffect(a.SOUND_BUTTON),this.canClaim)this.runCloseAni(this.node,(function(){f.emit(s.EventShowGameClube),t.onClose()}));else{var i=this;c.getInstance().ShowRewardVideoAd(u.ad_video_gift,(function(t){t&&(i.canClaim=!0,r.Player.SkinList.unLockSkin(3),r.Player.GiftIsGet.val=!0,i._ui.video_icon.active=!1,i._ui.close_btn.active=!1,i._ui.time_sp.active=!1),i.clickButton=!1}))}},n.onCloseCilck=function(){var t=this;this.clickButton||(this.clickButton=!0,l.playEffect(a.SOUND_BUTTON),this.runCloseAni(this.node,(function(){f.emit(s.EventShowGameClube),t.onClose()})))},e}(h))._prefabUrl="ui/UIGiftLayer",p._className="UIGiftLayer",_=p))||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIGuideLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./auto_UIGuideLayer.ts","./ABTestUtil.ts"],(function(i){var t,e,n,o,s,c,r,_,u,a,l,d,h,p,g,f,k;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,n=i._decorator,o=i.Sprite,s=i.Color,c=i.tween,r=i.UIOpacity,_=i.Label,u=i.UITransform,a=i.instantiate,l=i.Vec3},function(i){d=i.GameEvent},function(i){h=i.default},function(i){p=i.UIBase},function(i){g=i.default},function(i){f=i.default},function(i){k=i.ABTestUtil}],execute:function(){var v,C;e._RF.push({},"89271Q+GRVHRoLmu3ZEsfel","UIGuideLayer",void 0);var U=n.ccclass;n.property,i("default",U("UIGuideLayer")(((C=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=i.call.apply(i,[this].concat(n))||this)._ui=void 0,t._desc="",t._clickRect=void 0,t._callback=void 0,t._canSkip=!0,t._rightPositions=[],t._wrongPositions=[],t._isClicked=!1,t}t(e,i);var n=e.prototype;return n.onInit=function(i){this._canSkip=i[0].canSkip,this._desc=i[0].desc,this._clickRect=i[0].clickRect,this._callback=i[0].callback,this._rightPositions=i[0].rightPositions,this._wrongPositions=i[0].wrongPositions},n.onUILoad=function(){this._ui=this.node.addComponent(f),this._interlayer.getComponent(o).color=s.TRANSPARENT,this.UpdateUI(),this.registerClick(this._ui.click_rect,this.OnClickRect),this.registerClick(this._ui.btn_skip,this.OnClickSkip),g.SetOpacity(this._ui.spine_guide_pointer,0),c(this._ui.spine_guide_pointer.getComponent(r)).delay(.4).to(.4,{opacity:255}).start()},n.HideFinger=function(){this._ui.spine_guide_pointer.active=!1,this._ui.node_right_wrong_sprites.active=!1},n.UpdateUI=function(){var i=this;this._ui.node_right_wrong_sprites.removeAllChildren(),this._isClicked=!1,this._ui.btn_skip.active=this._canSkip,""!=this._desc?(this._ui.spr_text_bubble_bg.active=!0,this._ui.label_content.getComponent(_).string=this._desc):this._ui.spr_text_bubble_bg.active=!1,this.scheduleOnce((function(){i._ui.click_rect.worldPosition=i._clickRect.center.toVec3(),i._ui.click_rect.getComponent(u).setContentSize(i._clickRect.size),i._ui.node_right_wrong_sprites.active=!0,i._ui.spine_guide_pointer.active=!0;var t,e,n=i._clickRect.center.toVec3();(n.x+=.5*i._ui.spine_guide_pointer.getComponent(u).width,n.y-=.7*i._ui.spine_guide_pointer.getComponent(u).height,i._ui.spine_guide_pointer.worldPosition=n,k.IsABTestB_V3())&&(null==(t=i._rightPositions)||t.forEach((function(t){i.addRightSprite(t)})),null==(e=i._wrongPositions)||e.forEach((function(t){i.addWrongSprite(t)})))}))},n.addRightSprite=function(i){this.addSprite(i,"guide/duihao")},n.addWrongSprite=function(i){this.addSprite(i,"guide/cuohao")},n.addSprite=function(i,t){var e=a(this._ui.spr_right);e.parent=this._ui.node_right_wrong_sprites,e.worldPosition=i.add(new l(0,20)),g.SetSpriteFrame(e,t,(function(){e.active=!0}))},n.onUIStart=function(){},n.onUIEnable=function(){},n.onUIDisable=function(){},n.onUIDestroy=function(){this.onClose()},n.onClose=function(){g.CloseUI(e)},n.OnClickRect=function(i,t){this._isClicked||(this._isClicked=!0,this._callback&&this._callback())},n.OnClickSkip=function(){h.emit(d.EventSkipGuide),this.onClose()},e}(p))._prefabUrl="ui/UIGuideLayer",C._className="UIGuideLayer",v=C))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIHallLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./DataManager.ts","./Log.ts","./UIBase.ts","./UIHelp.ts","./Utils.ts","./BytedancePlatform.ts","./PlatformManager.ts","./ABTestUtil.ts","./BadgeUtil.ts","./TAData.ts","./UITask.ts","./UIUtil.ts","./WechatManager.ts","./auto_UIHallLayer.ts","./UIChallengeGameLayer.ts","./UIChallengeLayer.ts","./UICollectGameLayer.ts","./UIGameLayer.ts","./UIGiftLayer.ts","./UIHallSetting.ts","./UILoginShareLayer.ts","./UIRankLayer.ts","./UIShareLayer.ts","./UISideBarLayer.ts","./UISignInLayer.ts","./UIThemeSkin.ts","./UIMoreLayer.ts"],(function(i){var t,n,e,s,a,o,l,h,c,u,r,_,m,p,g,y,b,T,d,O,I,f,S,w,C,v,E,U,k,B,z,x,N,G,P,L,D,A,M,R,H,F,V,W;return{setters:[function(i){t=i.inheritsLoose},function(i){n=i.cclegacy,e=i._decorator,s=i.Label,a=i.Vec3,o=i.sys,l=i.view,h=i.Vec2,c=i.UIOpacity,u=i.tween,r=i.Tween},function(i){_=i.GameDefine,m=i.Constant,p=i.GameEvent,g=i.Sfx},function(i){y=i.default},function(i){b=i.default},function(i){T=i.default},function(i){d=i.UIBase},function(i){O=i.default},function(i){I=i.default},function(i){f=i.default},function(i){S=i.default},function(i){w=i.ABTestUtil},function(i){C=i.BadgeUtil},function(i){v=i.TAData},function(i){E=i.UITask},function(i){U=i.UIUtil},function(i){k=i.default},function(i){B=i.default},function(i){z=i.default},function(i){x=i.default},function(i){N=i.default},function(i){G=i.UIGameLayer},function(i){P=i.default},function(i){L=i.default},function(i){D=i.default},function(i){A=i.default},function(i){M=i.default,R=i.ShareTipsType},function(i){H=i.default},function(i){F=i.default},function(i){V=i.default},function(i){W=i.default}],execute:function(){var Y,j;n._RF.push({},"9ac97/iM9FFx6en7G4U/CRn","UIHallLayer",void 0);var q=e.ccclass;e.property,i("default",q("UIHallLayer")(((j=function(i){function n(){for(var t,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(t=i.call.apply(i,[this].concat(e))||this)._ui=void 0,t.aniTime=_.FRAME_TIME,t.gameclubBtn=null,t.challengeDate=void 0,t.isSuccess=!1,t}t(n,i);var e=n.prototype;return e.onInit=function(i){var t,n;this.challengeDate=null==(t=i[0])?void 0:t.challengeDate,this.isSuccess=null==(n=i[0])?void 0:n.isSuccess},e.onUILoad=function(){var i=this;this._ui=this.node.addComponent(B),this.addInterlayer(),this.checkSidebar(),this.checkCollection(),this.setOpacity(),this.scheduleOnce((function(){i.setButtonPos(),i.ShowStartAnim(),i.challengeDate?O.ShowUI(x,(function(){i.gameclubBtn&&i.gameclubBtn.hide()}),{challengeDate:i.challengeDate,isSuccess:i.isSuccess}):E.ShowTaskUIs()}))},e.CheckShowShareReward=function(){b.Player.LoginShareClick.val=!1,b.Player.saveData(),b.Player.bShouldShowDailyShare()&&O.ShowUI(D)},e.onUIStart=function(){this.refreshTheme();var i=b.Player.LevelId.val;this._ui.level_label.getComponent(s).string="第"+i+"关";var t=C.GetBageIndexByLevel(b.Player.LevelId.val-1);this._ui.rank_label_color.getComponent(s).string="当前段位:"+C.GetBadgeName(t),this._ui.rank_label_shadow.getComponent(s).string="当前段位:"+C.GetBadgeName(t),w.IsABTestB_V4()?(this._ui.challenge_btn.active=!0,b.Player.LevelId.val>m.challengeLevel?(this._ui.lcok_label.active=!1,this._ui.challenge_label.position=new a(0,4,0)):(this._ui.lcok_label.active=!0,this._ui.challenge_label.position=new a(0,19,0))):this._ui.challenge_btn.active=!1,b.Player.bSholdShowShare()?this._ui.share_btn.active=!0:this._ui.share_btn.active=!1,b.Player.SignIn.isSignIn()||b.Player.SignIn.Guide||(b.Player.SignIn.Guide=!0),this._ui.signin_sp.active=!b.Player.SignIn.isSignIn(),this._ui.gift_btn.active=!1,this._ui.theme_sp.active=w.IsABTestC_V4()&&b.Player.ThemeList.isShowShopSign()>0},e.onUIEnable=function(){this.registerEvent(p.EventChangeThemeChoose,this.refreshTheme),this.registerEvent(p.EventShareSuccess,this.refreshShareButton),this.registerEvent(p.EventShowGameClube,this.showGameClubBtn),this.registerEvent(p.EventHideGameClube,this.hideGameClubBtn),this.registerEvent(p.EventShowSharReward,this.showShareReward),this.registerEvent("Event_ClaimSignIn",this.signInReward),this.registerClick(this._ui.setting_btn,this.OnClickSetting),this.registerClick(this._ui.share_btn,this.OnClickShare),this.registerClick(this._ui.signin_btn,this.OnClickSignIn),this.registerClick(this._ui.gift_btn,this.OnClickGift),this.registerClick(this._ui.sidebar_btn,this.OnClickSideBarReward),this.registerClick(this._ui.collect_btn,this.OnClickCollectGame),this.registerClick(this._ui.theme_btn,this.OnClickThemeSkin),this.registerClick(this._ui.rank_btn,this.OnClickRank),this.registerClick(this._ui.start_btn,this.OnStartGame),this.registerClick(this._ui.challenge_btn,this.OnClickChallenge),this.registerClick(this._ui.more_btn,this.OnClickMoreGame)},e.onUIDisable=function(){},e.onUIDestroy=function(){this.onClose()},e.onClose=function(){O.CloseUI(n)},e.update=function(i){},e.setButtonPos=function(){this._ui.gamecenter_btn.active=o.platform==o.Platform.WECHAT_GAME;var i=l.getVisibleSize();if(o.platform==o.Platform.WECHAT_GAME){var t;this._ui.share_btn.setPosition(-i.width/2+78,this._ui.share_btn.position.y,this._ui.share_btn.position.z),this._ui.signin_btn.setPosition(i.width/2-78,this._ui.signin_btn.position.y,this._ui.signin_btn.position.z),this._ui.rank_btn.setPosition(-i.width/2+78,this._ui.rank_btn.position.y,this._ui.rank_btn.position.z),this._ui.theme_btn.setPosition(i.width/2-78,this._ui.theme_btn.position.y,this._ui.theme_btn.position.z),this._ui.gamecenter_btn.setPosition(-i.width/2+78,this._ui.gamecenter_btn.position.y,this._ui.gamecenter_btn.position.z),this._ui.sidebar_btn.setPosition(-i.width/2+78,this._ui.sidebar_btn.position.y,this._ui.sidebar_btn.position.z),this._ui.collect_btn.setPosition(i.width/2-78,this._ui.collect_btn.position.y,this._ui.collect_btn.position.z),this._ui.more_btn.setPosition(i.width/2-78,this._ui.more_btn.position.y,this._ui.more_btn.position.z),this._ui.gift_btn.setPosition(-i.width/2+78,this._ui.gift_btn.position.y,this._ui.gift_btn.position.z);var n=new h(this._ui.gamecenter_btn.position.x+i.width/2,this._ui.gamecenter_btn.position.y+i.height/2);this.gameclubBtn=S.createBlubBtn(n),null==(t=this.gameclubBtn)||t.onTap((function(i){T.log("gameclubBtnOnTap",i)}))}var e=this._ui.rank_label_color.position.clone();w.IsABTestB_V4()?(this._ui.rank_label_color.setPosition(e.x,e.y,e.z),this._ui.rank_label_shadow.setPosition(e.x,e.y-4,e.z)):(this._ui.rank_label_color.setPosition(e.x,e.y+210,e.z),this._ui.rank_label_shadow.setPosition(e.x,e.y+206,e.z))},e.setOpacity=function(){this._ui.logo_spine.getComponent(c).opacity=0,this._ui.flower_spine.getComponent(c).opacity=0,this._ui.setting_btn.getComponent(c).opacity=0,this._ui.rank_label_color.getComponent(c).opacity=0,this._ui.rank_label_shadow.getComponent(c).opacity=0,this._ui.start_btn.getComponent(c).opacity=0,this._ui.challenge_btn.getComponent(c).opacity=0,this._ui.share_btn.getComponent(c).opacity=0,this._ui.signin_btn.getComponent(c).opacity=0,this._ui.rank_btn.getComponent(c).opacity=0,this._ui.theme_btn.getComponent(c).opacity=0,this._ui.gamecenter_btn.getComponent(c).opacity=0,this._ui.sidebar_btn.getComponent(c).opacity=0,this._ui.collect_btn.getComponent(c).opacity=0,this._ui.gift_btn.getComponent(c).opacity=0,this._ui.more_btn.getComponent(c).opacity=0},e.ShowStartAnim=function(){var i=this._ui.logo_spine.position.clone();u(this._ui.logo_spine).to(0,{position:new a(i.x,i.y-15,i.z)}).to(10*this.aniTime,{position:new a(i.x,i.y,i.z)},{easing:"sineInOut"}).start(),u(this._ui.logo_spine).to(0,{scale:a.ONE.clone().multiplyScalar(.45)}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(5*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1)},{easing:"sineInOut"}).start(),u(this._ui.logo_spine.getComponent(c)).to(0,{opacity:0}).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),u(this._ui.flower_spine).to(0,{scale:a.ONE.clone().multiplyScalar(.46)}).to(12*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1)},{easing:"sineInOut"}).start(),u(this._ui.flower_spine.getComponent(c)).to(0,{opacity:0}).to(12*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),u(this._ui.rank_label_color).to(0,{scale:a.ONE.clone().multiplyScalar(.46)}).to(12*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1)},{easing:"sineInOut"}).start(),u(this._ui.rank_label_color.getComponent(c)).to(0,{opacity:0}).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),u(this._ui.rank_label_shadow).to(0,{scale:a.ONE.clone().multiplyScalar(.46)}).to(12*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1)},{easing:"sineInOut"}).start(),u(this._ui.rank_label_shadow.getComponent(c)).to(0,{opacity:0}).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),u(this._ui.start_btn).to(0,{scale:a.ONE.clone().multiplyScalar(.46)}).to(12*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1)},{easing:"sineInOut"}).start(),u(this._ui.start_btn.getComponent(c)).to(0,{opacity:0}).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),u(this._ui.challenge_btn).to(0,{scale:a.ONE.clone().multiplyScalar(.46)}).delay(2*this.aniTime).to(12*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1)},{easing:"sineInOut"}).start(),u(this._ui.challenge_btn.getComponent(c)).to(0,{opacity:0}).delay(2*this.aniTime).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),u(this._ui.setting_btn).to(0,{scale:a.ONE.clone().multiplyScalar(.46)}).delay(5*this.aniTime).to(8*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(6*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1)},{easing:"sineInOut"}).start(),u(this._ui.setting_btn.getComponent(c)).to(0,{opacity:0}).delay(5*this.aniTime).to(4*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var t=this._ui.gift_btn.position.clone();u(this._ui.gift_btn).to(0,{position:new a(t.x-200,t.y,t.z)}).to(11*this.aniTime,{position:new a(t.x+8,t.y,t.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(t.x,t.y,t.z)},{easing:"sineInOut"}).start(),u(this._ui.gift_btn.getComponent(c)).to(0,{opacity:0}).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var n=this._ui.share_btn.position.clone();u(this._ui.share_btn).to(0,{position:new a(n.x-200,n.y,n.z)}).to(11*this.aniTime,{position:new a(n.x+8,n.y,n.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(n.x,n.y,n.z)},{easing:"sineInOut"}).start(),u(this._ui.share_btn.getComponent(c)).to(0,{opacity:0}).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var e=this._ui.gamecenter_btn.position.clone();u(this._ui.gamecenter_btn).to(0,{position:new a(e.x-200,e.y,e.z)}).delay(2*this.aniTime).to(11*this.aniTime,{position:new a(e.x+8,e.y,e.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(e.x,e.y,e.z)},{easing:"sineInOut"}).start(),u(this._ui.gamecenter_btn.getComponent(c)).to(0,{opacity:0}).delay(2*this.aniTime).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var s=this._ui.sidebar_btn.position.clone();u(this._ui.sidebar_btn).to(0,{position:new a(s.x-200,s.y,s.z)}).delay(2*this.aniTime).to(11*this.aniTime,{position:new a(s.x+8,s.y,s.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(s.x,s.y,s.z)},{easing:"sineInOut"}).start(),u(this._ui.sidebar_btn.getComponent(c)).to(0,{opacity:0}).delay(2*this.aniTime).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var o=this._ui.collect_btn.position.clone();u(this._ui.collect_btn).to(0,{position:new a(o.x+200,o.y,o.z)}).delay(2*this.aniTime).to(11*this.aniTime,{position:new a(o.x-8,o.y,o.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(o.x,o.y,o.z)},{easing:"sineInOut"}).start(),u(this._ui.collect_btn.getComponent(c)).to(0,{opacity:0}).delay(2*this.aniTime).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var l=this._ui.more_btn.position.clone();u(this._ui.more_btn).to(0,{position:new a(l.x+200,l.y,l.z)}).delay(2*this.aniTime).to(11*this.aniTime,{position:new a(l.x-8,l.y,l.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(l.x,l.y,l.z)},{easing:"sineInOut"}).start(),u(this._ui.more_btn.getComponent(c)).to(0,{opacity:0}).delay(2*this.aniTime).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var h=this._ui.rank_btn.position.clone();u(this._ui.rank_btn).to(0,{position:new a(h.x-200,h.y,h.z)}).delay(4*this.aniTime).to(11*this.aniTime,{position:new a(h.x+8,h.y,h.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(h.x,h.y,h.z)},{easing:"sineInOut"}).start(),u(this._ui.rank_btn.getComponent(c)).to(0,{opacity:0}).delay(4*this.aniTime).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var r=this._ui.signin_btn.position.clone();u(this._ui.signin_btn).to(0,{position:new a(r.x+200,r.y,r.z)}).to(11*this.aniTime,{position:new a(r.x-8,r.y,r.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(r.x,r.y,r.z)},{easing:"sineInOut"}).start(),u(this._ui.signin_btn.getComponent(c)).to(0,{opacity:0}).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var _=this._ui.address_btn.position.clone();u(this._ui.address_btn).to(0,{position:new a(_.x+200,_.y,_.z)}).delay(2*this.aniTime).to(11*this.aniTime,{position:new a(_.x-8,_.y,_.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(_.x,_.y,_.z)},{easing:"sineInOut"}).start(),u(this._ui.address_btn.getComponent(c)).to(0,{opacity:0}).delay(2*this.aniTime).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start();var m=this._ui.theme_btn.position.clone();u(this._ui.theme_btn).to(0,{position:new a(m.x+200,m.y,m.z)}).delay(4*this.aniTime).to(11*this.aniTime,{position:new a(m.x-8,m.y,m.z)},{easing:"sineInOut"}).to(7*this.aniTime,{position:new a(m.x,m.y,m.z)},{easing:"sineInOut"}).start(),u(this._ui.theme_btn.getComponent(c)).to(0,{opacity:0}).delay(4*this.aniTime).to(9*this.aniTime,{opacity:255},{easing:"sineInOut"}).start()},e.ShowExitAnim=function(i,t){u(this._ui.logo_spine).to(0,{scale:a.ONE.clone().multiplyScalar(1)}).to(8*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.1)},{easing:"sineInOut"}).to(8*this.aniTime,{scale:a.ONE.clone().multiplyScalar(.5)},{easing:"sineInOut"}).start(),u(this._ui.logo_spine.getComponent(c)).to(0,{opacity:255}).delay(8*this.aniTime).to(8*this.aniTime,{opacity:0},{easing:"sineInOut"}).start(),u(this._ui.flower_spine).to(0,{scale:a.ONE.clone().multiplyScalar(1)}).to(6*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.1)},{easing:"sineInOut"}).to(8*this.aniTime,{scale:a.ONE.clone().multiplyScalar(.6)},{easing:"sineInOut"}).start(),u(this._ui.flower_spine.getComponent(c)).to(0,{opacity:255}).delay(6*this.aniTime).to(8*this.aniTime,{opacity:0},{easing:"sineInOut"}).start(),u(this._ui.rank_label_color).to(0,{scale:a.ONE.clone().multiplyScalar(1)}).delay(2*this.aniTime).to(6*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.1)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(.5)},{easing:"sineInOut"}).start(),u(this._ui.rank_label_color.getComponent(c)).to(0,{opacity:255}).delay(6*this.aniTime).to(10*this.aniTime,{opacity:0},{easing:"sineInOut"}).start(),u(this._ui.rank_label_shadow).to(0,{scale:a.ONE.clone().multiplyScalar(1)}).delay(2*this.aniTime).to(6*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.1)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(.5)},{easing:"sineInOut"}).start(),u(this._ui.rank_label_shadow.getComponent(c)).to(0,{opacity:255}).delay(6*this.aniTime).to(10*this.aniTime,{opacity:0},{easing:"sineInOut"}).start(),u(this._ui.start_btn).to(0,{scale:a.ONE.clone().multiplyScalar(1)}).delay(2*this.aniTime).to(6*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.1)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(.5)},{easing:"sineInOut"}).start(),u(this._ui.start_btn.getComponent(c)).to(0,{opacity:255}).delay(6*this.aniTime).to(10*this.aniTime,{opacity:0},{easing:"sineInOut"}).start(),u(this._ui.challenge_btn).to(0,{scale:a.ONE.clone().multiplyScalar(1)}).delay(4*this.aniTime).to(6*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.1)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(.5)},{easing:"sineInOut"}).start(),u(this._ui.challenge_btn.getComponent(c)).to(0,{opacity:255}).delay(8*this.aniTime).to(10*this.aniTime,{opacity:0},{easing:"sineInOut"}).start(),u(this._ui.setting_btn).to(0,{scale:a.ONE.clone().multiplyScalar(1)}).to(6*this.aniTime,{scale:a.ONE.clone().multiplyScalar(1.12)},{easing:"sineInOut"}).to(10*this.aniTime,{scale:a.ONE.clone().multiplyScalar(.28)},{easing:"sineInOut"}).start(),u(this._ui.setting_btn.getComponent(c)).to(0,{opacity:255}).delay(6*this.aniTime).to(10*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var e=this._ui.gift_btn.position.clone();u(this._ui.gift_btn).to(0,{position:new a(e.x,e.y,e.z)}).to(7*this.aniTime,{position:new a(e.x+7,e.y,e.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(e.x-200,e.y,e.z)},{easing:"sineInOut"}).start(),u(this._ui.gift_btn.getComponent(c)).to(0,{opacity:255}).delay(7*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var s=this._ui.share_btn.position.clone();u(this._ui.share_btn).to(0,{position:new a(s.x,s.y,s.z)}).to(7*this.aniTime,{position:new a(s.x+7,s.y,s.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(s.x-200,s.y,s.z)},{easing:"sineInOut"}).start(),u(this._ui.share_btn.getComponent(c)).to(0,{opacity:255}).delay(7*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var o=this._ui.gamecenter_btn.position.clone();u(this._ui.gamecenter_btn).to(0,{position:new a(o.x,o.y,o.z)}).delay(2*this.aniTime).to(7*this.aniTime,{position:new a(o.x+7,o.y,o.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(o.x-200,o.y,o.z)},{easing:"sineInOut"}).start(),u(this._ui.gamecenter_btn.getComponent(c)).to(0,{opacity:255}).delay(9*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var l=this._ui.sidebar_btn.position.clone();u(this._ui.sidebar_btn).to(0,{position:new a(l.x,l.y,l.z)}).delay(2*this.aniTime).to(7*this.aniTime,{position:new a(l.x+7,l.y,l.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(l.x-200,l.y,l.z)},{easing:"sineInOut"}).start(),u(this._ui.sidebar_btn.getComponent(c)).to(0,{opacity:255}).delay(9*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var h=this._ui.collect_btn.position.clone();u(this._ui.collect_btn).to(0,{position:new a(h.x,h.y,h.z)}).delay(2*this.aniTime).to(7*this.aniTime,{position:new a(h.x-7,h.y,h.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(h.x+200,h.y,h.z)},{easing:"sineInOut"}).start(),u(this._ui.collect_btn.getComponent(c)).to(0,{opacity:255}).delay(9*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var r=this._ui.more_btn.position.clone();u(this._ui.more_btn).to(0,{position:new a(r.x,r.y,r.z)}).delay(2*this.aniTime).to(7*this.aniTime,{position:new a(r.x-7,r.y,r.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(r.x+200,r.y,r.z)},{easing:"sineInOut"}).start(),u(this._ui.more_btn.getComponent(c)).to(0,{opacity:255}).delay(9*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var _=this._ui.rank_btn.position.clone();u(this._ui.rank_btn).to(0,{position:new a(_.x,_.y,_.z)}).delay(4*this.aniTime).to(7*this.aniTime,{position:new a(_.x+7,_.y,_.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(_.x-200,_.y,_.z)},{easing:"sineInOut"}).start(),u(this._ui.rank_btn.getComponent(c)).to(0,{opacity:255}).delay(11*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var m=this._ui.signin_btn.position.clone();u(this._ui.signin_btn).to(0,{position:new a(m.x,m.y,m.z)}).to(7*this.aniTime,{position:new a(m.x-7,m.y,m.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(m.x+200,m.y,m.z)},{easing:"sineInOut"}).start(),u(this._ui.signin_btn.getComponent(c)).to(0,{opacity:255}).delay(7*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var p=this._ui.address_btn.position.clone();u(this._ui.address_btn).to(0,{position:new a(p.x,p.y,p.z)}).delay(2*this.aniTime).to(7*this.aniTime,{position:new a(p.x-7,p.y,p.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(p.x+200,p.y,p.z)},{easing:"sineInOut"}).start(),u(this._ui.address_btn.getComponent(c)).to(0,{opacity:255}).delay(9*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start();var g=this._ui.theme_btn.position.clone();u(this._ui.theme_btn).to(0,{position:new a(g.x,g.y,g.z)}).delay(4*this.aniTime).to(7*this.aniTime,{position:new a(g.x-7,g.y,g.z)},{easing:"sineInOut"}).to(9*this.aniTime,{position:new a(g.x+200,g.y,g.z)},{easing:"sineInOut"}).start(),u(this._ui.theme_btn.getComponent(c)).to(0,{opacity:255}).delay(11*this.aniTime).to(9*this.aniTime,{opacity:0},{easing:"sineInOut"}).start(),u(this.node).delay(18*this.aniTime).call((function(){0==i?O.ShowUI(G,(function(){O.CloseUI(n)})):O.ShowUI(z,(function(){O.CloseUI(n)}),{challengeDate:t})})).start()},e.refreshGiftTime=function(){var i=(b.Player.GiftLastTime.val-Date.now())/1e3;this._ui.gift_time_label.getComponent(s).string=I.GetTimeString(i),this._ui.gift_btn.active&&(i<=0||b.Player.GiftIsGet.val||b.Player.SkinList.isUnLock(3))&&(this._ui.gift_btn.active=!1)},e.OnClickSetting=function(){this.hideGameClubBtn(),y.playEffect(g.SOUND_BUTTON),O.ShowUI(L,void 0,{isInGame:!1}),v.Mgr.sendEventButton("button_setting_hall")},e.OnClickShare=function(){this.hideGameClubBtn(),y.playEffect(g.SOUND_BUTTON),O.ShowUI(M),v.Mgr.sendEventButton("button_share_hall")},e.OnClickSignIn=function(){this.hideGameClubBtn(),y.playEffect(g.SOUND_BUTTON),O.ShowUI(F),v.Mgr.sendEventButton("button_signin_hall")},e.OnClickGift=function(){this.hideGameClubBtn(),y.playEffect(g.SOUND_BUTTON),O.ShowUI(P),v.Mgr.sendEventButton("button_gift_hall")},e.OnClickThemeSkin=function(){this.hideGameClubBtn(),y.playEffect(g.SOUND_BUTTON),O.ShowUI(V),v.Mgr.sendEventButton("button_themeskin_hall")},e.OnClickRank=function(){this.hideGameClubBtn(),y.playEffect(g.SOUND_BUTTON),O.ShowUI(A),v.Mgr.sendEventButton("button_rank_hall")},e.OnClickSideBarReward=function(){y.playEffect(g.SOUND_BUTTON),o.platform==o.Platform.BYTEDANCE_MINI_GAME&&O.ShowUI(H)},e.OnClickCollectGame=function(){y.playEffect(g.SOUND_BUTTON),o.platform==o.Platform.WECHAT_GAME&&O.ShowUI(N)},e.OnStartGame=function(){y.playEffect(g.SOUND_BUTTON),O.IsLoadingUI()||this.enterGame(0)},e.enterGame=function(i,t){var n;(void 0===t&&(t=new Date),this.gameclubBtn)&&(null==(n=this.gameclubBtn)||n.offTap(),this.gameclubBtn.destroy());this.unRegisterAllClick(),this.ShowExitAnim(i,t)},e.OnClickChallenge=function(){if(y.playEffect(g.SOUND_BUTTON),b.Player.LevelId.val>m.challengeLevel){this.gameclubBtn&&this.gameclubBtn.hide();var i=new Date;O.ShowUI(x,void 0,{challengeDate:new Date(i.getFullYear(),i.getMonth(),i.getDate()),isSuccess:!1}),v.Mgr.sendEventButton("button_challenge_hall")}else r.stopAllByTarget(this._ui.challenge_tips),r.stopAllByTarget(this._ui.challenge_tips.getComponent(c)),u(this._ui.challenge_tips).to(0,{scale:new a(1,0,1)},{easing:"sineInOut"}).to(7*this.aniTime,{scale:a.ONE},{easing:"sineInOut"}).start(),u(this._ui.challenge_tips.getComponent(c)).to(0,{opacity:255}).delay(37*this.aniTime).to(7*this.aniTime,{opacity:0}).start()},e.OnClickMoreGame=function(){this.hideGameClubBtn(),y.playEffect(g.SOUND_BUTTON),O.ShowUI(W),v.Mgr.sendEventButton("button_more_hall")},e.refreshTheme=function(){U.SetThemeBg(this._ui.node_bg),this._ui.theme_sp.active=w.IsABTestC_V4()&&b.Player.ThemeList.isShowShopSign()>0},e.refreshShareButton=function(){this._ui.share_btn.active=b.Player.bSholdShowShare()},e.showGameClubBtn=function(){this.gameclubBtn&&this.gameclubBtn.show()},e.hideGameClubBtn=function(){this.gameclubBtn&&this.gameclubBtn.hide()},e.showShareReward=function(){b.Player.bSholdShowShare()&&(this.gameclubBtn&&this.gameclubBtn.hide(),O.ShowUI(M,void 0,R.Get))},e.signInReward=function(){this._ui.signin_sp.active=!b.Player.SignIn.isSignIn()},e.checkSidebar=function(){var i=b.Player.SidebarAwardClaim.val;if(o.platform==o.Platform.BYTEDANCE_MINI_GAME){var t=this;f.CheckSidebar().then((function(n){t._ui.sidebar_btn.active=n&&!i,1==b.Player.SidebarNavigated.val&&t.showSidebarRedDot()}))}else this._ui.sidebar_btn.active=!1},e.showSidebarRedDot=function(){this._ui.sidebar_reddot.active=!0},e.checkCollection=function(){if(o.platform==o.Platform.WECHAT_GAME){var i=k.CheckIsEnterFromCollection(),t=1==b.Player.CollectionAwardClaim.val;this._ui.collect_btn.active=!t,this._ui.collect_reddot.active=i}else this._ui.collect_btn.active=o.isBrowser},n}(d))._prefabUrl="ui/UIHallLayer",j._className="UIHallLayer",Y=j))||Y);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIHallSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./TAData.ts","./auto_UIHallSetting.ts","./UINoticeLayer.ts","./UITestLayer.ts"],(function(t){var i,n,e,s,o,u,a,r,_,c,h,l,f,g,p,S,m,b;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,s=t.Layout,o=t.UITransform,u=t.Vec3},function(t){a=t.Debug,r=t.Sfx,_=t.GameEvent},function(t){c=t.default},function(t){h=t.default},function(t){l=t.default},function(t){f=t.UIBase},function(t){g=t.default},function(t){p=t.TAData},function(t){S=t.default},function(t){m=t.default},function(t){b=t.default}],execute:function(){var d,U;n._RF.push({},"35b88VMYzBLG7nmHumnapAp","UIHallSetting",void 0);var C=e.ccclass;e.property,t("default",C("UIHallSetting")(((U=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this)._ui=void 0,i._isInGame=!1,i._closeCallback=void 0,i}i(n,t);var e=n.prototype;return e.onInit=function(t){this._isInGame=t[0].isInGame,this._closeCallback=t[0].closeCallback},e.onUILoad=function(){var t=this;this._ui=this.node.addComponent(S),this.addInterlayer(),this._ui.btn_give_up.active=this._isInGame,this._ui.btn_continue.active=this._isInGame,this._ui.btn_notice.active=!this._isInGame,this._isInGame?(this._ui.bg_sp.setPosition(0,360),this._ui.layout_settings.getComponent(s).paddingTop=0,this._ui.layout_settings.getComponent(s).spacingY=31,this._ui.bg_sp.getComponent(o).height=720):(this._ui.bg_sp.setPosition(0,255),this._ui.layout_settings.getComponent(s).paddingTop=29,this._ui.layout_settings.getComponent(s).spacingY=51,this._ui.bg_sp.getComponent(o).height=510),this._isInGame&&a.TestButton&&this.scheduleOnce((function(){t.ShowTestLayer()})),this.runOpenAni(this.node)},e.onUIStart=function(){this.refreshUI()},e.onUIEnable=function(){this.registerClick(this._ui.music_btn,this.OnClickMusic),this.registerClick(this._ui.sound_btn,this.OnClickSound),this.registerClick(this._ui.vibrate_btn,this.OnClickVibrate),this.registerClick(this._ui.close_btn,this.onCloseClick),this.registerClick(this._ui.btn_continue,this.onContinueClick),this.registerClick(this._ui.btn_give_up,this.onGiveUpClick),this.registerClick(this._ui.btn_notice,this.onNoticeClick),a.TestButton&&this.registerClick(this._ui.btn_test,this.ShowTestLayer),this._ui.btn_test.active=!!a.TestButton},e.onUIDisable=function(){},e.onUIDestroy=function(){this.onClose()},e.onClose=function(){null!=this._closeCallback&&this._closeCallback(),g.CloseUI(n)},e.ShowTestLayer=function(){g.ShowUI(b)},e.refreshUI=function(){this.refreshMusic(),this.refreshSound(),this.refreshVibrate()},e.refreshMusic=function(){h.User.SoundMusic?(g.SetSpriteFrame(this._ui.music_sp,"setting/Game_icon_yinyuekaii"),g.SetSpriteFrame(this._ui.music_btn,"setting/Game_icon_dakai"),this._ui.music_anniu.position=new u(50,0,0),g.SetSpriteFrame(this._ui.music_anniu,"setting/anniulv")):(g.SetSpriteFrame(this._ui.music_sp,"setting/Game_icon_yinyueguan"),g.SetSpriteFrame(this._ui.music_btn,"setting/Game_icon_guanbi"),this._ui.music_anniu.position=new u(-50,0,0),g.SetSpriteFrame(this._ui.music_anniu,"setting/anniuhei"))},e.refreshSound=function(){h.User.SoundEffect?(g.SetSpriteFrame(this._ui.sound_sp,"setting/Game_icon_shengyinkai"),g.SetSpriteFrame(this._ui.sound_btn,"setting/Game_icon_dakai"),this._ui.sound_anniu.position=new u(50,0,0),g.SetSpriteFrame(this._ui.sound_anniu,"setting/anniulv")):(g.SetSpriteFrame(this._ui.sound_sp,"setting/Game_icon_shengyinguan"),g.SetSpriteFrame(this._ui.sound_btn,"setting/Game_icon_guanbi"),this._ui.sound_anniu.position=new u(-50,0,0),g.SetSpriteFrame(this._ui.sound_anniu,"setting/anniuhei"))},e.refreshVibrate=function(){h.User.Vibrate?(g.SetSpriteFrame(this._ui.vibrate_sp,"setting/Game_icon_zhendongkai"),g.SetSpriteFrame(this._ui.vibrate_btn,"setting/Game_icon_dakai"),this._ui.vibrate_anniu.position=new u(50,0,0),g.SetSpriteFrame(this._ui.vibrate_anniu,"setting/anniulv")):(g.SetSpriteFrame(this._ui.vibrate_sp,"setting/Game_icon_zhendongguan"),g.SetSpriteFrame(this._ui.vibrate_btn,"setting/Game_icon_guanbi"),this._ui.vibrate_anniu.position=new u(-50,0,0),g.SetSpriteFrame(this._ui.vibrate_anniu,"setting/anniuhei"))},e.OnClickMusic=function(){c.playEffect(r.SOUND_BUTTON),h.User.setSoundMusic(!h.User.SoundMusic),this.refreshMusic()},e.OnClickSound=function(){h.User.setSoundEffect(!h.User.SoundEffect),c.playEffect(r.SOUND_BUTTON),this.refreshSound()},e.OnClickVibrate=function(){c.playEffect(r.SOUND_BUTTON),h.User.setVibratec(!h.User.Vibrate),this.refreshVibrate()},e.onCloseClick=function(){var t=this;p.Mgr.sendEventButton("button_close_setting"),c.playEffect(r.SOUND_BUTTON),this.runCloseAni(this.node,(function(){t.onClose(),l.emit(_.EventShowGameClube)}))},e.onContinueClick=function(){var t=this;p.Mgr.sendEventButton("button_continue_setting"),c.playEffect(r.SOUND_BUTTON),this.runCloseAni(this.node,(function(){t.onClose()}))},e.onGiveUpClick=function(){var t=this;p.Mgr.sendEventButton("button_giveup_setting"),c.playEffect(r.SOUND_BUTTON),this.runCloseAni(this.node,(function(){t.onClose()})),l.emit(_.EventGameGiveUp)},e.onNoticeClick=function(){p.Mgr.sendEventButton("button_notice_setting"),c.playEffect(r.SOUND_BUTTON),g.ShowUI(m)},n}(f))._prefabUrl="ui/UIHallSetting",U._className="UIHallSetting",d=U))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIHelp.ts",["cc","./BundleManager.ts","./Log.ts","./UIBase.ts","./UIManager.ts"],(function(e){var t,r,n,o,i,a,l,d,c,s,f,u,p,g,S,m,v,C,I,U,y,h,F;return{setters:[function(e){t=e.cclegacy,r=e._decorator,n=e.Label,o=e.ProgressBar,i=e.tween,a=e.Sprite,l=e.resources,d=e.sp,c=e.ParticleSystem2D,s=e.assetManager,f=e.SpriteFrame,u=e.Texture2D,p=e.Button,g=e.UIOpacity,S=e.Color,m=e.math,v=e.UITransform,C=e.director,I=e.instantiate},function(e){U=e.BundleManager},function(e){y=e.default},function(e){h=e.ViewZorder},function(e){F=e.default}],execute:function(){var V,L;t._RF.push({},"8bc903ND7NCw5bKIpLjqh8x","UIHelp",void 0);var w=r.ccclass;r.property,e("DialogType",function(e){return e[e.EDialog_Yes=0]="EDialog_Yes",e[e.EDialog_YesClose=1]="EDialog_YesClose",e}({})),e("default",w("UIHelp")(((L=function(){function e(){}return e.SetLabel=function(e,t){if(e&&e.isValid){"number"==typeof t&&(t=t.toString());var r=e.getComponent(n);r&&(r.string=t)}},e.SetLocalizedLabel=function(e,t){},e.SetLabelFont=function(e,t){e&&e.isValid&&U.loadResources(t,(function(t,r){if(t)y.error("UIHelp SetLabelFont: load error: "+t);else if(e&&e.isValid){var o=e.getComponent(n);o&&(o.font=r)}}))},e.SetProgress=function(e,t,r,n,a){if(void 0===r&&(r=!1),void 0===a&&(a=.3),e&&e.isValid){var l=e.getComponent(o),d=Math.min(t,1);r?(l.progress>d&&(l.progress=0),i(l).to(a,{progress:d}).call((function(){n&&n()})).start()):(l.progress=d,n&&n())}},e.SetSpriteFrame=function(e,t,r){e&&e.isValid&&(e.tag=t,U.loadSpriteFrame(t,(function(n,o){if(e&&e.isValid&&e.tag==t){if(n)return void y.error("UIHelp SetSpriteFrame: load error: "+n);var i=e.getComponent(a);i||(i=e.addComponent(a)),i.spriteFrame=o,r&&r(o)}})))},e.SetLocalSpriteFrame=function(e,t,r){e&&e.isValid&&(e.tag=t,l.load(t,(function(n,o){if(e&&e.isValid&&e.tag==t){if(n)return void y.error("UIHelp SetSpriteFrame: load error: "+n);var i=e.getComponent(a);i||(i=e.addComponent(a)),i.spriteFrame=o,r&&r(o)}})))},e.LoadSpriteFrame=function(e,t){U.loadSpriteFrame(e,(function(e,r){if(e)return y.error("UIHelp SetSpriteFrame: load error: "+e),void(t&&t(null));t&&t(r)}))},e.LoadSpine=function(e,t,r,n){e&&e.isValid&&(e.tag=t,U.loadBundle("animation",(function(o,i){if(o)return y.error("UIHelp LoadSpine: load error: "+o),void(n&&n(null));i.loadDir(t,d.SkeletonData,(function(o,i){if(e.tag==t){if(o)return y.error("UIHelp LoadSpine: load error: "+o),void(n&&n(null));if(!i[0])return y.error("UIHelp LoadSpine: no resources error: "+o),void(n&&n(null));var a=e.getComponent(d.Skeleton);a||(a=e.addComponent(d.Skeleton)),a.skeletonData=i[0],a.setAnimation(0,r,!1),n&&n(i[0])}}))})))},e.LoadParticle=function(e,t,r){e&&e.isValid&&(e.tag=t,U.loadAnimation(t,(function(n,o){if(e.tag==t){if(n)return y.error("UIHelp LoadSpine: load error: "+n),void(r&&r(null));var i=e.getComponent(c);i||(i=e.addComponent(c)),i.file=o,i.resetSystem()}})))},e.SetSpriteFrameFromAtlas=function(e,t){if(e&&e.isValid){var r=e.getComponent(a);r&&r.spriteAtlas&&(r.spriteFrame=r.spriteAtlas.getSpriteFrame(t))}},e.SetSpriteFrameToAtlas=function(e,t,r){if(e&&e.isValid&&t){var n=e.getComponent(a);n||(n=e.addComponent(a)),n.spriteFrame=t.getSpriteFrame(r)}},e.SetRemoteSpriteFrame=function(e,t,r){e&&e.isValid&&(e.tag=t,s.loadRemote(t,{ext:".png"},(function(n,o){if(e&&e.isValid&&e.tag==t){if(n)return void y.error("UIHelp SetRemoteSpriteFrame: load error: "+n);var i=e.getComponent(a);i||(i=e.addComponent(a));var l=new f,d=new u;d.image=o,l.texture=d,i.spriteFrame=l,r&&r()}})))},e.SetBtnGrayState=function(e,t){if(e&&e.isValid){var r=e.getComponent(p);if(r){r.interactable=!t;var n=e.getComponent(a);n&&(n.grayscale=t)}}},e.IsBtnGray=function(e){if(e&&e.isValid){var t=e.getComponent(p);return!!t&&!t.interactable}},e.SetSpriteGray=function(t,r,n){if(void 0===n&&(n=!0),t&&t.isValid){var o=t.getComponent(a);o&&(o.grayscale=r),n&&t.children.forEach((function(t){e.SetSpriteGray(t,r,n)}))}},e.SetOpacity=function(e,t){if(e&&e.isValid){var r=e.getComponent(g);r||(r=e.addComponent(g)),r.opacity=t}},e.SetSpriteOpacity=function(t,r,n){if(void 0===n&&(n=!1),t&&t.isValid){var o=t.getComponent(a);o&&(o.color=new S(o.color.r,o.color.g,o.color.b,r)),n&&t.children.forEach((function(t){e.SetSpriteOpacity(t,r,n)}))}},e.SetSkeletonOpacity=function(e,t){if(e&&e.isValid){var r=e.getComponent(d.Skeleton);r&&(r.color=new S(r.color.r,r.color.g,r.color.b,t))}},e.SetContentSize=function(e,t,r){this.setContentSize(e,new m.Size(t,r))},e.setContentSize=function(e,t){if(e&&e.isValid){var r=e.addComponent(v);r&&r.setContentSize(t)}},e.SetParent=function(e,t){if(e&&e.isValid&&t&&e.isValid){var r=e.getWorldPosition();e.parent=t,e.setPosition(t.getComponent(v).convertToNodeSpaceAR(r))}},e.AddCanvasNode=function(e){var t;if(e&&e.isValid){var r=null==(t=C.getScene())?void 0:t.getChildByName("Canvas");r?(e.setSiblingIndex(h.Tips),r.addChild(e)):y.error("Scene not Canvas!!!")}},e.AddErrorInfoNode=function(){return new Promise((function(t,r){var n=e.GetZorderNode(h.Notice);if(n){var o=n.getChildByName("ErrorInfo");o?t(o):U.loadPrefab("prefab/widget/ErrorInfo",(function(e,i){e?r():((o=I(i)).name="ErrorInfo",o.parent=n,t(o))}))}else y.error("Scene not Notice!!!"),r()}))},e.GetZorderNode=function(e){var t=null,r=C.getScene();if(!r)return t;var n=r.getChildByName("Canvas");return n?(t=n.getChildByName(h.UI.toString()))||(y.error("Canvas not "+e+" zOrder!!!"),t):(y.error("Scene not Canvas!!!"),t)},e.IsLoadingUI=function(){return F.IsLoadingUI},e.ShowUI=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];F.openUI.apply(F,[e,h.UI,t].concat(n))},e.CloseUI=function(e){F.closeUI(e)},e.GetUI=function(e){return F.getUI(e)},e.IsShowingUI=function(e){return F.isShowing(e)},e.ShowTips=function(e){},e.ShowDialog=function(e,t){F.openUI(e,h.Dialog,void 0,t)},e.ShowDialogTip=function(t,r,n,o,i){e.ShowDialog(t,{title:"",content:r,okLable:n,type:o,certainCb:i})},e.LoadWidget=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];U.loadPrefab(e.getUrl(),(function(r,o){if(r)y.error("LoadWidget error: "+r);else{var i=I(o).getComponent(e);i?(i.init(n),t&&t(i)):y.error(e.getUrl()+"没有绑定UI脚本!!!")}}))},e.CreateWidget=function(e,t){var r=I(t),n=r.getComponent(e);if(!n)return y.error(e.getUrl()+"没有绑定UI脚本!!!"),null;for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return n.init(i),n},e}())._res_bundle=null,V=L))||V);t._RF.pop()}}}));

System.register("chunks:///_virtual/UILoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./BundleManager.ts","./CfgManager.ts","./DataManager.ts","./Log.ts","./UIBase.ts","./UIFit.ts","./UIHelp.ts","./PlatformManager.ts","./SceneManager.ts","./ABTestUtil.ts","./BottleItemPool.ts","./DGPlatformInit.ts","./WechatManager.ts","./auto_UILoading.ts","./UIABTestLayer.ts"],(function(e){var t,a,o,n,i,s,l,r,c,_,u,d,f,h,g,p,T,S,y,I,m,v,U,b,B,C;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,o=e._decorator,n=e.sys,i=e.director},function(e){s=e.Debug,l=e.Sfx},function(e){r=e.default},function(e){c=e.BundleManager},function(e){_=e.default},function(e){u=e.default},function(e){d=e.default},function(e){f=e.UIBase},function(e){h=e.default,g=e.EAlignment,p=e.EUIScale},function(e){T=e.default},function(e){S=e.default},function(e){y=e.default,I=e.SceneType},function(e){m=e.ABTestUtil},function(e){v=e.default},function(e){U=e.default},function(e){b=e.default},function(e){B=e.default},function(e){C=e.default}],execute:function(){var P,A;a._RF.push({},"020a6yNsm1GqY2u/YwtQEwd","UILoading",void 0);var G=o.ccclass;o.property,e("default",G("UILoading")(((A=function(e){function a(){for(var t,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this)._ui=void 0,t._totalTime=1,t._delayTime=0,t._load_res=0,t._load_res_total=0,t._isServerDataSync=!1,t._abSet=!1,t._ta_init=!1,t._finish=!1,t}t(a,e);var o=a.prototype;return o.onInit=function(e){},o.onUILoad=function(){this._ui=this.node.addComponent(B),h.setRelativePos(this._ui.spr_bg,g.EAlignment_CC,p.EUIScale_XY),h.setRelativePos(this._ui.pgr_loading),h.setRelativePos(this._ui.logo_node),h.setRelativePos(this._ui.age_node),this._ui.btn_clear_cache.active=!!s.TestButton,this._ui.btn_generator.active=!!s.TestButton,this._ui.btn_generator_challenge.active=!!s.TestButton},o.onUIStart=function(){var e=this;this.scheduleOnce((function(){e.loadRes(),e.initData()}),.1)},o.onUIEnable=function(){s.TestButton&&(this.registerClick(this._ui.btn_clear_cache,this.ClearCache,this),this.registerClick(this._ui.btn_generator,this.GoToGenerator,this),this.registerClick(this._ui.btn_generator_challenge,this.GoToGeneratorChallenge,this))},o.onUIDisable=function(){},o.onUIDestroy=function(){this.onClose()},o.onClose=function(){T.CloseUI(a)},o.initData=function(){u.createUser();null!=u.User&&(u.createPlayer(u.User.CurrPlayerId),r.playMusic(l.MUSIC_BG),n.platform==n.Platform.WECHAT_GAME&&(u.Player.isPrivacyRejected()&&b.SetPrivacyAuthed(!1),u.Player.IsUserInfoRejected()&&b.SetNeedAuthUserInfo(!1)));var e=this;this.handleABTest((function(){d.log("TestV ab set"),U.Mgr.notifyABSet((function(){e._ta_init=!0}))}));var t="";if(n.platform==n.Platform.BYTEDANCE_MINI_GAME?t="tt_sdppx1":n.platform==n.Platform.WECHAT_GAME&&(t="wx_sdppx"),seeg.init({gid:t,loggerLevel:s.Test?5:0}),n.isBrowser)this._isServerDataSync=!0;else{var a=this;a._load_res_total++,new Promise((function(e,t){setTimeout((function(){d.log("TestV serverdata sync timeout"),e(!0)}),5e3),seeg.onLoginRet((function(t){d.log("seeg onLoginRet:",t.userId,t.openId),seeg.getUserData((function(t){d.log("seeg getUserData:",t),d.log("TestV serverdata sync success"),u.Player.syncServerData(t.data),e(!0)}))}))})).then((function(){c.preloadBackground((function(){a._load_res++,d.log("TestV background loaded")})),a._isServerDataSync=!0}))}},o.handleABTest=function(e){if(this._abSet=!1,s.ABTest)if(m.IsABSet())this._abSet=!0,e&&e();else{var t=this;T.ShowUI(C,void 0,{callback:function(){t._abSet=!0,e&&e()}})}else m.HandleABTest(),this._abSet=!0,e&&e()},o.update=function(e){if(!this._finish){this._delayTime+=e,this._delayTime>=this._totalTime&&(this._delayTime=this._totalTime,this.isLoadFinish()&&(this._finish=!0,this.onLoadFinish(),T.SetProgress(this._ui.pgr_loading,1,!0,(function(){y.onSceneChange(I.SceneType_Game)}),1)));var t=this._delayTime/this._totalTime*.8;T.SetProgress(this._ui.pgr_loading,t)}},o.isLoadFinish=function(){return this._load_res>=this._load_res_total&&this._abSet&&this._isServerDataSync&&this._ta_init},o.onLoadFinish=function(){c.preloadPrefabs(),c.preloadTextures(),c.preloadSpines()},o.loadRes=function(){if(y.isInit)this._load_res=this._load_res_total;else{y.isInit=!0;var e=this;d.log("resources load"),c.preloadBundles((function(e,t,a){}),(function(t,a){null!=t&&(e._load_res_total++,_.loadAll((function(){e._load_res++,y.loadRes(),d.log("TestV config loaded")})),e._load_res_total++,y.preloadScene(I.SceneType_Game,(function(){e._load_res++,d.log("TestV scene loaded")})),e._load_res_total++,c.preloadGamePrefabs((function(){e._load_res++,d.log("TestV game prefab loaded")})),e._load_res_total++,c.preloadLoadingLayer((function(){e._load_res++,d.log("TestV loadinglayer loaded")})),e._load_res_total++,c.preloadNoticeDialog((function(){e._load_res++,d.log("TestV NoticeDialog loaded")})),e._load_res_total++,v.loadBottleSkins((function(){e._load_res++,d.log("TestV bottle skin loaded")})),e._load_res_total++,v.loadBottleSpines((function(){e._load_res++,d.log("TestV bottlespine loaded")})))})),S.initPlatformInfo()}},o.ClearCache=function(){c.ClearGameCache()},o.GoToGenerator=function(){r.pauseMusic(),i.loadScene("WaterSortGenerator")},o.GoToGeneratorChallenge=function(){r.pauseMusic(),i.loadScene("WaterSortChallengeGenerator")},a}(f))._prefabUrl="ui/UILoading",A._className="UILoading",P=A))||P);a._RF.pop()}}}));

System.register("chunks:///_virtual/UILoadingLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIHelp.ts","./auto_UILoadingLayer.ts"],(function(t){var n,o,e,a,r,i,s,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,a=t.tween,r=t.UIOpacity},function(t){i=t.UIBase},function(t){s=t.default},function(t){c=t.default}],execute:function(){var u,l;o._RF.push({},"530ddnacX1J8YAczYKxO8/A","UILoadingLayer",void 0);var f=e.ccclass;e.property,t("default",f("UILoadingLayer")(((l=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this)._ui=void 0,n}n(o,t);var e=o.prototype;return e.onInit=function(t){},e.onUILoad=function(){this._ui=this.node.addComponent(c),this.addInterlayer(100),s.SetOpacity(this._interlayer,0),a(this._interlayer.getComponent(r)).to(.2,{opacity:255}).start(),a(this._ui.spr_loading).by(.8,{angle:-360},{progress:function(t,n,o,e){return(n-t)*(e=Math.floor(8*e)/8)+t}}).repeatForever().start()},e.onUIStart=function(){},e.onUIEnable=function(){},e.onUIDisable=function(){},e.onUIDestroy=function(){this.onClose()},e.onClose=function(){s.CloseUI(o)},o}(i))._prefabUrl="ui/UILoadingLayer",l._className="ui/UILoadingLayer",u=l))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/UILoginShareLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./PlatformManager.ts","./auto_UILoginShareLayer.ts","./UIGetGiftBox.ts"],(function(e){var n,t,a,o,i,r,s,l,u,c,f,h,d,C,U;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,a=e._decorator,o=e.sys},function(e){i=e.Sfx,r=e.GameEvent,s=e.PROP_ID},function(e){l=e.default},function(e){u=e.default},function(e){c=e.default},function(e){f=e.UIBase},function(e){h=e.default},function(e){d=e.default},function(e){C=e.default},function(e){U=e.default}],execute:function(){var p,y;t._RF.push({},"e85d1a/TTpDs7RRbBTu3MbY","UILoginShareLayer",void 0);var L=a.ccclass;a.property,e("default",L("UILoginShareLayer")(((y=function(e){function t(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(n=e.call.apply(e,[this].concat(a))||this)._ui=void 0,n}n(t,e);var a=t.prototype;return a.onInit=function(e){},a.onUILoad=function(){this._ui=this.node.addComponent(C),this.addInterlayer(),this.refreshUI(),this.runOpenAni(this.node)},a.onUIStart=function(){},a.onUIEnable=function(){this.registerClick(this._ui.share_btn,this.onShareCilck),this.registerClick(this._ui.close_btn,this.onCloseCilck)},a.onUIDisable=function(){},a.onUIDestroy=function(){this.onClose()},a.onClose=function(){h.CloseUI(t)},a.refreshUI=function(){},a.onShareCilck=function(){var e=this;l.playEffect(i.SOUND_BUTTON),o.isBrowser?this.runCloseAni(this.node,(function(){e.onClose(),c.emit(r.EventShowGameClube),u.Player.LastShowLoginShareTime.val=u.getServerTime(),u.Player.saveData(),u.Player.AddProp(s.UNLOCK_BOTTLE,1,!1),h.ShowUI(U,e.onClose.bind(e),{showClaimBtn:!0,rewards:{prop:{id:s.UNLOCK_BOTTLE,count:1}},closeCallback:function(){c.emit(r.EventPropCountChange)}})})):(d.shareAppMessage("敢不敢挑战你的智商？","share=award"),u.Player.LoginShareClick.val=!0,u.Player.saveData())},a.onCloseCilck=function(){var e=this;l.playEffect(i.SOUND_BUTTON),u.Player.LastShowLoginShareTime.val=u.getServerTime(),u.Player.saveData(),this.runCloseAni(this.node,(function(){c.emit(r.EventShowGameClube),e.onClose()}))},t}(f))._prefabUrl="ui/UILoginShareLayer",y._className="UILoginShareLayer",p=y))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./Log.ts","./UIBase.ts","./EventManager.ts","./Defines.ts"],(function(e){var t,i,n,s,a,r,o,u,c,l;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,n=e._decorator,s=e.instantiate,a=e.director},function(e){r=e.BundleManager},function(e){o=e.default},function(e){u=e.ViewZorder},function(e){c=e.default},function(e){l=e.GameEvent}],execute:function(){var d,g;i._RF.push({},"b5ec50hjdFBWpUGFXN+f6sc","UIManager",void 0);var h=n.ccclass,f=(n.property,h("UIManager")(((g=function(){function e(){this.uiList=new Map,this._isLoadingUI=!1}e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance};var i=e.prototype;return i.openUI=function(e,t,i){var n=this;void 0===t&&(t=u.UI);for(var c=arguments.length,l=new Array(c>3?c-3:0),d=3;d<c;d++)l[d-3]=arguments[d];this.getUI(e)?o.error("UIMng OpenUI 1: ui "+e.name+" is already exist, please check"):(this._isLoadingUI=!0,r.loadPrefab(e.getUrl(),(function(r,u){var c;if(n._isLoadingUI=!1,r)o.error("UIMgr OpenUI: load ui error: "+r);else if(n.getUI(e))o.error("UIMng OpenUI 2: ui "+e.getName()+" is already exist, please check");else{var d=s(u),g=d.getComponent(e);if(g){var h=null==(c=a.getScene())?void 0:c.getChildByName("Canvas");if(h){var f=h.getChildByName(t.toString());f?(g.init(l),g.addInterlayer(),f.addChild(d),n.uiList.set(e.getName(),g),g.uiTag=e,i&&i(g)):o.error("Canvas not "+t+" zOrder!!!")}else o.error("Scene not Canvas!!!")}else o.error(e.getUrl()+"没有绑定UI脚本!!!")}})))},i.closeUI=function(e){if(e&&this.uiList.has(e.getName())){var t=this.uiList.get(e.getName());t.node.isValid&&t.node.destroy(),this.uiList.delete(e.getName()),c.emit(l.EventUIClose,e.getName())}},i.closeUIByName=function(e){if(this.uiList.has(e)){var t=this.uiList.get(e);t.node&&t.node.isValid&&t.node.destroy(),this.uiList.delete(e)}},i.closeAllUI=function(){var e=this;0!=this.uiList.size&&this.uiList.forEach((function(t,i){e.closeUIByName(i)}))},i.removeDirtyUI=function(){var e=this;this.uiList.forEach((function(t,i){null!=t.node&&t.node.isValid||e.uiList.delete(i)}))},i.showUI=function(e,t){var i=this.getUI(e);i?i.node.active=!0:o.error("UIMng showUI: ui "+e.getName()+" not exist")},i.hideUI=function(e){var t=this.getUI(e);t&&(t.node.active=!1)},i.getUI=function(e){return this.uiList.has(e.getName())?this.uiList.get(e.getName()):null},i.isShowing=function(e){var t=this.getUI(e);return!!t&&t.node.active},t(e,[{key:"IsLoadingUI",get:function(){return this._isLoadingUI}}]),e}()).instance=void 0,d=g))||d);e("default",f.getInstance());i._RF.pop()}}}));

System.register("chunks:///_virtual/UIMoreLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./auto_UIMoreLayer.ts","./UIBase.ts","./UIHelp.ts","./tableView.ts","./tableViewCell.ts","./MoreItem.ts","./Defines.ts","./AudioManager.ts","./EventManager.ts"],(function(e){var t,n,i,o,a,l,r,s,u,c,f,h,d,p,m,C,g,b,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,r=e.Prefab,s=e.tween,u=e.instantiate},function(e){c=e.default},function(e){f=e.UIBase},function(e){h=e.default},function(e){d=e.TableView},function(e){p=e.TableViewCell},function(e){m=e.default},function(e){C=e.Sfx,g=e.GameEvent},function(e){b=e.default},function(e){I=e.default}],execute:function(){var y,_,v,w,U,V;a._RF.push({},"1b02br7n0lGP5XKNmwaj7QR","UIMoreLayer",void 0);var D=l.ccclass,L=l.property;e("default",(y=D("UIMoreLayer"),_=L({type:r}),y(((V=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this)._ui=void 0,i(t,"itemCell",U,o(t)),t.childGameNum=0,t.moreData=null,t}n(t,e);var a=t.prototype;return a.onInit=function(e){},a.onUILoad=function(){this._ui=this.node.addComponent(c),this.addInterlayer(),this._ui.tableView.getComponent(d).delegate=this,this._ui.tableView.getComponent(d).datasource=this,s(this._ui.loading_sp).to(1,{angle:360}).union().repeatForever().start();var e=this;this.runOpenAni(this.node,(function(){seeg.getGameConfig({success:function(t){e.moreData=t.exportAdCfg.homeAdList.adList,e.loadContentView()},fail:function(){console.log("GameConfig  查询失败")}})}))},a.onUIStart=function(){},a.onUIEnable=function(){this.registerClick(this._ui.close_btn,this.onCloseClick)},a.onUIDisable=function(){},a.onUIDestroy=function(){this.onClose()},a.onClose=function(){h.CloseUI(t)},a.loadContentView=function(){this._ui.loading_sp.active=!1,this.childGameNum=this.moreData.length,this._ui.tableView.getComponent(d).reload()},a.tableViewNumberOfCells=function(e){return this.childGameNum},a.tableViewCellForIndex=function(e,t){var n=e.dequeueCell();n||(n=u(this.itemCell).getComponent(p));return n.getComponent(m).SetData(t,this.moreData[t]),n},a.tableViewScrolling=function(e){},a.tableViewCellHeightForIndex=function(e,t){return 126},a.onCloseClick=function(){b.playEffect(C.SOUND_BUTTON),this._ui.colorLayer.active=!0,this.removeSp()},a.removeSp=function(){var e=this;this.runCloseAni(this.node,(function(){I.emit(g.EventShowGameClube),e.onClose()}))},t}(f))._prefabUrl="ui/UIMoreLayer",V._className="UIMoreLayer",U=t((w=V).prototype,"itemCell",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=w))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/UINewTypeGuideDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BottleData.ts","./Defines.ts","./UIBase.ts","./UIHelp.ts","./GameUtils.ts","./BottleItemPool.ts","./LongBottleItemPool.ts","./auto_UINewTypeGuideDialog.ts"],(function(t){var o,e,i,l,n,s,a,r,d,u,c,_,p,h,P,C,I,f,U,g,y,w,S;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Prefab,r=t.Layout,d=t.Vec3,u=t.macro,c=t.Label,_=t.tween,p=t.UITransform},function(t){h=t.CompleteType,P=t.BottleType},function(t){C=t.GameDefine,I=t.GuideType},function(t){f=t.UIBase},function(t){U=t.default},function(t){g=t.default},function(t){y=t.default},function(t){w=t.default},function(t){S=t.default}],execute:function(){var E,m,v,R,D,T,k,B;n._RF.push({},"699859KPi1PUKtA0FQxpiWg","UINewTypeGuideDialog",void 0);var b=C.MOVE_BOTTLE_TIME_SCALE,G=C.LIQUID_SIZE,O=s.ccclass,q=s.property,A=["---","问号水？","锁链瓶","颜色瓶","传送瓶","转换瓶","过渡瓶","遮挡瓶","倒满水","石头瓶","长瓶子"],L=["---","上方水倒出后，即可显示下方水。","倒水收集钥匙，解锁锁链瓶","只能倒入和瓶子颜色相同的水","倒完当前瓶子，传送下个瓶子","倒完当前瓶，显示下层瓶子任务","过渡瓶只可暂存，不能收集。","收集指定颜色的水，解锁遮挡瓶","收集满长瓶子完成挑战。","石头瓶不能拿起，只能倒入","集满所有长瓶完成挑战。"];t("default",(E=O("UINewTypeGuideDialog"),m=q(a),v=q(a),E(((B=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(o=t.call.apply(t,[this].concat(n))||this)._ui=void 0,i(o,"bottlePrefab",T,l(o)),i(o,"longBottlePrefab",k,l(o)),o._guideType=void 0,o._closeCallback=void 0,o}e(o,t);var n=o.prototype;return n.onInit=function(t){this._guideType=t[0].guideType,this._closeCallback=t[0].closeCallback},n.onUILoad=function(){var t=this;switch(this._ui=this.node.addComponent(S),this.addInterlayer(),y.setBottlePrefab(this.bottlePrefab),w.setBottlePrefab(this.longBottlePrefab),this._guideType){case I.UNKNOWN_BOTTLE:this._ui.layout_bottles.getComponent(r).spacingX=142,this._ui.spr_arrow.active=!1;var o=y.getBottleItem({liquids:[2,0,0,0,0],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,showShadow:!0});this._ui.layout_bottles.addChild(o.node),o.Init(o.GetColors().length),o.UpdateDefaultUI();var e=y.getBottleItem({liquids:[1,2,1,2,0],isVideoBottle:!1,unknowns:[1,1,1,1,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,showShadow:!1});this._ui.layout_bottles.addChild(e.node),e.Init(e.GetColors().length),e.UpdateDefaultUI(),this._ui.layout_bottles.updateWorldTransform(),this.schedule((function(){t.DemoPour1(e,o)}),3,u.REPEAT_FOREVER,.1);break;case I.LOCK_BOTTLE:this._ui.layout_bottles.getComponent(r).spacingX=50,this._ui.spr_arrow.active=!1;var i=[];[{skinId:0,liquids:[1,2,3,0],unknowns:[0,0,0,0],keyIndex:2,unlockId:0,isUnlockBottle:!1,isDemo:!0,showShadow:!0},{skinId:0,liquids:[0,0,0,0],unknowns:[0,0,0,0],keyIndex:-1,unlockId:0,isUnlockBottle:!1,isDemo:!0,showShadow:!0},{skinId:0,liquids:[1,2,3,0],unknowns:[0,0,0,0],keyIndex:-1,unlockId:1,isUnlockBottle:!1,isDemo:!0,showShadow:!0}].forEach((function(o){var e=y.getBottleItem(o);t._ui.layout_bottles.addChild(e.node),e.Init(e.GetColors().length),e.UpdateDefaultUI(),i.push(e)})),this.schedule((function(){t.DemoPour2(i[0],i[1],i[2])}),3,u.REPEAT_FOREVER,.1);break;case I.COLOR_BOTTLE:this._ui.layout_bottles.getComponent(r).spacingX=142,this._ui.spr_arrow.active=!1;var l=y.getBottleItem({liquids:[4,4,4,4,0],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,collectType:4,showShadow:!0});this._ui.layout_bottles.addChild(l.node),l.Init(l.GetColors().length),l.UpdateDefaultUI();var n=y.getBottleItem({liquids:[1,2,3,4,0],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,showShadow:!0});this._ui.layout_bottles.addChild(n.node),n.Init(n.GetColors().length),n.UpdateDefaultUI(),this.schedule((function(){t.DemoPour3(n,l)}),3,u.REPEAT_FOREVER,.1);break;case I.TRANSFER_BOTTLE:this._ui.layout_bottles.getComponent(r).spacingX=142,this._ui.spr_arrow.active=!1;var s=y.getBottleItem({liquids:[2,1,2,0,0],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,showShadow:!0});this._ui.layout_bottles.addChild(s.node),s.Init(s.GetColors().length),s.UpdateDefaultUI();var a=y.getBottleItem({liquids:[2,0],isVideoBottle:!1,unknowns:[0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,collectType:0,completeType:h.EMPTY_NEXT,bottleType:P.TRANSFER,remainDepth:3,showShadow:!0});this._ui.layout_bottles.addChild(a.node),a.Init(a.GetColors().length),a.UpdateDefaultUI(),this.schedule((function(){t.DemoPour4(a,s)}),4,u.REPEAT_FOREVER,.1);break;case I.TASK_BOTTLE:this._ui.layout_bottles.getComponent(r).spacingX=142,this._ui.spr_arrow.active=!1;var _=y.getBottleItem({liquids:[3,1,3,2,0],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,showShadow:!0});this._ui.layout_bottles.addChild(_.node),_.Init(_.GetColors().length),_.UpdateDefaultUI();var p=y.getBottleItem({liquids:[2,2,2,0],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,collectType:2,completeType:h.COMPLETE_NEXT,bottleType:P.TASK,remainDepth:3,showShadow:!1});this._ui.layout_bottles.addChild(p.node),p.Init(p.GetColors().length),p.UpdateDefaultUI(),this.schedule((function(){t.DemoPour5(_,p)}),4,u.REPEAT_FOREVER,.1);break;case I.TRANSITION_BOTTLE:this._ui.spr_arrow.active=!1,this._ui.layout_bottles.getComponent(r).spacingX=142;var C=y.getBottleItem({liquids:[2,1,2,2,0],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,showShadow:!0});this._ui.layout_bottles.addChild(C.node),C.Init(C.GetColors().length),C.UpdateDefaultUI();var f=y.getBottleItem({liquids:[0,0],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,completeType:h.NEVER,showShadow:!0});this._ui.layout_bottles.addChild(f.node),f.Init(f.GetColors().length),f.UpdateDefaultUI(),this.schedule((function(){t.DemoPour6(C,f)}),4,u.REPEAT_FOREVER,.1);break;case I.HIDDEN_BOTTLE:this._ui.spr_arrow.active=!1,this._ui.layout_bottles.getComponent(r).spacingX=50;var U=[];[[1,2,3,0],[3,3,3,0],[1,2,3,1]].forEach((function(o,e){var i=y.getBottleItem({liquids:o,isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,isHiddenBottle:2==e,unlockColor:2==e?3:0,skinId:0,remainDepth:0,showShadow:!0});t._ui.layout_bottles.addChild(i.node),i.Init(o.length),i.UpdateDefaultUI(),U.push(i)})),this.schedule((function(){t.DemoPour7(U[0],U[1],U[2])}),4,u.REPEAT_FOREVER,.1);break;case I.LONG_BOTTLE:this._ui.spr_arrow.active=!1,this._ui.layout_bottles.getComponent(r).spacingX=142,this._ui.layout_bottles.setScale(d.ONE.clone().multiplyScalar(.9)),this._ui.layout_bottles.setPosition(new d(0,-110));var g=w.getBottleItem({liquids:[1,1,1,1,1,1,0],isVideoBottle:!1,unknowns:[0,0,0,0,0,0,0],collectType:0});this._ui.layout_bottles.addChild(g.node),g._ui.spr_shadow.active=!0,g.Init(g.GetColors().length),g.UpdateDefaultUI();var E=y.getBottleItem({liquids:[3,4,2,3,1],isVideoBottle:!1,unknowns:[0,0,0,0,0],isUnlockBottle:!1,unlockNeedBottle:0,skinId:0,remainDepth:0,completeType:h.END,showShadow:!0});this._ui.layout_bottles.addChild(E.node),E.Init(E.GetColors().length),E._ui.spr_shadow.active=!0,E.UpdateDefaultUI(),this.schedule((function(){t.DemoPour8(E,g)}),4,u.REPEAT_FOREVER,.1);break;case I.STONE_BOTTLE:this._ui.spr_arrow.active=!1,this._ui.layout_bottles.getComponent(r).spacingX=142;var m=y.getBottleItem({skinId:0,liquids:[1,2,3,4],unknowns:[0,0,0,0],keyIndex:-1,unlockId:0,isUnlockBottle:!1,isStoneBottle:!1,isDemo:!0,showShadow:!0});this._ui.layout_bottles.addChild(m.node),m.Init(m.GetColors().length),m.UpdateDefaultUI();var v=y.getBottleItem({skinId:0,liquids:[0,0,0,0],unknowns:[0,0,0,0],keyIndex:-1,unlockId:0,isUnlockBottle:!1,isStoneBottle:!0,isDemo:!0,showShadow:!0});this._ui.layout_bottles.addChild(v.node),v.Init(v.GetColors().length),v.UpdateDefaultUI(),this.schedule((function(){t.DemoPour9(m,v)}),3,u.REPEAT_FOREVER,.1);break;case I.ALL_LONG_BOTTLE:this._ui.spr_arrow.active=!1,this._ui.layout_bottles.getComponent(r).spacingX=142,this._ui.layout_bottles.setScale(d.ONE.clone().multiplyScalar(.9)),this._ui.layout_bottles.setPosition(new d(0,-110));var R=w.getBottleItem({liquids:[1,2,1,2,1,2,1],isVideoBottle:!1,unknowns:[0,0,0,0,0,0,0],collectType:0});this._ui.layout_bottles.addChild(R.node),R._ui.spr_shadow.active=!0,R.Init(R.GetColors().length),R.UpdateDefaultUI();var D=w.getBottleItem({liquids:[1,1,1,1,1,1,0],isVideoBottle:!1,unknowns:[0,0,0,0,0,0,0],collectType:0});this._ui.layout_bottles.addChild(D.node),D._ui.spr_shadow.active=!0,D.Init(D.GetColors().length),D.UpdateDefaultUI(),this.schedule((function(){t.DemoPour10(R,D)}),4,u.REPEAT_FOREVER,.1)}this._ui.label_title.getComponent(c).string=A[this._guideType],this._ui.label_guide_desc.getComponent(c).string=L[this._guideType],this.runOpenAni(this.node)},n.onUIStart=function(){},n.onUIEnable=function(){this.registerClick(this._ui.btn_close,this.OnClickClose),this.registerClick(this._ui.btn_confirm,this.OnClickClose)},n.onUIDisable=function(){},n.onUIDestroy=function(){this.onClose()},n.onClose=function(){U.CloseUI(o)},n.OnClickClose=function(){var t=this;this.runCloseAni(this.node,(function(){t._closeCallback&&t._closeCallback(),t.onClose()}))},n.DemoPour1=function(t,o){t.Init(5),t.UpdateDefaultUI(),o.Init(5),o.UpdateDefaultUI(),t.SetColors([1,2,1,2,0]),t.UpdateUnknowns([1,1,1,0,0]),t.liquidProgress=.8,o.SetColors([2,0,0,0,0]),o.liquidProgress=.2,t._ui.node_parent.setPosition(9,0),t._ui.spr_shadow.active=!0,this.scheduleOnce((function(){t._ui.spr_shadow.active=!1;var e=t,i=o;i.SetColors([2,2,0,0,0]);var l=-e.GetPourRotation(0),n=-e.GetPourRotation(1),s=.5/b/C.POUR_TIME_SCALES[0];s=-s*l/90;var a=.8/b/C.POUR_TIME_SCALES[0],r=.2/b/C.POUR_TIME_SCALES[0],u=.3/b,c=.3/b,p=.3/b,h=1/b,P=.4/b;e._ui.spr_bottle_bg.angle=0;var I=i.GetLiquidCount(),f=I-1,U=i.GetColors().length,y=f/U,w=I/U;i.liquidProgress=y;var S=e.node.position.clone(),E=i.node.worldPosition.clone();e.SetMirrored(!0),i.SetWaterFlowMirrored(!0),E.add(new d(10,78,0)),_(e).delay(c).to(s,{pourRotation:l}).to(a,{pourRotation:n},{easing:"sineOut"}).call((function(){e.SetColors([1,2,1,0,0])})).to(u,{pourRotation:0}).start();_(i).delay(c+r).call((function(){i.PlayPourInAnim(g.GetDripColor(2),1)})).delay(P).call((function(){i.PlayWaterUpAnim(g.GetLiquidColor(2),1)})).to(a,{liquidProgress:w}).start(),_(e.node).to(c,{worldPosition:E}).delay(s+a+u).to(p,{position:S}).call((function(){t._ui.spr_shadow.active=!0})).delay(h).start()}),1)},n.DemoPour2=function(t,o,e){t.SetColors([1,2,3,0]),t.UpdateKeyCollected(!1),t.UpdateDefaultUI(),t.liquidProgress=3/4,t._ui.node_parent.setPosition(-9,0),o.SetColors([0,0,0,0]),o.UpdateComplete(),e.UpdateLockBottle(!0),this.scheduleOnce((function(){t._ui.spr_shadow.active=!1;var i=t,l=o;i.node.worldPosition=t.node.worldPosition.clone(),l.SetColors([3,0,0,0]);var n=-i.GetPourRotation(0),s=-i.GetPourRotation(1),a=.5/b/C.POUR_TIME_SCALES[0];a=-a*n/90;var r=.8/b/C.POUR_TIME_SCALES[0],u=.2/b/C.POUR_TIME_SCALES[0],c=.3/b,p=.3/b,h=.3/b,P=1/b,I=.4/b;i._ui.spr_bottle_bg.angle=0;var f=l.GetLiquidCount(),U=f-1,y=l.GetColors().length,w=U/y,S=f/y;l.liquidProgress=w;var E=i.node.position.clone(),m=l.node.worldPosition.clone();l.SetWaterFlowMirrored(!1),m.add(new d(-10,114,0)),_(i).delay(p).to(a,{pourRotation:n}).to(r,{pourRotation:s},{easing:"sineOut"}).call((function(){i.SetColors([1,2,0,0]),e.UpdateLockBottle(!1)})).to(c,{pourRotation:0}).start();_(l).delay(p+u).call((function(){l.PlayPourInAnim(g.GetDripColor(3),1)})).delay(I).call((function(){l.PlayWaterUpAnim(g.GetLiquidColor(3),1)})).to(r,{liquidProgress:S}).call((function(){i.UpdateKeyCollected(!0)})).start(),_(i.node).to(p,{worldPosition:m}).delay(a+r+c).to(h,{position:E}).call((function(){t._ui.spr_shadow.active=!0})).delay(P).start()}),1)},n.DemoPour3=function(t,o){t.Init(5),t.UpdateDefaultUI(),o.Init(5),o.UpdateDefaultUI(),t.SetColors([1,2,3,4,0]),t.liquidProgress=.8,o.SetColors([4,4,4,4,0]),o.liquidProgress=.8,t._ui.node_parent.setPosition(-9,0),t.SetMirrored(!0),this.scheduleOnce((function(){t._ui.spr_shadow.active=!1;var e=t,i=o;e.node.worldPosition=t.node.worldPosition.clone(),i.SetColors([4,4,4,4,4]);var l=-e.GetPourRotation(0),n=-e.GetPourRotation(1),s=.5/b/C.POUR_TIME_SCALES[0];s=-s*l/90;var a=.8/b/C.POUR_TIME_SCALES[0],r=.2/b/C.POUR_TIME_SCALES[0],u=.3/b,c=.3/b,p=.3/b,h=1/b,P=.4/b;e._ui.spr_bottle_bg.angle=0;var I=i.GetLiquidCount(),f=I-1,U=i.GetColors().length,y=f/U,w=I/U;i.liquidProgress=y;var S=e.node.position.clone(),E=i.node.worldPosition.clone();e.SetMirrored(!0),i.SetWaterFlowMirrored(!0),E.add(new d(10,78,0)),_(e).delay(c).to(s,{pourRotation:l}).to(a,{pourRotation:n},{easing:"sineOut"}).call((function(){e.SetColors([1,2,3,0,0])})).to(u,{pourRotation:0}).start();_(i).delay(c+r).call((function(){i.PlayPourInAnim(g.GetDripColor(4),1)})).delay(P).call((function(){i.PlayWaterUpAnim(g.GetLiquidColor(4),1)})).to(a,{liquidProgress:w}).start(),_(e.node).to(c,{worldPosition:E}).delay(s+a+u).to(p,{position:S}).call((function(){t._ui.spr_shadow.active=!0})).delay(h).start()}),1)},n.DemoPour4=function(t,o){var e=this;t.Init(2),t.UpdateDefaultUI(),o.Init(5),t.SetColors([2,0]),t.liquidProgress=.5,o.SetColors([2,1,2,0,0]),o.liquidProgress=.6,o.UpdateDefaultUI(),t.SetMirrored(!0),t.UpdateDepth(3),this.scheduleOnce((function(){var i=t.AddAnimBottle(e._ui.frame_sp);t.Hide(),t.SetColors([0,0]);var l=o;i.node.worldPosition=t.node.worldPosition.clone(),l.SetColors([2,1,2,2,0]);var n=-i.GetPourRotation(0),s=-i.GetPourRotation(1),a=.5/b/C.POUR_TIME_SCALES[0];a=-a*n/90;var r=.8/b/C.POUR_TIME_SCALES[0],u=.2/b/C.POUR_TIME_SCALES[0],c=.3/b,p=.3/b,h=.3/b,P=1/b,I=.4/b;i._ui.spr_bottle_bg.angle=0;var f=l.GetLiquidCount(),U=f-1,w=l.GetColors().length,S=U/w,E=f/w;l.liquidProgress=S;var m=i.node.position.clone(),v=l.node.worldPosition.clone(),R=77+G.height*(5-i.GetColors().length);i.SetMirrored(!0),l.SetWaterFlowMirrored(!0),v.add(new d(10,R,0)),_(i).delay(p).to(a,{pourRotation:n}).to(r,{pourRotation:s},{easing:"sineOut"}).call((function(){i.SetColors([0,0])})).to(c,{pourRotation:0}).start();_(l).delay(p+u).call((function(){l.PlayPourInAnim(g.GetDripColor(2),1)})).delay(I).call((function(){l.PlayWaterUpAnim(g.GetLiquidColor(2),1)})).to(r,{liquidProgress:E}).start(),_(i.node).to(p,{worldPosition:v}).delay(a+r).delay(c).to(h,{position:m}).call((function(){t.PlayTransferNextBottleAnim((function(){t.SetColors([3,4]),t.UpdateDepth(2)})),t.Show(),i.Hide()})).delay(P).call((function(){y.recycleBottleItem(i)})).start()}),1)},n.DemoPour5=function(t,o){var e=this;t.Init(5),t.UpdateDefaultUI(),o.Init(4),o.UpdateDefaultUI(),t.SetColors([3,1,2,0,0]),t.liquidProgress=.6,o.SetColors([2,2,2,0]),o.UpdateDepth(3),o.UpdateCollectType(2),o.liquidProgress=3/4,this.scheduleOnce((function(){var i=t.AddAnimBottle(e._ui.frame_sp);t.Hide(),t.SetColors([3,1,0,0,0]);var l=o;i.node.worldPosition=t.node.worldPosition.clone(),l.SetColors([2,2,2,2]);var n=-i.GetPourRotation(0),s=-i.GetPourRotation(1),a=.5/b/C.POUR_TIME_SCALES[0];a=-a*n/90;var r=.8/b/C.POUR_TIME_SCALES[0],u=.2/b/C.POUR_TIME_SCALES[0],c=.3/b,p=.3/b,h=.3/b,P=1/b,I=.4/b;i._ui.spr_bottle_bg.angle=0;var f=l.GetLiquidCount(),U=f-1,w=l.GetColors().length,S=U/w,E=f/w;l.liquidProgress=S;var m=i.node.position.clone(),v=l.node.worldPosition.clone(),R=77+G.height*(5-i.GetColors().length);i.SetMirrored(!1),l.SetWaterFlowMirrored(!1),v.add(new d(-10,R,0)),_(i).delay(p).to(a,{pourRotation:n}).to(r,{pourRotation:s},{easing:"sineOut"}).call((function(){i.SetColors([3,1,0,0,0])})).to(c,{pourRotation:0}).start();_(l).delay(p+u).call((function(){l.PlayPourInAnim(g.GetDripColor(2),1)})).delay(I).call((function(){l.PlayWaterUpAnim(g.GetLiquidColor(2),1)})).to(r,{liquidProgress:E}).start(),_(i.node).to(p,{worldPosition:v}).delay(a+r).delay(c).to(h,{position:m}).call((function(){o.PlayNextTaskAnim((function(){o.SetColors([1,2,3,4]),o.UpdateCollectType(0),o.UpdateDepth(2)})),t.Show(),i.Hide()})).delay(P).call((function(){y.recycleBottleItem(i)})).start()}),1)},n.DemoPour6=function(t,o){t.Init(5),t.UpdateDefaultUI(),o.Init(2),o.UpdateDefaultUI(),t.SetColors([2,1,2,2,0]),t.liquidProgress=.8,o.SetColors([0,0]),o.liquidProgress=0,t._ui.node_parent.setPosition(-9,0),this.scheduleOnce((function(){t._ui.spr_shadow.active=!1;var e=t,i=o;e.node.worldPosition=t.node.worldPosition.clone(),i.SetColors([2,2]);var l=-e.GetPourRotation(0),n=-e.GetPourRotation(1),s=.5/b/C.POUR_TIME_SCALES[0];s=-s*l/90;var a=.8/b/C.POUR_TIME_SCALES[0],r=.2/b/C.POUR_TIME_SCALES[0],u=.3/b,c=.3/b,p=.3/b,h=1/b,P=.4/b;e._ui.spr_bottle_bg.angle=0;var I=i.GetLiquidCount(),f=I-2,U=i.GetColors().length,y=f/U,w=I/U;i.liquidProgress=y;var S=e.node.position.clone(),E=i.node.worldPosition.clone();e.SetMirrored(!1),i.SetWaterFlowMirrored(!1),E.add(new d(-10,78,0)),_(e).delay(c).to(s,{pourRotation:l}).to(a,{pourRotation:n},{easing:"sineOut"}).call((function(){e.SetColors([2,1,0,0,0])})).to(u,{pourRotation:0}).start();_(i).delay(c+r).call((function(){i.PlayPourInAnim(g.GetDripColor(2),2)})).delay(P).call((function(){i.PlayWaterUpAnim(g.GetLiquidColor(2),2)})).to(a,{liquidProgress:w}).start(),_(e.node).to(c,{worldPosition:E}).delay(s+a+u).to(p,{position:S}).call((function(){t._ui.spr_shadow.active=!0})).delay(h).start()}),1)},n.DemoPour7=function(t,o,e){t.SetColors([1,2,3,0]),t.UpdateDefaultUI(),t.liquidProgress=3/4,t._ui.node_parent.setPosition(-9,0),o.SetColors([3,3,3,0]),o.UpdateComplete(),e.UpdateHiddenBottle(!0),this.scheduleOnce((function(){t._ui.spr_shadow.active=!1;var i=t,l=o;i.node.worldPosition=t.node.worldPosition.clone(),l.SetColors([3,3,3,3]);var n=-i.GetPourRotation(0),s=-i.GetPourRotation(1),a=.5/b/C.POUR_TIME_SCALES[0];a=-a*n/90;var r=.8/b/C.POUR_TIME_SCALES[0],u=.2/b/C.POUR_TIME_SCALES[0],c=.3/b,p=.3/b,h=.3/b,P=1/b,I=.4/b;i._ui.spr_bottle_bg.angle=0;var f=l.GetLiquidCount(),U=f-1,y=l.GetColors().length,w=U/y,S=f/y;l.liquidProgress=w;var E=i.node.position.clone(),m=l.node.worldPosition.clone();l.SetWaterFlowMirrored(!1),m.add(new d(-10,114,0)),_(i).delay(p).to(a,{pourRotation:n}).to(r,{pourRotation:s},{easing:"sineOut"}).call((function(){i.SetColors([1,2,0,0]),e.SetHiddenBottleUnlock(!0,!0)})).to(c,{pourRotation:0}).start();_(l).delay(p+u).call((function(){l.PlayPourInAnim(g.GetDripColor(3),1)})).delay(I).call((function(){l.PlayWaterUpAnim(g.GetLiquidColor(3),1)})).to(r,{liquidProgress:S}).call((function(){l.PlayCompleteAnim()})).start(),_(i.node).to(p,{worldPosition:m}).delay(a+r+c).to(h,{position:E}).call((function(){t._ui.spr_shadow.active=!0})).delay(P).start()}),1)},n.DemoPour8=function(t,o){t.Init(5),t.UpdateDefaultUI(),o.Init(7),o.UpdateDefaultUI(),t.SetColors([3,4,2,3,1]),t.liquidProgress=1,o.SetColors([1,1,1,1,1,1,0]),o.liquidProgress=6/7,o.UpdateComplete(),t._ui.node_parent.setPosition(-9,0),t.SetMirrored(!0),t._ui.spr_shadow.active=!0,this.scheduleOnce((function(){t._ui.spr_shadow.active=!1;var e=t,i=o;e.node.worldPosition=t.node.worldPosition.clone(),i.SetColors([1,1,1,1,1,1,1]);var l=-e.GetPourRotation(0),n=-e.GetPourRotation(1),s=.5/b/C.POUR_TIME_SCALES[0];s=-s*l/90;var a=.8/b/C.POUR_TIME_SCALES[0],r=.2/b/C.POUR_TIME_SCALES[0],u=.3/b,c=.3/b,p=.3/b,h=1/b,P=.4/b;e._ui.spr_bottle_bg.angle=0;var I=i.GetLiquidCount(),f=I-1,U=i.GetColors().length,y=f/U,w=I/U;i.liquidProgress=y;var S=e.node.position.clone(),E=i.node.worldPosition.clone();e.SetMirrored(!0),i.SetWaterFlowMirrored(!0),E.add(new d(10,134.64,0)),_(e).delay(c).to(s,{pourRotation:l}).to(a,{pourRotation:n},{easing:"sineOut"}).call((function(){e.SetColors([3,4,2,3,0])})).to(u,{pourRotation:0}).start();_(i).delay(c+r).call((function(){i.PlayPourInAnim(g.GetDripColor(1),1)})).delay(P).call((function(){i.PlayWaterUpAnim(g.GetLiquidColor(1),1)})).to(a,{liquidProgress:w}).call((function(){i.PlayCompleteAnim()})).start(),_(e.node).to(c,{worldPosition:E}).delay(s+a+u).to(p,{position:S}).call((function(){t._ui.spr_shadow.active=!0})).delay(h).start()}),1)},n.DemoPour9=function(t,o){t.Init(4),t.UpdateDefaultUI(),o.Init(4),o.UpdateDefaultUI(),t.SetColors([1,2,3,4]),t.liquidProgress=1,o.SetColors([0,0,0,0]),o.liquidProgress=0,t._ui.node_parent.setPosition(-10,0),this.scheduleOnce((function(){t._ui.spr_shadow.active=!1;var e=t,i=o;e.node.worldPosition=t.node.worldPosition.clone(),i.SetColors([4,0,0,0]);var l=-e.GetPourRotation(0),n=-e.GetPourRotation(1),s=.5/b/C.POUR_TIME_SCALES[0];s=-s*l/90;var a=.8/b/C.POUR_TIME_SCALES[0],r=.2/b/C.POUR_TIME_SCALES[0],u=.3/b,c=.3/b,p=.3/b,h=1/b,P=.4/b;e._ui.spr_bottle_bg.angle=0;var I=i.GetLiquidCount(),f=I-1,U=i.GetColors().length,y=f/U,w=I/U;i.liquidProgress=y;var S=e.node.position.clone(),E=i.node.worldPosition.clone();E.add(new d(-10,114,0)),_(e).delay(c).to(s,{pourRotation:l}).to(a,{pourRotation:n},{easing:"sineOut"}).call((function(){e.SetColors([1,2,3,0])})).to(u,{pourRotation:0}).start();_(i).delay(c+r).call((function(){i.PlayPourInAnim(g.GetDripColor(4),1)})).delay(P).call((function(){i.PlayWaterUpAnim(g.GetLiquidColor(4),1)})).to(a,{liquidProgress:w}).start(),_(e.node).to(c,{worldPosition:E}).delay(s+a+u).to(p,{position:S}).call((function(){t._ui.spr_shadow.active=!0})).delay(h).start()}),1)},n.DemoPour10=function(t,o){var e=this;t.Init(7),t.UpdateDefaultUI(),o.Init(7),o.UpdateDefaultUI(),t.SetColors([1,2,1,2,1,2,1]),t.liquidProgress=1,o.SetColors([1,1,1,1,1,1,0]),o.liquidProgress=6/7,o.UpdateComplete(),this.scheduleOnce((function(){t.DripUp(1,1),e.scheduleOnce((function(){var e=t.node.worldPosition.clone();e.y+=t.node.getComponent(p).height+57;t.ResetSelected(),o.MoveDripTo(1,e,.9,(function(){t.SetColors([1,2,1,2,1,2,0]),o.SetColors([1,1,1,1,1,1,1]),o.DripDown(1,1,(function(){o.CheckIfShowComplete()}))}))}),.5)}),1)},o}(f))._prefabUrl="ui/UINewTypeGuideDialog",B._className="UINewTypeGuideDialog",T=o((D=B).prototype,"bottlePrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=o(D.prototype,"longBottlePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=D))||R));n._RF.pop()}}}));

System.register("chunks:///_virtual/UINoticeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIHelp.ts","./S3Util.ts","./auto_UINoticeLayer.ts"],(function(t){var n,e,o,i,c,l,s,a,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Label,c=t.ScrollView},function(t){l=t.UIBase},function(t){s=t.default},function(t){a=t.S3Util},function(t){r=t.default}],execute:function(){var u,f;e._RF.push({},"78b81U9Oc9BuK0W7jFnP1W4","UINoticeLayer",void 0);var h=o.ccclass;o.property,t("default",h("UINoticeLayer")(((f=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._ui=void 0,n._closeCallback=void 0,n}n(e,t);var o=e.prototype;return o.onInit=function(t){var n;this._closeCallback=null==t||null==(n=t[0])?void 0:n.closeCallback},o.onUILoad=function(){var t=this;this._ui=this.node.addComponent(r),this.addInterlayer();var n=a.getNoticeTitle(),e=a.getNoticeContent();this._ui.label_notice_title.getComponent(i).string=n,this._ui.label_notice_content.getComponent(i).string=e,this.scheduleOnce((function(){t._ui.frame_sp.getComponent(c).scrollToTop()})),this.runOpenAni(this.node)},o.onUIStart=function(){},o.onUIEnable=function(){this.registerClick(this._ui.btn_close,this.onClickClose)},o.onUIDisable=function(){},o.onUIDestroy=function(){this.onClose()},o.onClose=function(){s.CloseUI(e)},o.onClickClose=function(){var t=this;this.runCloseAni(this.node,(function(){t.onClose()})),this._closeCallback&&this._closeCallback()},e}(l))._prefabUrl="ui/UINoticeLayer",f._className="UINoticeLayer",u=f))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIPermission.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIHelp.ts","./PlatformManager.ts","./auto_UIPermission.ts","./DataManager.ts"],(function(n){var t,e,o,i,s,a,c,r,l;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,i=n.UITransform},function(n){s=n.UIBase},function(n){a=n.default},function(n){c=n.default},function(n){r=n.default},function(n){l=n.default}],execute:function(){var u,f;e._RF.push({},"fccfbxQ/rxCeaVnuz/TGtJA","UIPermission",void 0);var h=o.ccclass;o.property,n("default",h("UIPermission")(((f=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this)._ui=void 0,t._authBtn=void 0,t._callback=void 0,t}t(e,n);var o=e.prototype;return o.onInit=function(n){this._callback=n[0].callback},o.onUILoad=function(){var n=this;this._ui=this.node.addComponent(r),this.addInterlayer();var t=this._ui.btn_agree.worldPosition.toVec2(),e=this._ui.btn_agree.getComponent(i).contentSize;this._authBtn=c.AddGetUserInfoButton(t,e,(function(t){n._callback&&n._callback(),n.runCloseAni(n.node,(function(){n.onClose()}))})),this.registerClick(this._ui.btn_close,this.OnClickClose),this.registerClick(this._ui.btn_agree,this.onClickAgree),this.runOpenAni(this.node)},o.onUIStart=function(){},o.onUIEnable=function(){},o.onUIDisable=function(){},o.onUIDestroy=function(){var n;null==(n=this._authBtn)||n.destroy(),this.onClose()},o.OnClickClose=function(){var n=this;c.SetNeedAuthUserInfo(!1),l.Player.SetUserInfoAuthedRejected(),this._callback&&this._callback(),this.runCloseAni(this.node,(function(){n.onClose()}))},o.onClickAgree=function(){var n=this;c.getUserInfo((function(t){n._callback&&n._callback(),n.runCloseAni(n.node,(function(){n.onClose()}))}))},o.onClose=function(){a.CloseUI(e)},e}(s))._prefabUrl="ui/UIPermission",f._className="UIPermission",u=f))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIPropUseLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./BundleManager.ts","./Log.ts","./UIBase.ts","./UIHelp.ts","./auto_UIPropUseLayer.ts"],(function(n){var e,t,o,i,a,s,p,r,u,c,_,l,f;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,i=n.randomRangeInt,a=n.sp},function(n){s=n.PROP_ID,p=n.Sfx},function(n){r=n.default},function(n){u=n.BundleManager},function(n){c=n.default},function(n){_=n.UIBase},function(n){l=n.default},function(n){f=n.default}],execute:function(){var h,d;t._RF.push({},"befd3s//NlDdIBVxg0j95Ek","UIPropUseLayer",void 0);var I=o.ccclass;o.property,n("default",I("UIPropUseLayer")(((d=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this)._ui=void 0,e._propID=s.NONE,e._callback=void 0,e._playAfterLoad=!1,e}e(t,n);var o=t.prototype;return o.onInit=function(n){this._propID=n[0].propID,this._callback=n[0].callback},o.onUILoad=function(){this._ui=this.node.addComponent(f),this.addInterlayer();var n="spines/prop/spine_fanhui",e="chehui",t=p.SOUND_PROP_STEP_BACK;switch(this._propID){case s.STEP_BACK:n="spines/prop/spine_fanhui",e="chehui",t=p.SOUND_PROP_STEP_BACK;break;case s.VANISH_COLOR:n="spines/prop/spine_xiaochu",e="xiaochu",t=p.SOUND_PROP_VANISH_COLOR;break;case s.UNLOCK_BOTTLE:n="spines/prop/spine_pingzi",e="kongping",t=p.SOUND_PROP_UNLOCK_BOTTLE;break;case s.ADD_TIME:n="spines/prop/spine_jiashi",e="animation",t=p.SOUND_PROP_ADD_TIME;break;default:c.warn("没有该道具的使用动画, PROP_ID:"+this._propID)}this._propID!=s.ADD_TIME&&(e+=i(1,3).toString());var o=this;o._ui.spine_prop.active=!1,r.playEffect(t),u.loadBundle("animation",(function(t,i){t||i.load(n,a.SkeletonData,(function(n,t){n||(o._ui.spine_prop.getComponent(a.Skeleton).skeletonData=t,o._playAfterLoad&&(o._playAfterLoad=!1,o.playAnimation(e)))}))})),this.runFadeInAni(this.node,(function(){o.playAnimation(e)}))},o.playAnimation=function(n){this._ui.spine_prop.getComponent(a.Skeleton).skeletonData?(this._ui.spine_prop.active=!0,this._ui.spine_prop.getComponent(a.Skeleton).setAnimation(0,n,!1)):this._playAfterLoad=!0},o.onUIStart=function(){},o.onUIEnable=function(){this._ui.spine_prop.getComponent(a.Skeleton).setEventListener(this.onSpineEvent.bind(this))},o.onUIDisable=function(){},o.onUIDestroy=function(){this.onClose()},o.onClose=function(){l.CloseUI(t)},o.onSpineEvent=function(n){var e=this;this.runFadeOutAni(this.node,(function(){e._callback&&e._callback(),e.onClose()}))},t}(_))._prefabUrl="ui/UIPropUseLayer",d._className="UIPropUseLayer",h=d))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIRankLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./WechatManager.ts","./RankDataMgr.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./Log.ts","./UIBase.ts","./UIHelp.ts","./BytedancePlatform.ts","./PlatformManager.ts","./BadgeUtil.ts","./auto_UIRankLayer.ts","./tableView.ts","./tableViewCell.ts","./RankLevelItem.ts","./UIPermission.ts"],(function(e){var t,i,n,a,o,s,l,r,u,c,h,_,m,p,f,d,g,I,v,y,C,b,T,k,S,O,U,P,E,N,A,w,R,L,D,V;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,l=e.Prefab,r=e.Label,u=e.UITransform,c=e.Size,h=e.tween,_=e.Vec3,m=e.UIOpacity,p=e.sys,f=e.instantiate,d=e.Button,g=e.Color},function(e){I=e.GameDefine,v=e.Sfx,y=e.GameEvent},function(e){C=e.default},function(e){b=e.RankDataMgr},function(e){T=e.default},function(e){k=e.default},function(e){S=e.default},function(e){O=e.default},function(e){U=e.UIBase},function(e){P=e.default},function(e){E=e.default},function(e){N=e.default},function(e){A=e.BadgeUtil},function(e){w=e.default},function(e){R=e.TableView},function(e){L=e.TableViewCell},function(e){D=e.default},function(e){V=e.default}],execute:function(){var x,B,F,G,M,z;o._RF.push({},"701b3n02gdBK6HrtZkZVD3B","UIRankLayer",void 0);var H=s.ccclass,q=s.property;e("default",(x=H("UIRankLayer"),B=q({type:l}),x(((z=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this)._ui=void 0,n(t,"rankLevelItem",M,a(t)),t.aniTime=I.FRAME_TIME,t._cellList=[],t.tapIndex=1,t.PROVINCE_TAP=1,t.RANK_TAP=2,t.childGameNum=0,t.useLevel=0,t._rankData=[],t.isCreate=!1,t._needAuthPrivacy=!0,t._needAuthUserInfo=!0,t}i(t,e);var o=t.prototype;return o.onInit=function(e){},o.onUILoad=function(){this._ui=this.node.addComponent(w),this.addInterlayer(),this._ui.rankTableView.getComponent(R).delegate=this,this._ui.rankTableView.getComponent(R).datasource=this,k.Player.ProvinceRank.updateData(),this.UpdateUserInfo(),this.useLevel=k.Player.LevelId.val-1,this._ui.user_level_label.getComponent(r).string=""+this.useLevel,this.ShowStartAnim(),C.SetPrivacyAuthed()},o.UpdateUserInfo=function(){var e=this;N.getUserInfo((function(t){if(null!=t){P.SetRemoteSpriteFrame(e._ui.user_head_sp,t.avatarUrl,(function(){null!=e._ui.user_head_sp&&(e._ui.user_head_sp.getComponent(u).contentSize=new c(80,80))}));var i=t.nickName;i.length>4?(i=i.substring(0,4),e._ui.user_name_label.getComponent(r).string=i+"..."):e._ui.user_name_label.getComponent(r).string=""+i}else P.SetSpriteFrame(e._ui.user_head_sp,I.PLAYER_HEADER_DEFAULT),e._ui.user_name_label.getComponent(r).string="本人"}))},o.onUIStart=function(){this.selectProvince()},o.onUIEnable=function(){this.registerClick(this._ui.close_btn,this.OnClickClose),this.registerClick(this._ui.province_btn,this.toProvinceClick),this.registerClick(this._ui.rank_btn,this.toRankClick)},o.onUIDisable=function(){},o.onUIDestroy=function(){this.onClose()},o.onClose=function(){P.CloseUI(t)},o.ShowStartAnim=function(){h(this._ui.spr_bg).to(0,{scale:_.ONE.clone().multiplyScalar(.65)}).to(9*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(4*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1)}).start(),h(this._ui.province_btn).to(0,{scale:_.ONE.clone().multiplyScalar(.5)}).delay(3*this.aniTime).to(8*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(5*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1)}).start(),h(this._ui.province_btn.getComponent(m)).to(0,{opacity:0}).delay(3*this.aniTime).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),h(this._ui.rank_btn).to(0,{scale:_.ONE.clone().multiplyScalar(.5)}).delay(6*this.aniTime).to(8*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(5*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1)}).start(),h(this._ui.rank_btn.getComponent(m)).to(0,{opacity:0}).delay(6*this.aniTime).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),h(this._ui.close_btn).to(0,{scale:_.ONE.clone().multiplyScalar(.2)}).to(8*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1.1)},{easing:"sineInOut"}).to(5*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1)}).start(),h(this._ui.close_btn.getComponent(m)).to(0,{opacity:0}).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),h(this._ui.ranking_label).to(0,{scale:_.ONE.clone().multiplyScalar(.45)}).to(8*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(5*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1)}).start(),h(this._ui.ranking_label.getComponent(m)).to(0,{opacity:0}).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start(),h(this._ui.level_label).to(0,{scale:_.ONE.clone().multiplyScalar(.45)}).delay(2*this.aniTime).to(8*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1.05)},{easing:"sineInOut"}).to(5*this.aniTime,{scale:_.ONE.clone().multiplyScalar(1)}).start(),h(this._ui.level_label.getComponent(m)).to(0,{opacity:0}).delay(2*this.aniTime).to(8*this.aniTime,{opacity:255},{easing:"sineInOut"}).start()},o.playCellAni=function(){var e=this;this._cellList.forEach((function(t,i){var n=t.node.position.clone();h(t.node).to(0,{position:new _(n.x+30,n.y,n.z)}).delay((3+2*i)*e.aniTime).to(13*e.aniTime,{position:new _(n.x-8,n.y,n.z)},{easing:"sineInOut"}).to(6*e.aniTime,{position:new _(n.x,n.y,n.z)},{easing:"sineInOut"}).start(),h(t.node.getComponent(m)).to(0,{opacity:0}).delay((3+2*i)*e.aniTime).to(12*e.aniTime,{opacity:255},{easing:"sineInOut"}).start()}))},o.loadContentView=function(){if(this.initScrollInfo(),this.tapIndex==this.PROVINCE_TAP)this._ui.friendsTableView.active=!0,this._ui.rankTableView.active=!1,this._ui.UserItem.active=!1,this._ui.dan_label.active=!1,this._ui.user_badge_sp.active=!1,this._ui.user_badge_label.active=!1,this._ui.user_icon_labe.getComponent(r).string="未上榜";else{this._ui.friendsTableView.active=!1,this._ui.rankTableView.active=!0,this._ui.UserItem.active=!0,this._ui.dan_label.active=!0,this._ui.user_badge_sp.active=!0,this._ui.user_badge_label.active=!0;var e=A.GetBageIndexByLevel(k.Player.LevelId.val-1);A.SetBadgeIcon(this._ui.user_badge_sp,e),this._ui.user_badge_label.getComponent(r).string=A.GetBadgeName(e);var t=b.GetCurRank(k.Player.LevelId.val-1)+1;this._ui.user_icon_labe.getComponent(r).string=""+t;var i=this._ui.rankTableView.getComponent(R).getOffsetFromIndex(0);this._ui.rankTableView.getComponent(R).scrollToOffset(i)}},o.initScrollInfo=function(){var e=this;if(this.childGameNum=100,this._cellList=[],this.tapIndex==this.PROVINCE_TAP){var t=this,i="rankData";p.platform==p.Platform.BYTEDANCE_MINI_GAME&&E.IsDebugEnv()&&(i="rankDataTest");var n=function(e){e?(N.setUserLevel(k.Player.LevelId.val-1).then((function(){t.isCreate||(N.postMessage(i),t.isCreate=!0)})),k.Player.FriendInteraction.val||(k.Player.FriendInteraction.val=!0,k.Player.saveData())):k.Player.FriendInteraction.val||t.isCreate?(N.postMessage("clear"),t.isCreate=!1):(N.postMessage(i),t.isCreate=!0)};E.Login().then((function(){e._needAuthPrivacy?C.requirePrivacyAuthorize().then((function(e){e&&N.CheckIsAuthedFriendInfo().then((function(e){n(e)}))})):n(!1)}))}else this._rankData=b.GetCurRankData(k.Player.LevelId.val-1)},o.tableViewNumberOfCells=function(e){return this.childGameNum},o.tableViewCellForIndex=function(e,t){if(this.tapIndex==this.PROVINCE_TAP){var i=e.dequeueCell();if(!i)i=f(this.rankLevelItem).getComponent(L);return i}var n=e.dequeueCell();return n||(n=f(this.rankLevelItem).getComponent(L)),n.getComponent(D).SetData(t,this._rankData[t]),n},o.tableViewScrolling=function(e){},o.tableViewCellHeightForIndex=function(e,t){return 110},o.toProvinceClick=function(){this.tapIndex!=this.PROVINCE_TAP&&(T.playEffect(v.SOUND_BUTTON),this.selectProvince())},o.selectProvince=function(){this.tapIndex=this.PROVINCE_TAP,this._ui.province_btn.getComponent(d).interactable=!1,P.SetSpriteFrame(this._ui.province_btn,"common/Game_toggle_huang"),this._ui.province_label.getComponent(r).outlineColor=new g(189,71,24,255),this._ui.rank_btn.getComponent(d).interactable=!0,P.SetSpriteFrame(this._ui.rank_btn,"common/Game_toggle_hui"),this._ui.rank_label.getComponent(r).outlineColor=new g(94,94,94,255),this.loadContentView()},o.toRankClick=function(){if(this.tapIndex!=this.RANK_TAP&&(T.playEffect(v.SOUND_BUTTON),this.selectRank(),p.platform==p.Platform.WECHAT_GAME&&this._needAuthPrivacy)){var e=this;C.requirePrivacyAuthorize().then((function(t){t&&C.CheckIsAuthedUserInfo().then((function(t){1==t?C.getUserInfo((function(){e.selectRank()})):0==t&&e._needAuthUserInfo?(e._needAuthUserInfo=!1,C.openSetting("需要授权用户信息","去授权").then((function(t){t&&C.getUserInfo((function(){e.selectRank()}))}))):null==t&&e._needAuthUserInfo&&(e._needAuthUserInfo=!1,P.ShowUI(V,void 0,{callback:function(){e.selectRank()}}))}))}))}},o.selectRank=function(){this.isValid?(this.tapIndex=this.RANK_TAP,this._ui.province_btn.getComponent(d).interactable=!0,P.SetSpriteFrame(this._ui.province_btn,"common/Game_toggle_hui"),this._ui.province_label.getComponent(r).outlineColor=new g(94,94,94,255),this._ui.rank_btn.getComponent(d).interactable=!1,P.SetSpriteFrame(this._ui.rank_btn,"common/Game_toggle_huang"),this._ui.rank_label.getComponent(r).outlineColor=new g(189,71,24,255),b.UpdateSelfData(),this.UpdateUserInfo(),this.loadContentView()):O.warn("UIRankLayer is not valid")},o.OnClickClose=function(){var e=this;T.playEffect(v.SOUND_BUTTON),this.runCloseAni(this.node,(function(){S.emit(y.EventShowGameClube),e.onClose()}))},t}(U))._prefabUrl="ui/UIRankLayer",z._className="UIRankLayer",M=t((G=z).prototype,"rankLevelItem",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=G))||F));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIRankUpgrade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./UIBase.ts","./UIHelp.ts","./BadgeUtil.ts","./auto_UIRankUpgrade.ts"],(function(n){var t,e,i,a,o,s,r,l,c,u,_,d,p;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,a=n.sp,o=n.Label,s=n.tween},function(n){r=n.Sfx,l=n.GameDefine},function(n){c=n.default},function(n){u=n.UIBase},function(n){_=n.default},function(n){d=n.BadgeUtil},function(n){p=n.default}],execute:function(){var f,g;e._RF.push({},"4279dONO+1BIbYBujhEwqiw","UIRankUpgrade",void 0);var h=i.ccclass;i.property,n("default",h("UIRankUpgrade")(((g=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))||this)._ui=void 0,t._rankIndex=0,t._callback=void 0,t}t(e,n);var i=e.prototype;return i.onInit=function(n){this._rankIndex=n[0].rank,this._callback=n[0].callback},i.onUILoad=function(){var n=this;this._ui=this.node.addComponent(p),this.addInterlayer();var t=d.GetRankSpineAniName(this._rankIndex);this._ui.spine_rank_badge.getComponent(a.Skeleton).setAnimation(0,t,!1),this._ui.label_rank_up_desc.getComponent(o).string="恭喜晋级为"+d.GetBadgeName(this._rankIndex)+"!",c.playEffect(r.SOUND_LEVEL_UP),this.runFadeInAni(this.node),s(this._ui.spine_bg_light).delay(10*l.FRAME_TIME).call((function(){n._ui.spine_bg_light.active=!0,n._ui.spine_bg_light.getComponent(a.Skeleton).setAnimation(0,"1",!1),n._ui.spine_bg_light.getComponent(a.Skeleton).addAnimation(0,"2",!0)})).start()},i.onUIStart=function(){},i.onUIEnable=function(){this._ui.spine_rank_badge.getComponent(a.Skeleton)},i.onUIDisable=function(){},i.onUIDestroy=function(){this.onClose()},i.onInterClick=function(){var n=this;this.runFadeOutAni(this.node,(function(){n.onClose(),n._callback&&n._callback()}))},i.onClose=function(){_.CloseUI(e)},e}(u))._prefabUrl="ui/UIRankUpgrade",g._className="UIRankUpgrade",f=g))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIRebornDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./UIBase.ts","./UIHelp.ts","./GameAdMgr.ts","./auto_UIRebornDialog.ts","./UIGameLayer.ts"],(function(t){var e,o,i,s,n,a,l,r,c,_,h,u;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,s=t.Label,n=t.ProgressBar},function(t){a=t.GameType},function(t){l=t.UIBase},function(t){r=t.default},function(t){c=t.GameAdMgr,_=t.EAdPlayType},function(t){h=t.default},function(t){u=t.ADD_TIME_PROP_TIME}],execute:function(){var d,g;o._RF.push({},"e0492zsyM5JLqzquPkuWNo7","UIRebornDialog",void 0);var p=i.ccclass;i.property,t("default",p("UIRebornDialog")(((g=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._ui=void 0,e._isWaitingAd=!1,e._isRewarded=!1,e._gameType=a.NORMAL,e._progress=0,e.totalNum=0,e.completeNum=0,e.hasVideoBottle=!0,e._closeCallback=void 0,e._showAdCallback=void 0,e}e(o,t);var i=o.prototype;return i.onInit=function(t){this.totalNum=t[0].totalNum,this.completeNum=t[0].completeNum,this.hasVideoBottle=t[0].hasVideoBottle,this._gameType=t[0].gameType||a.NORMAL,this._progress=t[0].progress,this._closeCallback=t[0].closeCallback,this._showAdCallback=t[0].showAdCallback},i.onUILoad=function(){this._ui=this.node.addComponent(h),this.addInterlayer(),this._ui.spr_add.active=this.hasVideoBottle,this._ui.spr_bg_bottle.active=this.hasVideoBottle;var t="加时"+u+"s";this.hasVideoBottle&&(t+="并解锁一个空瓶"),this._ui.label_reborn_reward_desc.getComponent(s).string=t,this._gameType==a.CHALLENGE?(this._ui.pro_next_reward.getComponent(n).progress=this._progress,this._ui.label_progress_desc.getComponent(s).string="关卡进度："+Math.floor(100*this._progress)+"%",this._ui.label_next_reward_desc.getComponent(s).string="还差一点就能挑战成功了"):(this._ui.pro_next_reward.getComponent(n).progress=this.completeNum/this.totalNum,this._ui.label_progress_desc.getComponent(s).string="关卡进度："+Math.floor(this.completeNum/this.totalNum*100)+"%",this._ui.label_next_reward_desc.getComponent(s).string="再收集"+(this.totalNum-this.completeNum)+"瓶水，即可过关"),this.runOpenAni(this.node)},i.onUIStart=function(){},i.onUIEnable=function(){this.registerClick(this._ui.btn_claim,this.claimReward),this.registerClick(this._ui.btn_close,this.closeDialog)},i.onUIDisable=function(){},i.onUIDestroy=function(){this.onClose()},i.onClose=function(){r.CloseUI(o)},i.claimReward=function(){this._isWaitingAd=!0;var t=this;c.getInstance().ShowRewardVideoAd(_.ad_video_reborn,(function(e){t._isWaitingAd=!1,e&&(t._isRewarded=!0,t.closeDialog())}),(function(){t._showAdCallback&&t._showAdCallback()}))},i.closeDialog=function(){this._isWaitingAd||(this._closeCallback&&this._closeCallback(this._isRewarded),this.runCloseAni(this.node,(function(){r.CloseUI(o)})))},o}(l))._prefabUrl="ui/UIRebornDialog",g._className="UIRebornDialog",d=g))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIShareLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./PlatformManager.ts","./auto_UIShareLayer.ts"],(function(e){var t,n,a,i,o,r,s,u,l,c,h,f,d;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,i=e.Label},function(e){o=e.Sfx,r=e.GameEvent},function(e){s=e.default},function(e){u=e.default},function(e){l=e.default},function(e){c=e.UIBase},function(e){h=e.default},function(e){f=e.default},function(e){d=e.default}],execute:function(){var p,U;n._RF.push({},"13b92kN2lNFOq3W1L+dr/gs","UIShareLayer",void 0);var C=a.ccclass;a.property,e("ShareTipsType",function(e){return e[e.Share=0]="Share",e[e.Get=1]="Get",e}({})),e("default",C("UIShareLayer")(((U=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this)._ui=void 0,t}t(n,e);var a=n.prototype;return a.onInit=function(e){},a.onUILoad=function(){this._ui=this.node.addComponent(d),this.addInterlayer(),this.refreshUI(),this.runOpenAni(this.node)},a.onUIStart=function(){},a.onUIEnable=function(){this.registerClick(this._ui.share_btn,this.onShareCilck),this.registerClick(this._ui.close_btn,this.onCloseCilck)},a.onUIDisable=function(){},a.onUIDestroy=function(){this.onClose()},a.onClose=function(){h.CloseUI(n)},a.refreshUI=function(){this._ui.share_label.getComponent(i).string="分享"},a.onShareCilck=function(){var e=this;s.playEffect(o.SOUND_BUTTON),f.shareAppMessage("敢不敢挑战你的智商？","share=award"),u.Player.ShareIsClick.val=!0,u.Player.saveData(),this.runCloseAni(this.node,(function(){l.emit(r.EventShowGameClube),e.onClose()}))},a.onCloseCilck=function(){var e=this;s.playEffect(o.SOUND_BUTTON),this.runCloseAni(this.node,(function(){l.emit(r.EventShowGameClube),e.onClose()}))},n}(c))._prefabUrl="ui/UIShareLayer",U._className="UIShareLayer",p=U))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIShareRewardLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./auto_UIShareRewardLayer.ts","./UIBase.ts","./UIHelp.ts","./AudioManager.ts","./Defines.ts","./DataManager.ts","./EventManager.ts"],(function(e){var t,n,i,o,r,a,s,u,c,l,h,f,d;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.Label},function(e){r=e.default},function(e){a=e.UIBase},function(e){s=e.default},function(e){u=e.default},function(e){c=e.PROP_ID,l=e.GameEvent,h=e.Sfx},function(e){f=e.default},function(e){d=e.default}],execute:function(){var C,I;n._RF.push({},"1e9f8I+YZRFjaxZgrhpvqKg","UIShareRewardLayer",void 0);var U=i.ccclass;i.property,e("default",U("UIShareRewardLayer")(((I=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._ui=void 0,t}t(n,e);var i=n.prototype;return i.onInit=function(e){},i.onUILoad=function(){this._ui=this.node.addComponent(r),this.addInterlayer(),this.refreshUI(),this.runOpenAni(this.node)},i.onUIStart=function(){},i.onUIEnable=function(){this.registerClick(this._ui.share_btn,this.onShareCilck),this.registerClick(this._ui.close_btn,this.onCloseCilck)},i.onUIDisable=function(){},i.onUIDestroy=function(){this.onClose()},i.onClose=function(){s.CloseUI(n)},i.refreshUI=function(){f.Player.ShareTime.val=f.getServerTime(),f.Player.AddProp(c.STEP_BACK,2),this._ui.share_label.getComponent(o).string="领取",this._ui.close_btn.active=!1},i.onShareCilck=function(){var e=this;this.unRegisterAllClick(),this.runCloseAni(this.node,(function(){d.emit(l.EventShowGameClube),d.emit(l.EventShareSuccess),e.onClose()}))},i.onCloseCilck=function(){var e=this;u.playEffect(h.SOUND_BUTTON),this.runCloseAni(this.node,(function(){d.emit(l.EventShowGameClube),e.onClose()}))},n}(a))._prefabUrl="ui/UIShareRewardLayer",I._className="UIShareRewardLayer",C=I))||C);n._RF.pop()}}}));

System.register("chunks:///_virtual/UISideBarLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./BytedancePlatform.ts","./auto_UISideBarLayer.ts","./UIGetGiftBox.ts","./UIHallLayer.ts"],(function(e){var t,i,n,a,r,o,s,c,l,u,d,f,h;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator},function(e){a=e.PROP_ID,r=e.GameEvent},function(e){o=e.default},function(e){s=e.default},function(e){c=e.UIBase},function(e){l=e.default},function(e){u=e.default},function(e){d=e.default},function(e){f=e.default},function(e){h=e.default}],execute:function(){var C,v;i._RF.push({},"a02bbWevgxOkIRO7CRuHv7x","UISideBarLayer",void 0);var I=n.ccclass;n.property,e("default",I("UISideBarLayer")(((v=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._ui=void 0,t}t(i,e);var n=i.prototype;return n.onInit=function(e){},n.onUILoad=function(){this._ui=this.node.addComponent(d),this.addInterlayer(),this.CheckIsEnterFromSideBar(),this.runOpenAni(this.node)},n.onUIStart=function(){},n.onUIEnable=function(){this.registerClick(this._ui.close_btn,this.onCloseClick),this.registerClick(this._ui.btn_side_bar,this.OnClickSideBar),this.registerClick(this._ui.btn_reward,this.onClickReward)},n.onUIDisable=function(){},n.onUIDestroy=function(){this.onClose()},n.CheckIsEnterFromSideBar=function(){var e=o.Player.SidebarNavigated.val;this._ui.btn_reward.active=e,this._ui.btn_side_bar.active=!e},n.OnClickSideBar=function(){var e=this;u.NavigateToSidebar(),o.Player.SidebarNavigated.val=!0,o.Player.saveData(),this.scheduleOnce((function(){e.CheckIsEnterFromSideBar()}))},n.onClickReward=function(){this.onClose(),o.Player.SidebarAwardClaim.val=!0,o.Player.AddProp(a.STEP_BACK,1,!1);var e=l.GetUI(h);e&&e.checkSidebar(),l.ShowUI(f,void 0,{showClaimBtn:!0,rewards:{prop:{id:a.STEP_BACK,count:1}},closeCallback:function(){s.emit(r.EventPropCountChange)}})},n.onCloseClick=function(){this.onClose()},n.onClose=function(){this.runCloseAni(this.node,(function(){l.CloseUI(i)}))},i}(c))._prefabUrl="ui/UISideBarLayer",v._className="UISideBarLayer",C=v))||C);i._RF.pop()}}}));

System.register("chunks:///_virtual/UISignInLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./GameAdMgr.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./auto_UISignInLayer.ts","./UISignInReward.ts"],(function(i){var t,e,n,a,o,s,l,c,r,u,_,d,h,m,C,f,g,I;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,n=i._decorator,a=i.Label,o=i.Vec3},function(i){s=i.Constant,l=i.PROP_ID,c=i.GameEvent,r=i.Sfx},function(i){u=i.GameAdMgr,_=i.EAdPlayType},function(i){d=i.default},function(i){h=i.default},function(i){m=i.default},function(i){C=i.UIBase},function(i){f=i.default},function(i){g=i.default},function(i){I=i.default}],execute:function(){var v,S;e._RF.push({},"0717b++idlBdIPuqH6Kt8BM","UISignInLayer",void 0);var y=n.ccclass;n.property,i("default",y("UISignInLayer")(((S=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=i.call.apply(i,[this].concat(n))||this)._ui=void 0,t.loadDaysCount=1,t.bCailmed=!1,t.clickClaim=!1,t}t(e,i);var n=e.prototype;return n.onInit=function(i){},n.onUILoad=function(){this._ui=this.node.addComponent(g),this.addInterlayer(),this.runOpenAni(this.node),this.bCailmed=h.Player.SignIn.isSignIn(),this.loadDaysCount=h.Player.SignIn.getSignDays(),this.clickClaim=!1},n.onUIStart=function(){this.initDailyInfo()},n.onUIEnable=function(){this.registerEvent("Event_ClaimSignIn",this.claimReward),this.registerClick(this._ui.cliam_btn,this.OnClickClaim),this.registerClick(this._ui.video_btn,this.OnClickVideo),this.registerClick(this._ui.close_btn,this.OnClickClose)},n.onUIDisable=function(){},n.onUIDestroy=function(){this.onClose()},n.onClose=function(){f.CloseUI(e)},n.initDailyInfo=function(){for(var i=h.Player.SignIn.getSignBottle(),t=0;t<7;t++){var e=t+1,n=this._ui.frame_sp.getChildByName("day_"+e),c=n.getChildByName("day_icon_"+e),r=n.getChildByName("day_reward_"+e),u=r.getChildByName("day_reward_label_"+e),_=n.getChildByName("day_signin_"+e),d=n.getChildByName("day_select_"+e);if(t<this.loadDaysCount)f.SetSpriteFrame(n,"signin/Game_frame_jiesuo1"),c.active=!1,r.active=!0,_.active=!0,d.active=!1,s.signInToolId[t]==l.REFRESH?f.SetSpriteFrame(r,"common/Game_icon_xuanzhuan"):s.signInToolId[t]==l.VANISH_COLOR?f.SetSpriteFrame(r,"common/Game_icon_xiaochu"):s.signInToolId[t]==l.STEP_BACK&&f.SetSpriteFrame(r,"common/Game_icon_chehui"),6==t&&(this._ui.des_label.active=!1,this._ui.des_label1.active=!1);else if(t==this.loadDaysCount)f.SetSpriteFrame(n,"signin/Game_frame_jiesuo1"),c.active=!1,r.active=!0,_.active=!1,d.active=!this.bCailmed,s.signInToolId[t]==l.REFRESH?f.SetSpriteFrame(r,"common/Game_icon_xuanzhuan"):s.signInToolId[t]==l.VANISH_COLOR?f.SetSpriteFrame(r,"common/Game_icon_xiaochu"):s.signInToolId[t]==l.STEP_BACK&&f.SetSpriteFrame(r,"common/Game_icon_chehui"),u.getComponent(a).string="+"+s.signInToolNum[t],6==this.loadDaysCount&&(r.position=new o(-1==i?0:-60,-10,0)),this._ui.day_bottle_7.active=-1!=i,this._ui.bottle_label.active=-1!=i,-1!=i&&f.SetSpriteFrame(this._ui.day_bottle_7,"bottle/pingzi_"+i),6==t&&(this._ui.des_label.active=!1,this._ui.des_label1.active=!1);else{if(f.SetSpriteFrame(n,"signin/Game_frame_"+e),c.active=!0,r.active=!1,_.active=!1,d.active=!1,6==t)n.getChildByName("day_bottle_"+e).active=!1,this._ui.bottle_label.active=!1}}this.bCailmed?(this._ui.cliam_btn.active=!1,this._ui.video_btn.active=!1,this._ui.tomorrow_label.active=!0):(this._ui.cliam_btn.active=!0,this._ui.video_btn.active=!0,this._ui.tomorrow_label.active=!1)},n.OnClickClaim=function(){this.clickClaim||(this.clickClaim=!0,f.ShowUI(I,void 0,this.loadDaysCount,!1))},n.OnClickVideo=function(){if(!this.clickClaim){this.clickClaim=!0;var i=this;u.getInstance().ShowRewardVideoAd(_.ad_video_signin,(function(t){t?f.ShowUI(I,void 0,i.loadDaysCount,!0):i.clickClaim=!1}))}},n.claimReward=function(){var i=this;this.runCloseAni(this.node,(function(){m.emit(c.EventShowGameClube),i.onClose()}))},n.OnClickClose=function(){var i=this;d.playEffect(r.SOUND_BUTTON),this.runCloseAni(this.node,(function(){m.emit(c.EventShowGameClube),i.onClose()}))},e}(C))._prefabUrl="ui/UISignInLayer",S._className="UISignInLayer",v=S))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/UISignInReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./GameAdMgr.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./auto_UISignInReward.ts"],(function(i){var t,n,e,a,o,s,_,l,r,c,d,u,h,I,g,m,f;return{setters:[function(i){t=i.inheritsLoose},function(i){n=i.cclegacy,e=i._decorator,a=i.Label,o=i.Vec3,s=i.tween},function(i){_=i.Sfx,l=i.Constant,r=i.PROP_ID},function(i){c=i.GameAdMgr,d=i.EAdPlayType},function(i){u=i.default},function(i){h=i.default},function(i){I=i.default},function(i){g=i.UIBase},function(i){m=i.default},function(i){f=i.default}],execute:function(){var p,S;n._RF.push({},"9d898MoQTRInY/1Li5CSJu6","UISignInReward",void 0);var b=e.ccclass;e.property,i("default",b("UISignInReward")(((S=function(i){function n(){for(var t,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];return(t=i.call.apply(i,[this].concat(e))||this)._ui=void 0,t._day=-1,t._double=!1,t._bottleIndex=-1,t._clickClaim=!1,t._getReward=!1,t}t(n,i);var e=n.prototype;return e.onInit=function(i){this._day=i[0],this._double=i[1]},e.onUILoad=function(){this._ui=this.node.addComponent(f),this.addInterlayer()},e.onUIStart=function(){this._clickClaim=!1,this._getReward=!1,u.playEffect(_.SOUND_GET_GIFT),this._bottleIndex=h.Player.SignIn.getSignBottle(),this._ui.num_label.getComponent(a).string=this._double?"+2":"+1";var i=-1!=this._bottleIndex&&6==this._day;this._ui.reward_1.position=new o(i?-180:0,0,0),this._ui.reward_2.active=i,s(this._ui.light_sp_1).repeatForever(s().by(.5,{angle:30})).start(),l.signInToolId[this._day]==r.REFRESH?m.SetSpriteFrame(this._ui.Icon_sp_1,"common/Game_icon_xuanzhuan"):l.signInToolId[this._day]==r.VANISH_COLOR?m.SetSpriteFrame(this._ui.Icon_sp_1,"common/Game_icon_xiaochu"):l.signInToolId[this._day]==r.STEP_BACK&&m.SetSpriteFrame(this._ui.Icon_sp_1,"common/Game_icon_chehui"),i&&(s(this._ui.light_sp_2).repeatForever(s().by(.5,{angle:30})).start(),m.SetSpriteFrame(this._ui.Icon_sp_2,"bottle/pingzi_"+this._bottleIndex)),this._ui.video_btn.active=!this._double,this._double&&m.SetSpriteFrame(this._ui.claim_btn,"common/Game_btn_dalan")},e.onUIEnable=function(){this.registerClick(this._ui.claim_btn,this.OnClickClaim),this.registerClick(this._ui.video_btn,this.OnClickVideo)},e.onUIDisable=function(){},e.onUIDestroy=function(){this.onClose()},e.onClose=function(){m.CloseUI(n)},e.OnClickClaim=function(){this._clickClaim||(this._clickClaim=!0,u.playEffect(_.SOUND_BUTTON),this._getReward||(h.Player.SignIn.signIn(),h.Player.AddProp(l.signInToolId[this._day],this._double?2:1),-1!=this._bottleIndex&&6==this._day&&h.Player.SkinList.unLockSkin(this._bottleIndex)),I.emit("Event_ClaimSignIn"),this.onClose())},e.OnClickVideo=function(){if(!this._clickClaim){this._clickClaim=!0,u.playEffect(_.SOUND_BUTTON);var i=this;c.getInstance().ShowRewardVideoAd(d.ad_video_signin,(function(t){t?(h.Player.SignIn.signIn(),h.Player.AddProp(l.signInToolId[i._day],2),-1!=i._bottleIndex&&6==i._day&&h.Player.SkinList.unLockSkin(i._bottleIndex),i._ui.num_label.getComponent(a).string="+2",i._ui.video_btn.active=!1,m.SetSpriteFrame(i._ui.claim_btn,"common/Game_btn_dalan"),i._clickClaim=!1,i._getReward=!0):i._clickClaim=!1}))}},n}(g))._prefabUrl="ui/UISignInReward",S._className="UISignInReward",p=S))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/UITask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./DataManager.ts","./EventManager.ts","./Log.ts","./UIHelp.ts","./UILoginShareLayer.ts","./UINoticeLayer.ts","./UIShareRewardLayer.ts","./S3Util.ts"],(function(t){var e,n,o,i,a,s,u,r,h,l,c,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.GameEvent},function(t){i=t.default},function(t){a=t.default},function(t){s=t.default},function(t){u=t.default},function(t){r=t.default},function(t){h=t.default},function(t){l=t.default},function(t){c=t.S3Util,f=t.NOTICE_CONTENT_EMPTY}],execute:function(){n._RF.push({},"79a30AVN15FXY7pbdS2QOEW","UITask",void 0);var S=t("UITask",function(){function t(){}return t.ShowTaskUIs=function(t){var e=[new v,new I,new U];this._taskUIList=e,this._finishCallback=t,this.ShowNextUI()},t.ShowNextUI=function(){if(this._taskUIList&&0!=this._taskUIList.length){var e=this._taskUIList.shift();null!=e&&e.ShouldShow()?e.ShowWithCallback((function(){t.ShowNextUI()})):this.ShowNextUI()}else this._finishCallback&&this._finishCallback()},t}());S._taskUIList=void 0,S._finishCallback=void 0;var w=function(){function t(){}return t.prototype.ShowWithCallback=function(t){if(this.ShouldShow()){var e=this.Show();a.on(o.EventUIClose,(function n(i){s.log("TestV EventUIClose",i),i==e&&(t&&t(),a.off(o.EventUIClose,n))}))}else t&&t()},t}(),I=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var s=n.prototype;return s.ShouldShow=function(){return i.Player.bShouldShowDailyShare()},s.Show=function(){return a.emit(o.EventHideGameClube),u.ShowUI(r),r.getName()},n}(w),U=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var s=n.prototype;return s.ShouldShow=function(){return i.Player.ShareIsClick.val&&i.Player.bSholdShowShare()},s.Show=function(){return a.emit(o.EventHideGameClube),u.ShowUI(l),i.Player.ShareIsClick.val=!1,i.Player.saveData(),l.getName()},n}(w),v=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var s=n.prototype;return s.ShouldShow=function(){var t=c.getNoticeContent();return t!=f&&!i.User.IsNoticeShown(t)},s.Show=function(){a.emit(o.EventHideGameClube),u.ShowUI(h);var t=c.getNoticeContent();return i.User.setLastNoticeShowContent(t),h.getName()},n}(w);n._RF.pop()}}}));

System.register("chunks:///_virtual/UITestLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./BundleManager.ts","./DataManager.ts","./EventManager.ts","./Log.ts","./UIBase.ts","./UIHelp.ts","./GameAdMgr.ts","./auto_UITestLayer.ts","./UIChallengeGameLayer.ts","./UIHallSetting.ts","./UILoginShareLayer.ts"],(function(e){var t,i,n,a,s,o,r,l,c,u,h,_,f,d,g,p,v,k,m;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,a=e.EditBox,s=e.sys,o=e.director},function(e){r=e.GameEvent},function(e){l=e.default},function(e){c=e.BundleManager},function(e){u=e.default},function(e){h=e.default},function(e){_=e.default},function(e){f=e.UIBase},function(e){d=e.default},function(e){g=e.GameAdMgr},function(e){p=e.default},function(e){v=e.default},function(e){k=e.default},function(e){m=e.default}],execute:function(){var I,C;i._RF.push({},"1b0ab5DrtlIV6ZAD5ReQxWW","UITestLayer",void 0);var y=n.ccclass;n.property,e("default",y("UITestLayer")(((C=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._ui=void 0,t}t(i,e);var n=i.prototype;return n.onInit=function(e){},n.onUILoad=function(){this._ui=this.node.addComponent(p),this.addInterlayer(),d.IsShowingUI(v)&&(this._ui.et_btn_skip_to_level.getComponent(a).placeholder="dayId")},n.onUIStart=function(){},n.onUIEnable=function(){this.registerClick(this._ui.btn_close,this.onClose),this.registerClick(this._ui.btn_clear_cache,this.clearCache),this.registerClick(this._ui.btn_clear_server_data,this.clearServerData),this.registerClick(this._ui.btn_clear_local_data,this.clearLocalData),this.registerClick(this._ui.btn_skip_sub_level,this.skipSubLevel),this.registerClick(this._ui.btn_skip_game,this.skipGame),this.registerClick(this._ui.btn_skip_to_level,this.skipToLevel),this.registerClick(this._ui.btn_unlock_all,this.unlockAll),this.registerClick(this._ui.btn_go_to_generator,this.goToGenerator),this.registerClick(this._ui.btn_no_ad,this.setNoAd),this.registerClick(this._ui.btn_reduce_time,this.reduceTime),this.registerClick(this._ui.btn_daily_share,this.showDailyShare),this.registerClick(this._ui.btn_add_prop,this.addProp),this.registerClick(this._ui.btn_one_key_clear,this.oneKeyClear)},n.onUIDisable=function(){},n.onUIDestroy=function(){this.onClose()},n.onClose=function(){d.CloseUI(i)},n.closeDialog=function(){d.CloseUI(i),d.CloseUI(k)},n.clearCache=function(){c.ClearGameCache()},n.clearServerData=function(){_.log("clear server data"),u.Player.clearServerData()},n.clearLocalData=function(){_.log("clear local data"),s.localStorage.clear()},n.skipGame=function(){h.emit(r.EventGameSkip),this.closeDialog()},n.skipSubLevel=function(){h.emit(r.EventSubLevelSkip),this.closeDialog()},n.skipToLevel=function(){if(d.IsShowingUI(v)){var e=Number.parseInt(this._ui.et_btn_skip_to_level.getComponent(a).string);if(isNaN(e))return;h.emit(r.EventGameSkipToLevel,e)}else{var t=Number.parseInt(this._ui.et_btn_skip_to_level.getComponent(a).string);if(isNaN(t))return;u.Player.LevelId.val=t,u.Player.saveData(),h.emit(r.EventGameSettle,!0)}this.closeDialog()},n.unlockAll=function(){for(var e=0;e<10;e++)u.Player.ThemeList.unLockTheme(e),u.Player.SkinList.unLockSkin(e);u.Player.saveData(),this.closeDialog()},n.goToGenerator=function(){l.pauseMusic(),o.loadScene("WaterSortGenerator")},n.setNoAd=function(){g.getInstance().SetNoAd(!0),this.closeDialog()},n.reduceTime=function(){h.emit(r.EventGameReduceTime),this.closeDialog()},n.showDailyShare=function(){d.ShowUI(m),this.closeDialog()},n.addProp=function(){var e=Number.parseInt(this._ui.et_btn_add_prop.getComponent(a).string);e&&u.Player.AddProp(e,1)},n.oneKeyClear=function(){h.emit(r.EventGameOneKeyClear)},i}(f))._prefabUrl="ui/UITestLayer",C._className="UITestLayer",I=C))||I);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIThemeSkin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIBase.ts","./UIHelp.ts","./auto_UIThemeSkin.ts","./tableView.ts","./tableViewCell.ts","./SkinItem.ts","./ThemeItem.ts"],(function(e){var t,i,n,o,l,s,h,a,r,u,c,m,d,f,I,_,p,C,S,T,b,g,k,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,s=e._decorator,h=e.Prefab,a=e.instantiate,r=e.Button,u=e.Label,c=e.Color},function(e){m=e.GameEvent,d=e.Constant,f=e.Sfx},function(e){I=e.default},function(e){_=e.default},function(e){p=e.default},function(e){C=e.UIBase},function(e){S=e.default},function(e){T=e.default},function(e){b=e.TableView},function(e){g=e.TableViewCell},function(e){k=e.default},function(e){w=e.default}],execute:function(){var v,A,N,V,x,y,U,E;l._RF.push({},"4d434K956lMS7XJ/pEDSVsA","UIThemeSkin",void 0);var P=s.ccclass,G=s.property;e("default",(v=P("UIThemeSkin"),A=G({type:h}),N=G({type:h}),v(((E=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(t=e.call.apply(e,[this].concat(l))||this)._ui=void 0,n(t,"skinCell",y,o(t)),n(t,"themeCell",U,o(t)),t.tapIndex=1,t.SKIN_TAP=1,t.THEMES_TAP=2,t.childGameNum=0,t.numberInARow=0,t.currentSkinId=0,t.currentThemeId=0,t}i(t,e);var l=t.prototype;return l.onInit=function(e){},l.onUILoad=function(){this._ui=this.node.addComponent(T),this.addInterlayer(),this._ui.colorLayer.active=!1,this._ui.skinTableView.getComponent(b).delegate=this,this._ui.skinTableView.getComponent(b).datasource=this,this._ui.themeTableView.getComponent(b).delegate=this,this._ui.themeTableView.getComponent(b).datasource=this,this.runOpenAni(this.node)},l.onUIStart=function(){this.currentSkinId=_.Player.SkinId.val,this.currentThemeId=_.Player.ThemeId.val,this.selectTheme()},l.onUIEnable=function(){this.registerClick(this._ui.close_btn,this.onCloseClick),this.registerClick(this._ui.skin_btn,this.toSkinClick),this.registerClick(this._ui.theme_btn,this.toThemeClick),this.registerEvent(m.EventChangeSkinChoose,this.refreshSelectedSkin),this.registerEvent(m.EventChangeThemeChoose,this.refreshSelectedTheme)},l.onUIDisable=function(){},l.onUIDestroy=function(){this.onClose()},l.onClose=function(){S.CloseUI(t)},l.loadContentView=function(){if(this.initScrollInfo(),this.tapIndex==this.SKIN_TAP){this._ui.skinTableView.active=!0,this._ui.themeTableView.active=!1;var e=Math.ceil(this.currentSkinId/3)-(this.currentSkinId%3==0?1:2),t=this._ui.skinTableView.getComponent(b).getOffsetFromIndex(e);this._ui.skinTableView.getComponent(b).scrollToOffset(t)}else{this._ui.skinTableView.active=!1,this._ui.themeTableView.active=!0;var i=Math.ceil(this.currentThemeId/3)-(this.currentThemeId%3==0?1:2),n=this._ui.themeTableView.getComponent(b).getOffsetFromIndex(i);this._ui.themeTableView.getComponent(b).scrollToOffset(n)}},l.initScrollInfo=function(){this.tapIndex==this.SKIN_TAP?(this.childGameNum=d.totalSkinNum,this.numberInARow=3):(this.childGameNum=d.totalThemeNum,this.numberInARow=3)},l.refreshSelectedSkin=function(e){var t=Math.floor(this.currentSkinId/this.numberInARow),i=Math.floor(e/this.numberInARow);t!=i?(this.updateCellAtIndex(t),this.updateCellAtIndex(i)):this.updateCellAtIndex(t),this.currentSkinId=e},l.refreshSelectedTheme=function(e){var t=Math.floor(this.currentThemeId/this.numberInARow),i=Math.floor(e/this.numberInARow);this.currentThemeId=e,t!=i?(this.updateCellAtIndex(t),this.updateCellAtIndex(i)):this.updateCellAtIndex(t)},l.updateCellAtIndex=function(e){if(this.tapIndex==this.SKIN_TAP){this.currentSkinId=_.Player.SkinId.val;var t=this._ui.skinTableView.getComponent(b).cellAtIndex(e);if(t)t.getComponent(k).SetData(e,this.childGameNum,this.currentSkinId)}else{this.currentThemeId=_.Player.ThemeId.val;var i=this._ui.themeTableView.getComponent(b).cellAtIndex(e);if(i)i.getComponent(w).SetData(e,this.childGameNum,this.currentThemeId)}},l.tableViewNumberOfCells=function(e){return this.childGameNum%3==0?Math.floor(this.childGameNum/3):Math.floor(this.childGameNum/3)+1},l.tableViewCellForIndex=function(e,t){if(this.tapIndex==this.SKIN_TAP){var i=e.dequeueCell();if(!i)i=a(this.skinCell).getComponent(g);return i.getComponent(k).SetData(t,this.childGameNum,this.currentSkinId),i}var n=e.dequeueCell();return n||(n=a(this.themeCell).getComponent(g)),n.getComponent(w).SetData(t,this.childGameNum,this.currentThemeId),n},l.tableViewScrolling=function(e){},l.tableViewCellHeightForIndex=function(e,t){return 378},l.toSkinClick=function(){this.tapIndex!=this.SKIN_TAP&&(I.playEffect(f.SOUND_BUTTON),this.selectSkin())},l.selectSkin=function(){this.tapIndex=this.SKIN_TAP,this._ui.skin_btn.getComponent(r).interactable=!1,S.SetSpriteFrame(this._ui.skin_btn,"common/Game_toggle_huang"),this._ui.skin_label.getComponent(u).outlineColor=new c(189,71,24,255),this._ui.theme_btn.getComponent(r).interactable=!0,S.SetSpriteFrame(this._ui.theme_btn,"common/Game_toggle_hui"),this._ui.theme_label.getComponent(u).outlineColor=new c(94,94,94,255),this.loadContentView()},l.toThemeClick=function(){this.tapIndex!=this.THEMES_TAP&&(I.playEffect(f.SOUND_BUTTON),this.selectTheme())},l.selectTheme=function(){this.tapIndex=this.THEMES_TAP,this._ui.skin_btn.getComponent(r).interactable=!0,S.SetSpriteFrame(this._ui.skin_btn,"common/Game_toggle_hui"),this._ui.skin_label.getComponent(u).outlineColor=new c(94,94,94,255),this._ui.theme_btn.getComponent(r).interactable=!1,S.SetSpriteFrame(this._ui.theme_btn,"common/Game_toggle_huang"),this._ui.theme_label.getComponent(u).outlineColor=new c(189,71,24,255),this.loadContentView()},l.onCloseClick=function(){I.playEffect(f.SOUND_BUTTON),this._ui.colorLayer.active=!0,this.removeSp()},l.removeSp=function(){var e=this;this.runCloseAni(this.node,(function(){p.emit(m.EventShowGameClube),e.onClose()}))},t}(C))._prefabUrl="ui/UIThemeSkin",E._className="UIThemeSkin",y=t((x=E).prototype,"skinCell",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(x.prototype,"themeCell",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=x))||V));l._RF.pop()}}}));

System.register("chunks:///_virtual/UIUtil.ts",["cc","./DataManager.ts","./UIHelp.ts","./ABTestUtil.ts"],(function(e){var t,n,i,r,a,o,c,l,u;return{setters:[function(e){t=e.cclegacy,n=e.Color,i=e.Rect,r=e.UITransform,a=e.v3,o=e.tween},function(e){c=e.default},function(e){l=e.default},function(e){u=e.ABTestUtil}],execute:function(){t._RF.push({},"58f560NeVRHJKJGsdSpfZDH","UIUtil",void 0);new n(161,187,237,255),new n(237,201,163,255),new n(223,179,223,255),new n(142,212,193,255),new n(181,223,245,255),new n(241,174,86,255),new n(89,190,130,255),new n(138,146,255,255),new n(167,176,205,255),new n(28,24,68,255),new n(179,208,235,255),new n(237,212,179,255),new n(218,192,218,255),new n(151,229,210,255),new n(191,221,236,255),new n(241,177,91,255),new n(100,201,141,255),new n(186,173,254,255),new n(185,191,212,255),new n(22,49,94,255),e("UIUtil",function(){function e(){}return e.SetThemeBg=function(e){var t=c.Player.ThemeId.val;u.IsABTestC_V4()&&0==t&&(t="challenge");var n="bg/Game_bg_"+t;l.SetSpriteFrame(e,n)},e.SetThemeBgMask=function(e,t){var n=c.Player.ThemeId.val;u.IsABTestC_V4()&&0==n&&(n="challenge");var i="bg/Game_bg_"+n;l.SetSpriteFrame(e,i),l.SetSpriteFrame(t,i)},e.SetRackBg=function(e,t){var n=c.Player.ThemeId.val;if(u.IsABTestC_V4()&&0==n)e.active=!1;else{e.active=!0;var i="jiazi/"+n+"_jiazi"+(t?1:2);l.SetSpriteFrame(e,i)}},e.GetNodeWorldRect=function(e){var t=new i;t.width=e.getComponent(r).width,t.height=e.getComponent(r).height;var n=e.getWorldPosition().toVec2();return n.x-=t.width*(e.getComponent(r).anchorX-.5),n.y-=t.height*(e.getComponent(r).anchorY-.5),t.center=n,t},e.BezierTo=function(e,t,n,i,r,c){c=c||Object.create(null);return c.onUpdate=function(t,o){var c,l,u,w,s,f;e.position=(u=i,w=r,s=(1-(c=o))*(1-c)*(l=n).x+2*c*(1-c)*u.x+c*c*w.x,f=(1-c)*(1-c)*l.y+2*c*(1-c)*u.y+c*c*w.y,a(s,f,0))},o(e).to(t,{},c)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/User.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIHelp.ts","./UIGetGiftBox.ts","./UILoginShareLayer.ts","./UIShareRewardLayer.ts","./PlatformManager.ts","./TAData.ts","./SaveData.ts"],(function(t){var e,a,n,i,s,o,r,u,c,l,h,f,v,d,S,y,g,D,_,C,I;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){n=t.cclegacy},function(t){i=t.GAME_VERSION,s=t.GameEvent,o=t.PROP_ID},function(t){r=t.default},function(t){u=t.default},function(t){c=t.default},function(t){l=t.default},function(t){h=t.default},function(t){f=t.default},function(t){v=t.default},function(t){d=t.default},function(t){S=t.TAData},function(t){y=t.SaveDataInt,g=t.SaveDataStr,D=t.SaveDataMapStr,_=t.SaveDataBool,C=t.SaveDataMapInt,I=t.SaveData}],execute:function(){n._RF.push({},"66462umSFlIh5VPvM8tWpFH","User",void 0);var p=function(t){function n(){var e;return(e=t.call(this)||this).UserFlag=e.createData(y,"UserFlag"),e.InstallVersion=e.createData(g,"InstallVersion"),e.CurrentVersion=e.createData(g,"CurrentVersion"),e.ABVersions=e.createData(D,"ABVersions"),e._currPlayerId=e.createData(y,"currPlayerId"),e._soundEffect=e.createData(_,"soundEffect","1"),e._soundMusic=e.createData(_,"soundMusic","1"),e._vibrate=e.createData(_,"vibrate","1"),e._isShowNewTypeDialogGuide=e.createData(C,"isShowNewTypeDialogGuide",""),e._lastNoticeContent=e.createData(g,"lastNoticeContent",""),e}return e(n,t),a(n,[{key:"CurrPlayerId",get:function(){return this._currPlayerId.val},set:function(t){this._currPlayerId.val=t}},{key:"SoundEffect",get:function(){return this._soundEffect.val},set:function(t){this._soundEffect.val=t}},{key:"SoundMusic",get:function(){return this._soundMusic.val},set:function(t){this._soundMusic.val=t}},{key:"Vibrate",get:function(){return this._vibrate.val},set:function(t){this._vibrate.val=t}}]),n}(I);t("Event_Sound_Effect","Event_Sound_Effect"),t("Event_Sound_Music","Event_Sound_Music"),t("User",function(t){function a(){var e;return(e=t.call(this)||this).load(),e}e(a,t);var n=a.prototype;return n.initData=function(){0==this.UserFlag.val?(this.UserFlag.val=1,this.initSystem(!0)):this.initSystem(!1),""==this.InstallVersion.val&&(this.InstallVersion.val=i);var t=this.CurrentVersion.val;t!=i&&(this.CurrentVersion.val=i,this.OnVersionUpdate(t)),this.save()},n.initSystem=function(t){var e=this;d.onHide((function(){})),d.onShow((function(t){e.CheckShareStatus()})),r.init(this.SoundMusic,this.SoundEffect,1)},n.switchRole=function(t){return t!=this.CurrPlayerId&&(this.CurrPlayerId=t,this.save(),!0)},n.setSoundEffect=function(t){t!=this.SoundEffect&&(this.SoundEffect=t,t?r.openEffect():r.closeEffect(),this.save())},n.setSoundMusic=function(t){t!=this.SoundMusic&&(this.SoundMusic=t,t?r.openMusic():r.closeMusic(),this.save())},n.setVibratec=function(t){t!=this.Vibrate&&(this.Vibrate=t,this.save())},n.IsShowNewTypeDialogGuide=function(t){return 1==this._isShowNewTypeDialogGuide.getValue(t)},n.setIsShowNewTypeDialogGuide=function(t){this._isShowNewTypeDialogGuide.updateValue(t,1),this.save()},n.getABTestVersion=function(t){return this.ABVersions.getValue(t)},n.setABTestVersion=function(t,e){this.ABVersions.updateValue(t,e),this.save()},n.OnVersionUpdate=function(t){},n.CheckShareStatus=function(){u.Player.ShareIsClick.val&&u.Player.bSholdShowShare()&&(c.emit(s.EventHideGameClube),l.ShowUI(v),u.Player.ShareIsClick.val=!1,u.Player.saveData()),u.Player.LoginShareClick.val&&u.Player.bShouldShowDailyShare()&&(S.Mgr.SendEventLoginShare(u.TA.TotalLoginDays.val),u.Player.LoginShareClick.val=!1,u.Player.LastShowLoginShareTime.val=u.getServerTime(),u.Player.saveData(),u.Player.AddProp(o.UNLOCK_BOTTLE,1,!1),l.ShowUI(h,(function(){c.emit(s.EventHideGameClube),l.CloseUI(f)}),{showClaimBtn:!0,rewards:{prop:{id:o.UNLOCK_BOTTLE,count:1}},closeCallback:function(){c.emit(s.EventPropCountChange)}}))},n.setLastNoticeShowContent=function(t){this._lastNoticeContent.val=t,this.save()},n.IsNoticeShown=function(t){return this._lastNoticeContent.val==t},a}(p));n._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){var e,n,r,o;return{setters:[function(t){e=t.cclegacy,n=t.randomRangeInt,r=t.sys,o=t.Vec3}],execute:function(){e._RF.push({},"73706PgsvhF17IXpnIvVMze","Utils",void 0);t("default",function(){function t(){}return t.GetTime=function(){return this.GetLocalTime()},t.GetLocalTime=function(){return(new Date).getTime()},t.GetLocalSecondsTime=function(){return Math.floor(t.GetLocalTime()/1e3)},t.IsSameDay=function(t,e){var n=new Date(t),r=new Date(e);return n.getDate()==r.getDate()&&n.getMonth()==r.getMonth()&&n.getFullYear()==r.getFullYear()},t.GetMonthDay=function(t){var e=[31,28,31,30,31,30,31,31,30,31,30,31];return(t%4==0&&t%100!=0||t%400==0)&&(e[1]=29),e},t.GetWeekDay=function(t,e,n){var r=e,o=t;return 1!=e&&2!=e||(r+=12,o--),Math.floor((n+2*e+3*(r+1)/5+o+o/4-o/100+o/400)%7+1)},t.GetTimeFormat=function(t){var e=new Date(t);return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},t.GetMonthAllDay=function(t,e){return this.GetMonthDay(t)[e]},t.GetDays=function(t,e,n){for(var r=this.GetMonthDay(t),o=0,a=0;a<e-1;a++)o+=r[a];return o+=n},t.GetDayStamp=function(t){return Math.floor(t.getTime()/864e5)},t.AddDate=function(t,e){for(var n=new Date(t),r=n.getDate()+e,o=n.getMonth(),a=n.getFullYear(),u=this.GetMonthDay(a);r>u[o-1];)r-=u[o-1],++o>12&&(a++,u=this.GetMonthDay(a));return new Date(a,o,r).getTime()},t.GetTimeString=function(t,e){void 0===e&&(e=!1),t=Math.max(t,0);var n=Math.floor(t/3600),r=Math.floor(t%3600/60),o=Math.floor(t%60),a=""+n,u=""+r,i=""+o;return n<10&&(a="0"+a),r<10&&(u="0"+u),o<10&&(i="0"+i),e||n>0?a+":"+u+":"+i:u+":"+i},t.GetDateStr=function(t){if(t<=0)return"";var e=new Date(t);return e.getFullYear()+":"+(e.getMonth()+1)+":"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},t.localDateToUtcTime=function(t,e,n,r){var o=new Date(t);return o.setHours(e),o.setMinutes(n),o.setSeconds(r),o.getTime()},t.MonthStr=function(t){var e="";if(t>0&&t<13){e=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][t-1]}return e},t.SplitInt=function(t,e){void 0===e&&(e=",");var n=[];""!=t&&t.split(e).forEach((function(t){n.push(parseInt(t))}));return n},t.SplitStr=function(t,e){void 0===e&&(e=",");var n=[];return""!=t&&(n=t.split(e)),n},t.GetNum2Thousands=function(t,e){var n=t.toString();if(t>=Math.pow(10,9)){var r=t/Math.pow(10,9);n=e?Math.floor(r)+"B":r.toFixed(2)+"B"}else if(t>=Math.pow(10,6)){var o=t/Math.pow(10,6);n=e?Math.floor(o)+"M":o.toFixed(2)+"M"}else if(t>=Math.pow(10,4)){var a=t/Math.pow(10,3);n=e?Math.floor(a)+"K":a.toFixed(2)+"K"}return n},t.GetLinearValue=function(t,e,n,r,o,a){void 0===a&&(a=!0);var u=e+(r-e)*(o-t)/(n-t);return a&&(u=this.Clamp(u,e,r)),u},t.Clamp=function(t,e,n){var r=e<n?e:n,o=e>n?e:n;return t<r?r:t>o?o:t},t.ConvertVersionStringToNumber=function(t){var e,n=0;return 3!=(e=t.split(".")).length?0:(n+=1e4*Number(e[0]),n+=100*Number(e[1]),n+=Number(e[2]))},t.randIndex=function(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];for(var o=n(1,e),a=0,u=0;u<t.length;++u)if(t[u]>0&&(a+=t[u])>=o)return u;return 0},t.shuffleArray=function(t,e){void 0===e&&(e=-1),-1==e&&(e=t.length);for(var n=e-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),o=[t[r],t[n]];t[n]=o[0],t[r]=o[1]}return t},t.GetToday=function(){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()},t.IsBrowser=function(){return r.isBrowser},t.RandomUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},t.twoBezier=function(t,e,n,r){var a=Math.pow(1-t,2)*e.x+2*t*(1-t)*n.x+Math.pow(t,2)*r.x,u=Math.pow(1-t,2)*e.y+2*t*(1-t)*n.y+Math.pow(t,2)*r.y;return new o(a,u,0)},t.cubicBezier=function(t,e,n,r,a){var u=1-t,i=u*u,c=t*t,l=e.multiplyScalar(i*u),f=n.multiplyScalar(3*i*t),s=r.multiplyScalar(3*u*c),h=a.multiplyScalar(c*t);return new o(l.x+f.x+s.x+h.x,l.y+f.y+s.y+h.y,l.z+f.z+s.z+h.z)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/VibrateUtil.ts",["cc","./DataManager.ts"],(function(t){var e,i,a,r;return{setters:[function(t){e=t.cclegacy,i=t.sys,a=t.native},function(t){r=t.default}],execute:function(){e._RF.push({},"f0efeRD6XBK87eCeNLlOPFr","VibrateUtil",void 0);t("VibrateUtil",function(){function t(){}return t.vibrate=function(){r.User.Vibrate&&(window.wx?wx.vibrateShort({type:"heavy"}):i.platform==i.Platform.ANDROID?a.reflection.callStaticMethod("com/cocos/lib/CocosHelper","vibrate","(F)V",.015):window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(15))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/WaterSortGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelMapLoader.ts","./BottleData.ts","./BundleManager.ts","./CfgManager.ts","./DataManager.ts","./ExceptionHandler.ts","./Log.ts","./UIFit.ts","./UIHelp.ts","./GameUtils.ts","./UIGameLayer.ts","./BottleItem.ts","./BottleRackItem.ts","./PlatformManager.ts","./BottleItemPool.ts","./TAData.ts","./BottleSetting.ts"],(function(t){var e,i,n,o,l,s,a,r,h,c,u,d,p,f,g,m,b,v,k,w,C,I,S,B,y,E,x,M,L,_,T,R,N,O,z,F,A,D,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,a=t.EditBox,r=t.Toggle,h=t.ToggleContainer,c=t.Node,u=t.Prefab,d=t.ScrollView,p=t.Label,f=t.Size,g=t.Sprite,m=t.sys,b=t.Tween,v=t.tween,k=t.UIOpacity,w=t.Component},function(t){C=t.LevelMapLoader},function(t){I=t.BottleData2,S=t.BottleData,B=t.CompleteType},function(t){y=t.BundleManager},function(t){E=t.default},function(t){x=t.default},function(t){M=t.ExceptionHandler},function(t){L=t.default},function(t){_=t.default},function(t){T=t.default},function(t){R=t.default},function(t){N=t.UIGameLayer},function(t){O=t.default},function(t){z=t.default},function(t){F=t.default},function(t){A=t.default},function(t){D=t.TAData},function(t){P=t.default}],execute:function(){var G,U,q,W,V,J,j,H,X,K,Q,Y,Z,$,tt,et,it,nt,ot,lt,st,at,rt,ht,ct,ut,dt,pt,ft,gt,mt,bt,vt,kt,wt,Ct,It,St,Bt,yt,Et,xt,Mt,Lt,_t,Tt,Rt;l._RF.push({},"72940dMXgtBWKqMd7Ol8/h2","WaterSortGenerator",void 0);var Nt=s.ccclass,Ot=s.property;t("WaterSortGenerator",(G=Nt("WaterSortGenerator"),U=Ot(a),q=Ot(a),W=Ot(r),V=Ot(a),J=Ot(a),j=Ot(a),H=Ot(r),X=Ot(r),K=Ot(r),Q=Ot(h),Y=Ot(c),Z=Ot(u),$=Ot(d),tt=Ot(c),et=Ot(P),it=Ot(a),nt=Ot(r),ot=Ot(a),lt=Ot(a),st=Ot(a),at=Ot(c),rt=Ot(p),G((ut=e((ct=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return e=t.call.apply(t,[this].concat(l))||this,n(e,"sizeEB",ut,o(e)),n(e,"rackIndexEB",dt,o(e)),n(e,"completeToggle",pt,o(e)),n(e,"levelEB",ft,o(e)),n(e,"shuffleEB",gt,o(e)),n(e,"bottleColorsEB",mt,o(e)),n(e,"swapToggle",bt,o(e)),n(e,"videoToggle",vt,o(e)),n(e,"unknownToggle",kt,o(e)),n(e,"colorsGroup",wt,o(e)),n(e,"bottleParent",Ct,o(e)),n(e,"bottleRackPrefab",It,o(e)),n(e,"scrollView",St,o(e)),n(e,"bottleMenu",Bt,o(e)),n(e,"settingMenu",yt,o(e)),n(e,"unlockColorEB",Et,o(e)),n(e,"stoneToggle",xt,o(e)),n(e,"unlockIdEB",Mt,o(e)),n(e,"keyIndexEB",Lt,o(e)),n(e,"levelJsonEB",_t,o(e)),n(e,"toastNode",Tt,o(e)),n(e,"toastLabel",Rt,o(e)),e._selectedIndex=void 0,e._isSwapBottleMode=!1,e.selectedColorID=0,e.swapFromIndex=null,e._rackList=[],e.map=[],e.isShuffled=!1,e._dataMgr=x,e}i(e,t);var l=e.prototype;return l.onLoad=function(){_.initFit(new f(750,1334)),E.loadAll((function(){L.log("Config Loaded")})),F.initPlatformInfo(),this._dataMgr.createUser(),this._dataMgr.createPlayer(this._dataMgr.User.CurrPlayerId),x.createTA(),D.Mgr.launch(),M.init(),y.loadPrefab(O.getUrl(),(function(t,e){e&&A.setBottlePrefab(e)})),R.ListLiquidColors(),this.colorsGroup.toggleItems.forEach((function(t,e){t.node.getChildByName("Color").getComponent(g).color=R.GetLiquidColor(e)})),this.settingMenu.setConfigCallback(this.OnSettingConfigCallback.bind(this)),this.settingMenu.setBottleLiquidCheckListener(this.OnBottleLiquidCheck.bind(this))},l.OnSelectColor=function(t){var e;L.log("OnSelectColor",t);var i=null==(e=this.colorsGroup)?void 0:e.toggleItems.findIndex((function(t){return null==t?void 0:t.isChecked}));this.selectedColorID=i,this.settingMenu.setSelectedColor(this.selectedColorID)},l.OnClickAddRack=function(){this.AddRack([])},l.AddRack=function(t){var e=this,i=this._rackList.length,n={index:i,bottleData:t,isUnknown:!1,spacingX:10,onClickListener:function(t,i,n){e.OnClickBottle(t,i,n)},onLiquidCheckCallback:function(t,i,n){e.OnClickLiquidItem(t,i,n)},isEditor:!0},o=T.CreateWidget(z,this.bottleRackPrefab,n);o.SetSwapEnable(this.swapToggle.isChecked),this.bottleParent.addChild(o.node),this._rackList.push(o),0==t.length&&(this.map[i]=[],this.rackIndexEB.string=i.toString())},l.OnClickAdd=function(){this.swapFromIndex=null;for(var t=this.GetBottleSize(),e=[],i=0;i<t;i++)e.push(this.selectedColorID);this.AddBottle(e,0)},l.onClickAddEmpty=function(){this.swapFromIndex=null;var t=this.GetBottleSize(),e=new Array(t).fill(0),i=this.selectedColorID;this.AddBottle(e,i)},l.AddBottle=function(t,e){void 0===e&&(e=0),this.swapFromIndex=null;var i=new I;this.videoToggle.isChecked&&t.fill(0);var n=this.stoneToggle.isChecked?1:0;if(1!=n||this.IsBottleSimpleColor(t)){var o=Number.parseInt(this.unlockColorEB.string);isNaN(o)&&(o=0);var l=Number.parseInt(this.unlockIdEB.string);isNaN(l)&&(l=0);var s=Number.parseInt(this.keyIndexEB.string);isNaN(s)&&(s=-1),i.unlockColor=o,i.stoneBottle=n,i.unlockId=l;var a=new Array(t.length).fill(0);i.bottles.push(new S(t,a,s,!1,this.videoToggle.isChecked,!1,-1,this.completeToggle.isChecked?B.NEVER:B.END,e));var r=this.GetCurRackIndex();this.map[r]?(this.map[r].push(i),this._rackList[r].UpdateRackData(this.map[r])):this.ShowToast("没有第"+r+"个架子")}else this.ShowToast("石头瓶不能配置多个颜色")},l.ReadyOrSwapLiquid=function(t,e,i,n){if(void 0===n&&(n=-1),null!=this.swapFromIndex)if(-1==n){if(!this._rackList[this.swapFromIndex[0]]._bottleList[this.swapFromIndex[1]].liquids[this.swapFromIndex[2]].toggle.isChecked)return void(this.swapFromIndex=[t,e,i,0])}else if(!this.settingMenu.depthBottles[this.swapFromIndex[3]].liquids[this.swapFromIndex[2]].toggle.isChecked)return void(this.swapFromIndex=[t,e,i,n]);if(-1==n&&(n=0),null==this.swapFromIndex)this.swapFromIndex=[t,e,i,n];else if(this.swapFromIndex[0]!=t||this.swapFromIndex[1]!=e||this.swapFromIndex[2]!=i||this.swapFromIndex[3]!=n){var o=this.swapFromIndex,l=o[0],s=o[1],a=o[2],r=o[3],h=t,c=e,u=i,d=n,p=[this.map[h][c].bottles[d].bottle[u],this.map[l][s].bottles[r].bottle[a]];this.map[l][s].bottles[r].bottle[a]=p[0],this.map[h][c].bottles[d].bottle[u]=p[1],this.RefreshRack(l),this.RefreshRack(h),this.settingMenu.node.active&&this.settingMenu.init(this.map[this.settingMenu.rackIndex][this.settingMenu.selectedIndex].clone()),this.swapFromIndex=null,this.isShuffled=!0}},l.ChangeUnknown=function(t,e,i,n){void 0===n&&(n=-1),-1==n&&(n=0);var o=this.map[t][e].bottles[n].unknowns,l=1-(o[i]||0);o[i]=l,0==n&&this._rackList[t]._bottleList[e].UpdateUnknowns(o),this.settingMenu.node.active&&this.settingMenu.depthBottles[n].UpdateUnknowns(o)},l.OnClickLiquidItem=function(t,e,i,n){void 0===n&&(n=-1),this.swapToggle.isChecked?this.ReadyOrSwapLiquid(t,e,i,n):this.unknownToggle.isChecked&&this.ChangeUnknown(t,e,i,n)},l.GetBottleSize=function(){var t=Number.parseInt(this.sizeEB.string);return t&&!Number.isNaN(t)||(t=5),t},l.GetCurRackIndex=function(){var t=Number.parseInt(this.rackIndexEB.string);return Number.isNaN(t)&&(t=0),t},l.OnBottleLiquidCheck=function(t,e,i,n){this.OnClickLiquidItem(t,e,i,n)},l.OnClickBottle=function(t,e,i){if(this._isSwapBottleMode){if(this._isSwapBottleMode=!1,!this._selectedIndex)return;var n=[this.map[this._selectedIndex[0]][this._selectedIndex[1]],this.map[t][e]];return this.map[t][e]=n[0],this.map[this._selectedIndex[0]][this._selectedIndex[1]]=n[1],this.RefreshRack(t),void this.RefreshRack(this._selectedIndex[0])}this._selectedIndex&&this._selectedIndex[0]==t&&this._selectedIndex[1]==e&&this.bottleMenu.active?this.bottleMenu.active=!1:(this.bottleMenu.active=!0,this.bottleMenu.worldPosition=i.node.worldPosition.clone(),this._selectedIndex=[t,e],L.log("OnClick",i))},l.OnClickDelete=function(){this.bottleMenu.active=!1,this._selectedIndex&&this.DeleteBottle.apply(this,this._selectedIndex)},l.DeleteBottle=function(t,e){this.swapToggle.isChecked||(this.map[t].splice(e,1),this._rackList[t].UpdateRackData(this.map[t]))},l.OnClickSetting=function(){if(this._selectedIndex){this.bottleMenu.active=!1,this.settingMenu.node.active=!0;var t=this._selectedIndex,e=t[0],i=t[1];this.settingMenu.setRackIndex(e),this.settingMenu.setSelectedIndex(i),this.settingMenu.setSelectedColor(this.selectedColorID);var n=this.map[e][i].segment;this.settingMenu.setSelectedSize(n),this.settingMenu.init(this.map[e][i].clone())}},l.OnClickSwap=function(){this._isSwapBottleMode=!0,this.bottleMenu.active=!1},l.OnSettingConfigCallback=function(t,e,i){i&&(0==i.bottles.length?this.DeleteBottle(t,e):(this.map[t][e]=i,this.RefreshRack(t)))},l.OnSwapToggleChanged=function(){for(var t=0;t<this._rackList.length;t++)this._rackList[t].SetSwapEnable(this.swapToggle.isChecked);this.settingMenu.setSwapEnable(this.swapToggle.isChecked)},l.OnVideoToggleChanged=function(){this.settingMenu.setVideoBottle(this.videoToggle.isChecked)},l.OnUnknownToggleChanged=function(){for(var t=0;t<this._rackList.length;t++)this._rackList[t].SetSwapEnable(this.unknownToggle.isChecked);this.settingMenu.setSwapEnable(this.unknownToggle.isChecked)},l.OnClickRandom=function(){if(this.swapFromIndex=null,this.settingMenu.onClickClose(),0!=this.map.length){var t=Number.parseInt(this.shuffleEB.string);t||(t=100),this.isShuffled=!0,L.log("generate",this.map,"shuffleCount",t);for(var e=0,i=0;e<t&&i<2*t;){i++;for(var n=this.calcComplexity(this.map),o=[],l=0;l<this.map.length;l++)for(var s=0;s<this.map[l].length;s++)for(var a=0;a<this.map[l][s].bottles.length;a++)for(var r=0;r<this.map[l][s].bottles[a].bottle.length;r++)0!=this.map[l][s].bottles[a].bottle[r]&&o.push([l,s,a,r]);for(var h=o[Math.floor(Math.random()*o.length)],c=h[0],u=h[1],d=h[2],p=h[3],f=this.map[c][u].bottles[d].bottle[p],g=[],m=0;m<this.map.length;m++)for(var b=0;b<this.map[m].length;b++)for(var v=0;v<this.map[m][b].bottles.length;v++)for(var k=0;k<this.map[m][b].bottles[v].bottle.length;k++){var w=this.map[m][b].bottles[v].bottle[k];0!=w&&w!=f&&g.push([m,b,v,k])}if(0==g.length){L.log("no to position");break}var C=g[Math.floor(Math.random()*g.length)],I=C[0],S=C[1],B=C[2],y=C[3],E=[this.map[I][S].bottles[B].bottle[y],this.map[c][u].bottles[d].bottle[p]];if(this.map[c][u].bottles[d].bottle[p]=E[0],this.map[I][S].bottles[B].bottle[y]=E[1],this.calcComplexity(this.map).sum<n.sum){var x=[this.map[I][S].bottles[B].bottle[y],this.map[c][u].bottles[d].bottle[p]];this.map[c][u].bottles[d].bottle[p]=x[0],this.map[I][S].bottles[B].bottle[y]=x[1]}else e++}L.log("tryCount:",i),L.log("after shuffle:",this.map),this.RefreshAllBottles()}},l.OnClickReset=function(){this.swapFromIndex=null,this.isShuffled?(this.isShuffled=!1,this.RefreshAllBottles()):L.log("no shuffle, no reset")},l.OnClickCopy=function(){0==this.map.length?this.RestoreMap():this.CopyAndSaveMap()},l.OnClickLevelAdd=function(){var t=Number.parseInt(this.levelEB.string);isNaN(t)&&(t=1),t++,this.levelEB.string=t.toString()},l.OnClickLevelReduce=function(){var t=Number.parseInt(this.levelEB.string);isNaN(t)&&(t=1),t--,this.levelEB.string=t.toString()},l.OnClickLoad=function(){var t=this.levelEB.string;""==t&&(t="1"),this.swapFromIndex=null;var e=Number.parseInt(t),i=C.getLevelMap(e);this.map=i.map((function(t){return t.map((function(t){return new I(t)}))})),L.log("load level "+t+", map:",this.map),this.RestoreBottles(),this.sizeEB.string=C.getLevelSegment(e).toString(),this.map.length>0?this.ShowToast("已加载关卡"+e):this.ShowToast("关卡"+e+"不存在")},l.OnClickLoadJson=function(){try{var t=JSON.parse(this.levelJsonEB.string);this.map=t.map((function(t){return t.map((function(t){return new I(t)}))})),L.log("load json map:",this.map),this.RestoreBottles(),this.map.length>0?this.ShowToast("已加载关卡"):this.ShowToast("关卡json数据有误")}catch(t){L.warn(t),this.ShowToast("关卡json数据有误")}},l.RestoreMap=function(){L.log("restore");var t=m.localStorage.getItem("WaterSortResolver_LEVEL_MAP");null!=t&&""!=t&&(this.map=JSON.parse(t).map((function(t){return t.map((function(t){return new I(t)}))})),this.RestoreBottles()),this.sizeEB.string=m.localStorage.getItem("WaterSortResolver_SEGMENT")},l.CopyAndSaveMap=function(){var t=this;L.log("copy");var e=new Map;this.map.forEach((function(t){return t.forEach((function(t){return t.bottles.forEach((function(t){return t.bottle.forEach((function(t){if(t>0){var i=e.get(t);i||(i=0,e.set(t,0)),e.set(t,i+1)}}))}))}))}));var i=this.GetBottleSize(),n=!1;if(e.forEach((function(e,o){e%i!=0&&(n=!0,t.ShowToast("瓶子颜色"+o+"配置的数量不对，请检查，配置了"+e+"个，不是大小："+i+"的倍数"))})),n)return!1;var o=this.map.map((function(t){return t.map((function(t){return t.clone()}))}));if(0==o.length)return this.ShowToast("关卡数据为空"),!1;var l=JSON.stringify(o);L.log(l),this.ShowToast("✅关卡数据已复制"),m.localStorage.setItem("WaterSortResolver_LEVEL_MAP",l),m.localStorage.setItem("WaterSortResolver_SEGMENT",this.GetBottleSize());var s=document.createElement("input");return s.value=l,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0},l.OnClickAddColorBottle=function(){this.swapFromIndex=null;var t=this.bottleColorsEB.string.split(","),e=t.map((function(t){return Number.parseInt(t)}));if(e.some((function(t){return isNaN(t)||t<0||t>15})))return this.ShowToast("颜色输入有误，请检查"),void L.warn("颜色输入有误，请检查",t);this.AddBottle(e,0)},l.RefreshAllBottles=function(){for(var t=0;t<this._rackList.length;t++)this.RefreshRack(t)},l.RefreshRack=function(t){this._rackList[t].UpdateRackData(this.map[t])},l.calcComplexity=function(t){var e={sum:0},i=!0,n=!1,o=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)l.value.forEach((function(t){t.bottles.forEach((function(t){t.bottle.forEach((function(t,i,n){if(t!==n[i+1]){void 0===e[t]&&(e[t]=0);var o=n.length-i-1;e[t]+=o,e.sum+=o}}))}))}))}catch(t){n=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return e},l.IsBottleEmpty=function(t){for(var e=!0,i=0;i<t.length;i++)if(0!=t[i]){e=!1;break}return e},l.IsBottleSimpleColor=function(t){for(var e=0,i=0;i<t.length;i++)if(0!=t[i])if(0==e)e=t[i];else if(e!=t[i])return!1;return!0},l.ArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},l.RestoreBottles=function(){var t=this;this.isShuffled=!0,this._rackList.forEach((function(t){t.RecycleBottles(),t.node.removeFromParent(),t.node.destroy()})),this._rackList=[],this.bottleParent.removeAllChildren(),this.map.forEach((function(e){t.AddRack(e)}))},l.OnClickTryPlay=function(){this.CopyAndSaveMap()&&T.ShowUI(N,void 0,{isTestLevel:!0})},l.OnClickCheckSegment=function(){for(var t=!1,e=0;e<1e4;e++){var i=C.getLevelMap(e);if(i.length>0){var n=C.getLevelSegment(e),o=C.CheckSegment(i);0!=o&&o!=n&&(L.warn("❌mapID"+e+"的segment字段配置有误，应该为"+o),t=!0)}}t||this.ShowToast("✅检查完成，没有配错的segment")},l.OnClickDeleteRack=function(){this.swapFromIndex=null;var t=Number.parseInt(this.rackIndexEB.string);Number.isNaN(t)?this.ShowToast("请输入正确的rackIndex"):(this._rackList[t].RecycleBottles(),this._rackList[t].node.removeFromParent(),this._rackList[t].node.destroy(),this._rackList.splice(t,1),this.map.splice(t,1),this.rackIndexEB.string=(this._rackList.length-1).toString())},l.ShowToast=function(t){var e=this;b.stopAllByTarget(this.toastNode),this.toastLabel.string=t,T.SetOpacity(this.toastNode,0),this.toastNode.active=!0;var i=.7+.05*t.length;v(this.toastNode.getComponent(k)).to(.4,{opacity:255}).delay(i).to(.4,{opacity:0}).call((function(){e.toastNode.active=!1})).start()},e}(w)).prototype,"sizeEB",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=e(ct.prototype,"rackIndexEB",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=e(ct.prototype,"completeToggle",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=e(ct.prototype,"levelEB",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=e(ct.prototype,"shuffleEB",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=e(ct.prototype,"bottleColorsEB",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=e(ct.prototype,"swapToggle",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=e(ct.prototype,"videoToggle",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=e(ct.prototype,"unknownToggle",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=e(ct.prototype,"colorsGroup",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=e(ct.prototype,"bottleParent",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=e(ct.prototype,"bottleRackPrefab",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=e(ct.prototype,"scrollView",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=e(ct.prototype,"bottleMenu",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=e(ct.prototype,"settingMenu",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=e(ct.prototype,"unlockColorEB",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=e(ct.prototype,"stoneToggle",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=e(ct.prototype,"unlockIdEB",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=e(ct.prototype,"keyIndexEB",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=e(ct.prototype,"levelJsonEB",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=e(ct.prototype,"toastNode",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=e(ct.prototype,"toastLabel",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=ct))||ht));l._RF.pop()}}}));

System.register("chunks:///_virtual/WaterSortGeneratorChallenge.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelMapLoader.ts","./BottleData.ts","./Defines.ts","./BundleManager.ts","./CfgManager.ts","./DataManager.ts","./ExceptionHandler.ts","./Log.ts","./UIFit.ts","./UIHelp.ts","./GameUtils.ts","./UIChallengeGameLayer.ts","./BottleItem.ts","./ChallengeBottleRackItem.ts","./LongBottleItem.ts","./PlatformManager.ts","./BottleItemPool.ts","./LongBottleItemPool.ts","./TAData.ts","./BottleSetting.ts"],(function(t){var e,i,n,o,l,s,a,r,h,c,u,d,g,f,p,m,b,v,k,C,w,I,B,S,y,E,L,_,x,M,T,R,N,O,z,P,A,F,D,G,U,q;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,a=t.EditBox,r=t.Toggle,h=t.ToggleContainer,c=t.Node,u=t.Prefab,d=t.Label,g=t.Size,f=t.Sprite,p=t.UITransform,m=t.sys,b=t.Tween,v=t.tween,k=t.UIOpacity,C=t.Component},function(t){w=t.LevelMapLoader},function(t){I=t.BottleData2,B=t.BottleData,S=t.CompleteType},function(t){y=t.GameDefine},function(t){E=t.BundleManager},function(t){L=t.default},function(t){_=t.default},function(t){x=t.ExceptionHandler},function(t){M=t.default},function(t){T=t.default},function(t){R=t.default},function(t){N=t.default},function(t){O=t.default},function(t){z=t.default},function(t){P=t.default},function(t){A=t.default},function(t){F=t.default},function(t){D=t.default},function(t){G=t.default},function(t){U=t.TAData},function(t){q=t.default}],execute:function(){var W,H,J,V,j,K,Z,X,Q,Y,$,tt,et,it,nt,ot,lt,st,at,rt,ht,ct,ut,dt,gt,ft,pt,mt,bt,vt,kt,Ct,wt,It,Bt,St,yt,Et,Lt,_t,xt,Mt,Tt,Rt,Nt,Ot,zt;l._RF.push({},"bed6b0cuGZO9K560KUqVZon","WaterSortGeneratorChallenge",void 0);var Pt=s.ccclass,At=s.property;t("WaterSortGeneratorChallenge",(W=Pt("WaterSortGeneratorChallenge"),H=At(a),J=At(a),V=At(r),j=At(a),K=At(a),Z=At(a),X=At(r),Q=At(r),Y=At(r),$=At(h),tt=At(c),et=At(u),it=At(c),nt=At(q),ot=At(a),lt=At(r),st=At(a),at=At(a),rt=At(a),ht=At(r),ct=At(c),ut=At(d),W((ft=e((gt=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return e=t.call.apply(t,[this].concat(l))||this,n(e,"sizeEB",ft,o(e)),n(e,"rackIndexEB",pt,o(e)),n(e,"completeToggle",mt,o(e)),n(e,"levelEB",bt,o(e)),n(e,"shuffleEB",vt,o(e)),n(e,"bottleColorsEB",kt,o(e)),n(e,"swapToggle",Ct,o(e)),n(e,"videoToggle",wt,o(e)),n(e,"unknownToggle",It,o(e)),n(e,"colorsGroup",Bt,o(e)),n(e,"bottleParent",St,o(e)),n(e,"bottleRackPrefab",yt,o(e)),n(e,"bottleMenu",Et,o(e)),n(e,"settingMenu",Lt,o(e)),n(e,"unlockColorEB",_t,o(e)),n(e,"stoneToggle",xt,o(e)),n(e,"unlockIdEB",Mt,o(e)),n(e,"keyIndexEB",Tt,o(e)),n(e,"levelJsonEB",Rt,o(e)),n(e,"longBottlePick",Nt,o(e)),n(e,"toastNode",Ot,o(e)),n(e,"toastLabel",zt,o(e)),e._selectedIndex=void 0,e._isSwapBottleMode=!1,e.selectedColorID=0,e.swapFromIndex=null,e._rackList=[],e.map=[],e.isShuffled=!1,e._dataMgr=_,e}i(e,t);var l=e.prototype;return l.onLoad=function(){T.initFit(new g(750,1334)),L.loadAll((function(){M.log("Config Loaded")})),F.initPlatformInfo(),this._dataMgr.createUser(),this._dataMgr.createPlayer(this._dataMgr.User.CurrPlayerId),_.createTA(),U.Mgr.launch(),x.init(),E.loadPrefab(z.getUrl(),(function(t,e){e&&D.setBottlePrefab(e)})),E.loadPrefab(A.getUrl(),(function(t,e){e&&G.setBottlePrefab(e)})),N.ListLiquidColors(),this.colorsGroup.toggleItems.forEach((function(t,e){t.node.getChildByName("Color").getComponent(f).color=N.GetLiquidColor(e)})),this.settingMenu.setConfigCallback(this.OnSettingConfigCallback.bind(this)),this.settingMenu.setBottleLiquidCheckListener(this.OnBottleLiquidCheck.bind(this))},l.OnSelectColor=function(t){var e;M.log("OnSelectColor",t);var i=null==(e=this.colorsGroup)?void 0:e.toggleItems.findIndex((function(t){return null==t?void 0:t.isChecked}));this.selectedColorID=i,this.settingMenu.setSelectedColor(this.selectedColorID)},l.OnClickAddRack=function(){this.AddRack([])},l.AddRack=function(t){var e=this,i=this._rackList.length,n={index:i,bottleData:t,isUnknown:!1,spacingX:10,onClickListener:function(t,i,n){e.OnClickBottle(t,i,n)},onLiquidCheckCallback:function(t,i,n){e.OnClickLiquidItem(t,i,n)},isEditor:!0},o=R.CreateWidget(P,this.bottleRackPrefab,n);o.SetSwapEnable(this.swapToggle.isChecked),this.bottleParent.addChild(o.node),this._rackList.push(o),0==t.length&&(this.map[i]=[],this.rackIndexEB.string=i.toString())},l.OnClickAdd=function(){this.swapFromIndex=null;for(var t=this.GetBottleSize(),e=[],i=0;i<t;i++)e.push(this.selectedColorID);this.AddBottle(e,0)},l.onClickAddEmpty=function(){this.swapFromIndex=null;var t=this.GetBottleSize(),e=new Array(t).fill(0),i=this.selectedColorID;this.AddBottle(e,i)},l.AddBottle=function(t,e){var i=this;void 0===e&&(e=0),this.swapFromIndex=null;var n=new I;this.videoToggle.isChecked&&t.fill(0);var o=this.stoneToggle.isChecked?1:0;if(1!=o||this.IsBottleSimpleColor(t)){var l=Number.parseInt(this.unlockColorEB.string);isNaN(l)&&(l=0);var s=Number.parseInt(this.unlockIdEB.string);isNaN(s)&&(s=0);var a=Number.parseInt(this.keyIndexEB.string);isNaN(a)&&(a=-1),n.unlockColor=l,n.stoneBottle=o,n.unlockId=s;var r=new Array(t.length).fill(0);n.bottles.push(new B(t,r,a,!1,this.videoToggle.isChecked,!1,-1,this.completeToggle.isChecked?S.NEVER:S.END,e));var h=this.GetCurRackIndex();this.map[h]?(this.map[h].push(n),this._rackList[h].UpdateRackData(this.map[h]),this.scheduleOnce((function(){var t=i.bottleParent.getComponent(p).contentSize,e=1e3;i._rackList.forEach((function(t){var i=t._ui.layout_bottles.getComponent(p).contentSize;i.height+40>e&&(e=i.height+40)})),i.bottleParent.getComponent(p).setContentSize(t.width,e)}))):this.ShowToast("没有第"+h+"个架子")}else this.ShowToast("石头瓶不能配置多个颜色")},l.UpdateBottleLayoutHeight=function(){var t=this;this.scheduleOnce((function(){var e=t.bottleParent.getComponent(p).contentSize,i=1e3;t._rackList.forEach((function(t){var e=t._ui.layout_bottles.getComponent(p).contentSize;e.height+40>i&&(i=e.height+40)})),t.bottleParent.getComponent(p).setContentSize(e.width,i)}))},l.ReadyOrSwapLiquid=function(t,e,i,n){if(void 0===n&&(n=-1),null!=this.swapFromIndex)if(-1==n){if(!this._rackList[this.swapFromIndex[0]]._bottleList[this.swapFromIndex[1]].liquids[this.swapFromIndex[2]].toggle.isChecked)return void(this.swapFromIndex=[t,e,i,0])}else if(!this.settingMenu.depthBottles[this.swapFromIndex[3]].liquids[this.swapFromIndex[2]].toggle.isChecked)return void(this.swapFromIndex=[t,e,i,n]);if(-1==n&&(n=0),null==this.swapFromIndex)this.swapFromIndex=[t,e,i,n];else if(this.swapFromIndex[0]!=t||this.swapFromIndex[1]!=e||this.swapFromIndex[2]!=i||this.swapFromIndex[3]!=n){var o=this.swapFromIndex,l=o[0],s=o[1],a=o[2],r=o[3],h=t,c=e,u=i,d=n,g=[this.map[h][c].bottles[d].bottle[u],this.map[l][s].bottles[r].bottle[a]];this.map[l][s].bottles[r].bottle[a]=g[0],this.map[h][c].bottles[d].bottle[u]=g[1],this.RefreshRack(l),this.RefreshRack(h),this.settingMenu.node.active&&this.settingMenu.init(this.map[this.settingMenu.rackIndex][this.settingMenu.selectedIndex].clone()),this.swapFromIndex=null,this.isShuffled=!0}},l.ChangeUnknown=function(t,e,i,n){void 0===n&&(n=-1),-1==n&&(n=0);var o=this.map[t][e].bottles[n].unknowns,l=1-(o[i]||0);o[i]=l,0==n&&this._rackList[t]._bottleList[e].UpdateUnknowns(o),this.settingMenu.node.active&&this.settingMenu.depthBottles[n].UpdateUnknowns(o)},l.OnClickLiquidItem=function(t,e,i,n){void 0===n&&(n=-1),this.swapToggle.isChecked?this.ReadyOrSwapLiquid(t,e,i,n):this.unknownToggle.isChecked&&this.ChangeUnknown(t,e,i,n)},l.GetBottleSize=function(){var t=Number.parseInt(this.sizeEB.string);return t&&!Number.isNaN(t)||(t=5),t},l.GetCurRackIndex=function(){var t=Number.parseInt(this.rackIndexEB.string);return Number.isNaN(t)&&(t=0),t},l.OnBottleLiquidCheck=function(t,e,i,n){this.OnClickLiquidItem(t,e,i,n)},l.OnClickBottle=function(t,e,i){if(this._isSwapBottleMode){if(this._isSwapBottleMode=!1,!this._selectedIndex)return;var n=[this.map[this._selectedIndex[0]][this._selectedIndex[1]],this.map[t][e]];return this.map[t][e]=n[0],this.map[this._selectedIndex[0]][this._selectedIndex[1]]=n[1],this.RefreshRack(t),void this.RefreshRack(this._selectedIndex[0])}this._selectedIndex&&this._selectedIndex[0]==t&&this._selectedIndex[1]==e&&this.bottleMenu.active?this.bottleMenu.active=!1:(this.bottleMenu.active=!0,this.bottleMenu.worldPosition=i.node.worldPosition.clone(),this._selectedIndex=[t,e],M.log("OnClick",i,"长度:",i.GetColors().length))},l.OnClickDelete=function(){this.bottleMenu.active=!1,this._selectedIndex&&this.DeleteBottle.apply(this,this._selectedIndex)},l.DeleteBottle=function(t,e){this.swapToggle.isChecked||(this.map[t].splice(e,1),this._rackList[t].UpdateRackData(this.map[t]))},l.OnClickSetting=function(){if(this._selectedIndex){this.bottleMenu.active=!1,this.settingMenu.node.active=!0;var t=this._selectedIndex,e=t[0],i=t[1];this.settingMenu.setRackIndex(e),this.settingMenu.setSelectedIndex(i),this.settingMenu.setSelectedColor(this.selectedColorID);var n=this.map[e][i].segment;this.settingMenu.setSelectedSize(n),this.settingMenu.init(this.map[e][i].clone())}},l.OnClickSwap=function(){this._isSwapBottleMode=!0,this.bottleMenu.active=!1},l.OnSettingConfigCallback=function(t,e,i){i&&(0==i.bottles.length?this.DeleteBottle(t,e):(this.map[t][e]=i,this.RefreshRack(t)))},l.OnSwapToggleChanged=function(){for(var t=0;t<this._rackList.length;t++)this._rackList[t].SetSwapEnable(this.swapToggle.isChecked);this.settingMenu.setSwapEnable(this.swapToggle.isChecked)},l.OnVideoToggleChanged=function(){this.settingMenu.setVideoBottle(this.videoToggle.isChecked)},l.OnUnknownToggleChanged=function(){for(var t=0;t<this._rackList.length;t++)this._rackList[t].SetSwapEnable(this.unknownToggle.isChecked);this.settingMenu.setSwapEnable(this.unknownToggle.isChecked)},l.OnClickRandom=function(){if(this.swapFromIndex=null,this.settingMenu.onClickClose(),0!=this.map.length){var t=Number.parseInt(this.shuffleEB.string);t||(t=100),this.isShuffled=!0,M.log("generate",this.map,"shuffleCount",t);for(var e=0,i=0;e<t&&i<2*t;){i++;for(var n=this.calcComplexity(this.map),o=[],l=0;l<this.map.length;l++)for(var s=0;s<this.map[l].length;s++)for(var a=0;a<this.map[l][s].bottles.length;a++)for(var r=0;r<this.map[l][s].bottles[a].bottle.length;r++)0!=this.map[l][s].bottles[a].bottle[r]&&o.push([l,s,a,r]);for(var h=o[Math.floor(Math.random()*o.length)],c=h[0],u=h[1],d=h[2],g=h[3],f=this.map[c][u].bottles[d].bottle[g],p=[],m=0;m<this.map.length;m++)for(var b=0;b<this.map[m].length;b++)for(var v=0;v<this.map[m][b].bottles.length;v++)for(var k=0;k<this.map[m][b].bottles[v].bottle.length;k++){var C=this.map[m][b].bottles[v].bottle[k];0!=C&&C!=f&&p.push([m,b,v,k])}if(0==p.length){M.log("no to position");break}var w=p[Math.floor(Math.random()*p.length)],I=w[0],B=w[1],S=w[2],y=w[3],E=[this.map[I][B].bottles[S].bottle[y],this.map[c][u].bottles[d].bottle[g]];if(this.map[c][u].bottles[d].bottle[g]=E[0],this.map[I][B].bottles[S].bottle[y]=E[1],this.calcComplexity(this.map).sum<n.sum){var L=[this.map[I][B].bottles[S].bottle[y],this.map[c][u].bottles[d].bottle[g]];this.map[c][u].bottles[d].bottle[g]=L[0],this.map[I][B].bottles[S].bottle[y]=L[1]}else e++}M.log("tryCount:",i),M.log("after shuffle:",this.map),this.RefreshAllBottles()}},l.OnClickReset=function(){this.swapFromIndex=null,this.isShuffled?(this.isShuffled=!1,this.RefreshAllBottles()):M.log("no shuffle, no reset")},l.OnClickCopy=function(){0==this.map.length?this.RestoreMap():this.CopyAndSaveMap()},l.OnClickLevelAdd=function(){var t=Number.parseInt(this.levelEB.string);isNaN(t)&&(t=1),t++,this.levelEB.string=t.toString()},l.OnClickLevelReduce=function(){var t=Number.parseInt(this.levelEB.string);isNaN(t)&&(t=1),t--,this.levelEB.string=t.toString()},l.OnClickLoad=function(){this.swapFromIndex=null;var t=Number.parseInt(this.levelEB.string);isNaN(t)&&(t=1);var e=w.getChallengeLevelMap(t);this.map=e.map((function(t){return t.map((function(t){return new I(t)}))})),M.log("load level "+t+", map:",this.map),this.RestoreBottles(),this.sizeEB.string=w.getLevelSegment(t).toString(),this.map.length>0?this.ShowToast("已加载关卡"+t):this.ShowToast("关卡"+t+"不存在")},l.OnClickLoadJson=function(){var t=JSON.parse(this.levelJsonEB.string);this.map=t.map((function(t){return t.map((function(t){return new I(t)}))})),M.log("load json map:",this.map),this.RestoreBottles(),this.map.length>0?this.ShowToast("已加载关卡"):this.ShowToast("关卡json数据有误")},l.RestoreMap=function(){M.log("restore");var t=m.localStorage.getItem("WaterSortResolver_LEVEL_MAP");null!=t&&""!=t&&(this.map=JSON.parse(t).map((function(t){return t.map((function(t){return new I(t)}))})),this.RestoreBottles()),this.sizeEB.string=m.localStorage.getItem("WaterSortResolver_SEGMENT")},l.CopyAndSaveMap=function(){var t=this;M.log("copy");var e=this.longBottlePick.isChecked,i=new Map,n=new Map;this.map.forEach((function(t){return t.forEach((function(t){return t.bottles.forEach((function(t){if(t.bottle.length>=y.LONG_BOTTLE_MIN_LENGTH&&!e){var o=t.bottle[0],l=n.get(o)||0;l+=t.bottle.length,n.set(o,l)}t.bottle.forEach((function(t){if(t>0){var e=i.get(t);e||(e=0,i.set(t,0)),i.set(t,e+1)}}))}))}))}));var o=!1;if(e){var l=this.map[0][0].segment;i.forEach((function(e,i){e<l&&(o=!0,t.ShowToast("颜色(id"+i+")数量不足，请检查，配置了"+e+"个"))}))}else n.forEach((function(e,n){var l=i.get(n)||0;l<e&&(o=!0,t.ShowToast("需要收集的颜色(id"+n+")数量不足，请检查，配置了"+l+"个"))}));if(o)return!1;var s=this.map.map((function(t){return t.map((function(t){return t.clone()}))}));if(0==s.length)return this.ShowToast("关卡数据为空"),!1;var a=JSON.stringify(s);M.log(a),this.ShowToast("✅关卡数据已复制"),m.localStorage.setItem("WaterSortResolver_LEVEL_MAP",a),m.localStorage.setItem("WaterSortResolver_SEGMENT",this.GetBottleSize()),m.localStorage.setItem("WaterSortResolver_LONG_BOTTLE_CAN_PICK",e?1:0);var r=document.createElement("input");return r.value=a,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),!0},l.OnClickAddColorBottle=function(){this.swapFromIndex=null;var t=this.bottleColorsEB.string.split(","),e=t.map((function(t){return Number.parseInt(t)}));if(e.some((function(t){return isNaN(t)||t<0||t>10})))return this.ShowToast("颜色输入有误，请检查"),void M.log("颜色输入有误，请检查",t);this.AddBottle(e,0)},l.RefreshAllBottles=function(){for(var t=0;t<this._rackList.length;t++)this.RefreshRack(t)},l.RefreshRack=function(t){this._rackList[t].UpdateRackData(this.map[t])},l.calcComplexity=function(t){var e={sum:0},i=!0,n=!1,o=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)l.value.forEach((function(t){t.bottles.forEach((function(t){t.bottle.forEach((function(t,i,n){if(t!==n[i+1]){void 0===e[t]&&(e[t]=0);var o=n.length-i-1;e[t]+=o,e.sum+=o}}))}))}))}catch(t){n=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return e},l.IsBottleEmpty=function(t){for(var e=!0,i=0;i<t.length;i++)if(0!=t[i]){e=!1;break}return e},l.IsBottleSimpleColor=function(t){for(var e=0,i=0;i<t.length;i++)if(0!=t[i])if(0==e)e=t[i];else if(e!=t[i])return!1;return!0},l.ArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},l.RestoreBottles=function(){var t=this;this.isShuffled=!0,this._rackList.forEach((function(t){t.RecycleBottles(),t.node.removeFromParent(),t.node.destroy()})),this._rackList=[],this.bottleParent.removeAllChildren(),this.map.forEach((function(e){t.AddRack(e)}))},l.OnClickTryPlay=function(){this.CopyAndSaveMap()&&R.ShowUI(O,void 0,{isTestLevel:!0,challengeDate:new Date})},l.OnClickCheckSegment=function(){for(var t=!1,e=0;e<1e4;e++){var i=w.getLevelMap(e);if(i.length>0){var n=w.getLevelSegment(e),o=w.CheckSegment(i);0!=o&&o!=n&&(M.warn("❌mapID"+e+"的segment字段配置有误，应该为"+o),t=!0)}}t||this.ShowToast("✅检查完成，没有配错的segment")},l.OnClickDeleteRack=function(){this.swapFromIndex=null;var t=Number.parseInt(this.rackIndexEB.string);Number.isNaN(t)?this.ShowToast("请输入正确的rackIndex"):(this._rackList[t].RecycleBottles(),this._rackList[t].node.removeFromParent(),this._rackList[t].node.destroy(),this._rackList.splice(t,1),this.map.splice(t,1),this.rackIndexEB.string=(this._rackList.length-1).toString())},l.OnClickRefreshAllBottles=function(){for(var t=N.CalcChallengeMapAdjust(this.map),e=0;e<this._rackList.length;e++)this._rackList[e]._maxShowHeight=t.maxShowHeight,this.RefreshRack(e);this.UpdateBottleLayoutHeight()},l.ShowToast=function(t){var e=this;b.stopAllByTarget(this.toastNode),this.toastLabel.string=t,R.SetOpacity(this.toastNode,0),this.toastNode.active=!0;var i=.7+.05*t.length;v(this.toastNode.getComponent(k)).to(.4,{opacity:255}).delay(i).to(.4,{opacity:0}).call((function(){e.toastNode.active=!1})).start()},e}(C)).prototype,"sizeEB",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=e(gt.prototype,"rackIndexEB",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=e(gt.prototype,"completeToggle",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=e(gt.prototype,"levelEB",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=e(gt.prototype,"shuffleEB",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=e(gt.prototype,"bottleColorsEB",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=e(gt.prototype,"swapToggle",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=e(gt.prototype,"videoToggle",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=e(gt.prototype,"unknownToggle",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=e(gt.prototype,"colorsGroup",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=e(gt.prototype,"bottleParent",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=e(gt.prototype,"bottleRackPrefab",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=e(gt.prototype,"bottleMenu",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=e(gt.prototype,"settingMenu",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=e(gt.prototype,"unlockColorEB",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=e(gt.prototype,"stoneToggle",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=e(gt.prototype,"unlockIdEB",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=e(gt.prototype,"keyIndexEB",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=e(gt.prototype,"levelJsonEB",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=e(gt.prototype,"longBottlePick",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot=e(gt.prototype,"toastNode",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt=e(gt.prototype,"toastLabel",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=gt))||dt));l._RF.pop()}}}));

System.register("chunks:///_virtual/WaterSortResolver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelMapLoader.ts","./BottleData.ts","./Defines.ts","./Log.ts","./GameUtils.ts","./WaterSortGenerator.ts","./WaterSortGeneratorChallenge.ts"],(function(t){var e,o,n,r,l,i,a,s,c,u,f,h,p,g,v,b,m,d,C,y,E,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,l=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,a=t._decorator,s=t.EditBox,c=t.Enum,u=t.Toggle,f=t.randomRangeInt,h=t.Component},function(t){p=t.LevelMapLoader},function(t){g=t.CompleteType,v=t.BottleData2,b=t.BottleData},function(t){m=t.GameType,d=t.GameDefine},function(t){C=t.default},function(t){y=t.default},function(t){E=t.WaterSortGenerator},function(t){S=t.WaterSortGeneratorChallenge}],execute:function(){var T,k,_,L,x,A,B,N,w;i._RF.push({},"19017ooDgNAY7h4VGwjmqip","WaterSortResolver",void 0);var G=a.ccclass,I=a.property,P=(t("WaterSortResolver",(T=G("WaterSortResolver"),k=I(s),_=I({type:c(m)}),L=I(u),T((B=e((A=function(t){function e(){for(var e,o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return e=t.call.apply(t,[this].concat(l))||this,n(e,"maxStepET",B,r(e)),n(e,"gameType",N,r(e)),n(e,"longBottleCanPickToggle",w,r(e)),e}o(e,t);var i=e.prototype;return i.OnClickSolve=function(){var t,e=parseInt(this.maxStepET.string)||500;t=this.gameType==m.NORMAL?this.node.getComponent(E).map:this.node.getComponent(S).map;var o=[];t.forEach((function(t){t.forEach((function(t){t.bottles.some((function(t){return t.video_bottle}))||o.push(t.clone())}))}));var n=new P(o,0);this.Solve(n,e)},i.OnClickSolve2=function(){var t,e=parseInt(this.maxStepET.string)||100;t=this.gameType==m.NORMAL?this.node.getComponent(E).map:this.node.getComponent(S).map;var o=[];t.forEach((function(t){t.forEach((function(t){t.bottles.some((function(t){return t.video_bottle}))||o.push(t.clone())}))}));var n=new P(o,0);this.Solve2(n,!0,e)},i.OnClickCalcComplexity=function(){var t;t=this.gameType==m.NORMAL?this.node.getComponent(E).map:this.node.getComponent(S).map;var e=[];t.forEach((function(t){t.forEach((function(t){t.bottles.some((function(t){return t.video_bottle}))||e.push(t.clone())}))}));var o=new P(e,0),n=this.GetTargetCollectColors(o);C.log(this.calcComplexity(o,n)),C.log(this.checkIsWin({doneState:o,complexity:1}))},i.OnClickSolveAll=function(){for(var t=this,e=parseInt(this.maxStepET.string)||100,o=function(){var o=p.getLevelMap(n);if(o.length>0){var r=[];o.forEach((function(t){t.forEach((function(t){t.bottles.some((function(t){return t.video_bottle}))||r.push(t.clone())}))}));var l=new P(r,0),i=t.Solve2(l,!1,e);if(C.log("mapID:",n),C.log("\t"+t.PrintSolveStatistic(i)),i.successRate<1){var a=p.getLevelSegment(n),s=[];o.forEach((function(t){t.forEach((function(t){t.bottles.some((function(t){return t.video_bottle}))||s.push(t.clone())}))}));var c=new v;c.bottles.push(new b(new Array(a).fill(0),new Array(a).fill(0),0,!1,!0,!1,g.END,0)),s.push(c);var u=new P(s,0);C.log("\t加一个瓶子"),C.log("\t"+t.PrintSolveStatistic(t.Solve2(u,!1,e)))}}},n=1;n<4002;n++)o()},i.PrintSolveStatistic=function(t){return"成功次数："+t.successCount+"\t失败次数："+t.failCount+"\t成功步数："+t.successStep+"\t失败平均步数："+t.failStepAvg.toPrecision(4)+"\t失败步数百分比："+(0==t.successStep?0:t.failStepAvg/t.successStep).toPrecision(4)+"\t失败平均收集次数："+t.failCollectCountAvg.toPrecision(4)+"\t成功率："+t.successRate.toPrecision(4)},i.Solve=function(t,e){for(var o,n=this,r=this.GetTargetCollectColors(t),l=[{parent:null,children:[],collectColors:[],targetColors:r,keysCount:0,from:-1,to:-1,doneState:t,step:0,complexity:this.calcComplexity(t,r).sum,f:this.calcComplexity(t,r).sum,reachable:void 0}],i=[],a=[],s=function(){l.sort(n.sortWithF);var t=l.shift();if(C.log("maxDeath",e,i.length),i.length>e){var o;if(a.length>0)o=a[0];else{o=[];for(var r=t;null!=r;)o.push(r),r=r.parent;o.reverse()}return n.doStatistics(a,i),C.warn("超过最大尝试次数:",e),{v:[]}}if(n.checkIsWin(t)){for(var s=[],c=t;null!=c;)s.push(c),c=c.parent;s.reverse(),a.push(s),i.push(t)}else{n.listOptions(t).forEach((function(e){var o=i.findIndex((function(t){return n.ArrayEqualAfterSort(t.doneState.tubes,e.doneState.tubes)}));o<0?(l.push(e),t.children.push(e)):t.children.push(i[o])})),i.push(t)}};l.length>0;)if(o=s())return o.v;C.log("跑完了所有的情况");var c=[];return a.length>0&&(c=a[0]),this.doStatistics(a,i),c},i.checkIsWin=function(t){return this.gameType==m.NORMAL?0==t.complexity:this.gameType==m.CHALLENGE?null!=this.longBottleCanPickToggle&&this.longBottleCanPickToggle.isChecked?0==t.complexity:t.doneState?t.doneState.tubes.every((function(t){return t.bottles.every((function(t){return t.bottle.length<d.LONG_BOTTLE_MIN_LENGTH||t.bottle.every((function(t){return t>0}))}))})):0==t.complexity:void 0},i.sortWithF=function(t,e){return t.f==e.f?f(-1,1):t.f-e.f},i.listOptions=function(t){for(var e=t.doneState.tubes,o=[],n=0;n<e.length;n++){var r=e[n].curDepth,l=this.GetBottleTopTypeAndCount(e[n].bottles[r].bottle),i=l[0],a=l[1];if((!(e[n].unlockColor>0)||t.collectColors.includes(e[n].unlockColor))&&((a!==e[n].segment||e[n].bottles[r].complete_type!=g.COMPLETE_NEXT)&&!(e[n].bottles[r].collect_type>0)&&1!=e[n].stoneBottle&&!(e[n].unlockId>0&&e[n].unlockId>t.keysCount)&&(!(e[n].bottles[r].bottle.length>=d.LONG_BOTTLE_MIN_LENGTH)||null!=this.longBottleCanPickToggle&&this.longBottleCanPickToggle.isChecked)&&a>0))for(var s=0;s<e.length;s++)if(s!==n){var c=e[s].curDepth;if(e[s].bottles[c].complete_type!=g.EMPTY_NEXT&&(!(e[s].unlockColor>0)||t.collectColors.includes(e[s].unlockColor))&&!(e[s].unlockId>0&&e[s].unlockId>t.keysCount||e[s].bottles[c].collect_type>0&&e[s].bottles[c].collect_type!=i)){var u=this.GetBottleTopTypeAndEmptyCount(e[s].bottles[c].bottle),f=u[0];if(u[1]>0&&(-1===f||f===i)){var h=this.SwapIndex(e,n,s,a),p=this.calcComplexity({tubes:h},t.targetColors),v=[].concat(t.collectColors);if(h[s].bottles[c].isComplete()){var b=h[s].bottles[c].bottle[0];v.includes(b)||v.push(b)}var m=t.keysCount,C=h[n].bottles[r].bottle,y=h[n].bottles[r].key_index;null==y&&(y=-1),!h[n].bottles[r].key_collected&&y>=0&&0==C[y]&&(h[n].bottles[r].key_collected=!0,m++),o.push({parent:t,children:[],collectColors:v,keysCount:m,targetColors:t.targetColors,from:n,to:s,doneState:{tubes:h},step:t.step+1,complexity:p.sum,f:p.sum,reachable:void 0})}}}}return o},i.calcComplexity=function(t,e){var o={sum:0},n=!0,r=!1,l=void 0;try{if(this.gameType==m.NORMAL)for(var i=t.tubes[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)a.value.bottles.forEach((function(t,e,n){t.collect_type>0?(o.sum+=3*t.bottle.length,t.bottle.forEach((function(t,e,n){t>0&&(o.sum-=3)}))):t.complete_type==g.EMPTY_NEXT?t.bottle.forEach((function(t,e,n){t>0&&o.sum++})):y.IsBottlePure(t.bottle)?t.bottle.forEach((function(t,e,n){0==t&&o.sum++})):t.bottle.forEach((function(t,e,n){if(n[e+1]&&t!==n[e+1]){n.length;o.sum+=2}})),null!=t.key_index&&t.key_index>=0&&0==t.key_collected&&o.sum++}));else if(this.gameType==m.CHALLENGE)if(null!=this.longBottleCanPickToggle&&this.longBottleCanPickToggle.isChecked)for(i=t.tubes[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)a.value.bottles.forEach((function(t,e,n){y.IsBottlePure(t.bottle)?t.bottle.forEach((function(t,e,n){0==t&&o.sum++})):t.bottle.forEach((function(t,e,n){if(n[e+1]&&t!==n[e+1]){n.length;o.sum+=2}}))}));else{var a;for(i=t.tubes[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)a.value.bottles.forEach((function(t,n,r){t.bottle.forEach((function(t,n,r){r.length<d.LONG_BOTTLE_MIN_LENGTH&&r[n+1]&&t!==r[n+1]&&(e.includes(t)?o.sum+=2:o.sum+=1)}))}))}}catch(t){r=!0,l=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return o},i.GetBottleTopTypeAndCount=function(t){for(var e=-1,o=0,n=t.length-1;n>=0&&(0!=t[n]&&-1==e?(e=t[n],o=1):t[n]===e&&o++,-1===e||t[n]===e);n--);return-1===e&&(e=0,o=0),[e,o]},i.GetBottleTopTypeAndEmptyCount=function(t){for(var e=0,o=-1,n=t.length-1;n>=0;n--){if(0!==t[n]){o=t[n];break}e++}return[o,e]},i.GetTargetCollectColors=function(t){var e=[];return this.gameType==m.CHALLENGE&&t.tubes.forEach((function(t){t.bottles.forEach((function(t){t.bottle.length>=d.LONG_BOTTLE_MIN_LENGTH&&e.push(t.bottle[0])}))})),e},i.SwapIndex=function(t,e,o,n){for(var r=t.map((function(t){return t.clone()})),l=0,i=r[o].segment-1;i>=0&&0===r[o].showingBottle.bottle[i];i--)l++;l<n&&(n=l);for(var a=-1,s=r[e].segment-1;s>=0;s--)if(0!=r[e].showingBottle.bottle[s]){a=r[e].showingBottle.bottle[s];for(var c=0;c<n;c++){if(s-c<0)throw"数组越界:i:"+s+",j:"+c;r[e].showingBottle.bottle[s-c]=0}break}if(-1==a)return r;for(var u=0;u<r[o].segment;u++)if(0==r[o].showingBottle.bottle[u]){for(var f=0;f<n;f++){if(u+f>=r[o].segment)throw"数组越界:i:"+u+",j:"+f;r[o].showingBottle.bottle[u+f]=a}break}return r},i.SortWithHash=function(t,e){var o=t.hash-e.hash;return o>0?1:o<0?-1:0},i.ArrayEqualAfterSort=function(t,e){if(t.length!==e.length)return!1;var o=[];t.forEach((function(t){var e=t.clone();e.updateHash(),o.push(e)}));var n=[];e.forEach((function(t){var e=t.clone();e.updateHash(),n.push(e)})),o.sort(this.SortWithHash),n.sort(this.SortWithHash);for(var r=0;r<o.length;r++)if(o[r].segment<d.LONG_BOTTLE_MIN_LENGTH){if(o[r].hash!==n[r].hash)return!1}else{if(o[r].bottles.length!==n[r].bottles.length)return!1;for(var l=0;l<o[r].bottles.length;l++){var i=o[r].bottles[l],a=n[r].bottles[l];if(i.bottle.length!=a.bottle.length)return!1;for(var s=0;s<i.bottle.length;s++)if(i.bottle[s]!=a.bottle[s])return!1}}return!0},i.doStatistics=function(t,e){var o=this;e.sort(this.sortWithF),t.forEach((function(t,e){t.forEach((function(t){t.reachable=!0}))}));var n=t.length>0,r=0,l=!1;if(e.forEach((function(t,e){t.doneState.tubes.some((function(e){e.bottles.some((function(e,o){if(null!=e.key_index&&e.key_index>=0&&e.isComplete()&&0==e.key_collected)return C.log("key unlock error map:",t,o),l=!0,!0}))}));var i=0;if(n){for(var a=t;null!=a&&!o.canReachEnd(a);)i++,a=a.parent;i>0&&r++,t.reachable=0==i}else i=-1;for(var s=0,c=0;c<t.doneState.tubes.length;c++)for(var u=t.doneState.tubes[c].bottles,f=0;f<u.length;f++){var h=u[f].bottle,p=o.GetBottleTopTypeAndCount(h),g=p[0],v=p[1];g>0&&v==h.length&&s++}C.log("index:"+e+", 步数:"+t.step+", 到有解结果最小回退次数:"+i+", 收集完成数:"+s,t)})),C.log("解开次数：",t.length),C.log("已探索步数："+e.length+", 不可达最终解次数："+r+" "),t.forEach((function(t,e){C.log("index:"+e+", 步数:"+(t.length-1)+", 详细步骤: ",t)})),n&&t.forEach((function(t){C.log("solvePercent: "+o.calculateProbability(t))})),l){var i=this.getComponent(E);i&&i.ShowToast("配置钥匙的瓶有误，可能导致卡死")}},i.canReachEnd=function(t){if(t.reachable)return!0;for(var e=[t],o=new Set;e.length>0;){var n=e.shift();if(!o.has(n)){o.add(n);for(var r,i=l(n.children);!(r=i()).done;){var a=r.value;if(a.reachable)return!0;e.push(a)}}}return!1},i.checkComplete=function(t){for(var e=0;e<t.length;e++)for(var o=t[e][0],n=1;n<t.length;n++)if(t[e][n]!=o)return!1;return!0},i.calculateProbability=function(t){var e=this,o=new Array(t.length).fill(0);return t.forEach((function(t,n){if(0==t.children.length)o[n]=e.checkIsWin(t)?100:0;else{var r=t.children.length;t.children.forEach((function(t){0==t.reachable&&r--})),o[n]=Math.round(100*r/t.children.length)}})),o},i.Solve2=function(t,e,o){var n=this;void 0===e&&(e=!0);for(var r=0,l=0,i=0,a=0,s=0,c=this.GetTargetCollectColors(t),u=function(){var o=0,u=n.calcComplexity(t,c).sum,f={parent:null,children:[],collectColors:[],keysCount:0,targetColors:c,from:-1,to:-1,doneState:t,step:0,complexity:u,f:u,reachable:void 0},h=[f],p=function(){if(n.checkIsWin(f))return r++,(0==i||i>f.step)&&(i=f.step),e&&C.log("success, step:"+f.step+", collectCount:"+n.getCollectCount(f.doneState.tubes)),0;var t=n.listOptions(f),c=[];if(t.forEach((function(t){-1==h.findIndex((function(e){return n.ArrayEqualAfterSort(e.doneState.tubes,t.doneState.tubes)}))&&c.push(t)})),0==c.length){l++,a+=f.step;var u=n.getCollectCount(f.doneState.tubes);return s+=u,e&&C.log("fail, step:"+f.step+", collectCount:"+u),0}c.sort(n.sortWithF),f=c[0],h.push(f),o++};do{if(0===p())break}while(o<1e3)},f=0;f<o;f++)u();var h=0==l?0:a/l,p=0==l?0:s/l,g=r/o;return e&&C.log("tryCount: "+o+", successCount: "+r+", failCount: "+l+", successPercent: "+g+", successStep:"+i+", failStepAvg:"+h.toFixed(2)+", failCollectCountAvg:"+p.toFixed(2)),{successCount:r,failCount:l,successStep:i,failStepAvg:h,failCollectCountAvg:p,successRate:g}},i.getCollectCount=function(t){var e=0;return t.forEach((function(t){t.bottles.forEach((function(t){!y.IsBottlePure(t.bottle)||t.complete_type!=g.COMPLETE_NEXT&&t.complete_type!=g.END||e++}))})),e},i.toDataString=function(t){var e=this;return JSON.stringify(t.map((function(t){return e.TransitionToString(t)})))},i.TransitionToString=function(t){return{data:t.doneState.tubes.map((function(t){return t.bottleData})).join(","),step:t.step,from:t.from,to:t.to,keys:t.keysCount}},e}(h)).prototype,"maxStepET",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(A.prototype,"gameType",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.NORMAL}}),w=e(A.prototype,"longBottleCanPickToggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=A))||x)),function(t,e){this.tubes=void 0,this.tubes=t});i._RF.pop()}}}));

System.register("chunks:///_virtual/WebHelper.js",["./cjs-loader.mjs"],(function(e,t){var r;return{setters:[function(e){r=e.default}],execute:function(){e("default",void 0);var u=e("__cjsMetaURL",t.meta.url);r.define(u,(function(t,r,u,n,s){e("default",u.exports)}),{})}}}));

System.register("chunks:///_virtual/WebHelper.mjs_cjs=&original=.js",["./WebHelper.js","./cjs-loader.mjs"],(function(e,r){var t,s;return{setters:[function(r){t=r.__cjsMetaURL;var s={};s.__cjsMetaURL=r.__cjsMetaURL,s.default=r.default,e(s)},function(e){s=e.default}],execute:function(){t||s.throwInvalidWrapper("./WebHelper.js",r.meta.url),s.require(t)}}}));

System.register("chunks:///_virtual/WechatManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./DataManager.ts","./ExceptionHandler.ts","./Log.ts","./UIFit.ts","./TAData.ts"],(function(e){var t,n,i,o,s,r,a,u,c,f,h,d;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,i=e._decorator,o=e.sys,s=e.Size,r=e.Vec2},function(e){a=e.default},function(e){u=e.default},function(e){c=e.ExceptionHandler},function(e){f=e.default},function(e){h=e.default},function(e){d=e.TAData}],execute:function(){var l,g;n._RF.push({},"b67b9H11wZKPJYNI95JCGdJ","WechatManager",void 0);var _=i.ccclass,w=["119EVUrQSlGiYBFu8XoiMA==","/F+RvECbTe2NeKucRbSbdw==","9ebHW5ulRqe+7pnwAUOunA=="],A=["https://mmocgame.qpic.cn/wechatgame/ic0Tpu2qUg7xAM0L7vn9CR2rOaARNCUvyjdEH1Rs07OGBcsh05PyLzRgcibxiaZVsuT/0","https://mmocgame.qpic.cn/wechatgame/YkibVBkeypHOd9qzQiavUHAmUnVkM3pH5mDhJyxRJpoIW5kaPAD6bF7ts1SBSZlUaR/0","https://mmocgame.qpic.cn/wechatgame/lIc1PiaARafayicRsQiaVBibUehqkMIY8kEibqT6BXozxAx4fGkf24Yx5jmkuicc7TlrKA/0"],k=e("AD_UNIT_ID_REWARD_VIDEO","adunit-55c67742b73f83e3"),x=e("AD_UNIT_ID_INTERSTITIAL","adunit-ca74f677d907a2d6"),p=e("WechatManager",_("WechatManager")(((g=function(){function e(){this._sdk=void 0,this.interAdInstance=null,this._selfInfo=void 0,this._privacyAuthorized=void 0,this._needAuthUserInfo=void 0,this._menuHeight=0,this._menuTop=0,this._menuBottom=0,this._screenHeight=void 0,this._screenWidth=void 0,this._isInterstitialAdLoaded=!1,this._willShowAd=!1,this.init()}e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance};var n=e.prototype;return n.getLocalUserInfo=function(){return this._selfInfo},n.init=function(){var e=this;void 0===window.wx||o.platform!=o.Platform.WECHAT_GAME?this._sdk=void 0:(this._sdk=window.wx,f.log("is wx platform"),this._sdk.onUnhandledRejection((function(e){console.warn("wx onUnhandledRejection:",e),console.warn("wx reason:",e.reason),console.warn("wx promise",e.promise),c.showErrorOnScreen(e.reason)})),this._sdk.onError((function(e){console.warn("Wx onError:",e),I.saveError(e),c.showErrorOnScreen(e.message+"\n"+e.stack)})),this._sdk.onWindowResize((function(t){f.log("wx onWindowResize:",t),e.initWxInfo(),h.initFit(new s(750,1334))})),this._sdk.showShareMenu({menus:["shareAppMessage","shareTimeline"]}),this._sdk.onShareAppMessage((function(e){f.log("wx onShareAppMessage:",e)})),this.needAuthorization().catch((function(){I.getSetting("scope.userInfo",(function(e){e&&I.getUserInfo()}))})),this.loadAllAd())},n.postMessage=function(e){this._sdk&&this._sdk.getOpenDataContext().postMessage({value:e})},n.toWxPosition=function(e){var t=this._screenWidth*e.x/h._DEFAULT_W,n=this._screenHeight*(h._DEFAULT_H-e.y)/h._DEFAULT_H;return new r(t,n)},n.toWxSize=function(e){var t=this._screenWidth*e.width/h._DEFAULT_W,n=this._screenHeight*e.height/h._DEFAULT_H;return new s(t,n)},n.initWxInfo=function(){if(!this._sdk)return this._menuTop=h._DEFAULT_H-h.SafeTop-30,this._menuBottom=h._DEFAULT_H-h.SafeTop-60,void(this._menuHeight=30);var e=this._sdk.getWindowInfo();if(e){this._screenHeight=e.screenHeight,this._screenWidth=e.screenWidth;var t=this._sdk.getMenuButtonBoundingClientRect();this._menuTop=h._DEFAULT_H-(t.bottom-.5*t.height)*(h._DEFAULT_H/e.screenHeight),this._menuBottom=h._DEFAULT_H-t.bottom*(h._DEFAULT_H/e.screenHeight),this._menuHeight=t.height*(h._DEFAULT_H/e.screenHeight)}else this._menuTop=h._DEFAULT_H-h.SafeTop-30,this._menuBottom=h._DEFAULT_H-h.SafeTop-60,this._menuHeight=30},n.createUserInfo=function(e,t){var n=this._sdk.createUserInfoButton({type:"text",text:"获取用户信息",style:{left:e.x,top:e.y,width:50,height:50,lineHeight:40,backgroundColor:"#ff0000",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}});return n.onTap((function(e){t&&t(e)})),n},n.getSetting=function(e,t){this._sdk.getSetting({success:function(n){t&&t(n.authSetting[e])}})},n.onHide=function(e){this._sdk&&this._sdk.onHide((function(){e()}))},n.onShow=function(e){this._sdk&&this._sdk.onShow((function(t){e(t)}))},n.getUserInfo=function(e){var t=this;if(this._sdk)if(this._selfInfo)e&&e(this._selfInfo);else{var n=!1;setTimeout((function(){n||(f.warn("getUserInfo callback timeout after 3000ms"),n=!0,e&&e())}),3e3);var i=this;this.requirePrivacyAuthorize().then((function(o){o?t._sdk.getUserInfo({success:function(t){i._selfInfo=t.userInfo,f.log("wx name="+i._selfInfo.nickName+", url="+i._selfInfo.avatarUrl),n||(n=!0,e&&e(i._selfInfo))},fail:function(t){f.log("wx getUserInfo fail:",t),n||(n=!0,e&&e(i._selfInfo))}}):n||(n=!0,e&&e())}))}else e&&e()},n.setUserLevel=function(e){var t=this;if(!this._sdk)return Promise.resolve(!1);var n=this;return new Promise((function(i){t.CheckIsAuthedFriendInfo().then((function(t){t&&n._sdk.setUserCloudStorage({KVDataList:[{key:"level",value:e.toString()}],success:function(e){f.log("wx setUserCloudStorage success",{res:e}),i(!0)},fail:function(e){f.log("wx setUserCloudStorage fail",{res:e}),i(!1)}})}))}))},n.removeUserLevel=function(){this._sdk&&this._sdk.removeUserCloudStorage({keyList:["level"],success:function(e){f.log("wx removeUserCloudStorage success",{res:e})},fail:function(e){f.log("wx removeUserCloudStorage fail",{res:e})}})},n.getFriendsScore=function(e){if(this._sdk){var t=this;f.log("wx onMessage 1"),this._sdk.onMessage((function(n){f.log("wx onMessage 2"),t._sdk.getFriendCloudStorage({keyList:["level"],success:function(t){f.log("wx getFriendUserGameData:",t),e&&e(!0,t.data)},fail:function(e){f.log("wx getFriendUserGameData fail:",e)}})}))}},n.getLaunchOptions=function(){if(this._sdk)return this._sdk.getLaunchOptionsSync()},n.shareAppMessage=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=-1),this._sdk&&(-1!=n?this._sdk.shareAppMessage({title:e,query:t,imageUrlId:w[n],imageUrl:A[n]}):this._sdk.shareAppMessage({title:e,query:t}))},n.showShareMenu=function(){this._sdk&&this._sdk.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},n.onShareAppMessage=function(e){this._sdk&&this._sdk.onShareAppMessage((function(){return{title:e,imageUrlId:"HTdhcC29Q26QOIoI1hsp4g==",imageUrl:"https://mmocgame.qpic.cn/wechatgame/IAsj7KFGI0iatWz2ZOBzdqkqKoVzgts9xDR8NEXnGFJM0GWGibVxlnUJ8IDoyTqKFp/0"}}))},n.onShareTimeline=function(e){this._sdk&&this._sdk.onShareTimeline((function(){return{title:e,imageUrlId:"HTdhcC29Q26QOIoI1hsp4g==",imageUrl:"https://mmocgame.qpic.cn/wechatgame/IAsj7KFGI0iatWz2ZOBzdqkqKoVzgts9xDR8NEXnGFJM0GWGibVxlnUJ8IDoyTqKFp/0"}}))},n.createBlubBtn=function(e,t,n){if(void 0===t&&(t=60),void 0===n&&(n=60),!this._sdk)return null;var i=this.toWxPosition(e);return this._sdk.createGameClubButton({type:"text",text:"",icon:"green",style:{backgroundColor:"",left:i.x-t/2,top:i.y-n/2,width:t,height:n},hasRedDot:!1})},n.createFeedbackBtn=function(e){if(!this._sdk)return null;var t=this.toWxPosition(e);return this._sdk.createFeedbackButton({type:"text",text:"",style:{backgroundColor:"#ffffff",left:t.x-17.5,top:t.y-17.5,width:35,height:35}})},n.GetUserInfoWithButton=function(e,t){if(this._sdk){var n=this;wx.getSetting({success:function(i){if(i.authSetting["scope.userInfo"])wx.getUserInfo({success:function(t){f.log(t.userInfo),n._selfInfo=t.userInfo,e&&e(t.userInfo)}});else{var o=n.toWxPosition(t),s=wx.createUserInfoButton({type:"text",text:"获取用户信息",style:{left:o.x-100,top:o.y-20,width:200,height:40,lineHeight:40,backgroundColor:"#000000",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}});s.onTap((function(t){f.log(t),e&&e(t.userInfo),n._selfInfo=t.userInfo,s.destroy()}))}}})}else e&&e()},n.AddGetUserInfoButton=function(e,t,n){if(this._sdk){var i=this.toWxPosition(e),o=this.toWxSize(t),s=this._sdk.createUserInfoButton({type:"text",text:"授权",style:{left:i.x-o.width/2,top:i.y-o.height/2,width:o.width,height:o.height,lineHeight:40,backgroundColor:"#00000000",color:"#00000000",textAlign:"center",fontSize:16,borderRadius:4}}),r=this;return s.onTap((function(e){f.log("",e.userInfo),r._selfInfo=e.userInfo,n&&n(e.userInfo),s.destroy()})),s}},n.CheckAddGetUserInfoButton=function(e,t,n){var i=this;return new Promise((function(o,s){if(i._sdk){var r=i;i._sdk.getSetting({success:function(i){if(i.authSetting["scope.userInfo"])wx.getUserInfo({success:function(e){f.log(e.userInfo),r._selfInfo=e.userInfo,s()},fail:function(e){s()}});else{var a=r.toWxPosition(e),u=wx.createUserInfoButton({type:"text",text:"获取用户信息",style:{left:a.x-t.width/2,top:a.y-t.height/2,width:t.width,height:t.height,lineHeight:40,backgroundColor:"#000000",color:"#00000000",textAlign:"center",fontSize:16,borderRadius:4}});u.onTap((function(e){f.log(e),n&&n(e.userInfo),r._selfInfo=e.userInfo,u.destroy()})),o(u)}},fail:function(){s()}})}else s()}))},n.openSetting=function(e,t){return new Promise((function(n){wx.showModal({content:e,confirmText:t,success:function(e){f.log("TestV 1",e),e.confirm?wx.openSetting({success:function(e){f.log("TestV 2",e),n(!0)},fail:function(e){f.log("TestV 3",e),n(!1)}}):n(!1)},fail:function(e){f.log("TestV 4",e),n(!1)}})}))},n.forceRequirePrivacyAuthorize=function(){if(!this._sdk)return Promise.resolve(!0);var e=this;return new Promise((function(t){e.needAuthorization().then((function(n){if(n){if(!wx.requirePrivacyAuthorize)return f.log("wx 版本太低"),void t(!0);wx.requirePrivacyAuthorize({success:function(){f.log("wx requirePrivacyAuthorize success"),e._privacyAuthorized=!0,u.Player.setPrivacyAuthed(1),t(!0)},fail:function(n){f.log("wx requirePrivacyAuthorize fail:",n),e._privacyAuthorized=!1,u.Player.setPrivacyAuthed(0),t(!1)}})}else t(!0)}))}))},n.requirePrivacyAuthorize=function(){var e=this,t=this;return new Promise((function(n){return e._sdk?1==t._privacyAuthorized?(f.log("wx 本次登录已经同意"),void n(!0)):0==t._privacyAuthorized?(f.log("wx 本次登录已经拒绝过"),void n(!1)):wx.requirePrivacyAuthorize?void wx.requirePrivacyAuthorize({success:function(){f.log("wx requirePrivacyAuthorize success"),t._privacyAuthorized=!0,u.Player.setPrivacyAuthed(1),n(!0)},fail:function(e){f.log("wx requirePrivacyAuthorize fail:",e),t._privacyAuthorized=!1,u.Player.setPrivacyAuthed(0),n(!1)}}):(f.log("wx 版本太低"),void n(!1)):(f.log("wx 非微信平台"),void n(!0))}))},n.CheckNeedAuthUserInfo=function(){var e=this,t=this;return new Promise((function(n){e._sdk?null!=t._selfInfo?n(!1):null!=t._needAuthUserInfo?n(t._needAuthUserInfo):(setTimeout((function(){f.warn("getUserInfo callback timeout after 5000ms"),n(!1)}),3e3),e._sdk.getSetting({success:function(e){n(null==e.authSetting["scope.userInfo"])},fail:function(){n(!1)}})):n(!1)}))},n.CheckIsAuthedUserInfo=function(){if(!this._sdk)return Promise.resolve(void 0);var e=this;return new Promise((function(t){e._sdk?null!=e._selfInfo?t(!0):(setTimeout((function(){f.warn("getUserInfo callback timeout after 5000ms"),t(!0)}),3e3),e._sdk.getSetting({success:function(e){t(e.authSetting["scope.userInfo"])},fail:function(){t(!0)}})):t(void 0)}))},n.SetPrivacyAuthed=function(e){this._privacyAuthorized=e},n.SetNeedAuthUserInfo=function(e){this._needAuthUserInfo=e},n.IsNeedAuthUserInfo=function(){return null==this._needAuthUserInfo},n.CheckIsAuthedFriendInfo=function(){var e=this;return new Promise((function(t){e._sdk?e._sdk.getSetting({success:function(e){t(1==e.authSetting["scope.WxFriendInteraction"])},fail:function(){t(!1)}}):t(!0)}))},n.needAuthorization=function(){return new Promise((function(e){wx.getPrivacySetting||e(!1),wx.getPrivacySetting({success:function(t){f.log("wx getPrivacySetting success:",t),t.needAuthorization?e(!0):e(!1)},fail:function(t){f.log("wx getPrivacySetting fail:",t),e(!1)}})}))},n.loadAllAd=function(){this._sdk&&this.loadRewardedVideoAd(k)},n.loadRewardedVideoAd=function(e){if(this._sdk){var t=this._sdk.createRewardedVideoAd({adUnitId:e});null!=t&&(t.offLoad(),t.onLoad((function(){f.log("wx rewardedVideoAd onLoad")})),t.load())}},n.loadInterstitialAd=function(e){var t,n=this;this._sdk&&(null!=(t=this.interAdInstance?this.interAdInstance:this.interAdInstance=this._sdk.createInterstitialAd({adUnitId:e}))&&(t.offLoad(),t.onLoad((function(){f.log("wx interstitialAd onLoad"),n._isInterstitialAdLoaded=!0})),t.load()))},n.createRewardedVideoAd=function(e,t,n){if(void 0===n&&(n=!1),!this._sdk)return f.warn("wx 不是微信环境，不加载广告"),e&&e(),t&&t(o.isBrowser),null;if(!this._willShowAd){this._willShowAd=!0,e&&e(),this._sdk.getNetworkType().then((function(e){f.log("wx getNetworkType:",e)}));var i=this._sdk.createRewardedVideoAd({adUnitId:k,multiton:n}),s=this;if(null!=i)return i.offError(),i.onError((function(e){f.log("wx rewardVideoAd onError:",e.errCode,e.errMsg),s._willShowAd=!1,t&&t(!1)})),i.offClose(),i.onClose((function(e){f.log("wx rewardVideoAd onClose:",e),s._willShowAd=!1,t&&t(e.isEnded),a.resumeMusic()})),i.show().then((function(){f.log("wx rewardVideoAd show")})).catch((function(e){f.log("wx rewardVideoAd show error:",e),s._willShowAd=!1,t&&t(!1),i.load()})),i}},n.createInterstitialAd=function(e,t){var n,i=this;if(!this._sdk)return f.warn("wx 不是微信环境，不加载广告"),e&&e(),t&&t(!1),null;if(!this._isInterstitialAdLoaded)return f.warn("wx 插屏广告未加载"),null;if(e&&e(),this._sdk.getNetworkType().then((function(e){f.log("wx getNetworkType:",e)})),null!=(n=this.interAdInstance?this.interAdInstance:this.interAdInstance=this._sdk.createInterstitialAd({adUnitId:x}))){n.offError(),n.onError((function(e){f.log("wx interstitialAd onError:",e),t&&t(!1)})),n.offClose(),n.onClose((function(e){f.log("wx interstitialAd onClose:",e),t&&t(null!=e&&null!=e.errMsg),a.resumeMusic()}));var o=n.show();return f.log("wx interstitialAd show"),o.then((function(){i._isInterstitialAdLoaded=!1,f.log("wx interstitialAd showCallback")})).catch((function(e){f.log("wx interstitialAd show error:",e),t&&t(!1),n.load()})).finally((function(){f.log("wx interstitialAd show finally")})),n}},n.downloadFile=function(e,t){if(this._sdk){var n=e.split("/").pop().split(".")[0],i=wx.env.USER_DATA_PATH+"/gamecaches";this._sdk.downloadFile({url:e,success:function(e){f.log("wx downloadFile success:",e.tempFilePath),wx.getFileSystemManager().unzip({zipFilePath:e.tempFilePath,targetPath:i,success:function(e){f.log("wx unzip success:",e),t&&t(i+"/"+n),wx.getFileSystemManager().stat({path:i+"/"+n+"/index.js",complete:function(e){f.log(e)}})},fail:function(e){f.log("wx unzip fail:",e),t&&t(void 0)}})},fail:function(e){f.log("wx downloadFile fail:",e),t&&t(void 0)}})}},n.saveError=function(e){if(this._sdk){var t=this._sdk.getFileSystemManager(),n=wx.env.USER_DATA_PATH+"/error_log_"+Date.now()+".txt";t.writeFile({filePath:n,data:JSON.stringify(e),complete:function(e){f.log("wx writeFile complete",n,e)}})}},n.GetWxEnvVersion=function(){return this._sdk?this._sdk.getAccountInfoSync().miniProgram.envVersion:""},n.GetABTestString=function(e){return this._sdk?this._sdk.getExptInfoSync([e])[e]:""},n.CheckIsEnterFromCollection=function(){if(!this._sdk)return!0;var e=this._sdk.getEnterOptionsSync().scene;return f.log("wx enterScene:",e),1103==e||1104==e},n.GetUserEnterScene=function(){return this._sdk?this._sdk.getLaunchOptionsSync().scene:-1},n.getSDKVersion=function(){return this._sdk?this._sdk.getAppBaseInfo().SDKVersion:"0"},n.openWeChatURL=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=0),this._sdk&&wx.navigateToMiniProgram({appId:t,path:"",extraData:{},envVersion:"release",success:function(e){f.log("跳转成功"),d.Mgr.sendEventMoreClick(n)},fail:function(e){f.error("跳转失败",e)}})},t(e,[{key:"MenuHeight",get:function(){return this._menuHeight}},{key:"MenuTop",get:function(){return this._menuTop}},{key:"MenuBottom",get:function(){return this._menuBottom}}]),e}()).instance=void 0,l=g))||l),I=e("default",p.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/WorkerHelper.js",["./cjs-loader.mjs"],(function(e,t){var r;return{setters:[function(e){r=e.default}],execute:function(){e("default",void 0);var u=e("__cjsMetaURL",t.meta.url);r.define(u,(function(t,r,u,n,s){e("default",u.exports)}),{})}}}));

System.register("chunks:///_virtual/WorkerHelper.mjs_cjs=&original=.js",["./WorkerHelper.js","./cjs-loader.mjs"],(function(e,r){var t,s;return{setters:[function(r){t=r.__cjsMetaURL;var s={};s.__cjsMetaURL=r.__cjsMetaURL,s.default=r.default,e(s)},function(e){s=e.default}],execute:function(){t||s.throwInvalidWrapper("./WorkerHelper.js",r.meta.url),s.require(t)}}}));

System.register("chunks:///_virtual/WorkerHelper.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"91810PWOPxDK7SrziWgttuL","WorkerHelper",void 0);var r=function(){}.toString(),n=r.substring(r.indexOf("{")+1,r.lastIndexOf("}"));n=n;var c=new Blob([n],{type:"application/javascript"});e("default",URL.createObjectURL(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/yx-collection-view.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,l,s,a,u,h,c,p,d,f,y,m,b,g,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,a=t.math,u=t.Enum,h=t.Prefab,c=t.NodeEventType,p=t.Node,d=t.UITransform,f=t.UIOpacity,y=t.ScrollView,m=t.Mask,b=t.Component,g=t.NodePool,v=t.instantiate}],execute:function(){var _,C,S,E,x,I,A,w,N,V,M,O,P,T,D,R,L,F,z,k,K,U,Y,B,q,H,X,G,Z,W,j,J,Q,$,tt,et,it,nt;l._RF.push({},"f94cbxum3xAsomhVNW1piY0","yx-collection-view",void 0);var ot=s.ccclass,rt=s.property,lt=s.executionOrder,st=s.disallowMultiple,at=s.help,ut=new a.Vec3,ht=new a.Rect,ct=new a.Rect,pt=function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t}(pt||{});u(pt);var dt=function(t){return t[t.RECYCLE=0]="RECYCLE",t[t.PRELOAD=1]="PRELOAD",t}(dt||{});u(dt);var ft=(_=ot("_yx_editor_register_element_info"),C=rt({type:h,tooltip:"cell 节点预制体，必须配置"}),S=rt({tooltip:"节点重用标识符，必须配置"}),E=rt({tooltip:"节点挂载的自定义组件\n如果需要监听 NodePool 的重用/回收事件，确保你的自定义组件已经实现了 YXCollectionViewCell 接口并配置此属性为你的自定义组件名\n如果不需要，可以忽略此配置"}),_((A=e((I=function(){o(this,"prefab",A,this),o(this,"identifier",w,this),o(this,"comp",N,this)}).prototype,"prefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(I.prototype,"identifier",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=e(I.prototype,"comp",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=I))||x),yt=t("YXIndexPath",function(){function t(t,e){this._item=0,this._section=0,this._section=t,this._item=e}var e=t.prototype;return e.clone=function(){return new t(this.section,this.item)},e.equals=function(t){return this.section==t.section&&this.item==t.item},e.toString=function(){return this.section+" - "+this.item},i(t,[{key:"section",get:function(){return this._section}},{key:"item",get:function(){return this._item}},{key:"row",get:function(){return this.item}}]),t}());V=yt,yt.ZERO=new V(0,0);var mt=t("YXEdgeInsets",function(){function t(t,e,i,n){this.top=void 0,this.left=void 0,this.bottom=void 0,this.right=void 0,this.top=t,this.left=e,this.bottom=i,this.right=n}var e=t.prototype;return e.clone=function(){return new t(this.top,this.left,this.bottom,this.right)},e.equals=function(t){return this.top==t.top&&this.left==t.left&&this.bottom==t.bottom&&this.right==t.right},e.set=function(t){this.top=t.top,this.left=t.left,this.bottom=t.bottom,this.right=t.right},e.toString=function(){return"[ "+this.top+", "+this.left+", "+this.bottom+", "+this.right+" ]"},t}());M=mt,mt.ZERO=new M(0,0,0,0);var bt=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).identifier=void 0,e.attributes=void 0,e}return n(e,t),e}(b),gt=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._yx_scroll_offset_on_touch_start=null,e._yx_startAttenuatingAutoScrollTargetOffset=null,e}n(e,t);var i=e.prototype;return i._onMouseWheel=function(e,i){var n=this.node.getComponent(Ct);null!=n&&0!=n.scrollEnabled&&0!=n.wheelScrollEnabled&&t.prototype._onMouseWheel.call(this,e,i)},i._startAttenuatingAutoScroll=function(t,e){var i=t.clone();if(i.normalize(),this._content&&this.view){var n=this._content._uiProps.uiTransformComp.contentSize,o=this.view.contentSize,r=n.width-o.width,l=n.height-o.height,s=this._calculateAttenuatedFactor(r),a=this._calculateAttenuatedFactor(l);i.x=i.x*r*(1-this.brake)*s,i.y=i.y*l*a*(1-this.brake),i.z=0}var u=t.length(),h=i.length()/u;if(i.add(t),this.brake>0&&h>7){h=Math.sqrt(h);var c=t.clone();c.multiplyScalar(h),i.set(c),i.add(t)}var p=this._calculateAutoScrollTimeByInitialSpeed(e.length());if(this.brake>0&&h>3&&(p*=h=3),0===this.brake&&h>1&&(p*=h),this._yx_startAttenuatingAutoScrollTargetOffset){var d=this.getScrollOffset();d.x+=i.x,d.y+=i.y;var f=this._yx_startAttenuatingAutoScrollTargetOffset(e,this._yx_scroll_offset_on_touch_start,d,p);if(f){var y=f.offset,m=f.time||p,b=f.attenuated||!0;if(y)return void this.scrollToOffset(y,m,b)}}this._startAutoScroll(i,p,!0)},i._onTouchBegan=function(e,i){if(0!=this.node.getComponent(Ct).scrollEnabled){var n=this.getScrollOffset();n.x=-n.x,this._yx_scroll_offset_on_touch_start=n;var o=[e.target];i&&(o=o.concat(i));for(var r=0;r<o.length;r++){o[r]._yx_scroll_target=null}t.prototype._onTouchBegan.call(this,e,i)}},i._onTouchMoved=function(e,i){if(0!=this.node.getComponent(Ct).scrollEnabled){var n=this._yxGetScrollTarget(e,i);this.node===n&&t.prototype._onTouchMoved.call(this,e,i)}},i._hasNestedViewGroup=function(t,e){return!1},i._stopPropagationIfTargetIsMe=function(e){this._touchMoved?e.propagationStopped=!0:t.prototype._stopPropagationIfTargetIsMe.call(this,e)},i._yxGetScrollTarget=function(t,i){var n=t.target._yx_scroll_target;if(n)return n;var o=[t.target];if(i&&(o=o.concat(i)),1==o.length)return o[0];var r=t.touch,l=r.getLocation().subtract(r.getStartLocation()),s=Math.abs(l.x),a=Math.abs(l.y);if(Math.abs(s-a)<5)return null;for(var u=null,h=0;h<o.length;h++){var c=o[h],p=c.getComponent(e);if(p){var d=c.getComponent(Ct);if(d&&0==d.scrollEnabled)continue;if(null==u&&(u=c),p.horizontal&&p.vertical)continue;if(!p.horizontal&&!p.vertical)continue;if(p.horizontal&&s>a){u=c;break}if(p.vertical&&a>s){u=c;break}}}if(u)for(var f=0;f<o.length;f++){o[f]._yx_scroll_target=u}return u},e}(y),vt=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.getAtIdx=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];for(var o=this._pool,r=0;r<o.length;r++){var l=o[r],s=l.getComponent(bt);if(s&&s.attributes.indexPath.equals(t)){o.splice(r,1);var a=this.poolHandlerComp?l.getComponent(this.poolHandlerComp):null;return a&&a.reuse&&a.reuse(arguments),l}}return null},e}(g),_t=(t("YXLayoutAttributes",function(){function t(){this._indexPath=null,this._elementCategory="Cell",this._supplementaryKinds="",this._frame=new a.Rect,this.zIndex=0,this.opacity=null,this.scale=null,this.offset=null,this.eulerAngles=null}return t.layoutAttributesForCell=function(e){var i=new t;return i._indexPath=e,i._elementCategory="Cell",i},t.layoutAttributesForSupplementary=function(e,i){var n=new t;return n._indexPath=e,n._elementCategory="Supplementary",n._supplementaryKinds=i,n},i(t,[{key:"indexPath",get:function(){return this._indexPath}},{key:"elementCategory",get:function(){return this._elementCategory}},{key:"supplementaryKinds",get:function(){return this._supplementaryKinds}},{key:"frame",get:function(){return this._frame}}]),t}()),t("YXLayout",function(){function t(){this.contentSize=a.Size.ZERO,this.attributes=[]}var e=t.prototype;return e.initOffset=function(t){},e.targetOffset=function(t,e,i,n,o){return null},e.onScrollEnded=function(t){},e.layoutAttributesForElementsInRect=function(t,e){return this.attributes},e.layoutAttributesForItemAtIndexPath=function(t,e){return this.attributes.find((function(e){return e.indexPath.equals(t)&&"Cell"===e.elementCategory}))},e.layoutAttributesForSupplementaryAtIndexPath=function(t,e,i){return this.attributes.find((function(e){return e.indexPath.equals(t)&&"Supplementary"===e.elementCategory&&e.supplementaryKinds===i}))},e.scrollTo=function(t,e){return null},e.shouldUpdateAttributesZIndex=function(){return!1},e.shouldUpdateAttributesOpacity=function(){return!1},e.shouldUpdateAttributesForBoundsChange=function(){return!1},e.onDestroy=function(){},t}())),Ct=t("YXCollectionView",(O=ot("YXCollectionView"),P=st(!0),T=lt(-1),D=at("https://github.com/568071718/creator-collection-view"),R=rt({tooltip:"自动给挂载节点添加 mask 组件",visible:!0}),L=rt({tooltip:"允许手势滚动"}),F=rt({tooltip:"允许鼠标滑轮滚动"}),z=rt({type:pt,tooltip:"列表滚动方向"}),k=rt({type:dt,tooltip:"列表单元节点加载模式 (详细区别查看枚举注释)\nRECYCLE: 根据列表显示范围加载需要的节点，同类型的节点会进行复用\nPRELOAD: 会实例化所有节点，并非真正的虚拟列表，仅仅是把显示范围外的节点透明了，如果列表数据量很大仍然会卡"}),K=rt({tooltip:"预加载模式下每帧加载多少个节点",visible:function(){return this.mode==dt.PRELOAD}}),U=rt({tooltip:"每多少帧刷新一次可见节点，1 表示每帧都刷"}),Y=rt({tooltip:"滚动过程中，每多少帧回收一次不可见节点，1表示每帧都回收，0表示不在滚动过程中回收不可见节点"}),B=rt({type:[ft],visible:!0,displayName:"Register Cells",tooltip:"配置此列表内需要用到的 cell 节点类型"}),q=rt({type:[ft],visible:!0,displayName:"Register Supplementarys",tooltip:"配置此列表内需要用到的 Supplementary 节点类型"}),O(H=P(H=T(H=D(((nt=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,o(e,"mask",G,r(e)),o(e,"scrollEnabled",Z,r(e)),o(e,"wheelScrollEnabled",W,r(e)),o(e,"scrollDirection",j,r(e)),o(e,"mode",J,r(e)),o(e,"preloadNodesLimitPerFrame",Q,r(e)),e.preloadProgress=null,o(e,"frameInterval",$,r(e)),o(e,"recycleInterval",tt,r(e)),o(e,"registerCellForEditor",et,r(e)),o(e,"registerSupplementaryForEditor",it,r(e)),e.pools=new Map,e.makers=new Map,e.numberOfSections=1,e.numberOfItems=0,e.cellForItemAt=null,e.supplementaryForItemAt=null,e.onCellDisplay=null,e.onCellEndDisplay=null,e.onSupplementaryDisplay=null,e.onSupplementaryEndDisplay=null,e.onTouchCellAt=null,e.onTouchSupplementaryAt=null,e.layout=null,e.visibleNodesMap=new Map,e.preloadNodesMap=new Map,e.reloadDataCounter=0,e._frameIdx=0,e._late_update_visible_data=!1,e._late_recycle_invisible_node=!1,e._late_reload_data=!1,e.preloadIdx=null,e}n(e,t);var l=e.prototype;return l.registerCell=function(t,e,i){void 0===i&&(i=null);t="Cell"+t;var n=new vt(i);this.pools.set(t,n),this.makers.set(t,e)},l.registerSupplementary=function(t,e,i){void 0===i&&(i=null);t="Supplementary"+t;var n=new vt(i);this.pools.set(t,n),this.makers.set(t,e)},l.dequeueReusableCell=function(t,e){return void 0===e&&(e=null),this._dequeueReusableElement(t,"Cell",e)},l.dequeueReusableSupplementary=function(t,e){return void 0===e&&(e=null),this._dequeueReusableElement(t,"Supplementary",e)},l._dequeueReusableElement=function(t,e,i){void 0===i&&(i=null),t=e+t;var n=this.pools.get(t);if(null==n)throw new Error("YXCollectionView: dequeueReusable"+e+" 错误，未注册的 identifier");var o=null;(null==o&&i&&n instanceof vt&&(o=n.getAtIdx(i)),null==o&&(o=n.get()),null==o)&&(((o=this.makers.get(t)()).getComponent(bt)||o.addComponent(bt)).identifier=t,o.on(c.TOUCH_END,this.onTouchElement,this));return o},l.getNumberOfSections=function(){return this.numberOfSections instanceof Function?this.numberOfSections(this):this.numberOfSections},l.getNumberOfItems=function(t){return this.numberOfItems instanceof Function?this.numberOfItems(t,this):this.numberOfItems},l.onTouchElement=function(t){var e=t.target;if(e instanceof p!=0){var i=e.getComponent(bt);if(null!=i){var n=i.attributes;if(null!=n)return"Cell"===n.elementCategory?this.onTouchCellAt?void this.onTouchCellAt(n.indexPath,this):void 0:void("Supplementary"!==n.elementCategory||this.onTouchSupplementaryAt&&this.onTouchSupplementaryAt(n.indexPath,this,n.supplementaryKinds))}}},l._getLayoutAttributesCacheKey=function(t){return this._getVisibleCacheKey(t.indexPath,t.elementCategory,t.supplementaryKinds)},l._getVisibleCacheKey=function(t,e,i){return void 0===i&&(i=""),""+t+e+i},l.getVisibleRect=function(){var t=ht;return t.origin=this.scrollView.getScrollOffset(),t.x=-t.x,t.size=this.scrollView.view.contentSize,t},l.getVisibleCellNode=function(t){var e=this._getVisibleCacheKey(t,"Cell");return this.visibleNodesMap.get(e)},l.getVisibleSupplementaryNode=function(t,e){var i=this._getVisibleCacheKey(t,"Supplementary",e);return this.visibleNodesMap.get(i)},l.getVisibleCellNodes=function(){var t=[];return this.visibleNodesMap.forEach((function(e){"Cell"===e.getComponent(bt).attributes.elementCategory&&t.push(e)})),t},l.getVisibleSupplementaryNodes=function(t){void 0===t&&(t=null);var e=[];return this.visibleNodesMap.forEach((function(i){var n=i.getComponent(bt);"Supplementary"===n.attributes.elementCategory&&(null!==t&&n.attributes.supplementaryKinds!==t||e.push(i))})),e},l.getElementAttributes=function(t){var e=t.getComponent(bt);return e?e.attributes:null},l.reloadData=function(){this.node.activeInHierarchy&&this.node.parent?this._reloadData():this._late_reload_data=!0},l.update_reloadDataIfNeeds=function(t){0!=this._late_reload_data&&this._reloadData()},l._reloadData=function(){var t=this;if(this._late_reload_data=!1,null==this.layout)throw new Error("YXCollectionView: 参数错误，请正确配置 layout 以确定布局方案");this.scrollView.stopAutoScroll(),this.pools.forEach((function(t){t.clear()})),this.mode==dt.RECYCLE&&(this.visibleNodesMap.forEach((function(e,i){var n=e.getComponent(bt);t.pools.get(n.identifier).put(e),t.visibleNodesMap.delete(i),"Cell"===n.attributes.elementCategory&&t.onCellEndDisplay&&t.onCellEndDisplay(n.node,n.attributes.indexPath,t),"Supplementary"===n.attributes.elementCategory&&t.onSupplementaryEndDisplay&&t.onSupplementaryEndDisplay(n.node,n.attributes.indexPath,t,n.attributes.supplementaryKinds)})),this.visibleNodesMap.clear()),this.mode==dt.PRELOAD&&(this.visibleNodesMap.forEach((function(t,e){t&&(t.removeFromParent(),t.destroy())})),this.visibleNodesMap.clear(),this.preloadNodesMap.forEach((function(t,e){t&&(t.removeFromParent(),t.destroy())})),this.preloadNodesMap.clear(),this.preloadIdx=0);var e=this.scrollView.getScrollOffset();if(e.x=-e.x,this.layout.prepare(this),(this.scrollView.content.getComponent(d)||this.scrollView.content.addComponent(d)).contentSize=this.layout.contentSize,this.reloadDataCounter<=0)this.layout.initOffset(this);else{var i=this.scrollView.getMaxScrollOffset();a.Vec2.min(e,e,i),this.scrollView.scrollToOffset(e)}this.markForUpdateVisibleData(!0),this.reloadDataCounter++},l.reloadVisibleElements=function(t){void 0===t&&(t=null),this._late_update_visible_data=!1,null==t&&(t=this.getVisibleRect());var e=this.layout.layoutAttributesForElementsInRect(t,this),i=this.layout.shouldUpdateAttributesZIndex();i&&(null!=e&&e!=this.layout.attributes||(e=this.layout.attributes.slice()),e.sort((function(t,e){return t.zIndex-e.zIndex})));for(var n=this.layout.shouldUpdateAttributesForBoundsChange(),o=0;o<e.length;o++){var r=e[o];if(0!=t.intersects(r.frame)){var l=this._getLayoutAttributesCacheKey(r),s=null;if(null==s&&(s=this.preloadNodesMap.get(l)),null==s&&(s=this.visibleNodesMap.get(l)),null==s&&("Cell"===r.elementCategory&&(s=this.cellForItemAt(r.indexPath,this)),"Supplementary"===r.elementCategory&&(s=this.supplementaryForItemAt(r.indexPath,this,r.supplementaryKinds))),null==s){if("Cell"===r.elementCategory)throw new Error("需要实现 cellForItemAt 方法并确保正确的返回了节点");if("Supplementary"===r.elementCategory)throw new Error("需要实现 supplementaryForItemAt 方法并确保正确的返回了节点")}var a=this.restoreNodeIfNeeds(s);(1==a||n)&&this.applyLayoutAttributes(s,r),i&&s.setSiblingIndex(-1),this.visibleNodesMap.set(l,s),1==a&&("Cell"===r.elementCategory&&this.onCellDisplay&&this.onCellDisplay(s,r.indexPath,this),"Supplementary"===r.elementCategory&&this.onSupplementaryDisplay&&this.onSupplementaryDisplay(s,r.indexPath,this,r.supplementaryKinds))}}e=[]},l.restoreNodeIfNeeds=function(t){var e=0;t.parent!=this.scrollView.content&&(t.parent=this.scrollView.content,e=1);var i=t.getComponent(f);return this.mode==dt.PRELOAD&&null==i&&(i=t.addComponent(f)),i&&255!==i.opacity&&(i.opacity=255,e=1),e},l.recycleInvisibleNodes=function(t){var e=this;void 0===t&&(t=null),this._late_recycle_invisible_node=!1,null==t&&(t=this.getVisibleRect());var i=ct,n=this.scrollView.content.getComponent(d).contentSize;this.visibleNodesMap.forEach((function(o,r){var l=o.getComponent(bt),s=o.getComponent(d).getBoundingBox();i.size=s.size,i.x=.5*(n.width-i.width)+o.position.x,i.y=.5*(n.height-i.height)-o.position.y,0==t.intersects(i)&&(e.mode==dt.PRELOAD?(o.getComponent(f).opacity=0,e.preloadNodesMap.set(r,o)):e.pools.get(l.identifier).put(o),e.visibleNodesMap.delete(r),"Cell"===l.attributes.elementCategory&&e.onCellEndDisplay&&e.onCellEndDisplay(l.node,l.attributes.indexPath,e),"Supplementary"===l.attributes.elementCategory&&e.onSupplementaryEndDisplay&&e.onSupplementaryEndDisplay(l.node,l.attributes.indexPath,e,l.attributes.supplementaryKinds))}))},l.applyLayoutAttributes=function(t,e){(t.getComponent(bt).attributes=e,(t.getComponent(d)||t.addComponent(d)).setContentSize(e.frame.size),ut.x=.5*-(this.layout.contentSize.width-e.frame.width)+e.frame.x,ut.y=.5*+(this.layout.contentSize.height-e.frame.height)-e.frame.y,ut.z=t.position.z,e.offset&&a.Vec3.add(ut,ut,e.offset),t.position=ut,e.scale&&(t.scale=e.scale),e.eulerAngles&&(t.eulerAngles=e.eulerAngles),this.layout.shouldUpdateAttributesOpacity()&&e.opacity)&&((t.getComponent(f)||t.addComponent(f)).opacity=e.opacity)},l.markForUpdateVisibleData=function(t){if(void 0===t&&(t=!1),t){var e=this.getVisibleRect();return this.reloadVisibleElements(e),void this.recycleInvisibleNodes(e)}this._late_update_visible_data=!0,this._late_recycle_invisible_node=!0},l.scrollTo=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0);var n,o=this.layout.scrollTo(t,this);null==o&&(o=null==(n=this.layout.layoutAttributesForItemAtIndexPath(t,this))?void 0:n.frame.origin);o&&(this.scrollView.stopAutoScroll(),this.scrollView.scrollToOffset(o,e,i),this.markForUpdateVisibleData())},l.onLoad=function(){for(var t=this,e=function(){var e=t.registerCellForEditor[i];t.registerCell(e.identifier,(function(){return v(e.prefab)}),e.comp)},i=0;i<this.registerCellForEditor.length;i++)e();for(var n=function(){var e=t.registerSupplementaryForEditor[o];t.registerSupplementary(e.identifier,(function(){return v(e.prefab)}),e.comp)},o=0;o<this.registerSupplementaryForEditor.length;o++)n();this.node.on(y.EventType.SCROLL_BEGAN,this.onScrollBegan,this),this.node.on(y.EventType.SCROLLING,this.onScrolling,this),this.node.on(y.EventType.TOUCH_UP,this.onScrollTouchUp,this),this.node.on(y.EventType.SCROLL_ENDED,this.onScrollEnded,this),this._scrollView._yx_startAttenuatingAutoScrollTargetOffset=function(e,i,n,o){return t.layout.targetOffset(t,e,i,n,o)}},l.onDestroy=function(){this.node.off(y.EventType.SCROLL_BEGAN,this.onScrollBegan,this),this.node.off(y.EventType.SCROLLING,this.onScrolling,this),this.node.off(y.EventType.TOUCH_UP,this.onScrollTouchUp,this),this.node.off(y.EventType.SCROLL_ENDED,this.onScrollEnded,this),this._scrollView._yx_startAttenuatingAutoScrollTargetOffset=null,this.visibleNodesMap.forEach((function(t,e){t&&(t.removeFromParent(),t.destroy())})),this.visibleNodesMap.clear(),this.visibleNodesMap=null,this.preloadNodesMap.forEach((function(t,e){t&&(t.removeFromParent(),t.destroy())})),this.preloadNodesMap.clear(),this.preloadNodesMap=null,this.pools.forEach((function(t){t.clear()})),this.pools.clear(),this.pools=null,this.makers.clear(),this.makers=null,this.layout&&this.layout.onDestroy()},l.update=function(t){this._frameIdx++,this.update_reloadVisibleNodesIfNeeds(t),this.update_recycleInvisibleNodesIfNeeds(t),this.update_reloadDataIfNeeds(t),this.update_preloadNodeIfNeeds(t)},l.update_reloadVisibleNodesIfNeeds=function(t){0!=this._late_update_visible_data&&(this.frameInterval<=1||this._frameIdx%this.frameInterval==0)&&this.reloadVisibleElements()},l.update_recycleInvisibleNodesIfNeeds=function(t){0!=this._late_recycle_invisible_node&&this.recycleInterval>=1&&this._frameIdx%this.recycleInterval==0&&this.recycleInvisibleNodes()},l.update_preloadNodeIfNeeds=function(t){if(this.mode===dt.PRELOAD&&null!=this.preloadIdx&&!(this.preloadIdx>=this.layout.attributes.length||this.preloadNodesLimitPerFrame<=0))for(var e=0,i=!1;!i&&e<this.preloadNodesLimitPerFrame;){var n=this.layout.attributes[this.preloadIdx],o=this._getLayoutAttributesCacheKey(n),r=null;null==r&&(r=this.visibleNodesMap.get(o)),null==r&&(r=this.preloadNodesMap.get(o)),null==r&&("Cell"===n.elementCategory&&(r=this.cellForItemAt(n.indexPath,this)),"Supplementary"===n.elementCategory&&(r=this.supplementaryForItemAt(n.indexPath,this,n.supplementaryKinds)),this.restoreNodeIfNeeds(r),this.applyLayoutAttributes(r,n),this.visibleNodesMap.set(o,r),this._late_recycle_invisible_node=!0),this.preloadNodesMap.set(o,r),this.preloadIdx++,e++,this.preloadProgress&&this.preloadProgress(this.preloadIdx,this.layout.attributes.length),i=this.preloadIdx>=this.layout.attributes.length}},l.onScrollBegan=function(){},l.onScrolling=function(){this.layout.shouldUpdateAttributesForBoundsChange()?this.reloadVisibleElements():this._late_update_visible_data=!0,this.recycleInterval>0&&(this._late_recycle_invisible_node=!0)},l.onScrollTouchUp=function(){this.recycleInvisibleNodes()},l.onScrollEnded=function(){this.recycleInvisibleNodes(),this.layout.onScrollEnded(this)},i(e,[{key:"scrollView",get:function(){var t=this.node.getComponent(gt);if(null==t&&(t=this.node.addComponent(gt)),null==t.content){var e=new p("com.yx.scroll.content");e.parent=t.node,e.layer=e.parent.layer,(e.getComponent(d)||e.addComponent(d)).contentSize=this.node.getComponent(d).contentSize,t.content=e}if(this.mask){var i=t.node.getComponent(m);null==i&&((i=t.node.addComponent(m)).type=m.Type.GRAPHICS_RECT)}return t}},{key:"_scrollView",get:function(){return this.scrollView}}]),e}(b)).ScrollDirection=pt,nt.Mode=dt,G=e((X=nt).prototype,"mask",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Z=e(X.prototype,"scrollEnabled",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),W=e(X.prototype,"wheelScrollEnabled",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=e(X.prototype,"scrollDirection",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ct.ScrollDirection.VERTICAL}}),J=e(X.prototype,"mode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ct.Mode.RECYCLE}}),Q=e(X.prototype,"preloadNodesLimitPerFrame",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),$=e(X.prototype,"frameInterval",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),tt=e(X.prototype,"recycleInterval",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),et=e(X.prototype,"registerCellForEditor",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=e(X.prototype,"registerSupplementaryForEditor",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=X))||H)||H)||H)||H));t("YXBinaryLayout",function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).extraVisibleCount=0,e}return n(e,t),e.prototype.layoutAttributesForElementsInRect=function(e,i){if(this.attributes.length<=100)return this.attributes;if(this.extraVisibleCount<0)return this.attributes;for(var n=-1,o=0,r=this.attributes.length-1;o<=r&&r>=0;){var l=o+(r-o)/2;l=Math.floor(l);var s=this.attributes[l];if(e.intersects(s.frame)){n=l;break}e.yMax<s.frame.yMin||e.xMax<s.frame.xMin?r=l-1:o=l+1}if(n<0)return t.prototype.layoutAttributesForElementsInRect.call(this,e,i);var a=[];a.push(this.attributes[n]);for(var u=n;u>0;){var h=u-1,c=this.attributes[h];if(0==e.intersects(c.frame))break;a.push(c),u=h}for(var p=this.extraVisibleCount;p>0;){var d=u-1;if(d<0)break;var f=this.attributes[d];e.intersects(f.frame)&&a.push(f),u=d,p--}for(var y=n;y<this.attributes.length-1;){var m=y+1,b=this.attributes[m];if(0==e.intersects(b.frame))break;a.push(b),y=m}for(var g=this.extraVisibleCount;g>0;){var v=y+1;if(v>=this.attributes.length)break;var _=this.attributes[v];e.intersects(_.frame)&&a.push(_),y=v,g--}return a},e}(_t));l._RF.pop()}}}));

System.register("chunks:///_virtual/yx-table-layout.ts",["./rollupPluginModLoBabelHelpers.js","cc","./yx-collection-view.ts"],(function(e){var t,i,r,s,n,a,o,l,u;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,r=e.warn,s=e.UITransform,n=e.math},function(e){a=e.YXCollectionView,o=e.YXLayoutAttributes,l=e.YXIndexPath,u=e.YXLayout}],execute:function(){i._RF.push({},"0187dSr+7ZEqow2tXCfPb/0","yx-table-layout",void 0);var h=function(e){return e.HEADER="header",e.FOOTER="footer",e}(h||{});e("YXTableLayout",function(e){function i(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).rowHeight=100,t.top=0,t.bottom=0,t.spacing=0,t.sectionHeaderHeight=null,t.sectionFooterHeight=null,t.sectionHeadersPinToVisibleBounds=!1,t.sectionFootersPinToVisibleBounds=!1,t.originalHeaderRect=new Map,t.originalFooterRect=new Map,t.allCellAttributes=[],t.allHeaderAttributes=[],t.allFooterAttributes=[],t}t(i,e);var u=i.prototype;return u.prepare=function(e){e.scrollView.horizontal=!1,e.scrollView.vertical=!0,e.scrollDirection===a.ScrollDirection.HORIZONTAL&&r("YXTableLayout 仅支持垂直方向排列"),this.attributes=[],this.allCellAttributes=[],this.allHeaderAttributes=[],this.allFooterAttributes=[],this.originalHeaderRect.clear(),this.originalFooterRect.clear();for(var t=e.node.getComponent(s).width,u=0,h=e.getNumberOfSections(),c=0;c<h;c++){var f=new l(c,0),p=0;if(this.sectionHeaderHeight&&(p=this.sectionHeaderHeight instanceof Function?this.sectionHeaderHeight(c):this.sectionHeaderHeight),p>0){var m=o.layoutAttributesForSupplementary(f,i.SupplementaryKinds.HEADER);m.frame.x=0,m.frame.width=t,m.frame.height=p,m.frame.y=u,m.zIndex=1,this.attributes.push(m),this.originalHeaderRect.set(c,m.frame.clone()),this.allHeaderAttributes.push(m),u=m.frame.yMax}u+=this.top;for(var g=e.getNumberOfItems(c),d=0;d<g;d++){var y=new l(c,d),b=o.layoutAttributesForCell(y),F=this.rowHeight instanceof Function?this.rowHeight(y):this.rowHeight;b.frame.x=0,b.frame.width=t,b.frame.height=F,b.frame.y=u+(d>0?this.spacing:0),this.attributes.push(b),this.allCellAttributes.push(b),u=b.frame.yMax}u+=this.bottom;var H=0;if(this.sectionFooterHeight&&(H=this.sectionFooterHeight instanceof Function?this.sectionFooterHeight(c):this.sectionFooterHeight),H>0){var v=o.layoutAttributesForSupplementary(f,i.SupplementaryKinds.FOOTER);v.frame.x=0,v.frame.width=t,v.frame.height=H,v.frame.y=u,v.zIndex=1,this.attributes.push(v),this.originalFooterRect.set(c,v.frame.clone()),this.allFooterAttributes.push(v),u=v.frame.yMax}}this.contentSize=new n.Size(t,u)},u.initOffset=function(e){e.scrollView.scrollToTop()},u.layoutAttributesForElementsInRect=function(e,t){var r=this.visibleElementsInRect(e,t);if(0==this.sectionHeadersPinToVisibleBounds&&0==this.sectionFootersPinToVisibleBounds)return r;for(var s=t.getNumberOfSections(),n=t.scrollView.getScrollOffset(),a=0;a<r.length;a++){var o=r[a];if("Supplementary"===o.elementCategory){if(this.sectionHeadersPinToVisibleBounds&&o.supplementaryKinds===i.SupplementaryKinds.HEADER){var l=this.originalHeaderRect.get(o.indexPath.section);o.frame.y=l.y,n.y>l.y&&(o.frame.y=n.y);var u=this.getNextOriginalFrame(o.indexPath.section,i.SupplementaryKinds.FOOTER,s);u&&o.frame.yMax>u.y&&(o.frame.y=u.y-o.frame.height)}if(this.sectionFootersPinToVisibleBounds&&o.supplementaryKinds===i.SupplementaryKinds.FOOTER){var h=n.y+t.scrollView.view.height,c=this.originalFooterRect.get(o.indexPath.section),f=this.getPreviousOriginalFrame(o.indexPath.section,i.SupplementaryKinds.HEADER);o.frame.y=c.y,h<c.yMax&&(o.frame.y=h-o.frame.height,f&&o.frame.y<f.yMax&&(o.frame.y=f.yMax))}}}return r},u.shouldUpdateAttributesZIndex=function(){return this.sectionHeadersPinToVisibleBounds||this.sectionFootersPinToVisibleBounds},u.shouldUpdateAttributesForBoundsChange=function(){return this.sectionHeadersPinToVisibleBounds||this.sectionFootersPinToVisibleBounds},u.getNextOriginalFrame=function(e,t,r){if(e>=r)return null;if(t===i.SupplementaryKinds.HEADER){var s=this.originalHeaderRect.get(e);return s||this.getNextOriginalFrame(e,i.SupplementaryKinds.FOOTER,r)}if(t===i.SupplementaryKinds.FOOTER){var n=this.originalFooterRect.get(e);return n||this.getNextOriginalFrame(e+1,i.SupplementaryKinds.HEADER,r)}return null},u.getPreviousOriginalFrame=function(e,t){if(e<0)return null;if(t===i.SupplementaryKinds.HEADER){var r=this.originalHeaderRect.get(e);return r||this.getPreviousOriginalFrame(e-1,i.SupplementaryKinds.FOOTER)}if(t===i.SupplementaryKinds.FOOTER){var s=this.originalFooterRect.get(e);return s||this.getPreviousOriginalFrame(e,i.SupplementaryKinds.HEADER)}return null},u.visibleElementsInRect=function(e,t){if(this.attributes.length<=100)return this.attributes;var i=[];i.push.apply(i,this.allHeaderAttributes),i.push.apply(i,this.allFooterAttributes);for(var r=-1,s=0,n=this.allCellAttributes.length-1;s<=n&&n>=0;){var a=s+(n-s)/2;a=Math.floor(a);var o=this.allCellAttributes[a];if(e.intersects(o.frame)){r=a;break}e.yMax<o.frame.yMin||e.xMax<o.frame.xMin?n=a-1:s=a+1}if(r<0)return this.attributes;i.push(this.allCellAttributes[r]);for(var l=r;l>0;){var u=l-1,h=this.allCellAttributes[u];if(0==e.intersects(h.frame))break;i.push(h),l=u}for(var c=r;c<this.allCellAttributes.length-1;){var f=c+1,p=this.allCellAttributes[f];if(0==e.intersects(p.frame))break;i.push(p),c=f}return i},i}(u)).SupplementaryKinds=h,i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});